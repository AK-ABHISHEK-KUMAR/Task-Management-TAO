var D_=n=>{throw TypeError(n)};var up=(n,e,t)=>e.has(n)||D_("Cannot "+t);var J=(n,e,t)=>(up(n,e,"read from private field"),t?t.call(n):e.get(n)),je=(n,e,t)=>e.has(n)?D_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Pe=(n,e,t,r)=>(up(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Kt=(n,e,t)=>(up(n,e,"access private method"),t);var ih=(n,e,t,r)=>({set _(s){Pe(n,e,s,t)},get _(){return J(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Zw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lp={exports:{}},Ku={},cp={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function TR(){if(b_)return De;b_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,V={};function x(M,Y,ve){this.props=M,this.context=Y,this.refs=V,this.updater=ve||P}x.prototype.isReactComponent={},x.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},x.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function q(){}q.prototype=x.prototype;function G(M,Y,ve){this.props=M,this.context=Y,this.refs=V,this.updater=ve||P}var H=G.prototype=new q;H.constructor=G,N(H,x.prototype),H.isPureReactComponent=!0;var te=Array.isArray,le=Object.prototype.hasOwnProperty,ae={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(M,Y,ve){var Ce,xe={},Oe=null,Be=null;if(Y!=null)for(Ce in Y.ref!==void 0&&(Be=Y.ref),Y.key!==void 0&&(Oe=""+Y.key),Y)le.call(Y,Ce)&&!k.hasOwnProperty(Ce)&&(xe[Ce]=Y[Ce]);var ze=arguments.length-2;if(ze===1)xe.children=ve;else if(1<ze){for(var Qe=Array(ze),Ct=0;Ct<ze;Ct++)Qe[Ct]=arguments[Ct+2];xe.children=Qe}if(M&&M.defaultProps)for(Ce in ze=M.defaultProps,ze)xe[Ce]===void 0&&(xe[Ce]=ze[Ce]);return{$$typeof:n,type:M,key:Oe,ref:Be,props:xe,_owner:ae.current}}function R(M,Y){return{$$typeof:n,type:M.type,key:Y,ref:M.ref,props:M.props,_owner:M._owner}}function b(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function L(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ve){return Y[ve]})}var F=/\/+/g;function C(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):Y.toString(36)}function dt(M,Y,ve,Ce,xe){var Oe=typeof M;(Oe==="undefined"||Oe==="boolean")&&(M=null);var Be=!1;if(M===null)Be=!0;else switch(Oe){case"string":case"number":Be=!0;break;case"object":switch(M.$$typeof){case n:case e:Be=!0}}if(Be)return Be=M,xe=xe(Be),M=Ce===""?"."+C(Be,0):Ce,te(xe)?(ve="",M!=null&&(ve=M.replace(F,"$&/")+"/"),dt(xe,Y,ve,"",function(Ct){return Ct})):xe!=null&&(b(xe)&&(xe=R(xe,ve+(!xe.key||Be&&Be.key===xe.key?"":(""+xe.key).replace(F,"$&/")+"/")+M)),Y.push(xe)),1;if(Be=0,Ce=Ce===""?".":Ce+":",te(M))for(var ze=0;ze<M.length;ze++){Oe=M[ze];var Qe=Ce+C(Oe,ze);Be+=dt(Oe,Y,ve,Qe,xe)}else if(Qe=I(M),typeof Qe=="function")for(M=Qe.call(M),ze=0;!(Oe=M.next()).done;)Oe=Oe.value,Qe=Ce+C(Oe,ze++),Be+=dt(Oe,Y,ve,Qe,xe);else if(Oe==="object")throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Be}function Ut(M,Y,ve){if(M==null)return M;var Ce=[],xe=0;return dt(M,Ce,"","",function(Oe){return Y.call(ve,Oe,xe++)}),Ce}function Bt(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(ve){(M._status===0||M._status===-1)&&(M._status=1,M._result=ve)},function(ve){(M._status===0||M._status===-1)&&(M._status=2,M._result=ve)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var He={current:null},oe={transition:null},Ee={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ae};function he(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Ut,forEach:function(M,Y,ve){Ut(M,function(){Y.apply(this,arguments)},ve)},count:function(M){var Y=0;return Ut(M,function(){Y++}),Y},toArray:function(M){return Ut(M,function(Y){return Y})||[]},only:function(M){if(!b(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},De.Component=x,De.Fragment=t,De.Profiler=s,De.PureComponent=G,De.StrictMode=r,De.Suspense=f,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,De.act=he,De.cloneElement=function(M,Y,ve){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ce=N({},M.props),xe=M.key,Oe=M.ref,Be=M._owner;if(Y!=null){if(Y.ref!==void 0&&(Oe=Y.ref,Be=ae.current),Y.key!==void 0&&(xe=""+Y.key),M.type&&M.type.defaultProps)var ze=M.type.defaultProps;for(Qe in Y)le.call(Y,Qe)&&!k.hasOwnProperty(Qe)&&(Ce[Qe]=Y[Qe]===void 0&&ze!==void 0?ze[Qe]:Y[Qe])}var Qe=arguments.length-2;if(Qe===1)Ce.children=ve;else if(1<Qe){ze=Array(Qe);for(var Ct=0;Ct<Qe;Ct++)ze[Ct]=arguments[Ct+2];Ce.children=ze}return{$$typeof:n,type:M.type,key:xe,ref:Oe,props:Ce,_owner:Be}},De.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},De.createElement=S,De.createFactory=function(M){var Y=S.bind(null,M);return Y.type=M,Y},De.createRef=function(){return{current:null}},De.forwardRef=function(M){return{$$typeof:d,render:M}},De.isValidElement=b,De.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:Bt}},De.memo=function(M,Y){return{$$typeof:m,type:M,compare:Y===void 0?null:Y}},De.startTransition=function(M){var Y=oe.transition;oe.transition={};try{M()}finally{oe.transition=Y}},De.unstable_act=he,De.useCallback=function(M,Y){return He.current.useCallback(M,Y)},De.useContext=function(M){return He.current.useContext(M)},De.useDebugValue=function(){},De.useDeferredValue=function(M){return He.current.useDeferredValue(M)},De.useEffect=function(M,Y){return He.current.useEffect(M,Y)},De.useId=function(){return He.current.useId()},De.useImperativeHandle=function(M,Y,ve){return He.current.useImperativeHandle(M,Y,ve)},De.useInsertionEffect=function(M,Y){return He.current.useInsertionEffect(M,Y)},De.useLayoutEffect=function(M,Y){return He.current.useLayoutEffect(M,Y)},De.useMemo=function(M,Y){return He.current.useMemo(M,Y)},De.useReducer=function(M,Y,ve){return He.current.useReducer(M,Y,ve)},De.useRef=function(M){return He.current.useRef(M)},De.useState=function(M){return He.current.useState(M)},De.useSyncExternalStore=function(M,Y,ve){return He.current.useSyncExternalStore(M,Y,ve)},De.useTransition=function(){return He.current.useTransition()},De.version="18.3.1",De}var N_;function cm(){return N_||(N_=1,cp.exports=TR()),cp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function SR(){if(V_)return Ku;V_=1;var n=cm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,f,m){var v,E={},I=null,P=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(P=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(E[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)E[v]===void 0&&(E[v]=f[v]);return{$$typeof:e,type:d,key:I,ref:P,props:E,_owner:s.current}}return Ku.Fragment=t,Ku.jsx=l,Ku.jsxs=l,Ku}var O_;function RR(){return O_||(O_=1,lp.exports=SR()),lp.exports}var AR=RR(),Q=cm();const L_=Zw(Q);var sh={},hp={exports:{}},pn={},dp={exports:{}},fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function PR(){return M_||(M_=1,function(n){function e(oe,Ee){var he=oe.length;oe.push(Ee);e:for(;0<he;){var M=he-1>>>1,Y=oe[M];if(0<s(Y,Ee))oe[M]=Ee,oe[he]=Y,he=M;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var Ee=oe[0],he=oe.pop();if(he!==Ee){oe[0]=he;e:for(var M=0,Y=oe.length,ve=Y>>>1;M<ve;){var Ce=2*(M+1)-1,xe=oe[Ce],Oe=Ce+1,Be=oe[Oe];if(0>s(xe,he))Oe<Y&&0>s(Be,xe)?(oe[M]=Be,oe[Oe]=he,M=Oe):(oe[M]=xe,oe[Ce]=he,M=Ce);else if(Oe<Y&&0>s(Be,he))oe[M]=Be,oe[Oe]=he,M=Oe;else break e}}return Ee}function s(oe,Ee){var he=oe.sortIndex-Ee.sortIndex;return he!==0?he:oe.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var f=[],m=[],v=1,E=null,I=3,P=!1,N=!1,V=!1,x=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(oe){for(var Ee=t(m);Ee!==null;){if(Ee.callback===null)r(m);else if(Ee.startTime<=oe)r(m),Ee.sortIndex=Ee.expirationTime,e(f,Ee);else break;Ee=t(m)}}function te(oe){if(V=!1,H(oe),!N)if(t(f)!==null)N=!0,Bt(le);else{var Ee=t(m);Ee!==null&&He(te,Ee.startTime-oe)}}function le(oe,Ee){N=!1,V&&(V=!1,q(S),S=-1),P=!0;var he=I;try{for(H(Ee),E=t(f);E!==null&&(!(E.expirationTime>Ee)||oe&&!L());){var M=E.callback;if(typeof M=="function"){E.callback=null,I=E.priorityLevel;var Y=M(E.expirationTime<=Ee);Ee=n.unstable_now(),typeof Y=="function"?E.callback=Y:E===t(f)&&r(f),H(Ee)}else r(f);E=t(f)}if(E!==null)var ve=!0;else{var Ce=t(m);Ce!==null&&He(te,Ce.startTime-Ee),ve=!1}return ve}finally{E=null,I=he,P=!1}}var ae=!1,k=null,S=-1,R=5,b=-1;function L(){return!(n.unstable_now()-b<R)}function F(){if(k!==null){var oe=n.unstable_now();b=oe;var Ee=!0;try{Ee=k(!0,oe)}finally{Ee?C():(ae=!1,k=null)}}else ae=!1}var C;if(typeof G=="function")C=function(){G(F)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,Ut=dt.port2;dt.port1.onmessage=F,C=function(){Ut.postMessage(null)}}else C=function(){x(F,0)};function Bt(oe){k=oe,ae||(ae=!0,C())}function He(oe,Ee){S=x(function(){oe(n.unstable_now())},Ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){N||P||(N=!0,Bt(le))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(oe){switch(I){case 1:case 2:case 3:var Ee=3;break;default:Ee=I}var he=I;I=Ee;try{return oe()}finally{I=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,Ee){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var he=I;I=oe;try{return Ee()}finally{I=he}},n.unstable_scheduleCallback=function(oe,Ee,he){var M=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?M+he:M):he=M,oe){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=he+Y,oe={id:v++,callback:Ee,priorityLevel:oe,startTime:he,expirationTime:Y,sortIndex:-1},he>M?(oe.sortIndex=he,e(m,oe),t(f)===null&&oe===t(m)&&(V?(q(S),S=-1):V=!0,He(te,he-M))):(oe.sortIndex=Y,e(f,oe),N||P||(N=!0,Bt(le))),oe},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(oe){var Ee=I;return function(){var he=I;I=Ee;try{return oe.apply(this,arguments)}finally{I=he}}}}(fp)),fp}var F_;function CR(){return F_||(F_=1,dp.exports=PR()),dp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function kR(){if(U_)return pn;U_=1;var n=cm(),e=CR();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function I(i){return f.call(E,i)?!0:f.call(v,i)?!1:m.test(i)?E[i]=!0:(v[i]=!0,!1)}function P(i,o,u,h){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,o,u,h){if(o===null||typeof o>"u"||P(i,o,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function V(i,o,u,h,p,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new V(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];x[o]=new V(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new V(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new V(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new V(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new V(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new V(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new V(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new V(i,5,!1,i.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function G(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(q,G);x[o]=new V(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(q,G);x[o]=new V(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(q,G);x[o]=new V(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new V(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new V(i,1,!1,i.toLowerCase(),null,!0,!0)});function H(i,o,u,h){var p=x.hasOwnProperty(o)?x[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(N(o,u,p,h)&&(u=null),h||p===null?I(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):p.mustUseProperty?i[p.propertyName]=u===null?p.type===3?!1:"":u:(o=p.attributeName,h=p.attributeNamespace,u===null?i.removeAttribute(o):(p=p.type,u=p===3||p===4&&u===!0?"":""+u,h?i.setAttributeNS(h,o,u):i.setAttribute(o,u))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),ae=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),Ut=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),He=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Ee(i){return i===null||typeof i!="object"?null:(i=oe&&i[oe]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,M;function Y(i){if(M===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);M=o&&o[1]||""}return`
`+M+i}var ve=!1;function Ce(i,o){if(!i||ve)return"";ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch($){var h=$}Reflect.construct(i,[],o)}else{try{o.call()}catch($){h=$}i.call(o.prototype)}else{try{throw Error()}catch($){h=$}i()}}catch($){if($&&h&&typeof $.stack=="string"){for(var p=$.stack.split(`
`),y=h.stack.split(`
`),w=p.length-1,A=y.length-1;1<=w&&0<=A&&p[w]!==y[A];)A--;for(;1<=w&&0<=A;w--,A--)if(p[w]!==y[A]){if(w!==1||A!==1)do if(w--,A--,0>A||p[w]!==y[A]){var D=`
`+p[w].replace(" at new "," at ");return i.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",i.displayName)),D}while(1<=w&&0<=A);break}}}finally{ve=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Y(i):""}function xe(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=Ce(i.type,!1),i;case 11:return i=Ce(i.type.render,!1),i;case 1:return i=Ce(i.type,!0),i;default:return""}}function Oe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case ae:return"Portal";case R:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case dt:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case b:return(i._context.displayName||"Context")+".Provider";case F:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ut:return o=i.displayName||null,o!==null?o:Oe(i.type)||"Memo";case Bt:o=i._payload,i=i._init;try{return Oe(i(o))}catch{}}return null}function Be(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ze(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Qe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ct(i){var o=Qe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(w){h=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Dr(i){i._valueTracker||(i._valueTracker=Ct(i))}function fo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Qe(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function ci(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ms(i,o){var u=o.checked;return he({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function po(i,o){var u=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;u=ze(o.value!=null?o.value:u),i._wrapperState={initialChecked:h,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ya(i,o){o=o.checked,o!=null&&H(i,"checked",o,!1)}function Xa(i,o){Ya(i,o);var u=ze(o.value),h=o.type;if(u!=null)h==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?mo(i,o.type,u):o.hasOwnProperty("defaultValue")&&mo(i,o.type,ze(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function $l(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function mo(i,o,u){(o!=="number"||ci(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var br=Array.isArray;function Nr(i,o,u,h){if(i=i.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<i.length;u++)p=o.hasOwnProperty("$"+i[u].value),i[u].selected!==p&&(i[u].selected=p),p&&h&&(i[u].defaultSelected=!0)}else{for(u=""+ze(u),o=null,p=0;p<i.length;p++){if(i[p].value===u){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Za(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function go(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(br(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:ze(u)}}function yo(i,o){var u=ze(o.value),h=ze(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),h!=null&&(i.defaultValue=""+h)}function eu(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function wt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?wt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Vr,tu=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,u,h,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Vr=Vr||document.createElement("div"),Vr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Vr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function hi(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ys=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(i){ys.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),gs[o]=gs[i]})});function nu(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||gs.hasOwnProperty(i)&&gs[i]?(""+o).trim():o+"px"}function ru(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var h=u.indexOf("--")===0,p=nu(u,o[u],h);u==="float"&&(u="cssFloat"),h?i.setProperty(u,p):i[u]=p}}var iu=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(i,o){if(o){if(iu[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ou(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _s=null;function _o(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vo=null,Cn=null,or=null;function wo(i){if(i=xu(i)){if(typeof vo!="function")throw Error(t(280));var o=i.stateNode;o&&(o=vc(o),vo(i.stateNode,i.type,o))}}function ar(i){Cn?or?or.push(i):or=[i]:Cn=i}function au(){if(Cn){var i=Cn,o=or;if(or=Cn=null,wo(i),o)for(i=0;i<o.length;i++)wo(o[i])}}function vs(i,o){return i(o)}function uu(){}var Or=!1;function lu(i,o,u){if(Or)return i(o,u);Or=!0;try{return vs(i,o,u)}finally{Or=!1,(Cn!==null||or!==null)&&(uu(),au())}}function ft(i,o){var u=i.stateNode;if(u===null)return null;var h=vc(u);if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Eo=!1;if(d)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){Eo=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{Eo=!1}function ws(i,o,u,h,p,y,w,A,D){var $=Array.prototype.slice.call(arguments,3);try{o.apply(u,$)}catch(ee){this.onError(ee)}}var Es=!1,Io=null,Bn=!1,cu=null,Od={onError:function(i){Es=!0,Io=i}};function To(i,o,u,h,p,y,w,A,D){Es=!1,Io=null,ws.apply(Od,arguments)}function ql(i,o,u,h,p,y,w,A,D){if(To.apply(this,arguments),Es){if(Es){var $=Io;Es=!1,Io=null}else throw Error(t(198));Bn||(Bn=!0,cu=$)}}function zn(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Is(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function jn(i){if(zn(i)!==i)throw Error(t(188))}function Kl(i){var o=i.alternate;if(!o){if(o=zn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,h=o;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){u=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return jn(p),i;if(y===h)return jn(p),o;y=y.sibling}throw Error(t(188))}if(u.return!==h.return)u=p,h=y;else{for(var w=!1,A=p.child;A;){if(A===u){w=!0,u=p,h=y;break}if(A===h){w=!0,h=p,u=y;break}A=A.sibling}if(!w){for(A=y.child;A;){if(A===u){w=!0,u=y,h=p;break}if(A===h){w=!0,h=y,u=p;break}A=A.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function hu(i){return i=Kl(i),i!==null?So(i):null}function So(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=So(i);if(o!==null)return o;i=i.sibling}return null}var Ro=e.unstable_scheduleCallback,du=e.unstable_cancelCallback,Gl=e.unstable_shouldYield,Ld=e.unstable_requestPaint,Je=e.unstable_now,Hl=e.unstable_getCurrentPriorityLevel,Ts=e.unstable_ImmediatePriority,di=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,fu=e.unstable_LowPriority,Wl=e.unstable_IdlePriority,Ss=null,_n=null;function Ql(i){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Ss,i,void 0,(i.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Yl,pu=Math.log,Jl=Math.LN2;function Yl(i){return i>>>=0,i===0?32:31-(pu(i)/Jl|0)|0}var Ao=64,Po=4194304;function fi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Rs(i,o){var u=i.pendingLanes;if(u===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,w=u&268435455;if(w!==0){var A=w&~p;A!==0?h=fi(A):(y&=w,y!==0&&(h=fi(y)))}else w=u&~p,w!==0?h=fi(w):y!==0&&(h=fi(y));if(h===0)return 0;if(o!==0&&o!==h&&!(o&p)&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if(h&4&&(h|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)u=31-Xt(o),p=1<<u,h|=i[u],o&=~p;return h}function Md(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lr(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-Xt(y),A=1<<w,D=p[w];D===-1?(!(A&u)||A&h)&&(p[w]=Md(A,o)):D<=o&&(i.expiredLanes|=A),y&=~A}}function vn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function As(){var i=Ao;return Ao<<=1,!(Ao&4194240)&&(Ao=64),i}function pi(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function mi(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Xt(o),i[o]=u}function We(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<u;){var p=31-Xt(u),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,u&=~y}}function gi(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-Xt(u),p=1<<h;p&o|i[h]&o&&(i[h]|=o),u&=~p}}var Ve=0;function yi(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Xl,Co,Zl,ec,tc,mu=!1,ur=[],Vt=null,$n=null,qn=null,_i=new Map,xn=new Map,lr=[],Fd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nc(i,o){switch(i){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":_i.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xn.delete(o.pointerId)}}function an(i,o,u,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=xu(o),o!==null&&Co(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Ud(i,o,u,h,p){switch(o){case"focusin":return Vt=an(Vt,i,o,u,h,p),!0;case"dragenter":return $n=an($n,i,o,u,h,p),!0;case"mouseover":return qn=an(qn,i,o,u,h,p),!0;case"pointerover":var y=p.pointerId;return _i.set(y,an(_i.get(y)||null,i,o,u,h,p)),!0;case"gotpointercapture":return y=p.pointerId,xn.set(y,an(xn.get(y)||null,i,o,u,h,p)),!0}return!1}function rc(i){var o=Ds(i.target);if(o!==null){var u=zn(o);if(u!==null){if(o=u.tag,o===13){if(o=Is(u),o!==null){i.blockedOn=o,tc(i.priority,function(){Zl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Mr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ko(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);_s=h,u.target.dispatchEvent(h),_s=null}else return o=xu(u),o!==null&&Co(o),i.blockedOn=u,!1;o.shift()}return!0}function Ps(i,o,u){Mr(i)&&u.delete(o)}function ic(){mu=!1,Vt!==null&&Mr(Vt)&&(Vt=null),$n!==null&&Mr($n)&&($n=null),qn!==null&&Mr(qn)&&(qn=null),_i.forEach(Ps),xn.forEach(Ps)}function Kn(i,o){i.blockedOn===o&&(i.blockedOn=null,mu||(mu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ic)))}function Gn(i){function o(p){return Kn(p,i)}if(0<ur.length){Kn(ur[0],i);for(var u=1;u<ur.length;u++){var h=ur[u];h.blockedOn===i&&(h.blockedOn=null)}}for(Vt!==null&&Kn(Vt,i),$n!==null&&Kn($n,i),qn!==null&&Kn(qn,i),_i.forEach(o),xn.forEach(o),u=0;u<lr.length;u++)h=lr[u],h.blockedOn===i&&(h.blockedOn=null);for(;0<lr.length&&(u=lr[0],u.blockedOn===null);)rc(u),u.blockedOn===null&&lr.shift()}var Fr=te.ReactCurrentBatchConfig,vi=!0;function tt(i,o,u,h){var p=Ve,y=Fr.transition;Fr.transition=null;try{Ve=1,gu(i,o,u,h)}finally{Ve=p,Fr.transition=y}}function Bd(i,o,u,h){var p=Ve,y=Fr.transition;Fr.transition=null;try{Ve=4,gu(i,o,u,h)}finally{Ve=p,Fr.transition=y}}function gu(i,o,u,h){if(vi){var p=ko(i,o,u,h);if(p===null)Yd(i,o,h,Cs,u),nc(i,h);else if(Ud(p,i,o,u,h))h.stopPropagation();else if(nc(i,h),o&4&&-1<Fd.indexOf(i)){for(;p!==null;){var y=xu(p);if(y!==null&&Xl(y),y=ko(i,o,u,h),y===null&&Yd(i,o,h,Cs,u),y===p)break;p=y}p!==null&&h.stopPropagation()}else Yd(i,o,h,null,u)}}var Cs=null;function ko(i,o,u,h){if(Cs=null,i=_o(h),i=Ds(i),i!==null)if(o=zn(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Is(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Cs=i,null}function yu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hl()){case Ts:return 1;case di:return 4;case kn:case fu:return 16;case Wl:return 536870912;default:return 16}default:return 16}}var wn=null,xo=null,un=null;function _u(){if(un)return un;var i,o=xo,u=o.length,h,p="value"in wn?wn.value:wn.textContent,y=p.length;for(i=0;i<u&&o[i]===p[i];i++);var w=u-i;for(h=1;h<=w&&o[u-h]===p[y-h];h++);return un=p.slice(i,1<h?1-h:void 0)}function Do(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function cr(){return!0}function vu(){return!1}function Ot(i){function o(u,h,p,y,w){this._reactName=u,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(u=i[A],this[A]=u?u(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?cr:vu,this.isPropagationStopped=vu,this}return he(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),o}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=Ot(Hn),hr=he({},Hn,{view:0,detail:0}),zd=Ot(hr),No,Ur,wi,ks=he({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wi&&(wi&&i.type==="mousemove"?(No=i.screenX-wi.screenX,Ur=i.screenY-wi.screenY):Ur=No=0,wi=i),No)},movementY:function(i){return"movementY"in i?i.movementY:Ur}}),Vo=Ot(ks),wu=he({},ks,{dataTransfer:0}),sc=Ot(wu),Oo=he({},hr,{relatedTarget:0}),Lo=Ot(Oo),oc=he({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Br=Ot(oc),ac=he({},Hn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uc=Ot(ac),lc=he({},Hn,{data:0}),Eu=Ot(lc),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=cc[i])?!!o[i]:!1}function dr(){return hc}var c=he({},hr,{key:function(i){if(i.key){var o=Mo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Do(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Zt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dr,charCode:function(i){return i.type==="keypress"?Do(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Do(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Ot(c),_=he({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ot(_),B=he({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dr}),K=Ot(B),ie=he({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Ot(ie),It=he({},ks,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Ot(It),kt=[9,13,27,32],yt=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var En=d&&"TextEvent"in window&&!Dn,xs=d&&(!yt||Dn&&8<Dn&&11>=Dn),Fo=" ",Rg=!1;function Ag(i,o){switch(i){case"keyup":return kt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Uo=!1;function ES(i,o){switch(i){case"compositionend":return Pg(o);case"keypress":return o.which!==32?null:(Rg=!0,Fo);case"textInput":return i=o.data,i===Fo&&Rg?null:i;default:return null}}function IS(i,o){if(Uo)return i==="compositionend"||!yt&&Ag(i,o)?(i=_u(),un=xo=wn=null,Uo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return xs&&o.locale!=="ko"?null:o.data;default:return null}}var TS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!TS[i.type]:o==="textarea"}function kg(i,o,u,h){ar(h),o=gc(o,"onChange"),0<o.length&&(u=new bo("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var Iu=null,Tu=null;function SS(i){Hg(i,0)}function dc(i){var o=qo(i);if(fo(o))return i}function RS(i,o){if(i==="change")return o}var xg=!1;if(d){var jd;if(d){var $d="oninput"in document;if(!$d){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),$d=typeof Dg.oninput=="function"}jd=$d}else jd=!1;xg=jd&&(!document.documentMode||9<document.documentMode)}function bg(){Iu&&(Iu.detachEvent("onpropertychange",Ng),Tu=Iu=null)}function Ng(i){if(i.propertyName==="value"&&dc(Tu)){var o=[];kg(o,Tu,i,_o(i)),lu(SS,o)}}function AS(i,o,u){i==="focusin"?(bg(),Iu=o,Tu=u,Iu.attachEvent("onpropertychange",Ng)):i==="focusout"&&bg()}function PS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return dc(Tu)}function CS(i,o){if(i==="click")return dc(o)}function kS(i,o){if(i==="input"||i==="change")return dc(o)}function xS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Wn=typeof Object.is=="function"?Object.is:xS;function Su(i,o){if(Wn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var p=u[h];if(!f.call(o,p)||!Wn(i[p],o[p]))return!1}return!0}function Vg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Og(i,o){var u=Vg(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Vg(u)}}function Lg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Lg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Mg(){for(var i=window,o=ci();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=ci(i.document)}return o}function qd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function DS(i){var o=Mg(),u=i.focusedElem,h=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Lg(u.ownerDocument.documentElement,u)){if(h!==null&&qd(u)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=u.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=Og(u,y);var w=Og(u,h);p&&w&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var bS=d&&"documentMode"in document&&11>=document.documentMode,Bo=null,Kd=null,Ru=null,Gd=!1;function Fg(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Gd||Bo==null||Bo!==ci(h)||(h=Bo,"selectionStart"in h&&qd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ru&&Su(Ru,h)||(Ru=h,h=gc(Kd,"onSelect"),0<h.length&&(o=new bo("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=Bo)))}function fc(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var zo={animationend:fc("Animation","AnimationEnd"),animationiteration:fc("Animation","AnimationIteration"),animationstart:fc("Animation","AnimationStart"),transitionend:fc("Transition","TransitionEnd")},Hd={},Ug={};d&&(Ug=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function pc(i){if(Hd[i])return Hd[i];if(!zo[i])return i;var o=zo[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Ug)return Hd[i]=o[u];return i}var Bg=pc("animationend"),zg=pc("animationiteration"),jg=pc("animationstart"),$g=pc("transitionend"),qg=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(i,o){qg.set(i,o),a(o,[i])}for(var Wd=0;Wd<Kg.length;Wd++){var Qd=Kg[Wd],NS=Qd.toLowerCase(),VS=Qd[0].toUpperCase()+Qd.slice(1);Ei(NS,"on"+VS)}Ei(Bg,"onAnimationEnd"),Ei(zg,"onAnimationIteration"),Ei(jg,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei($g,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Au));function Gg(i,o,u){var h=i.type||"unknown-event";i.currentTarget=u,ql(h,o,void 0,i),i.currentTarget=null}function Hg(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var w=h.length-1;0<=w;w--){var A=h[w],D=A.instance,$=A.currentTarget;if(A=A.listener,D!==y&&p.isPropagationStopped())break e;Gg(p,A,$),y=D}else for(w=0;w<h.length;w++){if(A=h[w],D=A.instance,$=A.currentTarget,A=A.listener,D!==y&&p.isPropagationStopped())break e;Gg(p,A,$),y=D}}}if(Bn)throw i=cu,Bn=!1,cu=null,i}function Ze(i,o){var u=o[rf];u===void 0&&(u=o[rf]=new Set);var h=i+"__bubble";u.has(h)||(Wg(o,i,2,!1),u.add(h))}function Jd(i,o,u){var h=0;o&&(h|=4),Wg(u,i,h,o)}var mc="_reactListening"+Math.random().toString(36).slice(2);function Pu(i){if(!i[mc]){i[mc]=!0,r.forEach(function(u){u!=="selectionchange"&&(OS.has(u)||Jd(u,!1,i),Jd(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[mc]||(o[mc]=!0,Jd("selectionchange",!1,o))}}function Wg(i,o,u,h){switch(yu(o)){case 1:var p=tt;break;case 4:p=Bd;break;default:p=gu}u=p.bind(null,o,u,i),p=void 0,!Eo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,u,{capture:!0,passive:p}):i.addEventListener(o,u,!0):p!==void 0?i.addEventListener(o,u,{passive:p}):i.addEventListener(o,u,!1)}function Yd(i,o,u,h,p){var y=h;if(!(o&1)&&!(o&2)&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var A=h.stateNode.containerInfo;if(A===p||A.nodeType===8&&A.parentNode===p)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;w=w.return}for(;A!==null;){if(w=Ds(A),w===null)return;if(D=w.tag,D===5||D===6){h=y=w;continue e}A=A.parentNode}}h=h.return}lu(function(){var $=y,ee=_o(u),ne=[];e:{var X=qg.get(i);if(X!==void 0){var ce=bo,fe=i;switch(i){case"keypress":if(Do(u)===0)break e;case"keydown":case"keyup":ce=g;break;case"focusin":fe="focus",ce=Lo;break;case"focusout":fe="blur",ce=Lo;break;case"beforeblur":case"afterblur":ce=Lo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=sc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=K;break;case Bg:case zg:case jg:ce=Br;break;case $g:ce=qe;break;case"scroll":ce=zd;break;case"wheel":ce=Le;break;case"copy":case"cut":case"paste":ce=uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=T}var me=(o&4)!==0,pt=!me&&i==="scroll",z=me?X!==null?X+"Capture":null:X;me=[];for(var O=$,j;O!==null;){j=O;var re=j.stateNode;if(j.tag===5&&re!==null&&(j=re,z!==null&&(re=ft(O,z),re!=null&&me.push(Cu(O,re,j)))),pt)break;O=O.return}0<me.length&&(X=new ce(X,fe,null,u,ee),ne.push({event:X,listeners:me}))}}if(!(o&7)){e:{if(X=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",X&&u!==_s&&(fe=u.relatedTarget||u.fromElement)&&(Ds(fe)||fe[zr]))break e;if((ce||X)&&(X=ee.window===ee?ee:(X=ee.ownerDocument)?X.defaultView||X.parentWindow:window,ce?(fe=u.relatedTarget||u.toElement,ce=$,fe=fe?Ds(fe):null,fe!==null&&(pt=zn(fe),fe!==pt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=$),ce!==fe)){if(me=Vo,re="onMouseLeave",z="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(me=T,re="onPointerLeave",z="onPointerEnter",O="pointer"),pt=ce==null?X:qo(ce),j=fe==null?X:qo(fe),X=new me(re,O+"leave",ce,u,ee),X.target=pt,X.relatedTarget=j,re=null,Ds(ee)===$&&(me=new me(z,O+"enter",fe,u,ee),me.target=j,me.relatedTarget=pt,re=me),pt=re,ce&&fe)t:{for(me=ce,z=fe,O=0,j=me;j;j=jo(j))O++;for(j=0,re=z;re;re=jo(re))j++;for(;0<O-j;)me=jo(me),O--;for(;0<j-O;)z=jo(z),j--;for(;O--;){if(me===z||z!==null&&me===z.alternate)break t;me=jo(me),z=jo(z)}me=null}else me=null;ce!==null&&Qg(ne,X,ce,me,!1),fe!==null&&pt!==null&&Qg(ne,pt,fe,me,!0)}}e:{if(X=$?qo($):window,ce=X.nodeName&&X.nodeName.toLowerCase(),ce==="select"||ce==="input"&&X.type==="file")var ye=RS;else if(Cg(X))if(xg)ye=kS;else{ye=PS;var Ie=AS}else(ce=X.nodeName)&&ce.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ye=CS);if(ye&&(ye=ye(i,$))){kg(ne,ye,u,ee);break e}Ie&&Ie(i,X,$),i==="focusout"&&(Ie=X._wrapperState)&&Ie.controlled&&X.type==="number"&&mo(X,"number",X.value)}switch(Ie=$?qo($):window,i){case"focusin":(Cg(Ie)||Ie.contentEditable==="true")&&(Bo=Ie,Kd=$,Ru=null);break;case"focusout":Ru=Kd=Bo=null;break;case"mousedown":Gd=!0;break;case"contextmenu":case"mouseup":case"dragend":Gd=!1,Fg(ne,u,ee);break;case"selectionchange":if(bS)break;case"keydown":case"keyup":Fg(ne,u,ee)}var Te;if(yt)e:{switch(i){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Uo?Ag(i,u)&&(Se="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Se="onCompositionStart");Se&&(xs&&u.locale!=="ko"&&(Uo||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Uo&&(Te=_u()):(wn=ee,xo="value"in wn?wn.value:wn.textContent,Uo=!0)),Ie=gc($,Se),0<Ie.length&&(Se=new Eu(Se,i,null,u,ee),ne.push({event:Se,listeners:Ie}),Te?Se.data=Te:(Te=Pg(u),Te!==null&&(Se.data=Te)))),(Te=En?ES(i,u):IS(i,u))&&($=gc($,"onBeforeInput"),0<$.length&&(ee=new Eu("onBeforeInput","beforeinput",null,u,ee),ne.push({event:ee,listeners:$}),ee.data=Te))}Hg(ne,o)})}function Cu(i,o,u){return{instance:i,listener:o,currentTarget:u}}function gc(i,o){for(var u=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ft(i,u),y!=null&&h.unshift(Cu(i,y,p)),y=ft(i,o),y!=null&&h.push(Cu(i,y,p))),i=i.return}return h}function jo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Qg(i,o,u,h,p){for(var y=o._reactName,w=[];u!==null&&u!==h;){var A=u,D=A.alternate,$=A.stateNode;if(D!==null&&D===h)break;A.tag===5&&$!==null&&(A=$,p?(D=ft(u,y),D!=null&&w.unshift(Cu(u,D,A))):p||(D=ft(u,y),D!=null&&w.push(Cu(u,D,A)))),u=u.return}w.length!==0&&i.push({event:o,listeners:w})}var LS=/\r\n?/g,MS=/\u0000|\uFFFD/g;function Jg(i){return(typeof i=="string"?i:""+i).replace(LS,`
`).replace(MS,"")}function yc(i,o,u){if(o=Jg(o),Jg(i)!==o&&u)throw Error(t(425))}function _c(){}var Xd=null,Zd=null;function ef(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tf=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,US=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(i){return Yg.resolve(null).then(i).catch(BS)}:tf;function BS(i){setTimeout(function(){throw i})}function nf(i,o){var u=o,h=0;do{var p=u.nextSibling;if(i.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(h===0){i.removeChild(p),Gn(o);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=p}while(u);Gn(o)}function Ii(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Xg(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var $o=Math.random().toString(36).slice(2),fr="__reactFiber$"+$o,ku="__reactProps$"+$o,zr="__reactContainer$"+$o,rf="__reactEvents$"+$o,zS="__reactListeners$"+$o,jS="__reactHandles$"+$o;function Ds(i){var o=i[fr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[zr]||u[fr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Xg(i);i!==null;){if(u=i[fr])return u;i=Xg(i)}return o}i=u,u=i.parentNode}return null}function xu(i){return i=i[fr]||i[zr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function qo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function vc(i){return i[ku]||null}var sf=[],Ko=-1;function Ti(i){return{current:i}}function et(i){0>Ko||(i.current=sf[Ko],sf[Ko]=null,Ko--)}function Ye(i,o){Ko++,sf[Ko]=i.current,i.current=o}var Si={},zt=Ti(Si),ln=Ti(!1),bs=Si;function Go(i,o){var u=i.type.contextTypes;if(!u)return Si;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in u)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function cn(i){return i=i.childContextTypes,i!=null}function wc(){et(ln),et(zt)}function Zg(i,o,u){if(zt.current!==Si)throw Error(t(168));Ye(zt,o),Ye(ln,u)}function ey(i,o,u){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Be(i)||"Unknown",p));return he({},u,h)}function Ec(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Si,bs=zt.current,Ye(zt,i),Ye(ln,ln.current),!0}function ty(i,o,u){var h=i.stateNode;if(!h)throw Error(t(169));u?(i=ey(i,o,bs),h.__reactInternalMemoizedMergedChildContext=i,et(ln),et(zt),Ye(zt,i)):et(ln),Ye(ln,u)}var jr=null,Ic=!1,of=!1;function ny(i){jr===null?jr=[i]:jr.push(i)}function $S(i){Ic=!0,ny(i)}function Ri(){if(!of&&jr!==null){of=!0;var i=0,o=Ve;try{var u=jr;for(Ve=1;i<u.length;i++){var h=u[i];do h=h(!0);while(h!==null)}jr=null,Ic=!1}catch(p){throw jr!==null&&(jr=jr.slice(i+1)),Ro(Ts,Ri),p}finally{Ve=o,of=!1}}return null}var Ho=[],Wo=0,Tc=null,Sc=0,bn=[],Nn=0,Ns=null,$r=1,qr="";function Vs(i,o){Ho[Wo++]=Sc,Ho[Wo++]=Tc,Tc=i,Sc=o}function ry(i,o,u){bn[Nn++]=$r,bn[Nn++]=qr,bn[Nn++]=Ns,Ns=i;var h=$r;i=qr;var p=32-Xt(h)-1;h&=~(1<<p),u+=1;var y=32-Xt(o)+p;if(30<y){var w=p-p%5;y=(h&(1<<w)-1).toString(32),h>>=w,p-=w,$r=1<<32-Xt(o)+p|u<<p|h,qr=y+i}else $r=1<<y|u<<p|h,qr=i}function af(i){i.return!==null&&(Vs(i,1),ry(i,1,0))}function uf(i){for(;i===Tc;)Tc=Ho[--Wo],Ho[Wo]=null,Sc=Ho[--Wo],Ho[Wo]=null;for(;i===Ns;)Ns=bn[--Nn],bn[Nn]=null,qr=bn[--Nn],bn[Nn]=null,$r=bn[--Nn],bn[Nn]=null}var In=null,Tn=null,nt=!1,Qn=null;function iy(i,o){var u=Mn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function sy(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,In=i,Tn=Ii(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,In=i,Tn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Ns!==null?{id:$r,overflow:qr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Mn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,In=i,Tn=null,!0):!1;default:return!1}}function lf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function cf(i){if(nt){var o=Tn;if(o){var u=o;if(!sy(i,o)){if(lf(i))throw Error(t(418));o=Ii(u.nextSibling);var h=In;o&&sy(i,o)?iy(h,u):(i.flags=i.flags&-4097|2,nt=!1,In=i)}}else{if(lf(i))throw Error(t(418));i.flags=i.flags&-4097|2,nt=!1,In=i}}}function oy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;In=i}function Rc(i){if(i!==In)return!1;if(!nt)return oy(i),nt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!ef(i.type,i.memoizedProps)),o&&(o=Tn)){if(lf(i))throw ay(),Error(t(418));for(;o;)iy(i,o),o=Ii(o.nextSibling)}if(oy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Tn=Ii(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Tn=null}}else Tn=In?Ii(i.stateNode.nextSibling):null;return!0}function ay(){for(var i=Tn;i;)i=Ii(i.nextSibling)}function Qo(){Tn=In=null,nt=!1}function hf(i){Qn===null?Qn=[i]:Qn.push(i)}var qS=te.ReactCurrentBatchConfig;function Du(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var A=p.refs;w===null?delete A[y]:A[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Ac(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function uy(i){var o=i._init;return o(i._payload)}function ly(i){function o(z,O){if(i){var j=z.deletions;j===null?(z.deletions=[O],z.flags|=16):j.push(O)}}function u(z,O){if(!i)return null;for(;O!==null;)o(z,O),O=O.sibling;return null}function h(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function p(z,O){return z=Ni(z,O),z.index=0,z.sibling=null,z}function y(z,O,j){return z.index=j,i?(j=z.alternate,j!==null?(j=j.index,j<O?(z.flags|=2,O):j):(z.flags|=2,O)):(z.flags|=1048576,O)}function w(z){return i&&z.alternate===null&&(z.flags|=2),z}function A(z,O,j,re){return O===null||O.tag!==6?(O=np(j,z.mode,re),O.return=z,O):(O=p(O,j),O.return=z,O)}function D(z,O,j,re){var ye=j.type;return ye===k?ee(z,O,j.props.children,re,j.key):O!==null&&(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Bt&&uy(ye)===O.type)?(re=p(O,j.props),re.ref=Du(z,O,j),re.return=z,re):(re=Jc(j.type,j.key,j.props,null,z.mode,re),re.ref=Du(z,O,j),re.return=z,re)}function $(z,O,j,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=rp(j,z.mode,re),O.return=z,O):(O=p(O,j.children||[]),O.return=z,O)}function ee(z,O,j,re,ye){return O===null||O.tag!==7?(O=js(j,z.mode,re,ye),O.return=z,O):(O=p(O,j),O.return=z,O)}function ne(z,O,j){if(typeof O=="string"&&O!==""||typeof O=="number")return O=np(""+O,z.mode,j),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case le:return j=Jc(O.type,O.key,O.props,null,z.mode,j),j.ref=Du(z,null,O),j.return=z,j;case ae:return O=rp(O,z.mode,j),O.return=z,O;case Bt:var re=O._init;return ne(z,re(O._payload),j)}if(br(O)||Ee(O))return O=js(O,z.mode,j,null),O.return=z,O;Ac(z,O)}return null}function X(z,O,j,re){var ye=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ye!==null?null:A(z,O,""+j,re);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case le:return j.key===ye?D(z,O,j,re):null;case ae:return j.key===ye?$(z,O,j,re):null;case Bt:return ye=j._init,X(z,O,ye(j._payload),re)}if(br(j)||Ee(j))return ye!==null?null:ee(z,O,j,re,null);Ac(z,j)}return null}function ce(z,O,j,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number")return z=z.get(j)||null,A(O,z,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case le:return z=z.get(re.key===null?j:re.key)||null,D(O,z,re,ye);case ae:return z=z.get(re.key===null?j:re.key)||null,$(O,z,re,ye);case Bt:var Ie=re._init;return ce(z,O,j,Ie(re._payload),ye)}if(br(re)||Ee(re))return z=z.get(j)||null,ee(O,z,re,ye,null);Ac(O,re)}return null}function fe(z,O,j,re){for(var ye=null,Ie=null,Te=O,Se=O=0,bt=null;Te!==null&&Se<j.length;Se++){Te.index>Se?(bt=Te,Te=null):bt=Te.sibling;var Ue=X(z,Te,j[Se],re);if(Ue===null){Te===null&&(Te=bt);break}i&&Te&&Ue.alternate===null&&o(z,Te),O=y(Ue,O,Se),Ie===null?ye=Ue:Ie.sibling=Ue,Ie=Ue,Te=bt}if(Se===j.length)return u(z,Te),nt&&Vs(z,Se),ye;if(Te===null){for(;Se<j.length;Se++)Te=ne(z,j[Se],re),Te!==null&&(O=y(Te,O,Se),Ie===null?ye=Te:Ie.sibling=Te,Ie=Te);return nt&&Vs(z,Se),ye}for(Te=h(z,Te);Se<j.length;Se++)bt=ce(Te,z,Se,j[Se],re),bt!==null&&(i&&bt.alternate!==null&&Te.delete(bt.key===null?Se:bt.key),O=y(bt,O,Se),Ie===null?ye=bt:Ie.sibling=bt,Ie=bt);return i&&Te.forEach(function(Vi){return o(z,Vi)}),nt&&Vs(z,Se),ye}function me(z,O,j,re){var ye=Ee(j);if(typeof ye!="function")throw Error(t(150));if(j=ye.call(j),j==null)throw Error(t(151));for(var Ie=ye=null,Te=O,Se=O=0,bt=null,Ue=j.next();Te!==null&&!Ue.done;Se++,Ue=j.next()){Te.index>Se?(bt=Te,Te=null):bt=Te.sibling;var Vi=X(z,Te,Ue.value,re);if(Vi===null){Te===null&&(Te=bt);break}i&&Te&&Vi.alternate===null&&o(z,Te),O=y(Vi,O,Se),Ie===null?ye=Vi:Ie.sibling=Vi,Ie=Vi,Te=bt}if(Ue.done)return u(z,Te),nt&&Vs(z,Se),ye;if(Te===null){for(;!Ue.done;Se++,Ue=j.next())Ue=ne(z,Ue.value,re),Ue!==null&&(O=y(Ue,O,Se),Ie===null?ye=Ue:Ie.sibling=Ue,Ie=Ue);return nt&&Vs(z,Se),ye}for(Te=h(z,Te);!Ue.done;Se++,Ue=j.next())Ue=ce(Te,z,Se,Ue.value,re),Ue!==null&&(i&&Ue.alternate!==null&&Te.delete(Ue.key===null?Se:Ue.key),O=y(Ue,O,Se),Ie===null?ye=Ue:Ie.sibling=Ue,Ie=Ue);return i&&Te.forEach(function(IR){return o(z,IR)}),nt&&Vs(z,Se),ye}function pt(z,O,j,re){if(typeof j=="object"&&j!==null&&j.type===k&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case le:e:{for(var ye=j.key,Ie=O;Ie!==null;){if(Ie.key===ye){if(ye=j.type,ye===k){if(Ie.tag===7){u(z,Ie.sibling),O=p(Ie,j.props.children),O.return=z,z=O;break e}}else if(Ie.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Bt&&uy(ye)===Ie.type){u(z,Ie.sibling),O=p(Ie,j.props),O.ref=Du(z,Ie,j),O.return=z,z=O;break e}u(z,Ie);break}else o(z,Ie);Ie=Ie.sibling}j.type===k?(O=js(j.props.children,z.mode,re,j.key),O.return=z,z=O):(re=Jc(j.type,j.key,j.props,null,z.mode,re),re.ref=Du(z,O,j),re.return=z,z=re)}return w(z);case ae:e:{for(Ie=j.key;O!==null;){if(O.key===Ie)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){u(z,O.sibling),O=p(O,j.children||[]),O.return=z,z=O;break e}else{u(z,O);break}else o(z,O);O=O.sibling}O=rp(j,z.mode,re),O.return=z,z=O}return w(z);case Bt:return Ie=j._init,pt(z,O,Ie(j._payload),re)}if(br(j))return fe(z,O,j,re);if(Ee(j))return me(z,O,j,re);Ac(z,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,O!==null&&O.tag===6?(u(z,O.sibling),O=p(O,j),O.return=z,z=O):(u(z,O),O=np(j,z.mode,re),O.return=z,z=O),w(z)):u(z,O)}return pt}var Jo=ly(!0),cy=ly(!1),Pc=Ti(null),Cc=null,Yo=null,df=null;function ff(){df=Yo=Cc=null}function pf(i){var o=Pc.current;et(Pc),i._currentValue=o}function mf(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Xo(i,o){Cc=i,df=Yo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(hn=!0),i.firstContext=null)}function Vn(i){var o=i._currentValue;if(df!==i)if(i={context:i,memoizedValue:o,next:null},Yo===null){if(Cc===null)throw Error(t(308));Yo=i,Cc.dependencies={lanes:0,firstContext:i}}else Yo=Yo.next=i;return o}var Os=null;function gf(i){Os===null?Os=[i]:Os.push(i)}function hy(i,o,u,h){var p=o.interleaved;return p===null?(u.next=u,gf(o)):(u.next=p.next,p.next=u),o.interleaved=u,Kr(i,h)}function Kr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ai=!1;function yf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Gr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Pi(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,Fe&2){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,Kr(i,u)}return p=h.interleaved,p===null?(o.next=o,gf(h)):(o.next=p.next,p.next=o),h.interleaved=o,Kr(i,u)}function kc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,gi(i,u)}}function fy(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?p=y=w:y=y.next=w,u=u.next}while(u!==null);y===null?p=y=o:y=y.next=o}else p=y=o;u={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function xc(i,o,u,h){var p=i.updateQueue;Ai=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var D=A,$=D.next;D.next=null,w===null?y=$:w.next=$,w=D;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==w&&(A===null?ee.firstBaseUpdate=$:A.next=$,ee.lastBaseUpdate=D))}if(y!==null){var ne=p.baseState;w=0,ee=$=D=null,A=y;do{var X=A.lane,ce=A.eventTime;if((h&X)===X){ee!==null&&(ee=ee.next={eventTime:ce,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var fe=i,me=A;switch(X=o,ce=u,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){ne=fe.call(ce,ne,X);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,X=typeof fe=="function"?fe.call(ce,ne,X):fe,X==null)break e;ne=he({},ne,X);break e;case 2:Ai=!0}}A.callback!==null&&A.lane!==0&&(i.flags|=64,X=p.effects,X===null?p.effects=[A]:X.push(A))}else ce={eventTime:ce,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?($=ee=ce,D=ne):ee=ee.next=ce,w|=X;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;X=A,A=X.next,X.next=null,p.lastBaseUpdate=X,p.shared.pending=null}}while(!0);if(ee===null&&(D=ne),p.baseState=D,p.firstBaseUpdate=$,p.lastBaseUpdate=ee,o=p.shared.interleaved,o!==null){p=o;do w|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);Fs|=w,i.lanes=w,i.memoizedState=ne}}function py(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=u,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var bu={},pr=Ti(bu),Nu=Ti(bu),Vu=Ti(bu);function Ls(i){if(i===bu)throw Error(t(174));return i}function _f(i,o){switch(Ye(Vu,o),Ye(Nu,i),Ye(pr,bu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Et(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Et(o,i)}et(pr),Ye(pr,o)}function Zo(){et(pr),et(Nu),et(Vu)}function my(i){Ls(Vu.current);var o=Ls(pr.current),u=Et(o,i.type);o!==u&&(Ye(Nu,i),Ye(pr,u))}function vf(i){Nu.current===i&&(et(pr),et(Nu))}var st=Ti(0);function Dc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wf=[];function Ef(){for(var i=0;i<wf.length;i++)wf[i]._workInProgressVersionPrimary=null;wf.length=0}var bc=te.ReactCurrentDispatcher,If=te.ReactCurrentBatchConfig,Ms=0,ot=null,Tt=null,xt=null,Nc=!1,Ou=!1,Lu=0,KS=0;function jt(){throw Error(t(321))}function Tf(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Wn(i[u],o[u]))return!1;return!0}function Sf(i,o,u,h,p,y){if(Ms=y,ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,bc.current=i===null||i.memoizedState===null?QS:JS,i=u(h,p),Ou){y=0;do{if(Ou=!1,Lu=0,25<=y)throw Error(t(301));y+=1,xt=Tt=null,o.updateQueue=null,bc.current=YS,i=u(h,p)}while(Ou)}if(bc.current=Lc,o=Tt!==null&&Tt.next!==null,Ms=0,xt=Tt=ot=null,Nc=!1,o)throw Error(t(300));return i}function Rf(){var i=Lu!==0;return Lu=0,i}function mr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?ot.memoizedState=xt=i:xt=xt.next=i,xt}function On(){if(Tt===null){var i=ot.alternate;i=i!==null?i.memoizedState:null}else i=Tt.next;var o=xt===null?ot.memoizedState:xt.next;if(o!==null)xt=o,Tt=i;else{if(i===null)throw Error(t(310));Tt=i,i={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},xt===null?ot.memoizedState=xt=i:xt=xt.next=i}return xt}function Mu(i,o){return typeof o=="function"?o(i):o}function Af(i){var o=On(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=Tt,p=h.baseQueue,y=u.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}h.baseQueue=p=y,u.pending=null}if(p!==null){y=p.next,h=h.baseState;var A=w=null,D=null,$=y;do{var ee=$.lane;if((Ms&ee)===ee)D!==null&&(D=D.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:i(h,$.action);else{var ne={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};D===null?(A=D=ne,w=h):D=D.next=ne,ot.lanes|=ee,Fs|=ee}$=$.next}while($!==null&&$!==y);D===null?w=h:D.next=A,Wn(h,o.memoizedState)||(hn=!0),o.memoizedState=h,o.baseState=w,o.baseQueue=D,u.lastRenderedState=h}if(i=u.interleaved,i!==null){p=i;do y=p.lane,ot.lanes|=y,Fs|=y,p=p.next;while(p!==i)}else p===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Pf(i){var o=On(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=u.dispatch,p=u.pending,y=o.memoizedState;if(p!==null){u.pending=null;var w=p=p.next;do y=i(y,w.action),w=w.next;while(w!==p);Wn(y,o.memoizedState)||(hn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,h]}function gy(){}function yy(i,o){var u=ot,h=On(),p=o(),y=!Wn(h.memoizedState,p);if(y&&(h.memoizedState=p,hn=!0),h=h.queue,Cf(wy.bind(null,u,h,i),[i]),h.getSnapshot!==o||y||xt!==null&&xt.memoizedState.tag&1){if(u.flags|=2048,Fu(9,vy.bind(null,u,h,p,o),void 0,null),Dt===null)throw Error(t(349));Ms&30||_y(u,o,p)}return p}function _y(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ot.updateQueue,o===null?(o={lastEffect:null,stores:null},ot.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function vy(i,o,u,h){o.value=u,o.getSnapshot=h,Ey(o)&&Iy(i)}function wy(i,o,u){return u(function(){Ey(o)&&Iy(i)})}function Ey(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Wn(i,u)}catch{return!0}}function Iy(i){var o=Kr(i,1);o!==null&&Zn(o,i,1,-1)}function Ty(i){var o=mr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:i},o.queue=i,i=i.dispatch=WS.bind(null,ot,i),[o.memoizedState,i]}function Fu(i,o,u,h){return i={tag:i,create:o,destroy:u,deps:h,next:null},o=ot.updateQueue,o===null?(o={lastEffect:null,stores:null},ot.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i)),i}function Sy(){return On().memoizedState}function Vc(i,o,u,h){var p=mr();ot.flags|=i,p.memoizedState=Fu(1|o,u,void 0,h===void 0?null:h)}function Oc(i,o,u,h){var p=On();h=h===void 0?null:h;var y=void 0;if(Tt!==null){var w=Tt.memoizedState;if(y=w.destroy,h!==null&&Tf(h,w.deps)){p.memoizedState=Fu(o,u,y,h);return}}ot.flags|=i,p.memoizedState=Fu(1|o,u,y,h)}function Ry(i,o){return Vc(8390656,8,i,o)}function Cf(i,o){return Oc(2048,8,i,o)}function Ay(i,o){return Oc(4,2,i,o)}function Py(i,o){return Oc(4,4,i,o)}function Cy(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ky(i,o,u){return u=u!=null?u.concat([i]):null,Oc(4,4,Cy.bind(null,o,i),u)}function kf(){}function xy(i,o){var u=On();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Tf(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function Dy(i,o){var u=On();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Tf(o,h[1])?h[0]:(i=i(),u.memoizedState=[i,o],i)}function by(i,o,u){return Ms&21?(Wn(u,o)||(u=As(),ot.lanes|=u,Fs|=u,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,hn=!0),i.memoizedState=u)}function GS(i,o){var u=Ve;Ve=u!==0&&4>u?u:4,i(!0);var h=If.transition;If.transition={};try{i(!1),o()}finally{Ve=u,If.transition=h}}function Ny(){return On().memoizedState}function HS(i,o,u){var h=Di(i);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},Vy(i))Oy(o,u);else if(u=hy(i,o,u,h),u!==null){var p=tn();Zn(u,i,h,p),Ly(u,o,h)}}function WS(i,o,u){var h=Di(i),p={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(Vy(i))Oy(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,A=y(w,u);if(p.hasEagerState=!0,p.eagerState=A,Wn(A,w)){var D=o.interleaved;D===null?(p.next=p,gf(o)):(p.next=D.next,D.next=p),o.interleaved=p;return}}catch{}finally{}u=hy(i,o,p,h),u!==null&&(p=tn(),Zn(u,i,h,p),Ly(u,o,h))}}function Vy(i){var o=i.alternate;return i===ot||o!==null&&o===ot}function Oy(i,o){Ou=Nc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Ly(i,o,u){if(u&4194240){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,gi(i,u)}}var Lc={readContext:Vn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},QS={readContext:Vn,useCallback:function(i,o){return mr().memoizedState=[i,o===void 0?null:o],i},useContext:Vn,useEffect:Ry,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Vc(4194308,4,Cy.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Vc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Vc(4,2,i,o)},useMemo:function(i,o){var u=mr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var h=mr();return o=u!==void 0?u(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=HS.bind(null,ot,i),[h.memoizedState,i]},useRef:function(i){var o=mr();return i={current:i},o.memoizedState=i},useState:Ty,useDebugValue:kf,useDeferredValue:function(i){return mr().memoizedState=i},useTransition:function(){var i=Ty(!1),o=i[0];return i=GS.bind(null,i[1]),mr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var h=ot,p=mr();if(nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Dt===null)throw Error(t(349));Ms&30||_y(h,o,u)}p.memoizedState=u;var y={value:u,getSnapshot:o};return p.queue=y,Ry(wy.bind(null,h,y,i),[i]),h.flags|=2048,Fu(9,vy.bind(null,h,y,u,o),void 0,null),u},useId:function(){var i=mr(),o=Dt.identifierPrefix;if(nt){var u=qr,h=$r;u=(h&~(1<<32-Xt(h)-1)).toString(32)+u,o=":"+o+"R"+u,u=Lu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=KS++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},JS={readContext:Vn,useCallback:xy,useContext:Vn,useEffect:Cf,useImperativeHandle:ky,useInsertionEffect:Ay,useLayoutEffect:Py,useMemo:Dy,useReducer:Af,useRef:Sy,useState:function(){return Af(Mu)},useDebugValue:kf,useDeferredValue:function(i){var o=On();return by(o,Tt.memoizedState,i)},useTransition:function(){var i=Af(Mu)[0],o=On().memoizedState;return[i,o]},useMutableSource:gy,useSyncExternalStore:yy,useId:Ny,unstable_isNewReconciler:!1},YS={readContext:Vn,useCallback:xy,useContext:Vn,useEffect:Cf,useImperativeHandle:ky,useInsertionEffect:Ay,useLayoutEffect:Py,useMemo:Dy,useReducer:Pf,useRef:Sy,useState:function(){return Pf(Mu)},useDebugValue:kf,useDeferredValue:function(i){var o=On();return Tt===null?o.memoizedState=i:by(o,Tt.memoizedState,i)},useTransition:function(){var i=Pf(Mu)[0],o=On().memoizedState;return[i,o]},useMutableSource:gy,useSyncExternalStore:yy,useId:Ny,unstable_isNewReconciler:!1};function Jn(i,o){if(i&&i.defaultProps){o=he({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function xf(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:he({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Mc={isMounted:function(i){return(i=i._reactInternals)?zn(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var h=tn(),p=Di(i),y=Gr(h,p);y.payload=o,u!=null&&(y.callback=u),o=Pi(i,y,p),o!==null&&(Zn(o,i,p,h),kc(o,i,p))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=tn(),p=Di(i),y=Gr(h,p);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Pi(i,y,p),o!==null&&(Zn(o,i,p,h),kc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=tn(),h=Di(i),p=Gr(u,h);p.tag=2,o!=null&&(p.callback=o),o=Pi(i,p,h),o!==null&&(Zn(o,i,h,u),kc(o,i,h))}};function My(i,o,u,h,p,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,w):o.prototype&&o.prototype.isPureReactComponent?!Su(u,h)||!Su(p,y):!0}function Fy(i,o,u){var h=!1,p=Si,y=o.contextType;return typeof y=="object"&&y!==null?y=Vn(y):(p=cn(o)?bs:zt.current,h=o.contextTypes,y=(h=h!=null)?Go(i,p):Si),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Mc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function Uy(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&Mc.enqueueReplaceState(o,o.state,null)}function Df(i,o,u,h){var p=i.stateNode;p.props=u,p.state=i.memoizedState,p.refs={},yf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=Vn(y):(y=cn(o)?bs:zt.current,p.context=Go(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(xf(i,o,y,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Mc.enqueueReplaceState(p,p.state,null),xc(i,u,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ea(i,o){try{var u="",h=o;do u+=xe(h),h=h.return;while(h);var p=u}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function bf(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Nf(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var XS=typeof WeakMap=="function"?WeakMap:Map;function By(i,o,u){u=Gr(-1,u),u.tag=3,u.payload={element:null};var h=o.value;return u.callback=function(){qc||(qc=!0,Wf=h),Nf(i,o)},u}function zy(i,o,u){u=Gr(-1,u),u.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;u.payload=function(){return h(p)},u.callback=function(){Nf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Nf(i,o),typeof h!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),u}function jy(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new XS;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(u)||(p.add(u),i=dR.bind(null,i,o,u),o.then(i,i))}function $y(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function qy(i,o,u,h,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Gr(-1,1),o.tag=2,Pi(u,o,1))),u.lanes|=1),i)}var ZS=te.ReactCurrentOwner,hn=!1;function en(i,o,u,h){o.child=i===null?cy(o,null,u,h):Jo(o,i.child,u,h)}function Ky(i,o,u,h,p){u=u.render;var y=o.ref;return Xo(o,p),h=Sf(i,o,u,h,y,p),u=Rf(),i!==null&&!hn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Hr(i,o,p)):(nt&&u&&af(o),o.flags|=1,en(i,o,h,p),o.child)}function Gy(i,o,u,h,p){if(i===null){var y=u.type;return typeof y=="function"&&!tp(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Hy(i,o,y,h,p)):(i=Jc(u.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!(i.lanes&p)){var w=y.memoizedProps;if(u=u.compare,u=u!==null?u:Su,u(w,h)&&i.ref===o.ref)return Hr(i,o,p)}return o.flags|=1,i=Ni(y,h),i.ref=o.ref,i.return=o,o.child=i}function Hy(i,o,u,h,p){if(i!==null){var y=i.memoizedProps;if(Su(y,h)&&i.ref===o.ref)if(hn=!1,o.pendingProps=h=y,(i.lanes&p)!==0)i.flags&131072&&(hn=!0);else return o.lanes=i.lanes,Hr(i,o,p)}return Vf(i,o,u,h,p)}function Wy(i,o,u){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(na,Sn),Sn|=u;else{if(!(u&1073741824))return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ye(na,Sn),Sn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:u,Ye(na,Sn),Sn|=h}else y!==null?(h=y.baseLanes|u,o.memoizedState=null):h=u,Ye(na,Sn),Sn|=h;return en(i,o,p,u),o.child}function Qy(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Vf(i,o,u,h,p){var y=cn(u)?bs:zt.current;return y=Go(o,y),Xo(o,p),u=Sf(i,o,u,h,y,p),h=Rf(),i!==null&&!hn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Hr(i,o,p)):(nt&&h&&af(o),o.flags|=1,en(i,o,u,p),o.child)}function Jy(i,o,u,h,p){if(cn(u)){var y=!0;Ec(o)}else y=!1;if(Xo(o,p),o.stateNode===null)Uc(i,o),Fy(o,u,h),Df(o,u,h,p),h=!0;else if(i===null){var w=o.stateNode,A=o.memoizedProps;w.props=A;var D=w.context,$=u.contextType;typeof $=="object"&&$!==null?$=Vn($):($=cn(u)?bs:zt.current,$=Go(o,$));var ee=u.getDerivedStateFromProps,ne=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==h||D!==$)&&Uy(o,w,h,$),Ai=!1;var X=o.memoizedState;w.state=X,xc(o,h,w,p),D=o.memoizedState,A!==h||X!==D||ln.current||Ai?(typeof ee=="function"&&(xf(o,u,ee,h),D=o.memoizedState),(A=Ai||My(o,u,A,h,X,D,$))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=D),w.props=h,w.state=D,w.context=$,h=A):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{w=o.stateNode,dy(i,o),A=o.memoizedProps,$=o.type===o.elementType?A:Jn(o.type,A),w.props=$,ne=o.pendingProps,X=w.context,D=u.contextType,typeof D=="object"&&D!==null?D=Vn(D):(D=cn(u)?bs:zt.current,D=Go(o,D));var ce=u.getDerivedStateFromProps;(ee=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ne||X!==D)&&Uy(o,w,h,D),Ai=!1,X=o.memoizedState,w.state=X,xc(o,h,w,p);var fe=o.memoizedState;A!==ne||X!==fe||ln.current||Ai?(typeof ce=="function"&&(xf(o,u,ce,h),fe=o.memoizedState),($=Ai||My(o,u,$,h,X,fe,D)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,fe,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,fe,D)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=fe),w.props=h,w.state=fe,w.context=D,h=$):(typeof w.componentDidUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(o.flags|=1024),h=!1)}return Of(i,o,u,h,y,p)}function Of(i,o,u,h,p,y){Qy(i,o);var w=(o.flags&128)!==0;if(!h&&!w)return p&&ty(o,u,!1),Hr(i,o,y);h=o.stateNode,ZS.current=o;var A=w&&typeof u.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&w?(o.child=Jo(o,i.child,null,y),o.child=Jo(o,null,A,y)):en(i,o,A,y),o.memoizedState=h.state,p&&ty(o,u,!0),o.child}function Yy(i){var o=i.stateNode;o.pendingContext?Zg(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Zg(i,o.context,!1),_f(i,o.containerInfo)}function Xy(i,o,u,h,p){return Qo(),hf(p),o.flags|=256,en(i,o,u,h),o.child}var Lf={dehydrated:null,treeContext:null,retryLane:0};function Mf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Zy(i,o,u){var h=o.pendingProps,p=st.current,y=!1,w=(o.flags&128)!==0,A;if((A=w)||(A=i!==null&&i.memoizedState===null?!1:(p&2)!==0),A?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Ye(st,p&1),i===null)return cf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(w=h.children,i=h.fallback,y?(h=o.mode,y=o.child,w={mode:"hidden",children:w},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=w):y=Yc(w,h,0,null),i=js(i,h,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Mf(u),o.memoizedState=Lf,i):Ff(o,w));if(p=i.memoizedState,p!==null&&(A=p.dehydrated,A!==null))return eR(i,o,w,h,A,p,u);if(y){y=h.fallback,w=o.mode,p=i.child,A=p.sibling;var D={mode:"hidden",children:h.children};return!(w&1)&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=D,o.deletions=null):(h=Ni(p,D),h.subtreeFlags=p.subtreeFlags&14680064),A!==null?y=Ni(A,y):(y=js(y,w,u,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,w=i.child.memoizedState,w=w===null?Mf(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~u,o.memoizedState=Lf,h}return y=i.child,i=y.sibling,h=Ni(y,{mode:"visible",children:h.children}),!(o.mode&1)&&(h.lanes=u),h.return=o,h.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=h,o.memoizedState=null,h}function Ff(i,o){return o=Yc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Fc(i,o,u,h){return h!==null&&hf(h),Jo(o,i.child,null,u),i=Ff(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function eR(i,o,u,h,p,y,w){if(u)return o.flags&256?(o.flags&=-257,h=bf(Error(t(422))),Fc(i,o,w,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=Yc({mode:"visible",children:h.children},p,0,null),y=js(y,p,w,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,o.mode&1&&Jo(o,i.child,null,w),o.child.memoizedState=Mf(w),o.memoizedState=Lf,y);if(!(o.mode&1))return Fc(i,o,w,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var A=h.dgst;return h=A,y=Error(t(419)),h=bf(y,h,void 0),Fc(i,o,w,h)}if(A=(w&i.childLanes)!==0,hn||A){if(h=Dt,h!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(h.suspendedLanes|w)?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Kr(i,p),Zn(h,i,p,-1))}return ep(),h=bf(Error(t(421))),Fc(i,o,w,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=fR.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,Tn=Ii(p.nextSibling),In=o,nt=!0,Qn=null,i!==null&&(bn[Nn++]=$r,bn[Nn++]=qr,bn[Nn++]=Ns,$r=i.id,qr=i.overflow,Ns=o),o=Ff(o,h.children),o.flags|=4096,o)}function e_(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),mf(i.return,o,u)}function Uf(i,o,u,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=p)}function t_(i,o,u){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(en(i,o,h.children,u),h=st.current,h&2)h=h&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&e_(i,u,o);else if(i.tag===19)e_(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(Ye(st,h),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(u=o.child,p=null;u!==null;)i=u.alternate,i!==null&&Dc(i)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),Uf(o,!1,p,u,y);break;case"backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&Dc(i)===null){o.child=p;break}i=p.sibling,p.sibling=u,u=p,p=i}Uf(o,!0,u,null,y);break;case"together":Uf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Uc(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Hr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Fs|=o.lanes,!(u&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Ni(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ni(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function tR(i,o,u){switch(o.tag){case 3:Yy(o),Qo();break;case 5:my(o);break;case 1:cn(o.type)&&Ec(o);break;case 4:_f(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;Ye(Pc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(Ye(st,st.current&1),o.flags|=128,null):u&o.child.childLanes?Zy(i,o,u):(Ye(st,st.current&1),i=Hr(i,o,u),i!==null?i.sibling:null);Ye(st,st.current&1);break;case 19:if(h=(u&o.childLanes)!==0,i.flags&128){if(h)return t_(i,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ye(st,st.current),h)break;return null;case 22:case 23:return o.lanes=0,Wy(i,o,u)}return Hr(i,o,u)}var n_,Bf,r_,i_;n_=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Bf=function(){},r_=function(i,o,u,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,Ls(pr.current);var y=null;switch(u){case"input":p=ms(i,p),h=ms(i,h),y=[];break;case"select":p=he({},p,{value:void 0}),h=he({},h,{value:void 0}),y=[];break;case"textarea":p=Za(i,p),h=Za(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=_c)}su(u,h);var w;u=null;for($ in p)if(!h.hasOwnProperty($)&&p.hasOwnProperty($)&&p[$]!=null)if($==="style"){var A=p[$];for(w in A)A.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(s.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in h){var D=h[$];if(A=p!=null?p[$]:void 0,h.hasOwnProperty($)&&D!==A&&(D!=null||A!=null))if($==="style")if(A){for(w in A)!A.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in D)D.hasOwnProperty(w)&&A[w]!==D[w]&&(u||(u={}),u[w]=D[w])}else u||(y||(y=[]),y.push($,u)),u=D;else $==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,A=A?A.__html:void 0,D!=null&&A!==D&&(y=y||[]).push($,D)):$==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push($,""+D):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(s.hasOwnProperty($)?(D!=null&&$==="onScroll"&&Ze("scroll",i),y||A===D||(y=[])):(y=y||[]).push($,D))}u&&(y=y||[]).push("style",u);var $=y;(o.updateQueue=$)&&(o.flags|=4)}},i_=function(i,o,u,h){u!==h&&(o.flags|=4)};function Uu(i,o){if(!nt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function $t(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var p=i.child;p!==null;)u|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)u|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function nR(i,o,u){var h=o.pendingProps;switch(uf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(o),null;case 1:return cn(o.type)&&wc(),$t(o),null;case 3:return h=o.stateNode,Zo(),et(ln),et(zt),Ef(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Rc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Qn!==null&&(Yf(Qn),Qn=null))),Bf(i,o),$t(o),null;case 5:vf(o);var p=Ls(Vu.current);if(u=o.type,i!==null&&o.stateNode!=null)r_(i,o,u,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return $t(o),null}if(i=Ls(pr.current),Rc(o)){h=o.stateNode,u=o.type;var y=o.memoizedProps;switch(h[fr]=o,h[ku]=y,i=(o.mode&1)!==0,u){case"dialog":Ze("cancel",h),Ze("close",h);break;case"iframe":case"object":case"embed":Ze("load",h);break;case"video":case"audio":for(p=0;p<Au.length;p++)Ze(Au[p],h);break;case"source":Ze("error",h);break;case"img":case"image":case"link":Ze("error",h),Ze("load",h);break;case"details":Ze("toggle",h);break;case"input":po(h,y),Ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Ze("invalid",h);break;case"textarea":go(h,y),Ze("invalid",h)}su(u,y),p=null;for(var w in y)if(y.hasOwnProperty(w)){var A=y[w];w==="children"?typeof A=="string"?h.textContent!==A&&(y.suppressHydrationWarning!==!0&&yc(h.textContent,A,i),p=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(y.suppressHydrationWarning!==!0&&yc(h.textContent,A,i),p=["children",""+A]):s.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&Ze("scroll",h)}switch(u){case"input":Dr(h),$l(h,y,!0);break;case"textarea":Dr(h),eu(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=_c)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=wt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=w.createElement(u,{is:h.is}):(i=w.createElement(u),u==="select"&&(w=i,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):i=w.createElementNS(i,u),i[fr]=o,i[ku]=h,n_(i,o,!1,!1),o.stateNode=i;e:{switch(w=ou(u,h),u){case"dialog":Ze("cancel",i),Ze("close",i),p=h;break;case"iframe":case"object":case"embed":Ze("load",i),p=h;break;case"video":case"audio":for(p=0;p<Au.length;p++)Ze(Au[p],i);p=h;break;case"source":Ze("error",i),p=h;break;case"img":case"image":case"link":Ze("error",i),Ze("load",i),p=h;break;case"details":Ze("toggle",i),p=h;break;case"input":po(i,h),p=ms(i,h),Ze("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=he({},h,{value:void 0}),Ze("invalid",i);break;case"textarea":go(i,h),p=Za(i,h),Ze("invalid",i);break;default:p=h}su(u,p),A=p;for(y in A)if(A.hasOwnProperty(y)){var D=A[y];y==="style"?ru(i,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&tu(i,D)):y==="children"?typeof D=="string"?(u!=="textarea"||D!=="")&&hi(i,D):typeof D=="number"&&hi(i,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?D!=null&&y==="onScroll"&&Ze("scroll",i):D!=null&&H(i,y,D,w))}switch(u){case"input":Dr(i),$l(i,h,!1);break;case"textarea":Dr(i),eu(i);break;case"option":h.value!=null&&i.setAttribute("value",""+ze(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Nr(i,!!h.multiple,y,!1):h.defaultValue!=null&&Nr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=_c)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return $t(o),null;case 6:if(i&&o.stateNode!=null)i_(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(u=Ls(Vu.current),Ls(pr.current),Rc(o)){if(h=o.stateNode,u=o.memoizedProps,h[fr]=o,(y=h.nodeValue!==u)&&(i=In,i!==null))switch(i.tag){case 3:yc(h.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&yc(h.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[fr]=o,o.stateNode=h}return $t(o),null;case 13:if(et(st),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(nt&&Tn!==null&&o.mode&1&&!(o.flags&128))ay(),Qo(),o.flags|=98560,y=!1;else if(y=Rc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[fr]=o}else Qo(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;$t(o),y=!1}else Qn!==null&&(Yf(Qn),Qn=null),y=!0;if(!y)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(i===null||st.current&1?St===0&&(St=3):ep())),o.updateQueue!==null&&(o.flags|=4),$t(o),null);case 4:return Zo(),Bf(i,o),i===null&&Pu(o.stateNode.containerInfo),$t(o),null;case 10:return pf(o.type._context),$t(o),null;case 17:return cn(o.type)&&wc(),$t(o),null;case 19:if(et(st),y=o.memoizedState,y===null)return $t(o),null;if(h=(o.flags&128)!==0,w=y.rendering,w===null)if(h)Uu(y,!1);else{if(St!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(w=Dc(i),w!==null){for(o.flags|=128,Uu(y,!1),h=w.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=u,u=o.child;u!==null;)y=u,i=h,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ye(st,st.current&1|2),o.child}i=i.sibling}y.tail!==null&&Je()>ra&&(o.flags|=128,h=!0,Uu(y,!1),o.lanes=4194304)}else{if(!h)if(i=Dc(w),i!==null){if(o.flags|=128,h=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Uu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!nt)return $t(o),null}else 2*Je()-y.renderingStartTime>ra&&u!==1073741824&&(o.flags|=128,h=!0,Uu(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(u=y.last,u!==null?u.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Je(),o.sibling=null,u=st.current,Ye(st,h?u&1|2:u&1),o):($t(o),null);case 22:case 23:return Zf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?Sn&1073741824&&($t(o),o.subtreeFlags&6&&(o.flags|=8192)):$t(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function rR(i,o){switch(uf(o),o.tag){case 1:return cn(o.type)&&wc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Zo(),et(ln),et(zt),Ef(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return vf(o),null;case 13:if(et(st),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Qo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return et(st),null;case 4:return Zo(),null;case 10:return pf(o.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var Bc=!1,qt=!1,iR=typeof WeakSet=="function"?WeakSet:Set,de=null;function ta(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){lt(i,o,h)}else u.current=null}function zf(i,o,u){try{u()}catch(h){lt(i,o,h)}}var s_=!1;function sR(i,o){if(Xd=vi,i=Mg(),qd(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var w=0,A=-1,D=-1,$=0,ee=0,ne=i,X=null;t:for(;;){for(var ce;ne!==u||p!==0&&ne.nodeType!==3||(A=w+p),ne!==y||h!==0&&ne.nodeType!==3||(D=w+h),ne.nodeType===3&&(w+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)X=ne,ne=ce;for(;;){if(ne===i)break t;if(X===u&&++$===p&&(A=w),X===y&&++ee===h&&(D=w),(ce=ne.nextSibling)!==null)break;ne=X,X=ne.parentNode}ne=ce}u=A===-1||D===-1?null:{start:A,end:D}}else u=null}u=u||{start:0,end:0}}else u=null;for(Zd={focusedElem:i,selectionRange:u},vi=!1,de=o;de!==null;)if(o=de,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,de=i;else for(;de!==null;){o=de;try{var fe=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,pt=fe.memoizedState,z=o.stateNode,O=z.getSnapshotBeforeUpdate(o.elementType===o.type?me:Jn(o.type,me),pt);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var j=o.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){lt(o,o.return,re)}if(i=o.sibling,i!==null){i.return=o.return,de=i;break}de=o.return}return fe=s_,s_=!1,fe}function Bu(i,o,u){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&zf(o,u,y)}p=p.next}while(p!==h)}}function zc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var h=u.create;u.destroy=h()}u=u.next}while(u!==o)}}function jf(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function o_(i){var o=i.alternate;o!==null&&(i.alternate=null,o_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[fr],delete o[ku],delete o[rf],delete o[zS],delete o[jS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function a_(i){return i.tag===5||i.tag===3||i.tag===4}function u_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||a_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $f(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=_c));else if(h!==4&&(i=i.child,i!==null))for($f(i,o,u),i=i.sibling;i!==null;)$f(i,o,u),i=i.sibling}function qf(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(qf(i,o,u),i=i.sibling;i!==null;)qf(i,o,u),i=i.sibling}var Lt=null,Yn=!1;function Ci(i,o,u){for(u=u.child;u!==null;)l_(i,o,u),u=u.sibling}function l_(i,o,u){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Ss,u)}catch{}switch(u.tag){case 5:qt||ta(u,o);case 6:var h=Lt,p=Yn;Lt=null,Ci(i,o,u),Lt=h,Yn=p,Lt!==null&&(Yn?(i=Lt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Lt.removeChild(u.stateNode));break;case 18:Lt!==null&&(Yn?(i=Lt,u=u.stateNode,i.nodeType===8?nf(i.parentNode,u):i.nodeType===1&&nf(i,u),Gn(i)):nf(Lt,u.stateNode));break;case 4:h=Lt,p=Yn,Lt=u.stateNode.containerInfo,Yn=!0,Ci(i,o,u),Lt=h,Yn=p;break;case 0:case 11:case 14:case 15:if(!qt&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,w=y.destroy;y=y.tag,w!==void 0&&(y&2||y&4)&&zf(u,o,w),p=p.next}while(p!==h)}Ci(i,o,u);break;case 1:if(!qt&&(ta(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(A){lt(u,o,A)}Ci(i,o,u);break;case 21:Ci(i,o,u);break;case 22:u.mode&1?(qt=(h=qt)||u.memoizedState!==null,Ci(i,o,u),qt=h):Ci(i,o,u);break;default:Ci(i,o,u)}}function c_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new iR),o.forEach(function(h){var p=pR.bind(null,i,h);u.has(h)||(u.add(h),h.then(p,p))})}}function Xn(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var p=u[h];try{var y=i,w=o,A=w;e:for(;A!==null;){switch(A.tag){case 5:Lt=A.stateNode,Yn=!1;break e;case 3:Lt=A.stateNode.containerInfo,Yn=!0;break e;case 4:Lt=A.stateNode.containerInfo,Yn=!0;break e}A=A.return}if(Lt===null)throw Error(t(160));l_(y,w,p),Lt=null,Yn=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch($){lt(p,o,$)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)h_(o,i),o=o.sibling}function h_(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Xn(o,i),gr(i),h&4){try{Bu(3,i,i.return),zc(3,i)}catch(me){lt(i,i.return,me)}try{Bu(5,i,i.return)}catch(me){lt(i,i.return,me)}}break;case 1:Xn(o,i),gr(i),h&512&&u!==null&&ta(u,u.return);break;case 5:if(Xn(o,i),gr(i),h&512&&u!==null&&ta(u,u.return),i.flags&32){var p=i.stateNode;try{hi(p,"")}catch(me){lt(i,i.return,me)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,w=u!==null?u.memoizedProps:y,A=i.type,D=i.updateQueue;if(i.updateQueue=null,D!==null)try{A==="input"&&y.type==="radio"&&y.name!=null&&Ya(p,y),ou(A,w);var $=ou(A,y);for(w=0;w<D.length;w+=2){var ee=D[w],ne=D[w+1];ee==="style"?ru(p,ne):ee==="dangerouslySetInnerHTML"?tu(p,ne):ee==="children"?hi(p,ne):H(p,ee,ne,$)}switch(A){case"input":Xa(p,y);break;case"textarea":yo(p,y);break;case"select":var X=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ce=y.value;ce!=null?Nr(p,!!y.multiple,ce,!1):X!==!!y.multiple&&(y.defaultValue!=null?Nr(p,!!y.multiple,y.defaultValue,!0):Nr(p,!!y.multiple,y.multiple?[]:"",!1))}p[ku]=y}catch(me){lt(i,i.return,me)}}break;case 6:if(Xn(o,i),gr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(me){lt(i,i.return,me)}}break;case 3:if(Xn(o,i),gr(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Gn(o.containerInfo)}catch(me){lt(i,i.return,me)}break;case 4:Xn(o,i),gr(i);break;case 13:Xn(o,i),gr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Hf=Je())),h&4&&c_(i);break;case 22:if(ee=u!==null&&u.memoizedState!==null,i.mode&1?(qt=($=qt)||ee,Xn(o,i),qt=$):Xn(o,i),gr(i),h&8192){if($=i.memoizedState!==null,(i.stateNode.isHidden=$)&&!ee&&i.mode&1)for(de=i,ee=i.child;ee!==null;){for(ne=de=ee;de!==null;){switch(X=de,ce=X.child,X.tag){case 0:case 11:case 14:case 15:Bu(4,X,X.return);break;case 1:ta(X,X.return);var fe=X.stateNode;if(typeof fe.componentWillUnmount=="function"){h=X,u=X.return;try{o=h,fe.props=o.memoizedProps,fe.state=o.memoizedState,fe.componentWillUnmount()}catch(me){lt(h,u,me)}}break;case 5:ta(X,X.return);break;case 22:if(X.memoizedState!==null){p_(ne);continue}}ce!==null?(ce.return=X,de=ce):p_(ne)}ee=ee.sibling}e:for(ee=null,ne=i;;){if(ne.tag===5){if(ee===null){ee=ne;try{p=ne.stateNode,$?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(A=ne.stateNode,D=ne.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,A.style.display=nu("display",w))}catch(me){lt(i,i.return,me)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=$?"":ne.memoizedProps}catch(me){lt(i,i.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===i)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===i)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===i)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:Xn(o,i),gr(i),h&4&&c_(i);break;case 21:break;default:Xn(o,i),gr(i)}}function gr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(a_(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(hi(p,""),h.flags&=-33);var y=u_(i);qf(i,y,p);break;case 3:case 4:var w=h.stateNode.containerInfo,A=u_(i);$f(i,A,w);break;default:throw Error(t(161))}}catch(D){lt(i,i.return,D)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function oR(i,o,u){de=i,d_(i)}function d_(i,o,u){for(var h=(i.mode&1)!==0;de!==null;){var p=de,y=p.child;if(p.tag===22&&h){var w=p.memoizedState!==null||Bc;if(!w){var A=p.alternate,D=A!==null&&A.memoizedState!==null||qt;A=Bc;var $=qt;if(Bc=w,(qt=D)&&!$)for(de=p;de!==null;)w=de,D=w.child,w.tag===22&&w.memoizedState!==null?m_(p):D!==null?(D.return=w,de=D):m_(p);for(;y!==null;)de=y,d_(y),y=y.sibling;de=p,Bc=A,qt=$}f_(i)}else p.subtreeFlags&8772&&y!==null?(y.return=p,de=y):f_(i)}}function f_(i){for(;de!==null;){var o=de;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:qt||zc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!qt)if(u===null)h.componentDidMount();else{var p=o.elementType===o.type?u.memoizedProps:Jn(o.type,u.memoizedProps);h.componentDidUpdate(p,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&py(o,y,h);break;case 3:var w=o.updateQueue;if(w!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}py(o,w,u)}break;case 5:var A=o.stateNode;if(u===null&&o.flags&4){u=A;var D=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&u.focus();break;case"img":D.src&&(u.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var $=o.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&Gn(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||o.flags&512&&jf(o)}catch(X){lt(o,o.return,X)}}if(o===i){de=null;break}if(u=o.sibling,u!==null){u.return=o.return,de=u;break}de=o.return}}function p_(i){for(;de!==null;){var o=de;if(o===i){de=null;break}var u=o.sibling;if(u!==null){u.return=o.return,de=u;break}de=o.return}}function m_(i){for(;de!==null;){var o=de;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{zc(4,o)}catch(D){lt(o,u,D)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(D){lt(o,p,D)}}var y=o.return;try{jf(o)}catch(D){lt(o,y,D)}break;case 5:var w=o.return;try{jf(o)}catch(D){lt(o,w,D)}}}catch(D){lt(o,o.return,D)}if(o===i){de=null;break}var A=o.sibling;if(A!==null){A.return=o.return,de=A;break}de=o.return}}var aR=Math.ceil,jc=te.ReactCurrentDispatcher,Kf=te.ReactCurrentOwner,Ln=te.ReactCurrentBatchConfig,Fe=0,Dt=null,_t=null,Mt=0,Sn=0,na=Ti(0),St=0,zu=null,Fs=0,$c=0,Gf=0,ju=null,dn=null,Hf=0,ra=1/0,Wr=null,qc=!1,Wf=null,ki=null,Kc=!1,xi=null,Gc=0,$u=0,Qf=null,Hc=-1,Wc=0;function tn(){return Fe&6?Je():Hc!==-1?Hc:Hc=Je()}function Di(i){return i.mode&1?Fe&2&&Mt!==0?Mt&-Mt:qS.transition!==null?(Wc===0&&(Wc=As()),Wc):(i=Ve,i!==0||(i=window.event,i=i===void 0?16:yu(i.type)),i):1}function Zn(i,o,u,h){if(50<$u)throw $u=0,Qf=null,Error(t(185));mi(i,u,h),(!(Fe&2)||i!==Dt)&&(i===Dt&&(!(Fe&2)&&($c|=u),St===4&&bi(i,Mt)),fn(i,h),u===1&&Fe===0&&!(o.mode&1)&&(ra=Je()+500,Ic&&Ri()))}function fn(i,o){var u=i.callbackNode;Lr(i,o);var h=Rs(i,i===Dt?Mt:0);if(h===0)u!==null&&du(u),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(u!=null&&du(u),o===1)i.tag===0?$S(y_.bind(null,i)):ny(y_.bind(null,i)),US(function(){!(Fe&6)&&Ri()}),u=null;else{switch(yi(h)){case 1:u=Ts;break;case 4:u=di;break;case 16:u=kn;break;case 536870912:u=Wl;break;default:u=kn}u=R_(u,g_.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function g_(i,o){if(Hc=-1,Wc=0,Fe&6)throw Error(t(327));var u=i.callbackNode;if(ia()&&i.callbackNode!==u)return null;var h=Rs(i,i===Dt?Mt:0);if(h===0)return null;if(h&30||h&i.expiredLanes||o)o=Qc(i,h);else{o=h;var p=Fe;Fe|=2;var y=v_();(Dt!==i||Mt!==o)&&(Wr=null,ra=Je()+500,Bs(i,o));do try{cR();break}catch(A){__(i,A)}while(!0);ff(),jc.current=y,Fe=p,_t!==null?o=0:(Dt=null,Mt=0,o=St)}if(o!==0){if(o===2&&(p=vn(i),p!==0&&(h=p,o=Jf(i,p))),o===1)throw u=zu,Bs(i,0),bi(i,h),fn(i,Je()),u;if(o===6)bi(i,h);else{if(p=i.current.alternate,!(h&30)&&!uR(p)&&(o=Qc(i,h),o===2&&(y=vn(i),y!==0&&(h=y,o=Jf(i,y))),o===1))throw u=zu,Bs(i,0),bi(i,h),fn(i,Je()),u;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:zs(i,dn,Wr);break;case 3:if(bi(i,h),(h&130023424)===h&&(o=Hf+500-Je(),10<o)){if(Rs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){tn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=tf(zs.bind(null,i,dn,Wr),o);break}zs(i,dn,Wr);break;case 4:if(bi(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var w=31-Xt(h);y=1<<w,w=o[w],w>p&&(p=w),h&=~y}if(h=p,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*aR(h/1960))-h,10<h){i.timeoutHandle=tf(zs.bind(null,i,dn,Wr),h);break}zs(i,dn,Wr);break;case 5:zs(i,dn,Wr);break;default:throw Error(t(329))}}}return fn(i,Je()),i.callbackNode===u?g_.bind(null,i):null}function Jf(i,o){var u=ju;return i.current.memoizedState.isDehydrated&&(Bs(i,o).flags|=256),i=Qc(i,o),i!==2&&(o=dn,dn=u,o!==null&&Yf(o)),i}function Yf(i){dn===null?dn=i:dn.push.apply(dn,i)}function uR(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var p=u[h],y=p.getSnapshot;p=p.value;try{if(!Wn(y(),p))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bi(i,o){for(o&=~Gf,o&=~$c,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Xt(o),h=1<<u;i[u]=-1,o&=~h}}function y_(i){if(Fe&6)throw Error(t(327));ia();var o=Rs(i,0);if(!(o&1))return fn(i,Je()),null;var u=Qc(i,o);if(i.tag!==0&&u===2){var h=vn(i);h!==0&&(o=h,u=Jf(i,h))}if(u===1)throw u=zu,Bs(i,0),bi(i,o),fn(i,Je()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,zs(i,dn,Wr),fn(i,Je()),null}function Xf(i,o){var u=Fe;Fe|=1;try{return i(o)}finally{Fe=u,Fe===0&&(ra=Je()+500,Ic&&Ri())}}function Us(i){xi!==null&&xi.tag===0&&!(Fe&6)&&ia();var o=Fe;Fe|=1;var u=Ln.transition,h=Ve;try{if(Ln.transition=null,Ve=1,i)return i()}finally{Ve=h,Ln.transition=u,Fe=o,!(Fe&6)&&Ri()}}function Zf(){Sn=na.current,et(na)}function Bs(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,FS(u)),_t!==null)for(u=_t.return;u!==null;){var h=u;switch(uf(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&wc();break;case 3:Zo(),et(ln),et(zt),Ef();break;case 5:vf(h);break;case 4:Zo();break;case 13:et(st);break;case 19:et(st);break;case 10:pf(h.type._context);break;case 22:case 23:Zf()}u=u.return}if(Dt=i,_t=i=Ni(i.current,null),Mt=Sn=o,St=0,zu=null,Gf=$c=Fs=0,dn=ju=null,Os!==null){for(o=0;o<Os.length;o++)if(u=Os[o],h=u.interleaved,h!==null){u.interleaved=null;var p=h.next,y=u.pending;if(y!==null){var w=y.next;y.next=p,h.next=w}u.pending=h}Os=null}return i}function __(i,o){do{var u=_t;try{if(ff(),bc.current=Lc,Nc){for(var h=ot.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Nc=!1}if(Ms=0,xt=Tt=ot=null,Ou=!1,Lu=0,Kf.current=null,u===null||u.return===null){St=1,zu=o,_t=null;break}e:{var y=i,w=u.return,A=u,D=o;if(o=Mt,A.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=D,ee=A,ne=ee.tag;if(!(ee.mode&1)&&(ne===0||ne===11||ne===15)){var X=ee.alternate;X?(ee.updateQueue=X.updateQueue,ee.memoizedState=X.memoizedState,ee.lanes=X.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ce=$y(w);if(ce!==null){ce.flags&=-257,qy(ce,w,A,y,o),ce.mode&1&&jy(y,$,o),o=ce,D=$;var fe=o.updateQueue;if(fe===null){var me=new Set;me.add(D),o.updateQueue=me}else fe.add(D);break e}else{if(!(o&1)){jy(y,$,o),ep();break e}D=Error(t(426))}}else if(nt&&A.mode&1){var pt=$y(w);if(pt!==null){!(pt.flags&65536)&&(pt.flags|=256),qy(pt,w,A,y,o),hf(ea(D,A));break e}}y=D=ea(D,A),St!==4&&(St=2),ju===null?ju=[y]:ju.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=By(y,D,o);fy(y,z);break e;case 1:A=D;var O=y.type,j=y.stateNode;if(!(y.flags&128)&&(typeof O.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ki===null||!ki.has(j)))){y.flags|=65536,o&=-o,y.lanes|=o;var re=zy(y,A,o);fy(y,re);break e}}y=y.return}while(y!==null)}E_(u)}catch(ye){o=ye,_t===u&&u!==null&&(_t=u=u.return);continue}break}while(!0)}function v_(){var i=jc.current;return jc.current=Lc,i===null?Lc:i}function ep(){(St===0||St===3||St===2)&&(St=4),Dt===null||!(Fs&268435455)&&!($c&268435455)||bi(Dt,Mt)}function Qc(i,o){var u=Fe;Fe|=2;var h=v_();(Dt!==i||Mt!==o)&&(Wr=null,Bs(i,o));do try{lR();break}catch(p){__(i,p)}while(!0);if(ff(),Fe=u,jc.current=h,_t!==null)throw Error(t(261));return Dt=null,Mt=0,St}function lR(){for(;_t!==null;)w_(_t)}function cR(){for(;_t!==null&&!Gl();)w_(_t)}function w_(i){var o=S_(i.alternate,i,Sn);i.memoizedProps=i.pendingProps,o===null?E_(i):_t=o,Kf.current=null}function E_(i){var o=i;do{var u=o.alternate;if(i=o.return,o.flags&32768){if(u=rR(u,o),u!==null){u.flags&=32767,_t=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{St=6,_t=null;return}}else if(u=nR(u,o,Sn),u!==null){_t=u;return}if(o=o.sibling,o!==null){_t=o;return}_t=o=i}while(o!==null);St===0&&(St=5)}function zs(i,o,u){var h=Ve,p=Ln.transition;try{Ln.transition=null,Ve=1,hR(i,o,u,h)}finally{Ln.transition=p,Ve=h}return null}function hR(i,o,u,h){do ia();while(xi!==null);if(Fe&6)throw Error(t(327));u=i.finishedWork;var p=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(We(i,y),i===Dt&&(_t=Dt=null,Mt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Kc||(Kc=!0,R_(kn,function(){return ia(),null})),y=(u.flags&15990)!==0,u.subtreeFlags&15990||y){y=Ln.transition,Ln.transition=null;var w=Ve;Ve=1;var A=Fe;Fe|=4,Kf.current=null,sR(i,u),h_(u,i),DS(Zd),vi=!!Xd,Zd=Xd=null,i.current=u,oR(u),Ld(),Fe=A,Ve=w,Ln.transition=y}else i.current=u;if(Kc&&(Kc=!1,xi=i,Gc=p),y=i.pendingLanes,y===0&&(ki=null),Ql(u.stateNode),fn(i,Je()),o!==null)for(h=i.onRecoverableError,u=0;u<o.length;u++)p=o[u],h(p.value,{componentStack:p.stack,digest:p.digest});if(qc)throw qc=!1,i=Wf,Wf=null,i;return Gc&1&&i.tag!==0&&ia(),y=i.pendingLanes,y&1?i===Qf?$u++:($u=0,Qf=i):$u=0,Ri(),null}function ia(){if(xi!==null){var i=yi(Gc),o=Ln.transition,u=Ve;try{if(Ln.transition=null,Ve=16>i?16:i,xi===null)var h=!1;else{if(i=xi,xi=null,Gc=0,Fe&6)throw Error(t(331));var p=Fe;for(Fe|=4,de=i.current;de!==null;){var y=de,w=y.child;if(de.flags&16){var A=y.deletions;if(A!==null){for(var D=0;D<A.length;D++){var $=A[D];for(de=$;de!==null;){var ee=de;switch(ee.tag){case 0:case 11:case 15:Bu(8,ee,y)}var ne=ee.child;if(ne!==null)ne.return=ee,de=ne;else for(;de!==null;){ee=de;var X=ee.sibling,ce=ee.return;if(o_(ee),ee===$){de=null;break}if(X!==null){X.return=ce,de=X;break}de=ce}}}var fe=y.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var pt=me.sibling;me.sibling=null,me=pt}while(me!==null)}}de=y}}if(y.subtreeFlags&2064&&w!==null)w.return=y,de=w;else e:for(;de!==null;){if(y=de,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Bu(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,de=z;break e}de=y.return}}var O=i.current;for(de=O;de!==null;){w=de;var j=w.child;if(w.subtreeFlags&2064&&j!==null)j.return=w,de=j;else e:for(w=O;de!==null;){if(A=de,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:zc(9,A)}}catch(ye){lt(A,A.return,ye)}if(A===w){de=null;break e}var re=A.sibling;if(re!==null){re.return=A.return,de=re;break e}de=A.return}}if(Fe=p,Ri(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Ss,i)}catch{}h=!0}return h}finally{Ve=u,Ln.transition=o}}return!1}function I_(i,o,u){o=ea(u,o),o=By(i,o,1),i=Pi(i,o,1),o=tn(),i!==null&&(mi(i,1,o),fn(i,o))}function lt(i,o,u){if(i.tag===3)I_(i,i,u);else for(;o!==null;){if(o.tag===3){I_(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ki===null||!ki.has(h))){i=ea(u,i),i=zy(o,i,1),o=Pi(o,i,1),i=tn(),o!==null&&(mi(o,1,i),fn(o,i));break}}o=o.return}}function dR(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),o=tn(),i.pingedLanes|=i.suspendedLanes&u,Dt===i&&(Mt&u)===u&&(St===4||St===3&&(Mt&130023424)===Mt&&500>Je()-Hf?Bs(i,0):Gf|=u),fn(i,o)}function T_(i,o){o===0&&(i.mode&1?(o=Po,Po<<=1,!(Po&130023424)&&(Po=4194304)):o=1);var u=tn();i=Kr(i,o),i!==null&&(mi(i,o,u),fn(i,u))}function fR(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),T_(i,u)}function pR(i,o){var u=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(u=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),T_(i,u)}var S_;S_=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||ln.current)hn=!0;else{if(!(i.lanes&u)&&!(o.flags&128))return hn=!1,tR(i,o,u);hn=!!(i.flags&131072)}else hn=!1,nt&&o.flags&1048576&&ry(o,Sc,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Uc(i,o),i=o.pendingProps;var p=Go(o,zt.current);Xo(o,u),p=Sf(null,o,h,i,p,u);var y=Rf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,cn(h)?(y=!0,Ec(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,yf(o),p.updater=Mc,o.stateNode=p,p._reactInternals=o,Df(o,h,i,u),o=Of(null,o,h,!0,y,u)):(o.tag=0,nt&&y&&af(o),en(null,o,p,u),o=o.child),o;case 16:h=o.elementType;e:{switch(Uc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=gR(h),i=Jn(h,i),p){case 0:o=Vf(null,o,h,i,u);break e;case 1:o=Jy(null,o,h,i,u);break e;case 11:o=Ky(null,o,h,i,u);break e;case 14:o=Gy(null,o,h,Jn(h.type,i),u);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Jn(h,p),Vf(i,o,h,p,u);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Jn(h,p),Jy(i,o,h,p,u);case 3:e:{if(Yy(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,dy(i,o),xc(o,h,null,u);var w=o.memoizedState;if(h=w.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=ea(Error(t(423)),o),o=Xy(i,o,h,u,p);break e}else if(h!==p){p=ea(Error(t(424)),o),o=Xy(i,o,h,u,p);break e}else for(Tn=Ii(o.stateNode.containerInfo.firstChild),In=o,nt=!0,Qn=null,u=cy(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Qo(),h===p){o=Hr(i,o,u);break e}en(i,o,h,u)}o=o.child}return o;case 5:return my(o),i===null&&cf(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,w=p.children,ef(h,p)?w=null:y!==null&&ef(h,y)&&(o.flags|=32),Qy(i,o),en(i,o,w,u),o.child;case 6:return i===null&&cf(o),null;case 13:return Zy(i,o,u);case 4:return _f(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Jo(o,null,h,u):en(i,o,h,u),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Jn(h,p),Ky(i,o,h,p,u);case 7:return en(i,o,o.pendingProps,u),o.child;case 8:return en(i,o,o.pendingProps.children,u),o.child;case 12:return en(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,w=p.value,Ye(Pc,h._currentValue),h._currentValue=w,y!==null)if(Wn(y.value,w)){if(y.children===p.children&&!ln.current){o=Hr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var A=y.dependencies;if(A!==null){w=y.child;for(var D=A.firstContext;D!==null;){if(D.context===h){if(y.tag===1){D=Gr(-1,u&-u),D.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?D.next=D:(D.next=ee.next,ee.next=D),$.pending=D}}y.lanes|=u,D=y.alternate,D!==null&&(D.lanes|=u),mf(y.return,u,o),A.lanes|=u;break}D=D.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=u,A=w.alternate,A!==null&&(A.lanes|=u),mf(w,u,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}en(i,o,p.children,u),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,Xo(o,u),p=Vn(p),h=h(p),o.flags|=1,en(i,o,h,u),o.child;case 14:return h=o.type,p=Jn(h,o.pendingProps),p=Jn(h.type,p),Gy(i,o,h,p,u);case 15:return Hy(i,o,o.type,o.pendingProps,u);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Jn(h,p),Uc(i,o),o.tag=1,cn(h)?(i=!0,Ec(o)):i=!1,Xo(o,u),Fy(o,h,p),Df(o,h,p,u),Of(null,o,h,!0,i,u);case 19:return t_(i,o,u);case 22:return Wy(i,o,u)}throw Error(t(156,o.tag))};function R_(i,o){return Ro(i,o)}function mR(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(i,o,u,h){return new mR(i,o,u,h)}function tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gR(i){if(typeof i=="function")return tp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===Ut)return 14}return 2}function Ni(i,o){var u=i.alternate;return u===null?(u=Mn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Jc(i,o,u,h,p,y){var w=2;if(h=i,typeof i=="function")tp(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case k:return js(u.children,p,y,o);case S:w=8,p|=8;break;case R:return i=Mn(12,u,o,p|2),i.elementType=R,i.lanes=y,i;case C:return i=Mn(13,u,o,p),i.elementType=C,i.lanes=y,i;case dt:return i=Mn(19,u,o,p),i.elementType=dt,i.lanes=y,i;case He:return Yc(u,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case b:w=10;break e;case L:w=9;break e;case F:w=11;break e;case Ut:w=14;break e;case Bt:w=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Mn(w,u,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function js(i,o,u,h){return i=Mn(7,i,h,o),i.lanes=u,i}function Yc(i,o,u,h){return i=Mn(22,i,h,o),i.elementType=He,i.lanes=u,i.stateNode={isHidden:!1},i}function np(i,o,u){return i=Mn(6,i,null,o),i.lanes=u,i}function rp(i,o,u){return o=Mn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function yR(i,o,u,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pi(0),this.expirationTimes=pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function ip(i,o,u,h,p,y,w,A,D){return i=new yR(i,o,u,A,D),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Mn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},yf(y),i}function _R(i,o,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:h==null?null:""+h,children:i,containerInfo:o,implementation:u}}function A_(i){if(!i)return Si;i=i._reactInternals;e:{if(zn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(cn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(cn(u))return ey(i,u,o)}return o}function P_(i,o,u,h,p,y,w,A,D){return i=ip(u,h,!0,i,p,y,w,A,D),i.context=A_(null),u=i.current,h=tn(),p=Di(u),y=Gr(h,p),y.callback=o??null,Pi(u,y,p),i.current.lanes=p,mi(i,p,h),fn(i,h),i}function Xc(i,o,u,h){var p=o.current,y=tn(),w=Di(p);return u=A_(u),o.context===null?o.context=u:o.pendingContext=u,o=Gr(y,w),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Pi(p,o,w),i!==null&&(Zn(i,p,w,y),kc(i,p,w)),w}function Zc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function C_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function sp(i,o){C_(i,o),(i=i.alternate)&&C_(i,o)}var k_=typeof reportError=="function"?reportError:function(i){console.error(i)};function op(i){this._internalRoot=i}eh.prototype.render=op.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Xc(i,o,null,null)},eh.prototype.unmount=op.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Us(function(){Xc(null,i,null,null)}),o[zr]=null}};function eh(i){this._internalRoot=i}eh.prototype.unstable_scheduleHydration=function(i){if(i){var o=ec();i={blockedOn:null,target:i,priority:o};for(var u=0;u<lr.length&&o!==0&&o<lr[u].priority;u++);lr.splice(u,0,i),u===0&&rc(i)}};function ap(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function th(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function x_(){}function vR(i,o,u,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var $=Zc(w);y.call($)}}var w=P_(o,h,i,0,null,!1,!1,"",x_);return i._reactRootContainer=w,i[zr]=w.current,Pu(i.nodeType===8?i.parentNode:i),Us(),w}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var A=h;h=function(){var $=Zc(D);A.call($)}}var D=ip(i,0,!1,null,null,!1,!1,"",x_);return i._reactRootContainer=D,i[zr]=D.current,Pu(i.nodeType===8?i.parentNode:i),Us(function(){Xc(o,D,u,h)}),D}function nh(i,o,u,h,p){var y=u._reactRootContainer;if(y){var w=y;if(typeof p=="function"){var A=p;p=function(){var D=Zc(w);A.call(D)}}Xc(o,w,i,p)}else w=vR(u,o,i,p,h);return Zc(w)}Xl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=fi(o.pendingLanes);u!==0&&(gi(o,u|1),fn(o,Je()),!(Fe&6)&&(ra=Je()+500,Ri()))}break;case 13:Us(function(){var h=Kr(i,1);if(h!==null){var p=tn();Zn(h,i,1,p)}}),sp(i,1)}},Co=function(i){if(i.tag===13){var o=Kr(i,134217728);if(o!==null){var u=tn();Zn(o,i,134217728,u)}sp(i,134217728)}},Zl=function(i){if(i.tag===13){var o=Di(i),u=Kr(i,o);if(u!==null){var h=tn();Zn(u,i,o,h)}sp(i,o)}},ec=function(){return Ve},tc=function(i,o){var u=Ve;try{return Ve=i,o()}finally{Ve=u}},vo=function(i,o,u){switch(o){case"input":if(Xa(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var p=vc(h);if(!p)throw Error(t(90));fo(h),Xa(h,p)}}}break;case"textarea":yo(i,u);break;case"select":o=u.value,o!=null&&Nr(i,!!u.multiple,o,!1)}},vs=Xf,uu=Us;var wR={usingClientEntryPoint:!1,Events:[xu,qo,vc,ar,au,Xf]},qu={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ER={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=hu(i),i===null?null:i.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{Ss=rh.inject(ER),_n=rh}catch{}}return pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR,pn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(o))throw Error(t(200));return _R(i,o,null,u)},pn.createRoot=function(i,o){if(!ap(i))throw Error(t(299));var u=!1,h="",p=k_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=ip(i,1,!1,null,null,u,!1,h,p),i[zr]=o.current,Pu(i.nodeType===8?i.parentNode:i),new op(o)},pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=hu(o),i=i===null?null:i.stateNode,i},pn.flushSync=function(i){return Us(i)},pn.hydrate=function(i,o,u){if(!th(o))throw Error(t(200));return nh(null,i,o,!0,u)},pn.hydrateRoot=function(i,o,u){if(!ap(i))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,p=!1,y="",w=k_;if(u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),o=P_(o,null,i,1,u??null,p,!1,y,w),i[zr]=o.current,Pu(i),h)for(i=0;i<h.length;i++)u=h[i],p=u._getVersion,p=p(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,p]:o.mutableSourceEagerHydrationData.push(u,p);return new eh(o)},pn.render=function(i,o,u){if(!th(o))throw Error(t(200));return nh(null,i,o,!1,u)},pn.unmountComponentAtNode=function(i){if(!th(i))throw Error(t(40));return i._reactRootContainer?(Us(function(){nh(null,null,i,!1,function(){i._reactRootContainer=null,i[zr]=null})}),!0):!1},pn.unstable_batchedUpdates=Xf,pn.unstable_renderSubtreeIntoContainer=function(i,o,u,h){if(!th(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return nh(i,o,u,!1,h)},pn.version="18.3.1-next-f1338f8080-20240426",pn}var B_;function xR(){if(B_)return hp.exports;B_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hp.exports=kR(),hp.exports}var z_;function DR(){if(z_)return sh;z_=1;var n=xR();return sh.createRoot=n.createRoot,sh.hydrateRoot=n.hydrateRoot,sh}var bR=DR();const Zb=Zw(bR);var od=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ad=typeof window>"u"||"Deno"in globalThis;function er(){}function NR(n,e){return typeof n=="function"?n(e):n}function VR(n){return typeof n=="number"&&n>=0&&n!==1/0}function OR(n,e){return Math.max(n+(e||0)-Date.now(),0)}function j_(n,e){return typeof n=="function"?n(e):n}function LR(n,e){return typeof n=="function"?n(e):n}function $_(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:d}=n;if(l){if(r){if(e.queryHash!==hm(l,e.options))return!1}else if(!dl(e.queryKey,l))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||s&&s!==e.state.fetchStatus||a&&!a(e))}function q_(n,e){const{exact:t,status:r,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(hl(e.options.mutationKey)!==hl(a))return!1}else if(!dl(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function hm(n,e){return((e==null?void 0:e.queryKeyHashFn)||hl)(n)}function hl(n){return JSON.stringify(n,(e,t)=>Dp(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function dl(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!dl(n[t],e[t])):!1}function eE(n,e){if(n===e)return n;const t=K_(n)&&K_(e);if(t||Dp(n)&&Dp(e)){const r=t?n:Object.keys(n),s=r.length,a=t?e:Object.keys(e),l=a.length,d=t?[]:{};let f=0;for(let m=0;m<l;m++){const v=t?m:a[m];(!t&&r.includes(v)||t)&&n[v]===void 0&&e[v]===void 0?(d[v]=void 0,f++):(d[v]=eE(n[v],e[v]),d[v]===n[v]&&n[v]!==void 0&&f++)}return s===l&&f===s?n:d}return e}function K_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Dp(n){if(!G_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!G_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function G_(n){return Object.prototype.toString.call(n)==="[object Object]"}function MR(n){return new Promise(e=>{setTimeout(e,n)})}function FR(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?eE(n,e):e}function UR(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function BR(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var dm=Symbol();function tE(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===dm?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Js,qi,va,Kw,zR=(Kw=class extends od{constructor(){super();je(this,Js);je(this,qi);je(this,va);Pe(this,va,e=>{if(!ad&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){J(this,qi)||this.setEventListener(J(this,va))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,qi))==null||e.call(this),Pe(this,qi,void 0))}setEventListener(e){var t;Pe(this,va,e),(t=J(this,qi))==null||t.call(this),Pe(this,qi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,Js)!==e&&(Pe(this,Js,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof J(this,Js)=="boolean"?J(this,Js):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Js=new WeakMap,qi=new WeakMap,va=new WeakMap,Kw),nE=new zR,wa,Ki,Ea,Gw,jR=(Gw=class extends od{constructor(){super();je(this,wa,!0);je(this,Ki);je(this,Ea);Pe(this,Ea,e=>{if(!ad&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Ki)||this.setEventListener(J(this,Ea))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Ki))==null||e.call(this),Pe(this,Ki,void 0))}setEventListener(e){var t;Pe(this,Ea,e),(t=J(this,Ki))==null||t.call(this),Pe(this,Ki,e(this.setOnline.bind(this)))}setOnline(e){J(this,wa)!==e&&(Pe(this,wa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,wa)}},wa=new WeakMap,Ki=new WeakMap,Ea=new WeakMap,Gw),Nh=new jR;function $R(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function qR(n){return Math.min(1e3*2**n,3e4)}function rE(n){return(n??"online")==="online"?Nh.isOnline():!0}var iE=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function pp(n){return n instanceof iE}function sE(n){let e=!1,t=0,r=!1,s;const a=$R(),l=V=>{var x;r||(I(new iE(V)),(x=n.abort)==null||x.call(n))},d=()=>{e=!0},f=()=>{e=!1},m=()=>nE.isFocused()&&(n.networkMode==="always"||Nh.isOnline())&&n.canRun(),v=()=>rE(n.networkMode)&&n.canRun(),E=V=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,V),s==null||s(),a.resolve(V))},I=V=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,V),s==null||s(),a.reject(V))},P=()=>new Promise(V=>{var x;s=q=>{(r||m())&&V(q)},(x=n.onPause)==null||x.call(n)}).then(()=>{var V;s=void 0,r||(V=n.onContinue)==null||V.call(n)}),N=()=>{if(r)return;let V;const x=t===0?n.initialPromise:void 0;try{V=x??n.fn()}catch(q){V=Promise.reject(q)}Promise.resolve(V).then(E).catch(q=>{var ae;if(r)return;const G=n.retry??(ad?0:3),H=n.retryDelay??qR,te=typeof H=="function"?H(t,q):H,le=G===!0||typeof G=="number"&&t<G||typeof G=="function"&&G(t,q);if(e||!le){I(q);return}t++,(ae=n.onFail)==null||ae.call(n,t,q),MR(te).then(()=>m()?void 0:P()).then(()=>{e?I(q):N()})})};return{promise:a,cancel:l,continue:()=>(s==null||s(),a),cancelRetry:d,continueRetry:f,canStart:v,start:()=>(v()?N():P().then(N),a)}}function KR(){let n=[],e=0,t=d=>{d()},r=d=>{d()},s=d=>setTimeout(d,0);const a=d=>{e?n.push(d):s(()=>{t(d)})},l=()=>{const d=n;n=[],d.length&&s(()=>{r(()=>{d.forEach(f=>{t(f)})})})};return{batch:d=>{let f;e++;try{f=d()}finally{e--,e||l()}return f},batchCalls:d=>(...f)=>{a(()=>{d(...f)})},schedule:a,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{s=d}}}var rn=KR(),Ys,Hw,oE=(Hw=class{constructor(){je(this,Ys)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),VR(this.gcTime)&&Pe(this,Ys,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ad?1/0:5*60*1e3))}clearGcTimeout(){J(this,Ys)&&(clearTimeout(J(this,Ys)),Pe(this,Ys,void 0))}},Ys=new WeakMap,Hw),Ia,Ta,Fn,Ht,Pl,Xs,tr,Qr,Ww,GR=(Ww=class extends oE{constructor(t){super();je(this,tr);je(this,Ia);je(this,Ta);je(this,Fn);je(this,Ht);je(this,Pl);je(this,Xs);Pe(this,Xs,!1),Pe(this,Pl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Pe(this,Fn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Pe(this,Ia,WR(this.options)),this.state=t.state??J(this,Ia),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=J(this,Ht))==null?void 0:t.promise}setOptions(t){this.options={...J(this,Pl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Fn).remove(this)}setData(t,r){const s=FR(this.state.data,t,this.options);return Kt(this,tr,Qr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Kt(this,tr,Qr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=J(this,Ht))==null?void 0:s.promise;return(a=J(this,Ht))==null||a.cancel(t),r?r.then(er).catch(er):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Ia))}isActive(){return this.observers.some(t=>LR(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!OR(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=J(this,Ht))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=J(this,Ht))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),J(this,Fn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(J(this,Ht)&&(J(this,Xs)?J(this,Ht).cancel({revert:!0}):J(this,Ht).cancelRetry()),this.scheduleGc()),J(this,Fn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Kt(this,tr,Qr).call(this,{type:"invalidate"})}fetch(t,r){var m,v,E;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(J(this,Ht))return J(this,Ht).continueRetry(),J(this,Ht).promise}if(t&&this.setOptions(t),!this.options.queryFn){const I=this.observers.find(P=>P.options.queryFn);I&&this.setOptions(I.options)}const s=new AbortController,a=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(Pe(this,Xs,!0),s.signal)})},l=()=>{const I=tE(this.options,r),P={queryKey:this.queryKey,meta:this.meta};return a(P),Pe(this,Xs,!1),this.options.persister?this.options.persister(I,P,this):I(P)},d={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:l};a(d),(m=this.options.behavior)==null||m.onFetch(d,this),Pe(this,Ta,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=d.fetchOptions)==null?void 0:v.meta))&&Kt(this,tr,Qr).call(this,{type:"fetch",meta:(E=d.fetchOptions)==null?void 0:E.meta});const f=I=>{var P,N,V,x;pp(I)&&I.silent||Kt(this,tr,Qr).call(this,{type:"error",error:I}),pp(I)||((N=(P=J(this,Fn).config).onError)==null||N.call(P,I,this),(x=(V=J(this,Fn).config).onSettled)==null||x.call(V,this.state.data,I,this)),this.scheduleGc()};return Pe(this,Ht,sE({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,abort:s.abort.bind(s),onSuccess:I=>{var P,N,V,x;if(I===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(I)}catch(q){f(q);return}(N=(P=J(this,Fn).config).onSuccess)==null||N.call(P,I,this),(x=(V=J(this,Fn).config).onSettled)==null||x.call(V,I,this.state.error,this),this.scheduleGc()},onError:f,onFail:(I,P)=>{Kt(this,tr,Qr).call(this,{type:"failed",failureCount:I,error:P})},onPause:()=>{Kt(this,tr,Qr).call(this,{type:"pause"})},onContinue:()=>{Kt(this,tr,Qr).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0})),J(this,Ht).start()}},Ia=new WeakMap,Ta=new WeakMap,Fn=new WeakMap,Ht=new WeakMap,Pl=new WeakMap,Xs=new WeakMap,tr=new WeakSet,Qr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...HR(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return pp(a)&&a.revert&&J(this,Ta)?{...J(this,Ta),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),rn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),J(this,Fn).notify({query:this,type:"updated",action:t})})},Ww);function HR(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rE(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function WR(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var _r,Qw,QR=(Qw=class extends od{constructor(e={}){super();je(this,_r);this.config=e,Pe(this,_r,new Map)}build(e,t,r){const s=t.queryKey,a=t.queryHash??hm(s,t);let l=this.get(a);return l||(l=new GR({cache:this,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){J(this,_r).has(e.queryHash)||(J(this,_r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=J(this,_r).get(e.queryHash);t&&(e.destroy(),t===e&&J(this,_r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,_r).get(e)}getAll(){return[...J(this,_r).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>$_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>$_(e,r)):t}notify(e){rn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){rn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_r=new WeakMap,Qw),vr,nn,Zs,wr,Fi,Jw,JR=(Jw=class extends oE{constructor(t){super();je(this,wr);je(this,vr);je(this,nn);je(this,Zs);this.mutationId=t.mutationId,Pe(this,nn,t.mutationCache),Pe(this,vr,[]),this.state=t.state||YR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){J(this,vr).includes(t)||(J(this,vr).push(t),this.clearGcTimeout(),J(this,nn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Pe(this,vr,J(this,vr).filter(r=>r!==t)),this.scheduleGc(),J(this,nn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){J(this,vr).length||(this.state.status==="pending"?this.scheduleGc():J(this,nn).remove(this))}continue(){var t;return((t=J(this,Zs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,l,d,f,m,v,E,I,P,N,V,x,q,G,H,te,le,ae,k,S;Pe(this,Zs,sE({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,b)=>{Kt(this,wr,Fi).call(this,{type:"failed",failureCount:R,error:b})},onPause:()=>{Kt(this,wr,Fi).call(this,{type:"pause"})},onContinue:()=>{Kt(this,wr,Fi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,nn).canRun(this)}));const r=this.state.status==="pending",s=!J(this,Zs).canStart();try{if(!r){Kt(this,wr,Fi).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(a=J(this,nn).config).onMutate)==null?void 0:l.call(a,t,this));const b=await((f=(d=this.options).onMutate)==null?void 0:f.call(d,t));b!==this.state.context&&Kt(this,wr,Fi).call(this,{type:"pending",context:b,variables:t,isPaused:s})}const R=await J(this,Zs).start();return await((v=(m=J(this,nn).config).onSuccess)==null?void 0:v.call(m,R,t,this.state.context,this)),await((I=(E=this.options).onSuccess)==null?void 0:I.call(E,R,t,this.state.context)),await((N=(P=J(this,nn).config).onSettled)==null?void 0:N.call(P,R,null,this.state.variables,this.state.context,this)),await((x=(V=this.options).onSettled)==null?void 0:x.call(V,R,null,t,this.state.context)),Kt(this,wr,Fi).call(this,{type:"success",data:R}),R}catch(R){try{throw await((G=(q=J(this,nn).config).onError)==null?void 0:G.call(q,R,t,this.state.context,this)),await((te=(H=this.options).onError)==null?void 0:te.call(H,R,t,this.state.context)),await((ae=(le=J(this,nn).config).onSettled)==null?void 0:ae.call(le,void 0,R,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,R,t,this.state.context)),R}finally{Kt(this,wr,Fi).call(this,{type:"error",error:R})}}finally{J(this,nn).runNext(this)}}},vr=new WeakMap,nn=new WeakMap,Zs=new WeakMap,wr=new WeakSet,Fi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),rn.batch(()=>{J(this,vr).forEach(s=>{s.onMutationUpdate(t)}),J(this,nn).notify({mutation:this,type:"updated",action:t})})},Jw);function YR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jr,nr,Cl,Yw,XR=(Yw=class extends od{constructor(e={}){super();je(this,Jr);je(this,nr);je(this,Cl);this.config=e,Pe(this,Jr,new Set),Pe(this,nr,new Map),Pe(this,Cl,0)}build(e,t,r){const s=new JR({mutationCache:this,mutationId:++ih(this,Cl)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){J(this,Jr).add(e);const t=oh(e);if(typeof t=="string"){const r=J(this,nr).get(t);r?r.push(e):J(this,nr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,Jr).delete(e)){const t=oh(e);if(typeof t=="string"){const r=J(this,nr).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&J(this,nr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=oh(e);if(typeof t=="string"){const r=J(this,nr).get(t),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=oh(e);if(typeof t=="string"){const s=(r=J(this,nr).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rn.batch(()=>{J(this,Jr).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,Jr).clear(),J(this,nr).clear()})}getAll(){return Array.from(J(this,Jr))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>q_(t,r))}findAll(e={}){return this.getAll().filter(t=>q_(e,t))}notify(e){rn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return rn.batch(()=>Promise.all(e.map(t=>t.continue().catch(er))))}},Jr=new WeakMap,nr=new WeakMap,Cl=new WeakMap,Yw);function oh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function H_(n){return{onFetch:(e,t)=>{var v,E,I,P,N;const r=e.options,s=(I=(E=(v=e.fetchOptions)==null?void 0:v.meta)==null?void 0:E.fetchMore)==null?void 0:I.direction,a=((P=e.state.data)==null?void 0:P.pages)||[],l=((N=e.state.data)==null?void 0:N.pageParams)||[];let d={pages:[],pageParams:[]},f=0;const m=async()=>{let V=!1;const x=H=>{Object.defineProperty(H,"signal",{enumerable:!0,get:()=>(e.signal.aborted?V=!0:e.signal.addEventListener("abort",()=>{V=!0}),e.signal)})},q=tE(e.options,e.fetchOptions),G=async(H,te,le)=>{if(V)return Promise.reject();if(te==null&&H.pages.length)return Promise.resolve(H);const ae={queryKey:e.queryKey,pageParam:te,direction:le?"backward":"forward",meta:e.options.meta};x(ae);const k=await q(ae),{maxPages:S}=e.options,R=le?BR:UR;return{pages:R(H.pages,k,S),pageParams:R(H.pageParams,te,S)}};if(s&&a.length){const H=s==="backward",te=H?ZR:W_,le={pages:a,pageParams:l},ae=te(r,le);d=await G(le,ae,H)}else{const H=n??a.length;do{const te=f===0?l[0]??r.initialPageParam:W_(r,d);if(f>0&&te==null)break;d=await G(d,te),f++}while(f<H)}return d};e.options.persister?e.fetchFn=()=>{var V,x;return(x=(V=e.options).persister)==null?void 0:x.call(V,m,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function W_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function ZR(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var ct,Gi,Hi,Sa,Ra,Wi,Aa,Pa,Xw,nN=(Xw=class{constructor(n={}){je(this,ct);je(this,Gi);je(this,Hi);je(this,Sa);je(this,Ra);je(this,Wi);je(this,Aa);je(this,Pa);Pe(this,ct,n.queryCache||new QR),Pe(this,Gi,n.mutationCache||new XR),Pe(this,Hi,n.defaultOptions||{}),Pe(this,Sa,new Map),Pe(this,Ra,new Map),Pe(this,Wi,0)}mount(){ih(this,Wi)._++,J(this,Wi)===1&&(Pe(this,Aa,nE.subscribe(async n=>{n&&(await this.resumePausedMutations(),J(this,ct).onFocus())})),Pe(this,Pa,Nh.subscribe(async n=>{n&&(await this.resumePausedMutations(),J(this,ct).onOnline())})))}unmount(){var n,e;ih(this,Wi)._--,J(this,Wi)===0&&((n=J(this,Aa))==null||n.call(this),Pe(this,Aa,void 0),(e=J(this,Pa))==null||e.call(this),Pe(this,Pa,void 0))}isFetching(n){return J(this,ct).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return J(this,Gi).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=J(this,ct).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=J(this,ct).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(j_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return J(this,ct).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=J(this,ct).get(r.queryHash),a=s==null?void 0:s.state.data,l=NR(e,a);if(l!==void 0)return J(this,ct).build(this,r).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return rn.batch(()=>J(this,ct).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=J(this,ct).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=J(this,ct);rn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=J(this,ct),r={type:"active",...n};return rn.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=rn.batch(()=>J(this,ct).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(er).catch(er)}invalidateQueries(n,e={}){return rn.batch(()=>{if(J(this,ct).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none")return Promise.resolve();const t={...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"};return this.refetchQueries(t,e)})}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=rn.batch(()=>J(this,ct).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(er)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(er)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=J(this,ct).build(this,e);return t.isStaleByTime(j_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(er).catch(er)}fetchInfiniteQuery(n){return n.behavior=H_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(er).catch(er)}ensureInfiniteQueryData(n){return n.behavior=H_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Nh.isOnline()?J(this,Gi).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,ct)}getMutationCache(){return J(this,Gi)}getDefaultOptions(){return J(this,Hi)}setDefaultOptions(n){Pe(this,Hi,n)}setQueryDefaults(n,e){J(this,Sa).set(hl(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...J(this,Sa).values()],t={};return e.forEach(r=>{dl(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){J(this,Ra).set(hl(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...J(this,Ra).values()];let t={};return e.forEach(r=>{dl(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...J(this,Hi).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=hm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===dm&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...J(this,Hi).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){J(this,ct).clear(),J(this,Gi).clear()}},ct=new WeakMap,Gi=new WeakMap,Hi=new WeakMap,Sa=new WeakMap,Ra=new WeakMap,Wi=new WeakMap,Aa=new WeakMap,Pa=new WeakMap,Xw),eA=Q.createContext(void 0),rN=({client:n,children:e})=>(Q.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),AR.jsx(eA.Provider,{value:n,children:e})),Gu={},Q_;function tA(){if(Q_)return Gu;Q_=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.parse=l,Gu.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function l(I,P){const N=new a,V=I.length;if(V<2)return N;const x=(P==null?void 0:P.decode)||v;let q=0;do{const G=I.indexOf("=",q);if(G===-1)break;const H=I.indexOf(";",q),te=H===-1?V:H;if(G>te){q=I.lastIndexOf(";",G-1)+1;continue}const le=d(I,q,G),ae=f(I,G,le),k=I.slice(le,ae);if(N[k]===void 0){let S=d(I,G+1,te),R=f(I,te,S);const b=x(I.slice(S,R));N[k]=b}q=te+1}while(q<V);return N}function d(I,P,N){do{const V=I.charCodeAt(P);if(V!==32&&V!==9)return P}while(++P<N);return N}function f(I,P,N){for(;P>N;){const V=I.charCodeAt(--P);if(V!==32&&V!==9)return P+1}return N}function m(I,P,N){const V=(N==null?void 0:N.encode)||encodeURIComponent;if(!n.test(I))throw new TypeError(`argument name is invalid: ${I}`);const x=V(P);if(!e.test(x))throw new TypeError(`argument val is invalid: ${P}`);let q=I+"="+x;if(!N)return q;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);q+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);q+="; Domain="+N.domain}if(N.path){if(!r.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);q+="; Path="+N.path}if(N.expires){if(!E(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);q+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(q+="; HttpOnly"),N.secure&&(q+="; Secure"),N.partitioned&&(q+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return q}function v(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function E(I){return s.call(I)==="[object Date]"}return Gu}tA();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var J_="popstate";function nA(n={}){function e(r,s){let{pathname:a,search:l,hash:d}=r.location;return bp("",{pathname:a,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:fl(s)}return iA(e,t,null,n)}function it(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ir(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rA(){return Math.random().toString(36).substring(2,10)}function Y_(n,e){return{usr:n.state,key:n.key,idx:e}}function bp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ja(e):e,state:t,key:e&&e.key||r||rA()}}function fl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ja(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function iA(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,d="POP",f=null,m=v();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function v(){return(l.state||{idx:null}).idx}function E(){d="POP";let x=v(),q=x==null?null:x-m;m=x,f&&f({action:d,location:V.location,delta:q})}function I(x,q){d="PUSH";let G=bp(V.location,x,q);m=v()+1;let H=Y_(G,m),te=V.createHref(G);try{l.pushState(H,"",te)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;s.location.assign(te)}a&&f&&f({action:d,location:V.location,delta:1})}function P(x,q){d="REPLACE";let G=bp(V.location,x,q);m=v();let H=Y_(G,m),te=V.createHref(G);l.replaceState(H,"",te),a&&f&&f({action:d,location:V.location,delta:0})}function N(x){let q=s.location.origin!=="null"?s.location.origin:s.location.href,G=typeof x=="string"?x:fl(x);return G=G.replace(/ $/,"%20"),it(q,`No window.location.(origin|href) available to create URL for href: ${G}`),new URL(G,q)}let V={get action(){return d},get location(){return n(s,l)},listen(x){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(J_,E),f=x,()=>{s.removeEventListener(J_,E),f=null}},createHref(x){return e(s,x)},createURL:N,encodeLocation(x){let q=N(x);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:I,replace:P,go(x){return l.go(x)}};return V}function aE(n,e,t="/"){return sA(n,e,t,!1)}function sA(n,e,t,r){let s=typeof e=="string"?ja(e):e,a=is(s.pathname||"/",t);if(a==null)return null;let l=uE(n);oA(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let m=yA(a);d=mA(l[f],m,r)}return d}function uE(n,e=[],t=[],r=""){let s=(a,l,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(it(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=ni([r,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(it(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),uE(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:fA(m,a.index),routesMeta:v})};return n.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,l);else for(let f of lE(a.path))s(a,l,f)}),e}function lE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=lE(r.join("/")),d=[];return d.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...l),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function oA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:pA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var aA=/^:[\w-]+$/,uA=3,lA=2,cA=1,hA=10,dA=-2,X_=n=>n==="*";function fA(n,e){let t=n.split("/"),r=t.length;return t.some(X_)&&(r+=dA),e&&(r+=lA),t.filter(s=>!X_(s)).reduce((s,a)=>s+(aA.test(a)?uA:a===""?cA:hA),r)}function pA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function mA(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",E=Vh({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),I=f.route;if(!E&&m&&t&&!r[r.length-1].route.index&&(E=Vh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),l.push({params:s,pathname:ni([a,E.pathname]),pathnameBase:EA(ni([a,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(a=ni([a,E.pathnameBase]))}return l}function Vh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gA(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,{paramName:v,isOptional:E},I)=>{if(v==="*"){let N=d[I]||"";l=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const P=d[I];return E&&!P?m[v]=void 0:m[v]=(P||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:n}}function gA(n,e=!1,t=!0){ir(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function yA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ir(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function is(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function _A(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ja(n):n;return{pathname:t?t.startsWith("/")?t:vA(t,e):e,search:IA(r),hash:TA(s)}}function vA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function mp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fm(n){let e=wA(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function pm(n,e,t,r=!1){let s;typeof n=="string"?s=ja(n):(s={...n},it(!s.pathname||!s.pathname.includes("?"),mp("?","pathname","search",s)),it(!s.pathname||!s.pathname.includes("#"),mp("#","pathname","hash",s)),it(!s.search||!s.search.includes("#"),mp("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,d;if(l==null)d=t;else{let E=e.length-1;if(!r&&l.startsWith("..")){let I=l.split("/");for(;I[0]==="..";)I.shift(),E-=1;s.pathname=I.join("/")}d=E>=0?e[E]:"/"}let f=_A(s,d),m=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var ni=n=>n.join("/").replace(/\/\/+/g,"/"),EA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,TA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function SA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var cE=["POST","PUT","PATCH","DELETE"];new Set(cE);var RA=["GET",...cE];new Set(RA);var $a=Q.createContext(null);$a.displayName="DataRouter";var ud=Q.createContext(null);ud.displayName="DataRouterState";var hE=Q.createContext({isTransitioning:!1});hE.displayName="ViewTransition";var AA=Q.createContext(new Map);AA.displayName="Fetchers";var PA=Q.createContext(null);PA.displayName="Await";var sr=Q.createContext(null);sr.displayName="Navigation";var kl=Q.createContext(null);kl.displayName="Location";var Cr=Q.createContext({outlet:null,matches:[],isDataRoute:!1});Cr.displayName="Route";var mm=Q.createContext(null);mm.displayName="RouteError";function CA(n,{relative:e}={}){it(qa(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Q.useContext(sr),{hash:s,pathname:a,search:l}=xl(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:ni([t,a])),r.createHref({pathname:d,search:l,hash:s})}function qa(){return Q.useContext(kl)!=null}function ls(){return it(qa(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(kl).location}var dE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fE(n){Q.useContext(sr).static||Q.useLayoutEffect(n)}function pE(){let{isDataRoute:n}=Q.useContext(Cr);return n?zA():kA()}function kA(){it(qa(),"useNavigate() may be used only in the context of a <Router> component.");let n=Q.useContext($a),{basename:e,navigator:t}=Q.useContext(sr),{matches:r}=Q.useContext(Cr),{pathname:s}=ls(),a=JSON.stringify(fm(r)),l=Q.useRef(!1);return fE(()=>{l.current=!0}),Q.useCallback((f,m={})=>{if(ir(l.current,dE),!l.current)return;if(typeof f=="number"){t.go(f);return}let v=pm(f,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ni([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,s,n])}Q.createContext(null);function xl(n,{relative:e}={}){let{matches:t}=Q.useContext(Cr),{pathname:r}=ls(),s=JSON.stringify(fm(t));return Q.useMemo(()=>pm(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function xA(n,e){return mE(n,e)}function mE(n,e,t,r){var q;it(qa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Q.useContext(sr),{matches:a}=Q.useContext(Cr),l=a[a.length-1],d=l?l.params:{},f=l?l.pathname:"/",m=l?l.pathnameBase:"/",v=l&&l.route;{let G=v&&v.path||"";gE(f,!v||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let E=ls(),I;if(e){let G=typeof e=="string"?ja(e):e;it(m==="/"||((q=G.pathname)==null?void 0:q.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${G.pathname}" was given in the \`location\` prop.`),I=G}else I=E;let P=I.pathname||"/",N=P;if(m!=="/"){let G=m.replace(/^\//,"").split("/");N="/"+P.replace(/^\//,"").split("/").slice(G.length).join("/")}let V=aE(n,{pathname:N});ir(v||V!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),ir(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=OA(V&&V.map(G=>Object.assign({},G,{params:Object.assign({},d,G.params),pathname:ni([m,s.encodeLocation?s.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?m:ni([m,s.encodeLocation?s.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),a,t,r);return e&&x?Q.createElement(kl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},x):x}function DA(){let n=BA(),e=SA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=Q.createElement(Q.Fragment,null,Q.createElement("p",null," Hey developer "),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:a},"ErrorBoundary")," or"," ",Q.createElement("code",{style:a},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:s},t):null,l)}var bA=Q.createElement(DA,null),NA=class extends Q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Q.createElement(Cr.Provider,{value:this.props.routeContext},Q.createElement(mm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VA({routeContext:n,match:e,children:t}){let r=Q.useContext($a);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Cr.Provider,{value:n},t)}function OA(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);it(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,d=-1;if(t)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:v,errors:E}=t,I=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||I){l=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,m,v)=>{let E,I=!1,P=null,N=null;t&&(E=a&&m.route.id?a[m.route.id]:void 0,P=m.route.errorElement||bA,l&&(d<0&&v===0?(gE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,N=null):d===v&&(I=!0,N=m.route.hydrateFallbackElement||null)));let V=e.concat(s.slice(0,v+1)),x=()=>{let q;return E?q=P:I?q=N:m.route.Component?q=Q.createElement(m.route.Component,null):m.route.element?q=m.route.element:q=f,Q.createElement(VA,{match:m,routeContext:{outlet:f,matches:V,isDataRoute:t!=null},children:q})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?Q.createElement(NA,{location:t.location,revalidation:t.revalidation,component:P,error:E,children:x(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):x()},null)}function gm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LA(n){let e=Q.useContext($a);return it(e,gm(n)),e}function MA(n){let e=Q.useContext(ud);return it(e,gm(n)),e}function FA(n){let e=Q.useContext(Cr);return it(e,gm(n)),e}function ym(n){let e=FA(n),t=e.matches[e.matches.length-1];return it(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function UA(){return ym("useRouteId")}function BA(){var r;let n=Q.useContext(mm),e=MA("useRouteError"),t=ym("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function zA(){let{router:n}=LA("useNavigate"),e=ym("useNavigate"),t=Q.useRef(!1);return fE(()=>{t.current=!0}),Q.useCallback(async(s,a={})=>{ir(t.current,dE),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var Z_={};function gE(n,e,t){!e&&!Z_[n]&&(Z_[n]=!0,ir(!1,t))}Q.memo(jA);function jA({routes:n,future:e,state:t}){return mE(n,void 0,t,e)}function iN({to:n,replace:e,state:t,relative:r}){it(qa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=Q.useContext(sr);ir(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Q.useContext(Cr),{pathname:l}=ls(),d=pE(),f=pm(n,fm(a),l,r==="path"),m=JSON.stringify(f);return Q.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:r})},[d,m,r,e,t]),null}function $A(n){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qA({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){it(!qa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),d=Q.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=ja(t));let{pathname:f="/",search:m="",hash:v="",state:E=null,key:I="default"}=t,P=Q.useMemo(()=>{let N=is(f,l);return N==null?null:{location:{pathname:N,search:m,hash:v,state:E,key:I},navigationType:r}},[l,f,m,v,E,I,r]);return ir(P!=null,`<Router basename="${l}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:Q.createElement(sr.Provider,{value:d},Q.createElement(kl.Provider,{children:e,value:P}))}function sN({children:n,location:e}){return xA(Np(n),e)}function Np(n,e=[]){let t=[];return Q.Children.forEach(n,(r,s)=>{if(!Q.isValidElement(r))return;let a=[...e,s];if(r.type===Q.Fragment){t.push.apply(t,Np(r.props.children,a));return}it(r.type===$A,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Np(r.props.children,a)),t.push(l)}),t}var yh="get",_h="application/x-www-form-urlencoded";function ld(n){return n!=null&&typeof n.tagName=="string"}function KA(n){return ld(n)&&n.tagName.toLowerCase()==="button"}function GA(n){return ld(n)&&n.tagName.toLowerCase()==="form"}function HA(n){return ld(n)&&n.tagName.toLowerCase()==="input"}function WA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function QA(n,e){return n.button===0&&(!e||e==="_self")&&!WA(n)}var ah=null;function JA(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var YA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gp(n){return n!=null&&!YA.has(n)?(ir(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):n}function XA(n,e){let t,r,s,a,l;if(GA(n)){let d=n.getAttribute("action");r=d?is(d,e):null,t=n.getAttribute("method")||yh,s=gp(n.getAttribute("enctype"))||_h,a=new FormData(n)}else if(KA(n)||HA(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?is(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||yh,s=gp(n.getAttribute("formenctype"))||gp(d.getAttribute("enctype"))||_h,a=new FormData(d,n),!JA()){let{name:m,type:v,value:E}=n;if(v==="image"){let I=m?`${m}.`:"";a.append(`${I}x`,"0"),a.append(`${I}y`,"0")}else m&&a.append(m,E)}}else{if(ld(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yh,r=null,s=_h,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}function _m(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function ZA(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function e0(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function t0(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await ZA(a,t);return l.links?l.links():[]}return[]}));return s0(r.flat(1).filter(e0).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ev(n,e,t,r,s,a){let l=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>l(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var E;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(l(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let I=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function n0(n,e){return r0(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function r0(n){return[...new Set(n)]}function i0(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function s0(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(i0(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function o0(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function a0(){let n=Q.useContext($a);return _m(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function u0(){let n=Q.useContext(ud);return _m(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vm=Q.createContext(void 0);vm.displayName="FrameworkContext";function yE(){let n=Q.useContext(vm);return _m(n,"You must render this element inside a <HydratedRouter> element"),n}function l0(n,e){let t=Q.useContext(vm),[r,s]=Q.useState(!1),[a,l]=Q.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:E}=e,I=Q.useRef(null);Q.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let V=q=>{q.forEach(G=>{l(G.isIntersecting)})},x=new IntersectionObserver(V,{threshold:.5});return I.current&&x.observe(I.current),()=>{x.disconnect()}}},[n]),Q.useEffect(()=>{if(r){let V=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(V)}}},[r]);let P=()=>{s(!0)},N=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,I,{}]:[a,I,{onFocus:Hu(d,P),onBlur:Hu(f,N),onMouseEnter:Hu(m,P),onMouseLeave:Hu(v,N),onTouchStart:Hu(E,P)}]:[!1,I,{}]}function Hu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function c0({page:n,...e}){let{router:t}=a0(),r=Q.useMemo(()=>aE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Q.createElement(d0,{page:n,matches:r,...e}):null}function h0(n){let{manifest:e,routeModules:t}=yE(),[r,s]=Q.useState([]);return Q.useEffect(()=>{let a=!1;return t0(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function d0({page:n,matches:e,...t}){let r=ls(),{manifest:s,routeModules:a}=yE(),{loaderData:l,matches:d}=u0(),f=Q.useMemo(()=>ev(n,e,d,s,r,"data"),[n,e,d,s,r]),m=Q.useMemo(()=>ev(n,e,d,s,r,"assets"),[n,e,d,s,r]),v=Q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let P=new Set,N=!1;if(e.forEach(x=>{var G;let q=s.routes[x.route.id];!q||!q.hasLoader||(!f.some(H=>H.route.id===x.route.id)&&x.route.id in l&&((G=a[x.route.id])!=null&&G.shouldRevalidate)||q.hasClientLoader?N=!0:P.add(x.route.id))}),P.size===0)return[];let V=o0(n);return N&&P.size>0&&V.searchParams.set("_routes",e.filter(x=>P.has(x.route.id)).map(x=>x.route.id).join(",")),[V.pathname+V.search]},[l,r,s,f,e,n,a]),E=Q.useMemo(()=>n0(m,s),[m,s]),I=h0(m);return Q.createElement(Q.Fragment,null,v.map(P=>Q.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),E.map(P=>Q.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),I.map(({key:P,link:N})=>Q.createElement("link",{key:P,...N})))}function f0(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _E=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_E&&(window.__reactRouterVersion="7.1.3")}catch{}function oN({basename:n,children:e,window:t}){let r=Q.useRef();r.current==null&&(r.current=nA({window:t,v5Compat:!0}));let s=r.current,[a,l]=Q.useState({action:s.action,location:s.location}),d=Q.useCallback(f=>{Q.startTransition(()=>l(f))},[l]);return Q.useLayoutEffect(()=>s.listen(d),[s,d]),Q.createElement(qA,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var vE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wE=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:d,target:f,to:m,preventScrollReset:v,viewTransition:E,...I},P){let{basename:N}=Q.useContext(sr),V=typeof m=="string"&&vE.test(m),x,q=!1;if(typeof m=="string"&&V&&(x=m,_E))try{let R=new URL(window.location.href),b=m.startsWith("//")?new URL(R.protocol+m):new URL(m),L=is(b.pathname,N);b.origin===R.origin&&L!=null?m=L+b.search+b.hash:q=!0}catch{ir(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=CA(m,{relative:s}),[H,te,le]=l0(r,I),ae=y0(m,{replace:l,state:d,target:f,preventScrollReset:v,relative:s,viewTransition:E});function k(R){e&&e(R),R.defaultPrevented||ae(R)}let S=Q.createElement("a",{...I,...le,href:x||G,onClick:q||a?e:k,ref:f0(P,te),target:f,"data-discover":!V&&t==="render"?"true":void 0});return H&&!V?Q.createElement(Q.Fragment,null,S,Q.createElement(c0,{page:G})):S});wE.displayName="Link";var p0=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:d,children:f,...m},v){let E=xl(l,{relative:m.relative}),I=ls(),P=Q.useContext(ud),{navigator:N,basename:V}=Q.useContext(sr),x=P!=null&&I0(E)&&d===!0,q=N.encodeLocation?N.encodeLocation(E).pathname:E.pathname,G=I.pathname,H=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(G=G.toLowerCase(),H=H?H.toLowerCase():null,q=q.toLowerCase()),H&&V&&(H=is(H,V)||H);const te=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let le=G===q||!s&&G.startsWith(q)&&G.charAt(te)==="/",ae=H!=null&&(H===q||!s&&H.startsWith(q)&&H.charAt(q.length)==="/"),k={isActive:le,isPending:ae,isTransitioning:x},S=le?e:void 0,R;typeof r=="function"?R=r(k):R=[r,le?"active":null,ae?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let b=typeof a=="function"?a(k):a;return Q.createElement(wE,{...m,"aria-current":S,className:R,ref:v,style:b,to:l,viewTransition:d},typeof f=="function"?f(k):f)});p0.displayName="NavLink";var m0=Q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=yh,action:d,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:E,...I},P)=>{let N=w0(),V=E0(d,{relative:m}),x=l.toLowerCase()==="get"?"get":"post",q=typeof d=="string"&&vE.test(d),G=H=>{if(f&&f(H),H.defaultPrevented)return;H.preventDefault();let te=H.nativeEvent.submitter,le=(te==null?void 0:te.getAttribute("formmethod"))||l;N(te||H.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:s,state:a,relative:m,preventScrollReset:v,viewTransition:E})};return Q.createElement("form",{ref:P,method:x,action:V,onSubmit:r?f:G,...I,"data-discover":!q&&n==="render"?"true":void 0})});m0.displayName="Form";function g0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EE(n){let e=Q.useContext($a);return it(e,g0(n)),e}function y0(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l}={}){let d=pE(),f=ls(),m=xl(n,{relative:a});return Q.useCallback(v=>{if(QA(v,e)){v.preventDefault();let E=t!==void 0?t:fl(f)===fl(m);d(n,{replace:E,state:r,preventScrollReset:s,relative:a,viewTransition:l})}},[f,d,m,t,r,e,n,s,a,l])}var _0=0,v0=()=>`__${String(++_0)}__`;function w0(){let{router:n}=EE("useSubmit"),{basename:e}=Q.useContext(sr),t=UA();return Q.useCallback(async(r,s={})=>{let{action:a,method:l,encType:d,formData:f,body:m}=XA(r,e);if(s.navigate===!1){let v=s.fetcherKey||v0();await n.fetch(v,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||l,formEncType:s.encType||d,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||l,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function E0(n,{relative:e}={}){let{basename:t}=Q.useContext(sr),r=Q.useContext(Cr);it(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...xl(n||".",{relative:e})},l=ls();if(n==null){a.search=l.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ni([t,a.pathname])),fl(a)}function I0(n,e={}){let t=Q.useContext(hE);it(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=EE("useViewTransitionState"),s=xl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=is(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=is(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Vh(s.pathname,l)!=null||Vh(s.pathname,a)!=null}new TextEncoder;var tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},T0=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,d=l?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let I=(d&15)<<2|m>>6,P=m&63;f||(P=64,l||(I=64)),r.push(t[v],t[E],t[I],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):T0(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new S0;const I=a<<2|d>>4;if(r.push(I),m!==64){const P=d<<4&240|m>>2;if(r.push(P),E!==64){const N=m<<6&192|E;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class S0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R0=function(n){const e=IE(n);return TE.encodeByteArray(e,!0)},Oh=function(n){return R0(n).replace(/\./g,"")},SE=function(n){try{return TE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=()=>A0().__FIREBASE_DEFAULTS__,C0=()=>{if(typeof process>"u"||typeof tv>"u")return;const n=tv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k0=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&SE(n[1]);return e&&JSON.parse(e)},cd=()=>{try{return P0()||C0()||k0()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RE=n=>{var e,t;return(t=(e=cd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},x0=n=>{const e=RE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},AE=()=>{var n;return(n=cd())===null||n===void 0?void 0:n.config},PE=n=>{var e;return(e=cd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Oh(JSON.stringify(t)),Oh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function V0(){var n;const e=(n=cd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function M0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F0(){const n=Rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function CE(){return!V0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kE(){try{return typeof indexedDB=="object"}catch{return!1}}function U0(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="FirebaseError";class kr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=B0,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dl.prototype.create)}}class Dl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?z0(a,r):"Error",d=`${this.serviceName}: ${l} (${s}).`;return new kr(s,d,r)}}function z0(n,e){return n.replace(j0,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const j0=/\{\$([^}]+)}/g;function $0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(nv(a)&&nv(l)){if(!pl(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function nv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function q0(n,e){const t=new K0(n,e);return t.subscribe.bind(t)}class K0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");G0(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=yp),s.error===void 0&&(s.error=yp),s.complete===void 0&&(s.complete=yp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G0(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n){return n&&n._delegate?n._delegate:n}class ss{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new D0;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q0(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:W0(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W0(n){return n===qs?void 0:n}function Q0(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new H0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const Y0={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},X0=be.INFO,Z0={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},eP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Z0[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wm{constructor(e){this.name=e,this._logLevel=X0,this._logHandler=eP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const tP=(n,e)=>e.some(t=>n instanceof t);let rv,iv;function nP(){return rv||(rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rP(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xE=new WeakMap,Vp=new WeakMap,DE=new WeakMap,_p=new WeakMap,Em=new WeakMap;function iP(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ji(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&xE.set(t,n)}).catch(()=>{}),Em.set(e,n),e}function sP(n){if(Vp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Vp.set(n,e)}let Op={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||DE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ji(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function oP(n){Op=n(Op)}function aP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(vp(this),e,...t);return DE.set(r,e.sort?e.sort():[e]),Ji(r)}:rP().includes(n)?function(...e){return n.apply(vp(this),e),Ji(xE.get(this))}:function(...e){return Ji(n.apply(vp(this),e))}}function uP(n){return typeof n=="function"?aP(n):(n instanceof IDBTransaction&&sP(n),tP(n,nP())?new Proxy(n,Op):n)}function Ji(n){if(n instanceof IDBRequest)return iP(n);if(_p.has(n))return _p.get(n);const e=uP(n);return e!==n&&(_p.set(n,e),Em.set(e,n)),e}const vp=n=>Em.get(n);function lP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),d=Ji(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Ji(l.result),f.oldVersion,f.newVersion,Ji(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const cP=["get","getKey","getAll","getAllKeys","count"],hP=["put","add","delete","clear"],wp=new Map;function sv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wp.get(e))return wp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=hP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cP.includes(t)))return;const a=async function(l,...d){const f=this.transaction(l,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return wp.set(e,a),a}oP(n=>({...n,get:(e,t,r)=>sv(e,t)||n.get(e,t,r),has:(e,t)=>!!sv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function fP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lp="@firebase/app",ov="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new wm("@firebase/app"),pP="@firebase/app-compat",mP="@firebase/analytics-compat",gP="@firebase/analytics",yP="@firebase/app-check-compat",_P="@firebase/app-check",vP="@firebase/auth",wP="@firebase/auth-compat",EP="@firebase/database",IP="@firebase/data-connect",TP="@firebase/database-compat",SP="@firebase/functions",RP="@firebase/functions-compat",AP="@firebase/installations",PP="@firebase/installations-compat",CP="@firebase/messaging",kP="@firebase/messaging-compat",xP="@firebase/performance",DP="@firebase/performance-compat",bP="@firebase/remote-config",NP="@firebase/remote-config-compat",VP="@firebase/storage",OP="@firebase/storage-compat",LP="@firebase/firestore",MP="@firebase/vertexai",FP="@firebase/firestore-compat",UP="firebase",BP="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="[DEFAULT]",zP={[Lp]:"fire-core",[pP]:"fire-core-compat",[gP]:"fire-analytics",[mP]:"fire-analytics-compat",[_P]:"fire-app-check",[yP]:"fire-app-check-compat",[vP]:"fire-auth",[wP]:"fire-auth-compat",[EP]:"fire-rtdb",[IP]:"fire-data-connect",[TP]:"fire-rtdb-compat",[SP]:"fire-fn",[RP]:"fire-fn-compat",[AP]:"fire-iid",[PP]:"fire-iid-compat",[CP]:"fire-fcm",[kP]:"fire-fcm-compat",[xP]:"fire-perf",[DP]:"fire-perf-compat",[bP]:"fire-rc",[NP]:"fire-rc-compat",[VP]:"fire-gcs",[OP]:"fire-gcs-compat",[LP]:"fire-fst",[FP]:"fire-fst-compat",[MP]:"fire-vertex","fire-js":"fire-js",[UP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Map,jP=new Map,Fp=new Map;function av(n,e){try{n.container.addComponent(e)}catch(t){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function to(n){const e=n.name;if(Fp.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;Fp.set(e,n);for(const t of Lh.values())av(t,n);for(const t of jP.values())av(t,n);return!0}function hd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new Dl("app","Firebase",$P);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=BP;function bE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Mp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Yi.create("bad-app-name",{appName:String(s)});if(t||(t=AE()),!t)throw Yi.create("no-options");const a=Lh.get(s);if(a){if(pl(t,a.options)&&pl(r,a.config))return a;throw Yi.create("duplicate-app",{appName:s})}const l=new J0(s);for(const f of Fp.values())l.addComponent(f);const d=new qP(t,r,l);return Lh.set(s,d),d}function NE(n=Mp){const e=Lh.get(n);if(!e&&n===Mp&&AE())return bE();if(!e)throw Yi.create("no-app",{appName:n});return e}function ri(n,e,t){var r;let s=(r=zP[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(d.join(" "));return}to(new ss(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebase-heartbeat-database",GP=1,ml="firebase-heartbeat-store";let Ep=null;function VE(){return Ep||(Ep=lP(KP,GP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ml)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yi.create("idb-open",{originalErrorMessage:n.message})})),Ep}async function HP(n){try{const t=(await VE()).transaction(ml),r=await t.objectStore(ml).get(OE(n));return await t.done,r}catch(e){if(e instanceof kr)ii.warn(e.message);else{const t=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ii.warn(t.message)}}}async function uv(n,e){try{const r=(await VE()).transaction(ml,"readwrite");await r.objectStore(ml).put(e,OE(n)),await r.done}catch(t){if(t instanceof kr)ii.warn(t.message);else{const r=Yi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ii.warn(r.message)}}}function OE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=1024,QP=30*24*60*60*1e3;class JP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=lv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=QP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ii.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lv(),{heartbeatsToSend:r,unsentEntries:s}=YP(this._heartbeatsCache.heartbeats),a=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ii.warn(t),""}}}function lv(){return new Date().toISOString().substring(0,10)}function YP(n,e=WP){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),cv(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),cv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class XP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kE()?U0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return uv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return uv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cv(n){return Oh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(n){to(new ss("platform-logger",e=>new dP(e),"PRIVATE")),to(new ss("heartbeat",e=>new JP(e),"PRIVATE")),ri(Lp,ov,n),ri(Lp,ov,"esm2017"),ri("fire-js","")}ZP("");function Im(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function LE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eC=LE,ME=new Dl("auth","Firebase",LE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new wm("@firebase/auth");function tC(n,...e){Mh.logLevel<=be.WARN&&Mh.warn(`Auth (${co}): ${n}`,...e)}function vh(n,...e){Mh.logLevel<=be.ERROR&&Mh.error(`Auth (${co}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n,...e){throw Sm(n,...e)}function Tr(n,...e){return Sm(n,...e)}function Tm(n,e,t){const r=Object.assign(Object.assign({},eC()),{[e]:t});return new Dl("auth","Firebase",r).create(e,{appName:n.name})}function Xi(n){return Tm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nC(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rr(n,"argument-error"),Tm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ME.create(n,...e)}function Re(n,e,...t){if(!n)throw Sm(e,...t)}function Xr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vh(e),new Error(e)}function si(n,e){n||Xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rC(){return hv()==="http:"||hv()==="https:"}function hv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rC()||L0()||"connection"in navigator)?navigator.onLine:!0}function sC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,si(t>e,"Short delay should be less than long delay!"),this.isMobile=N0()||M0()}get(){return iC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e){si(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Nl(3e4,6e4);function Am(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ka(n,e,t,r,s={}){return UE(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=bl(Object.assign({key:n.config.apiKey},l)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return O0()||(m.referrerPolicy="no-referrer"),FE.fetch()(BE(n,n.config.apiHost,t,d),m)})}async function UE(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},oC),e);try{const s=new lC(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw uh(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw uh(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw uh(n,"user-disabled",l);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Tm(n,v,m);Rr(n,v)}}catch(s){if(s instanceof kr)throw s;Rr(n,"network-request-failed",{message:String(s)})}}async function uC(n,e,t,r,s={}){const a=await Ka(n,e,t,r,s);return"mfaPendingCredential"in a&&Rr(n,"multi-factor-auth-required",{_serverResponse:a}),a}function BE(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Rm(n.config,s):`${n.config.apiScheme}://${s}`}class lC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Tr(this.auth,"network-request-failed")),aC.get())})}}function uh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Tr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(n,e){return Ka(n,"POST","/v1/accounts:delete",e)}async function zE(n,e){return Ka(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hC(n,e=!1){const t=At(n),r=await t.getIdToken(e),s=Pm(r);Re(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:il(Ip(s.auth_time)),issuedAtTime:il(Ip(s.iat)),expirationTime:il(Ip(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ip(n){return Number(n)*1e3}function Pm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const s=SE(t);return s?JSON.parse(s):(vh("Failed to decode base64 JWT payload"),null)}catch(s){return vh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dv(n){const e=Pm(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof kr&&dC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function dC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=il(this.lastLoginAt),this.creationTime=il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await gl(n,zE(t,{idToken:r}));Re(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?jE(a.providerUserInfo):[],d=mC(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Bp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function pC(n){const e=At(n);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mC(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function jE(n){return n.map(e=>{var{providerId:t}=e,r=Im(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(n,e){const t=await UE(n,{},async()=>{const r=bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=BE(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",FE.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yC(n,e){return Ka(n,"POST","/v2/accounts:revokeToken",Am(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=dv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await gC(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new ma;return r&&(Re(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Re(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Re(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ma,this.toJSON())}_performRefresh(){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Im(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Bp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await gl(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hC(this,e)}reload(){return pC(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Fh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await gl(this,cC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,l,d,f,m,v;const E=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,N=(l=t.photoURL)!==null&&l!==void 0?l:void 0,V=(d=t.tenantId)!==null&&d!==void 0?d:void 0,x=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,q=(m=t.createdAt)!==null&&m!==void 0?m:void 0,G=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:H,emailVerified:te,isAnonymous:le,providerData:ae,stsTokenManager:k}=t;Re(H&&k,e,"internal-error");const S=ma.fromJSON(this.name,k);Re(typeof H=="string",e,"internal-error"),Oi(E,e.name),Oi(I,e.name),Re(typeof te=="boolean",e,"internal-error"),Re(typeof le=="boolean",e,"internal-error"),Oi(P,e.name),Oi(N,e.name),Oi(V,e.name),Oi(x,e.name),Oi(q,e.name),Oi(G,e.name);const R=new Zr({uid:H,auth:e,email:I,emailVerified:te,displayName:E,isAnonymous:le,photoURL:N,phoneNumber:P,tenantId:V,stsTokenManager:S,createdAt:q,lastLoginAt:G});return ae&&Array.isArray(ae)&&(R.providerData=ae.map(b=>Object.assign({},b))),x&&(R._redirectEventId=x),R}static async _fromIdTokenResponse(e,t,r=!1){const s=new ma;s.updateFromServerResponse(t);const a=new Zr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Re(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?jE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new ma;d.updateFromIdToken(r);const f=new Zr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Bp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function ei(n){si(n instanceof Function,"Expected a class definition");let e=fv.get(n);return e?(si(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$E.type="NONE";const pv=$E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n,e,t){return`firebase:${n}:${e}:${t}`}class ga{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=wh(this.userKey,s.apiKey,a),this.fullPersistenceKey=wh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ga(ei(pv),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ei(pv);const l=wh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(l);if(v){const E=Zr._fromJSON(e,v);m!==a&&(d=E),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new ga(a,e,r):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new ga(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QE(e))return"Blackberry";if(JE(e))return"Webos";if(KE(e))return"Safari";if((e.includes("chrome/")||GE(e))&&!e.includes("edge/"))return"Chrome";if(WE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qE(n=Rt()){return/firefox\//i.test(n)}function KE(n=Rt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GE(n=Rt()){return/crios\//i.test(n)}function HE(n=Rt()){return/iemobile/i.test(n)}function WE(n=Rt()){return/android/i.test(n)}function QE(n=Rt()){return/blackberry/i.test(n)}function JE(n=Rt()){return/webos/i.test(n)}function Cm(n=Rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _C(n=Rt()){var e;return Cm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vC(){return F0()&&document.documentMode===10}function YE(n=Rt()){return Cm(n)||WE(n)||JE(n)||QE(n)||/windows phone/i.test(n)||HE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e=[]){let t;switch(n){case"Browser":t=mv(Rt());break;case"Worker":t=`${mv(Rt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(n,e={}){return Ka(n,"GET","/v2/passwordPolicy",Am(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=6;class TC{constructor(e){var t,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:IC,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,l,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gv(this),this.idTokenSubscription=new gv(this),this.beforeStateQueue=new wC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ME,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ei(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ga.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zE(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject(Xi(this));const t=e?At(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yr(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EC(this),t=new TC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await yC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ei(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await ga.create(this,[ei(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&tC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Vl(n){return At(n)}class gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=q0(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RC(n){km=n}function AC(n){return km.loadJS(n)}function PC(){return km.gapiScript}function CC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n,e){const t=hd(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(pl(a,e??{}))return s;Rr(s,"already-initialized")}return t.initialize({options:e})}function xC(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ei);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DC(n,e,t){const r=Vl(n);Re(r._canInitEmulator,r,"emulator-config-failed"),Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=ZE(e),{host:l,port:d}=bC(e),f=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),NC()}function ZE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bC(n){const e=ZE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:yv(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:yv(l)}}}function yv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function NC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,t){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n,e){return uC(n,"POST","/v1/accounts:signInWithIdp",Am(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="http://localhost";class no extends eI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Im(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new no(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ya(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ya(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ya(e,t)}buildRequest(){const e={requestUri:VC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends xm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Ol{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return no._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bi.credential(t,r)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Ol{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Ol{constructor(){super("twitter.com")}static credential(e,t){return no._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ji.credential(t,r)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Zr._fromIdTokenResponse(e,r,s),l=_v(r);return new Ca({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=_v(r);return new Ca({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function _v(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends kr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Uh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Uh(e,t,r,s)}}function tI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uh._fromErrorAndOperation(n,a,e,r):a})}async function OC(n,e,t=!1){const r=await gl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ca._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(n,e,t=!1){const{auth:r}=n;if(Yr(r.app))return Promise.reject(Xi(r));const s="reauthenticate";try{const a=await gl(n,tI(r,s,e,n),t);Re(a.idToken,r,"internal-error");const l=Pm(a.idToken);Re(l,r,"internal-error");const{sub:d}=l;return Re(n.uid===d,r,"user-mismatch"),Ca._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Rr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(n,e,t=!1){if(Yr(n.app))return Promise.reject(Xi(n));const r="signIn",s=await tI(n,r,e),a=await Ca._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}function FC(n,e,t,r){return At(n).onIdTokenChanged(e,t,r)}function UC(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function aN(n,e,t,r){return At(n).onAuthStateChanged(e,t,r)}function uN(n){return At(n).signOut()}const Bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=1e3,zC=10;class rI extends nI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);vC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,zC):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rI.type="LOCAL";const jC=rI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends nI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iI.type="SESSION";const sI=iI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new dd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(l).map(async m=>m(t.origin,a)),f=await $C(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const m=Dm("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(E){const I=E;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(I.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function KC(n){Sr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function GC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function WC(){return oI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="firebaseLocalStorageDb",QC=1,zh="firebaseLocalStorage",uI="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fd(n,e){return n.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function JC(){const n=indexedDB.deleteDatabase(aI);return new Ll(n).toPromise()}function zp(){const n=indexedDB.open(aI,QC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zh,{keyPath:uI})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zh)?e(r):(r.close(),await JC(),e(await zp()))})})}async function vv(n,e,t){const r=fd(n,!0).put({[uI]:e,value:t});return new Ll(r).toPromise()}async function YC(n,e){const t=fd(n,!1).get(e),r=await new Ll(t).toPromise();return r===void 0?null:r.value}function wv(n,e){const t=fd(n,!0).delete(e);return new Ll(t).toPromise()}const XC=800,ZC=3;class lI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ZC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(WC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await GC(),!this.activeServiceWorker)return;this.sender=new qC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zp();return await vv(e,Bh,"1"),await wv(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>vv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>YC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=fd(s,!1).getAll();return new Ll(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lI.type="LOCAL";const ek=lI;new Nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n,e){return e?ei(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends eI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tk(n){return MC(n.auth,new bm(n),n.bypassAuthState)}function nk(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),LC(t,new bm(n),n.bypassAuthState)}async function rk(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),OC(t,new bm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tk;case"linkViaPopup":case"linkViaRedirect":return rk;case"reauthViaPopup":case"reauthViaRedirect":return nk;default:Rr(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new Nl(2e3,1e4);class pa extends hI{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){si(this.filter.length===1,"Popup operations only handle one event");const e=Dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ik.get())};e()}}pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="pendingRedirect",Eh=new Map;class ok extends hI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Eh.get(this.auth._key());if(!e){try{const r=await ak(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Eh.set(this.auth._key(),e)}return this.bypassAuthState||Eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ak(n,e){const t=fI(e),r=dI(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function uk(n,e){return dI(n)._set(fI(e),"true")}function lk(n,e){Eh.set(n._key(),e)}function dI(n){return ei(n._redirectPersistence)}function fI(n){return wh(sk,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n,e,t){return ck(n,e,t)}async function ck(n,e,t){if(Yr(n.app))return Promise.reject(Xi(n));const r=Vl(n);nC(n,e,xm),await r._initializationPromise;const s=cI(r,t);return await uk(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function cN(n,e){return await Vl(n)._initializationPromise,pI(n,e,!1)}async function pI(n,e,t=!1){if(Yr(n.app))return Promise.reject(Xi(n));const r=Vl(n),s=cI(r,e),l=await new ok(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=10*60*1e3;class dk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Tr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(e))}saveEventToCache(e){this.cachedEventUids.add(Ev(e)),this.lastProcessedEventTime=Date.now()}}function Ev(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(n,e={}){return Ka(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gk=/^https?/;async function yk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pk(n);for(const t of e)try{if(_k(t))return}catch{}Rr(n,"unauthorized-domain")}function _k(n){const e=Up(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!gk.test(t))return!1;if(mk.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new Nl(3e4,6e4);function Iv(){const n=Sr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wk(n){return new Promise((e,t)=>{var r,s,a;function l(){Iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iv(),t(Tr(n,"network-request-failed"))},timeout:vk.get()})}if(!((s=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Sr().gapi)===null||a===void 0)&&a.load)l();else{const d=CC("iframefcb");return Sr()[d]=()=>{gapi.load?l():t(Tr(n,"network-request-failed"))},AC(`${PC()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function Ek(n){return Ih=Ih||wk(n),Ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new Nl(5e3,15e3),Tk="__/auth/iframe",Sk="emulator/auth/iframe",Rk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ak=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pk(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Rm(e,Sk):`https://${n.config.authDomain}/${Tk}`,r={apiKey:e.apiKey,appName:n.name,v:co},s=Ak.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${bl(r).slice(1)}`}async function Ck(n){const e=await Ek(n),t=Sr().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:Pk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=Tr(n,"network-request-failed"),d=Sr().setTimeout(()=>{a(l)},Ik.get());function f(){Sr().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xk=500,Dk=600,bk="_blank",Nk="http://localhost";class Tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vk(n,e,t,r=xk,s=Dk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},kk),{width:r.toString(),height:s.toString(),top:a,left:l}),m=Rt().toLowerCase();t&&(d=GE(m)?bk:t),qE(m)&&(e=e||Nk,f.scrollbars="yes");const v=Object.entries(f).reduce((I,[P,N])=>`${I}${P}=${N},`,"");if(_C(m)&&d!=="_self")return Ok(e||"",d),new Tv(null);const E=window.open(e||"",d,v);Re(E,n,"popup-blocked");try{E.focus()}catch{}return new Tv(E)}function Ok(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="__/auth/handler",Mk="emulator/auth/handler",Fk=encodeURIComponent("fac");async function Sv(n,e,t,r,s,a){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:co,eventId:s};if(e instanceof xm){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",$0(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))l[v]=E}if(e instanceof Ol){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(l.scopes=v.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${Fk}=${encodeURIComponent(f)}`:"";return`${Uk(n)}?${bl(d).slice(1)}${m}`}function Uk({config:n}){return n.emulator?Rm(n,Mk):`https://${n.authDomain}/${Lk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="webStorageSupport";class Bk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sI,this._completeRedirectFn=pI,this._overrideRedirectResult=lk}async _openPopup(e,t,r,s){var a;si((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Sv(e,t,r,Up(),s);return Vk(e,l,Dm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await Sv(e,t,r,Up(),s);return KC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(si(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Ck(e),r=new dk(e);return t.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tp,{type:Tp},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Tp];l!==void 0&&t(!!l),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YE()||KE()||Cm()}}const zk=Bk;var Rv="@firebase/auth",Av="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qk(n){to(new ss("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XE(n)},m=new SC(r,s,a,f);return xC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),to(new ss("auth-internal",e=>{const t=Vl(e.getProvider("auth").getImmediate());return(r=>new jk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(Rv,Av,$k(n)),ri(Rv,Av,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=5*60,Gk=PE("authIdTokenMaxAge")||Kk;let Pv=null;const Hk=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Gk)return;const s=t==null?void 0:t.token;Pv!==s&&(Pv=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Wk(n=NE()){const e=hd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=kC(n,{popupRedirectResolver:zk,persistence:[ek,jC,sI]}),r=PE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Hk(a.toString());UC(t,l,()=>l(t.currentUser)),FC(t,d=>l(d))}}const s=RE("auth");return s&&DC(t,`http://${s}`),t}function Qk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}RC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Tr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Qk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qk("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebasestorage.googleapis.com",Jk="storageBucket",Yk=2*60*1e3,Xk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends kr{constructor(e,t,r=0){super(Sp(e),`Firebase Storage: ${t} (${Sp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ar;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ar||(Ar={}));function Sp(n){return"storage/"+n}function Zk(){const n="An unknown error occurred, please check the error payload for server response.";return new xr(Ar.UNKNOWN,n)}function e1(){return new xr(Ar.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t1(){return new xr(Ar.CANCELED,"User canceled the upload/download.")}function n1(n){return new xr(Ar.INVALID_URL,"Invalid URL '"+n+"'.")}function r1(n){return new xr(Ar.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Cv(n){return new xr(Ar.INVALID_ARGUMENT,n)}function yI(){return new xr(Ar.APP_DELETED,"The Firebase app was deleted.")}function i1(n){return new xr(Ar.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rr.makeFromUrl(e,t)}catch{return new rr(e,"")}if(r.path==="")return r;throw r1(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+s+l,"i"),f={bucket:1,path:3};function m(te){te.path_=decodeURIComponent(te.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",P=new RegExp(`^https?://${E}/${v}/b/${s}/o${I}`,"i"),N={bucket:1,path:3},V=t===gI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",q=new RegExp(`^https?://${V}/${s}/${x}`,"i"),H=[{regex:d,indices:f,postModify:a},{regex:P,indices:N,postModify:m},{regex:q,indices:{bucket:1,path:2},postModify:m}];for(let te=0;te<H.length;te++){const le=H[te],ae=le.regex.exec(e);if(ae){const k=ae[le.indices.bucket];let S=ae[le.indices.path];S||(S=""),r=new rr(k,S),le.postModify(r);break}}if(r==null)throw n1(e);return r}}class s1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(n,e,t){let r=1,s=null,a=null,l=!1,d=0;function f(){return d===2}let m=!1;function v(...x){m||(m=!0,e.apply(null,x))}function E(x){s=setTimeout(()=>{s=null,n(P,f())},x)}function I(){a&&clearTimeout(a)}function P(x,...q){if(m){I();return}if(x){I(),v.call(null,x,...q);return}if(f()||l){I(),v.call(null,x,...q);return}r<64&&(r*=2);let H;d===1?(d=2,H=0):H=(r+Math.random())*1e3,E(H)}let N=!1;function V(x){N||(N=!0,I(),!m&&(s!==null?(x||(d=2),clearTimeout(s),E(0)):x||(d=1)))}return E(0),a=setTimeout(()=>{l=!0,V(!0)},t),V}function a1(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n){return n!==void 0}function kv(n,e,t,r){if(r<e)throw Cv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cv(`Invalid value for '${n}'. Expected ${t} or less.`)}function l1(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var jh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(jh||(jh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t,r,s,a,l,d,f,m,v,E,I=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=E,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,N)=>{this.resolve_=P,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new lh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===jh.NO_ERROR,f=a.getStatus();if(!d||c1(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===jh.ABORT;r(!1,new lh(!1,null,v));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new lh(m,a))})},t=(r,s)=>{const a=this.resolve_,l=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());u1(f)?a(f):a()}catch(f){l(f)}else if(d!==null){const f=Zk();f.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,f)):l(f)}else if(s.canceled){const f=this.appDelete_?yI():t1();l(f)}else{const f=e1();l(f)}};this.canceled_?t(!1,new lh(!1,null,!0)):this.backoffId_=o1(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function d1(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function f1(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function p1(n,e){e&&(n["X-Firebase-GMPID"]=e)}function m1(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function g1(n,e,t,r,s,a,l=!0){const d=l1(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return p1(m,e),d1(m,t),f1(m,a),m1(m,r),new h1(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function _1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this._service=e,t instanceof rr?this._location=t:this._location=rr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $h(e,t)}get root(){const e=new rr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _1(this._location.path)}get storage(){return this._service}get parent(){const e=y1(this._location.path);if(e===null)return null;const t=new rr(this._location.bucket,e);return new $h(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw i1(e)}}function xv(n,e){const t=e==null?void 0:e[Jk];return t==null?null:rr.makeFromBucketSpec(t,n)}function v1(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:b0(s,n.app.options.projectId))}class w1{constructor(e,t,r,s,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=gI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yk,this._maxUploadRetryTime=Xk,this._requests=new Set,s!=null?this._bucket=rr.makeFromBucketSpec(s,this._host):this._bucket=xv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rr.makeFromBucketSpec(this._url,e):this._bucket=xv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $h(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new s1(yI());{const l=g1(e,this._appId,r,s,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Dv="@firebase/storage",bv="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="storage";function E1(n=NE(),e){n=At(n);const r=hd(n,_I).getImmediate({identifier:e}),s=x0("storage");return s&&I1(r,...s),r}function I1(n,e,t,r={}){v1(n,e,t,r)}function T1(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new w1(t,r,s,e,co)}function S1(){to(new ss(_I,T1,"PUBLIC").setMultipleInstances(!0)),ri(Dv,bv,""),ri(Dv,bv,"esm2017")}S1();var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,vI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function R(){}R.prototype=S.prototype,k.D=S.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(b,L,F){for(var C=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)C[dt-2]=arguments[dt];return S.prototype[L].apply(b,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,S,R){R||(R=0);var b=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)b[L]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(L=0;16>L;++L)b[L]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=k.g[0],R=k.g[1],L=k.g[2];var F=k.g[3],C=S+(F^R&(L^F))+b[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+b[1]+3905402710&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+b[2]+606105819&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+b[3]+3250441966&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(F^R&(L^F))+b[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+b[5]+1200080426&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+b[6]+2821735955&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+b[7]+4249261313&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(F^R&(L^F))+b[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+b[9]+2336552879&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+b[10]+4294925233&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+b[11]+2304563134&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(F^R&(L^F))+b[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+b[13]+4254626195&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+b[14]+2792965006&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+b[15]+1236535329&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(L^F&(R^L))+b[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+b[6]+3225465664&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+b[11]+643717713&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+b[0]+3921069994&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(L^F&(R^L))+b[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+b[10]+38016083&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+b[15]+3634488961&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+b[4]+3889429448&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(L^F&(R^L))+b[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+b[14]+3275163606&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+b[3]+4107603335&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+b[8]+1163531501&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(L^F&(R^L))+b[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+b[2]+4243563512&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+b[7]+1735328473&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+b[12]+2368359562&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(R^L^F)+b[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+b[8]+2272392833&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+b[11]+1839030562&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+b[14]+4259657740&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(R^L^F)+b[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+b[4]+1272893353&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+b[7]+4139469664&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+b[10]+3200236656&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(R^L^F)+b[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+b[0]+3936430074&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+b[3]+3572445317&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+b[6]+76029189&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(R^L^F)+b[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+b[12]+3873151461&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+b[15]+530742520&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+b[2]+3299628645&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(L^(R|~F))+b[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+b[7]+1126891415&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+b[14]+2878612391&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+b[5]+4237533241&4294967295,R=L+(C<<21&4294967295|C>>>11),C=S+(L^(R|~F))+b[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+b[3]+2399980690&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+b[10]+4293915773&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+b[1]+2240044497&4294967295,R=L+(C<<21&4294967295|C>>>11),C=S+(L^(R|~F))+b[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+b[15]+4264355552&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+b[6]+2734768916&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+b[13]+1309151649&4294967295,R=L+(C<<21&4294967295|C>>>11),C=S+(L^(R|~F))+b[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+b[11]+3174756917&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+b[2]+718787259&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+b[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+F&4294967295}r.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var R=S-this.blockSize,b=this.B,L=this.h,F=0;F<S;){if(L==0)for(;F<=R;)s(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<S;)if(b[L++]=k.charCodeAt(F++),L==this.blockSize){s(this,b),L=0;break}}else for(;F<S;)if(b[L++]=k[F++],L==this.blockSize){s(this,b),L=0;break}}this.h=L,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var R=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=R&255,R/=256;for(this.u(k),k=Array(16),S=R=0;4>S;++S)for(var b=0;32>b;b+=8)k[R++]=this.g[S]>>>b&255;return k};function a(k,S){var R=d;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=S(k)}function l(k,S){this.h=S;for(var R=[],b=!0,L=k.length-1;0<=L;L--){var F=k[L]|0;b&&F==S||(R[L]=F,b=!1)}this.g=R}var d={};function f(k){return-128<=k&&128>k?a(k,function(S){return new l([S|0],0>S?-1:0)}):new l([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return x(m(-k));for(var S=[],R=1,b=0;k>=R;b++)S[b]=k/R|0,R*=4294967296;return new l(S,0)}function v(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return x(v(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(S,8)),b=E,L=0;L<k.length;L+=8){var F=Math.min(8,k.length-L),C=parseInt(k.substring(L,L+F),S);8>F?(F=m(Math.pow(S,F)),b=b.j(F).add(m(C))):(b=b.j(R),b=b.add(m(C)))}return b}var E=f(0),I=f(1),P=f(16777216);n=l.prototype,n.m=function(){if(V(this))return-x(this).m();for(var k=0,S=1,R=0;R<this.g.length;R++){var b=this.i(R);k+=(0<=b?b:4294967296+b)*S,S*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(V(this))return"-"+x(this).toString(k);for(var S=m(Math.pow(k,6)),R=this,b="";;){var L=te(R,S).g;R=q(R,L.j(S));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=L,N(R))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function V(k){return k.h==-1}n.l=function(k){return k=q(this,k),V(k)?-1:N(k)?0:1};function x(k){for(var S=k.g.length,R=[],b=0;b<S;b++)R[b]=~k.g[b];return new l(R,~k.h).add(I)}n.abs=function(){return V(this)?x(this):this},n.add=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],b=0,L=0;L<=S;L++){var F=b+(this.i(L)&65535)+(k.i(L)&65535),C=(F>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);b=C>>>16,F&=65535,C&=65535,R[L]=C<<16|F}return new l(R,R[R.length-1]&-2147483648?-1:0)};function q(k,S){return k.add(x(S))}n.j=function(k){if(N(this)||N(k))return E;if(V(this))return V(k)?x(this).j(x(k)):x(x(this).j(k));if(V(k))return x(this.j(x(k)));if(0>this.l(P)&&0>k.l(P))return m(this.m()*k.m());for(var S=this.g.length+k.g.length,R=[],b=0;b<2*S;b++)R[b]=0;for(b=0;b<this.g.length;b++)for(var L=0;L<k.g.length;L++){var F=this.i(b)>>>16,C=this.i(b)&65535,dt=k.i(L)>>>16,Ut=k.i(L)&65535;R[2*b+2*L]+=C*Ut,G(R,2*b+2*L),R[2*b+2*L+1]+=F*Ut,G(R,2*b+2*L+1),R[2*b+2*L+1]+=C*dt,G(R,2*b+2*L+1),R[2*b+2*L+2]+=F*dt,G(R,2*b+2*L+2)}for(b=0;b<S;b++)R[b]=R[2*b+1]<<16|R[2*b];for(b=S;b<2*S;b++)R[b]=0;return new l(R,0)};function G(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function H(k,S){this.g=k,this.h=S}function te(k,S){if(N(S))throw Error("division by zero");if(N(k))return new H(E,E);if(V(k))return S=te(x(k),S),new H(x(S.g),x(S.h));if(V(S))return S=te(k,x(S)),new H(x(S.g),S.h);if(30<k.g.length){if(V(k)||V(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,b=S;0>=b.l(k);)R=le(R),b=le(b);var L=ae(R,1),F=ae(b,1);for(b=ae(b,2),R=ae(R,2);!N(b);){var C=F.add(b);0>=C.l(k)&&(L=L.add(R),F=C),b=ae(b,1),R=ae(R,1)}return S=q(k,L.j(S)),new H(L,S)}for(L=E;0<=k.l(S);){for(R=Math.max(1,Math.floor(k.m()/S.m())),b=Math.ceil(Math.log(R)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=m(R),C=F.j(S);V(C)||0<C.l(k);)R-=b,F=m(R),C=F.j(S);N(F)&&(F=I),L=L.add(F),k=q(k,C)}return new H(L,k)}n.A=function(k){return te(this,k).h},n.and=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],b=0;b<S;b++)R[b]=this.i(b)&k.i(b);return new l(R,this.h&k.h)},n.or=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],b=0;b<S;b++)R[b]=this.i(b)|k.i(b);return new l(R,this.h|k.h)},n.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],b=0;b<S;b++)R[b]=this.i(b)^k.i(b);return new l(R,this.h^k.h)};function le(k){for(var S=k.g.length+1,R=[],b=0;b<S;b++)R[b]=k.i(b)<<1|k.i(b-1)>>>31;return new l(R,k.h)}function ae(k,S){var R=S>>5;S%=32;for(var b=k.g.length-R,L=[],F=0;F<b;F++)L[F]=0<S?k.i(F+R)>>>S|k.i(F+R+1)<<32-S:k.i(F+R);return new l(L,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vI=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,Zi=l}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wI,Zu,EI,Th,jp,II,TI,SI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var _=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var B=c[T];if(!(B in _))break e;_=_[B]}c=c[c.length-1],T=_[c],g=g(T),g!=T&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,T=!1,B={next:function(){if(!T&&_<c.length){var K=_++;return{value:g(K,c[K]),done:!1}}return T=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function E(c,g,_){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,T),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function I(c,g,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,I.apply(null,arguments)}function P(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function N(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(T,B,K){for(var ie=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ie[qe-2]=arguments[qe];return g.prototype[B].apply(T,ie)}}function V(c){const g=c.length;if(0<g){const _=Array(g);for(let T=0;T<g;T++)_[T]=c[T];return _}return[]}function x(c,g){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(f(T)){const B=c.length||0,K=T.length||0;c.length=B+K;for(let ie=0;ie<K;ie++)c[B+ie]=T[ie]}else c.push(T)}}class q{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var le=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ae(c,g,_){for(const T in c)g.call(_,c[T],T,c)}function k(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,g){let _,T;for(let B=1;B<arguments.length;B++){T=arguments[B];for(_ in T)c[_]=T[_];for(let K=0;K<R.length;K++)_=R[K],Object.prototype.hasOwnProperty.call(T,_)&&(c[_]=T[_])}}function L(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function F(c){d.setTimeout(()=>{throw c},0)}function C(){var c=Ee;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class dt{constructor(){this.h=this.g=null}add(g,_){const T=Ut.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Ut=new q(()=>new Bt,c=>c.reset());class Bt{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let He,oe=!1,Ee=new dt,he=()=>{const c=d.Promise.resolve(void 0);He=()=>{c.then(M)}};var M=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(_){F(_)}var g=Ut;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}oe=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c}();function xe(c,g){if(ve.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(le){e:{try{te(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Oe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xe.aa.h.call(this)}}N(xe,ve);var Oe={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Qe(c,g,_,T,B){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=B,this.key=++ze,this.da=this.fa=!1}function Ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Dr(c){this.src=c,this.g={},this.h=0}Dr.prototype.add=function(c,g,_,T,B){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ie=ci(c,g,T,B);return-1<ie?(g=c[ie],_||(g.fa=!1)):(g=new Qe(g,this.src,K,!!T,B),g.fa=_,c.push(g)),g};function fo(c,g){var _=g.type;if(_ in c.g){var T=c.g[_],B=Array.prototype.indexOf.call(T,g,void 0),K;(K=0<=B)&&Array.prototype.splice.call(T,B,1),K&&(Ct(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ci(c,g,_,T){for(var B=0;B<c.length;++B){var K=c[B];if(!K.da&&K.listener==g&&K.capture==!!_&&K.ha==T)return B}return-1}var ms="closure_lm_"+(1e6*Math.random()|0),po={};function Ya(c,g,_,T,B){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Ya(c,g[K],_,T,B);return null}return _=eu(_),c&&c[Be]?c.K(g,_,m(T)?!!T.capture:!1,B):Xa(c,g,_,!1,T,B)}function Xa(c,g,_,T,B,K){if(!g)throw Error("Invalid event type");var ie=m(B)?!!B.capture:!!B,qe=go(c);if(qe||(c[ms]=qe=new Dr(c)),_=qe.add(g,_,T,ie,K),_.proxy)return _;if(T=$l(),_.proxy=T,T.src=c,T.listener=_,c.addEventListener)Ce||(B=ie),B===void 0&&(B=!1),c.addEventListener(g.toString(),T,B);else if(c.attachEvent)c.attachEvent(Nr(g.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $l(){function c(_){return g.call(c.src,c.listener,_)}const g=Za;return c}function mo(c,g,_,T,B){if(Array.isArray(g))for(var K=0;K<g.length;K++)mo(c,g[K],_,T,B);else T=m(T)?!!T.capture:!!T,_=eu(_),c&&c[Be]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],_=ci(K,_,T,B),-1<_&&(Ct(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=go(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ci(g,_,T,B)),(_=-1<c?g[c]:null)&&br(_))}function br(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Be])fo(g.i,c);else{var _=c.type,T=c.proxy;g.removeEventListener?g.removeEventListener(_,T,c.capture):g.detachEvent?g.detachEvent(Nr(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=go(g))?(fo(_,c),_.h==0&&(_.src=null,g[ms]=null)):Ct(c)}}}function Nr(c){return c in po?po[c]:po[c]="on"+c}function Za(c,g){if(c.da)c=!0;else{g=new xe(g,this);var _=c.listener,T=c.ha||c.src;c.fa&&br(c),c=_.call(T,g)}return c}function go(c){return c=c[ms],c instanceof Dr?c:null}var yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(c){return typeof c=="function"?c:(c[yo]||(c[yo]=function(g){return c.handleEvent(g)}),c[yo])}function wt(){Y.call(this),this.i=new Dr(this),this.M=this,this.F=null}N(wt,Y),wt.prototype[Be]=!0,wt.prototype.removeEventListener=function(c,g,_,T){mo(this,c,g,_,T)};function Et(c,g){var _,T=c.F;if(T)for(_=[];T;T=T.F)_.push(T);if(c=c.M,T=g.type||g,typeof g=="string")g=new ve(g,c);else if(g instanceof ve)g.target=g.target||c;else{var B=g;g=new ve(T,c),b(g,B)}if(B=!0,_)for(var K=_.length-1;0<=K;K--){var ie=g.g=_[K];B=Vr(ie,T,!0,g)&&B}if(ie=g.g=c,B=Vr(ie,T,!0,g)&&B,B=Vr(ie,T,!1,g)&&B,_)for(K=0;K<_.length;K++)ie=g.g=_[K],B=Vr(ie,T,!1,g)&&B}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],T=0;T<_.length;T++)Ct(_[T]);delete c.g[g],c.h--}}this.F=null},wt.prototype.K=function(c,g,_,T){return this.i.add(String(c),g,!1,_,T)},wt.prototype.L=function(c,g,_,T){return this.i.add(String(c),g,!0,_,T)};function Vr(c,g,_,T){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,K=0;K<g.length;++K){var ie=g[K];if(ie&&!ie.da&&ie.capture==_){var qe=ie.listener,It=ie.ha||ie.src;ie.fa&&fo(c.i,ie),B=qe.call(It,T)!==!1&&B}}return B&&!T.defaultPrevented}function tu(c,g,_){if(typeof c=="function")_&&(c=I(c,_));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function hi(c){c.g=tu(()=>{c.g=null,c.i&&(c.i=!1,hi(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class gs extends Y{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:hi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(c){Y.call(this),this.h=c,this.g={}}N(ys,Y);var nu=[];function ru(c){ae(c.g,function(g,_){this.g.hasOwnProperty(_)&&br(g)},c),c.g={}}ys.prototype.N=function(){ys.aa.N.call(this),ru(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iu=d.JSON.stringify,su=d.JSON.parse,ou=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function _s(){}_s.prototype.h=null;function _o(c){return c.h||(c.h=c.i())}function vo(){}var Cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){ve.call(this,"d")}N(or,ve);function wo(){ve.call(this,"c")}N(wo,ve);var ar={},au=null;function vs(){return au=au||new wt}ar.La="serverreachability";function uu(c){ve.call(this,ar.La,c)}N(uu,ve);function Or(c){const g=vs();Et(g,new uu(g))}ar.STAT_EVENT="statevent";function lu(c,g){ve.call(this,ar.STAT_EVENT,c),this.stat=g}N(lu,ve);function ft(c){const g=vs();Et(g,new lu(g,c))}ar.Ma="timingevent";function Eo(c,g){ve.call(this,ar.Ma,c),this.size=g}N(Eo,ve);function Un(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function Es(c,g,_,T,B,K){c.info(function(){if(c.g)if(K)for(var ie="",qe=K.split("&"),It=0;It<qe.length;It++){var Le=qe[It].split("=");if(1<Le.length){var kt=Le[0];Le=Le[1];var yt=kt.split("_");ie=2<=yt.length&&yt[1]=="type"?ie+(kt+"="+Le+"&"):ie+(kt+"=redacted&")}}else ie=null;else ie=K;return"XMLHTTP REQ ("+T+") [attempt "+B+"]: "+g+`
`+_+`
`+ie})}function Io(c,g,_,T,B,K,ie){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+B+"]: "+g+`
`+_+`
`+K+" "+ie})}function Bn(c,g,_,T){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Od(c,_)+(T?" "+T:"")})}function cu(c,g){c.info(function(){return"TIMEOUT: "+g})}ws.prototype.info=function(){};function Od(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var T=_[c];if(!(2>T.length)){var B=T[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ie=1;ie<B.length;ie++)B[ie]=""}}}}return iu(_)}catch{return g}}var To={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ql={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zn;function Is(){}N(Is,_s),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},zn=new Is;function jn(c,g,_,T){this.j=c,this.i=g,this.l=_,this.R=T||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kl}function Kl(){this.i=null,this.g="",this.h=!1}var hu={},So={};function Ro(c,g,_){c.L=1,c.v=gi(vn(g)),c.m=_,c.P=!0,du(c,null)}function du(c,g){c.F=Date.now(),Je(c),c.A=vn(c.v);var _=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),_i(_.i,"t",T),c.C=0,_=c.j.J,c.h=new Kl,c.g=lc(c.j,_?g:null,!c.m),0<c.O&&(c.M=new gs(I(c.Y,c,c.g),c.O)),g=c.U,_=c.g,T=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(nu[0]=B.toString()),B=nu);for(var K=0;K<B.length;K++){var ie=Ya(_,B[K],T||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Or(),Es(c.i,c.u,c.A,c.l,c.R,c.m)}jn.prototype.ca=function(c){c=c.target;const g=this.M;g&&un(c)==3?g.j():this.Y(c)},jn.prototype.Y=function(c){try{if(c==this.g)e:{const yt=un(this.g);var g=this.g.Ba();const Dn=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||_u(this.g)))){this.J||yt!=4||g==7||(g==8||0>=Dn?Or(3):Or(2)),Ts(this);var _=this.g.Z();this.X=_;t:if(Gl(this)){var T=_u(this.g);c="";var B=T.length,K=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),di(this);var ie="";break t}this.h.i=new d.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(T[g],{stream:!(K&&g==B-1)});T.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=_==200,Io(this.i,this.u,this.A,this.l,this.R,yt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,It=this.g;if((qe=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(qe)){var Le=qe;break t}}Le=null}if(_=Le)Bn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fu(this,_);else{this.o=!1,this.s=3,ft(12),kn(this),di(this);break e}}if(this.P){_=!0;let En;for(;!this.J&&this.C<ie.length;)if(En=Ld(this,ie),En==So){yt==4&&(this.s=4,ft(14),_=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(En==hu){this.s=4,ft(15),Bn(this.i,this.l,ie,"[Invalid Chunk]"),_=!1;break}else Bn(this.i,this.l,En,null),fu(this,En);if(Gl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||ie.length!=0||this.h.h||(this.s=1,ft(16),_=!1),this.o=this.o&&_,!_)Bn(this.i,this.l,ie,"[Invalid Chunked Response]"),kn(this),di(this);else if(0<ie.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),wu(kt),kt.M=!0,ft(11))}}else Bn(this.i,this.l,ie,null),fu(this,ie);yt==4&&kn(this),this.o&&!this.J&&(yt==4?Lo(this.j,this):(this.o=!1,Je(this)))}else Do(this.g),_==400&&0<ie.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),kn(this),di(this)}}}catch{}finally{}};function Gl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ld(c,g){var _=c.C,T=g.indexOf(`
`,_);return T==-1?So:(_=Number(g.substring(_,T)),isNaN(_)?hu:(T+=1,T+_>g.length?So:(g=g.slice(T,T+_),c.C=T+_,g)))}jn.prototype.cancel=function(){this.J=!0,kn(this)};function Je(c){c.S=Date.now()+c.I,Hl(c,c.I)}function Hl(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Un(I(c.ba,c),g)}function Ts(c){c.B&&(d.clearTimeout(c.B),c.B=null)}jn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(cu(this.i,this.A),this.L!=2&&(Or(),ft(17)),kn(this),this.s=2,di(this)):Hl(this,this.S-c)};function di(c){c.j.G==0||c.J||Lo(c.j,c)}function kn(c){Ts(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ru(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function fu(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Xt(_.h,c))){if(!c.K&&Xt(_.h,c)&&_.G==3){try{var T=_.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var B=T;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Oo(_),Hn(_);else break e;Vo(_),ft(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=Un(I(_.Za,_),6e3));if(1>=Ql(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Br(_,11)}else if((c.K||_.g==c)&&Oo(_),!G(g))for(B=_.Da.g.parse(g),g=0;g<B.length;g++){let Le=B[g];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const kt=Le[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const yt=Le[4];yt!=null&&(_.Aa=yt,_.j.info("SVER="+_.Aa));const Dn=Le[5];Dn!=null&&typeof Dn=="number"&&0<Dn&&(T=1.5*Dn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const En=c.g;if(En){const xs=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var K=T.h;K.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(pu(K,K.h),K.h=null))}if(T.D){const Fo=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(T.ya=Fo,We(T.I,T.D,Fo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ie=c;if(T.qa=uc(T,T.J?T.ia:null,T.W),ie.K){Jl(T.h,ie);var qe=ie,It=T.L;It&&(qe.I=It),qe.B&&(Ts(qe),Je(qe)),T.g=ie}else ks(T);0<_.i.length&&hr(_)}else Le[0]!="stop"&&Le[0]!="close"||Br(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Br(_,7):Ot(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}Or(4)}catch{}}var Wl=class{constructor(c,g){this.g=c,this.map=g}};function Ss(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _n(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ql(c){return c.h?1:c.g?c.g.size:0}function Xt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function pu(c,g){c.g?c.g.add(g):c.h=g}function Jl(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ss.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Yl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return V(c.i)}function Ao(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,T=0;T<_;T++)g.push(c[T]);return g}g=[],_=0;for(T in c)g[_++]=c[T];return g}function Po(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const T in c)g[_++]=T;return g}}}function fi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Po(c),T=Ao(c),B=T.length,K=0;K<B;K++)g.call(void 0,T[K],_&&_[K],c)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Md(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var T=c[_].indexOf("="),B=null;if(0<=T){var K=c[_].substring(0,T);B=c[_].substring(T+1)}else K=c[_];g(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Lr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Lr){this.h=c.h,As(this,c.j),this.o=c.o,this.g=c.g,pi(this,c.s),this.l=c.l;var g=c.i,_=new ur;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),mi(this,_),this.m=c.m}else c&&(g=String(c).match(Rs))?(this.h=!1,As(this,g[1]||"",!0),this.o=Ve(g[2]||""),this.g=Ve(g[3]||"",!0),pi(this,g[4]),this.l=Ve(g[5]||"",!0),mi(this,g[6]||"",!0),this.m=Ve(g[7]||"")):(this.h=!1,this.i=new ur(null,this.h))}Lr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(yi(g,Co,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(yi(g,Co,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(yi(_,_.charAt(0)=="/"?ec:Zl,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",yi(_,mu)),c.join("")};function vn(c){return new Lr(c)}function As(c,g,_){c.j=_?Ve(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function pi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function mi(c,g,_){g instanceof ur?(c.i=g,lr(c.i,c.h)):(_||(g=yi(g,tc)),c.i=new ur(g,c.h))}function We(c,g,_){c.i.set(g,_)}function gi(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ve(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function yi(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Xl),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Xl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Co=/[#\/\?@]/g,Zl=/[#\?:]/g,ec=/[#\?]/g,tc=/[#\?@]/g,mu=/#/g;function ur(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Vt(c){c.g||(c.g=new Map,c.h=0,c.i&&Md(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=ur.prototype,n.add=function(c,g){Vt(this),this.i=null,c=xn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function $n(c,g){Vt(c),g=xn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function qn(c,g){return Vt(c),g=xn(c,g),c.g.has(g)}n.forEach=function(c,g){Vt(this),this.g.forEach(function(_,T){_.forEach(function(B){c.call(g,B,T,this)},this)},this)},n.na=function(){Vt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let T=0;T<g.length;T++){const B=c[T];for(let K=0;K<B.length;K++)_.push(g[T])}return _},n.V=function(c){Vt(this);let g=[];if(typeof c=="string")qn(this,c)&&(g=g.concat(this.g.get(xn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return Vt(this),this.i=null,c=xn(this,c),qn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function _i(c,g,_){$n(c,g),0<_.length&&(c.i=null,c.g.set(xn(c,g),V(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var T=g[_];const K=encodeURIComponent(String(T)),ie=this.V(T);for(T=0;T<ie.length;T++){var B=K;ie[T]!==""&&(B+="="+encodeURIComponent(String(ie[T]))),c.push(B)}}return this.i=c.join("&")};function xn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function lr(c,g){g&&!c.j&&(Vt(c),c.i=null,c.g.forEach(function(_,T){var B=T.toLowerCase();T!=B&&($n(this,T),_i(this,B,_))},c)),c.j=g}function Fd(c,g){const _=new ws;if(d.Image){const T=new Image;T.onload=P(an,_,"TestLoadImage: loaded",!0,g,T),T.onerror=P(an,_,"TestLoadImage: error",!1,g,T),T.onabort=P(an,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=P(an,_,"TestLoadImage: timeout",!1,g,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else g(!1)}function nc(c,g){const _=new ws,T=new AbortController,B=setTimeout(()=>{T.abort(),an(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:T.signal}).then(K=>{clearTimeout(B),K.ok?an(_,"TestPingServer: ok",!0,g):an(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),an(_,"TestPingServer: error",!1,g)})}function an(c,g,_,T,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),T(_)}catch{}}function Ud(){this.g=new ou}function rc(c,g,_){const T=_||"";try{fi(c,function(B,K){let ie=B;m(B)&&(ie=iu(B)),g.push(T+K+"="+encodeURIComponent(ie))})}catch(B){throw g.push(T+"type="+encodeURIComponent("_badmap")),B}}function Mr(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Mr,_s),Mr.prototype.g=function(){return new Ps(this.l,this.j)},Mr.prototype.i=function(c){return function(){return c}}({});function Ps(c,g){wt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ps,wt),n=Ps.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Gn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ic(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ic(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Kn(this):Gn(this),this.readyState==3&&ic(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Kn(this))},n.Qa=function(c){this.g&&(this.response=c,Kn(this))},n.ga=function(){this.g&&Kn(this)};function Kn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Gn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Gn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fr(c){let g="";return ae(c,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function vi(c,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Fr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):We(c,g,_))}function tt(c){wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(tt,wt);var Bd=/^https?$/i,gu=["POST","PUT"];n=tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zn.g(),this.v=this.o?_o(this.o):_o(zn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){Cs(this,K);return}if(c=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var B in T)_.set(B,T[B]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const K of T.keys())_.set(K,T.get(K));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),B=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(gu,g,void 0))||T||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ie]of _)this.g.setRequestHeader(K,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xo(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Cs(this,K)}};function Cs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ko(c),wn(c)}function ko(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),wn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},n.bb=function(){yu(this)};function yu(c){if(c.h&&typeof l<"u"&&(!c.v[1]||un(c)!=4||c.Z()!=2)){if(c.u&&un(c)==4)tu(c.Ea,0,c);else if(Et(c,"readystatechange"),un(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=ie===0){var B=String(c.D).match(Rs)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),T=!Bd.test(B?B.toLowerCase():"")}_=T}if(_)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var K=2<un(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",ko(c)}}finally{wn(c)}}}}function wn(c,g){if(c.g){xo(c);const _=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Et(c,"ready");try{_.onreadystatechange=T}catch{}}}function xo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function un(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),su(g)}};function _u(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Do(c){const g={};c=(c.g&&2<=un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(G(c[T]))continue;var _=L(c[T]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=g[B]||[];g[B]=K,K.push(_)}k(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function vu(c){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cr("baseRetryDelayMs",5e3,c),this.cb=cr("retryDelaySeedMs",1e4,c),this.Wa=cr("forwardChannelMaxRetries",2,c),this.wa=cr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ss(c&&c.concurrentRequestLimit),this.Da=new Ud,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vu.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,T){ft(0),this.W=c,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=uc(this,null,this.W),hr(this)};function Ot(c){if(bo(c),c.G==3){var g=c.U++,_=vn(c.I);if(We(_,"SID",c.K),We(_,"RID",g),We(_,"TYPE","terminate"),Ur(c,_),g=new jn(c,c.j,g),g.L=2,g.v=gi(vn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=lc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Je(g)}ac(c)}function Hn(c){c.g&&(wu(c),c.g.cancel(),c.g=null)}function bo(c){Hn(c),c.u&&(d.clearTimeout(c.u),c.u=null),Oo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function hr(c){if(!_n(c.h)&&!c.s){c.s=!0;var g=c.Ga;He||he(),oe||(He(),oe=!0),Ee.add(g,c),c.B=0}}function zd(c,g){return Ql(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Un(I(c.Ga,c,g),oc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new jn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=S(K),b(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=wi(this,B,g),_=vn(this.I),We(_,"RID",c),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),Ur(this,_),K&&(this.O?g="headers="+encodeURIComponent(String(Fr(K)))+"&"+g:this.m&&vi(_,this.m,K)),pu(this.h,B),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",g),We(_,"SID","null"),B.T=!0,Ro(B,_,null)):Ro(B,_,g),this.G=2}}else this.G==3&&(c?No(this,c):this.i.length==0||_n(this.h)||No(this))};function No(c,g){var _;g?_=g.l:_=c.U++;const T=vn(c.I);We(T,"SID",c.K),We(T,"RID",_),We(T,"AID",c.T),Ur(c,T),c.m&&c.o&&vi(T,c.m,c.o),_=new jn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=wi(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pu(c.h,_),Ro(_,T,g)}function Ur(c,g){c.H&&ae(c.H,function(_,T){We(g,T,_)}),c.l&&fi({},function(_,T){We(g,T,_)})}function wi(c,g,_){_=Math.min(c.i.length,_);var T=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let K=-1;for(;;){const ie=["count="+_];K==-1?0<_?(K=B[0].g,ie.push("ofs="+K)):K=0:ie.push("ofs="+K);let qe=!0;for(let It=0;It<_;It++){let Le=B[It].g;const kt=B[It].map;if(Le-=K,0>Le)K=Math.max(0,B[It].g-100),qe=!1;else try{rc(kt,ie,"req"+Le+"_")}catch{T&&T(kt)}}if(qe){T=ie.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,T}function ks(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;He||he(),oe||(He(),oe=!0),Ee.add(g,c),c.v=0}}function Vo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Un(I(c.Fa,c),oc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,sc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Un(I(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Hn(this),sc(this))};function wu(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function sc(c){c.g=new jn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=vn(c.qa);We(g,"RID","rpc"),We(g,"SID",c.K),We(g,"AID",c.T),We(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(g,"TO",c.ja),We(g,"TYPE","xmlhttp"),Ur(c,g),c.m&&c.o&&vi(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=gi(vn(g)),_.m=null,_.P=!0,du(_,c)}n.Za=function(){this.C!=null&&(this.C=null,Hn(this),Vo(this),ft(19))};function Oo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Lo(c,g){var _=null;if(c.g==g){Oo(c),wu(c),c.g=null;var T=2}else if(Xt(c.h,g))_=g.D,Jl(c.h,g),T=1;else return;if(c.G!=0){if(g.o)if(T==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;T=vs(),Et(T,new Eo(T,_)),hr(c)}else ks(c);else if(B=g.s,B==3||B==0&&0<g.X||!(T==1&&zd(c,g)||T==2&&Vo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),B){case 1:Br(c,5);break;case 4:Br(c,10);break;case 3:Br(c,6);break;default:Br(c,2)}}}function oc(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Br(c,g){if(c.j.info("Error code "+g),g==2){var _=I(c.fb,c),T=c.Xa;const B=!T;T=new Lr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||As(T,"https"),gi(T),B?Fd(T.toString(),_):nc(T.toString(),_)}else ft(2);c.G=0,c.l&&c.l.sa(g),ac(c),bo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function ac(c){if(c.G=0,c.ka=[],c.l){const g=Yl(c.h);(g.length!=0||c.i.length!=0)&&(x(c.ka,g),x(c.ka,c.i),c.h.i.length=0,V(c.i),c.i.length=0),c.l.ra()}}function uc(c,g,_){var T=_ instanceof Lr?vn(_):new Lr(_);if(T.g!="")g&&(T.g=g+"."+T.g),pi(T,T.s);else{var B=d.location;T=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var K=new Lr(null);T&&As(K,T),g&&(K.g=g),B&&pi(K,B),_&&(K.l=_),T=K}return _=c.D,g=c.ya,_&&g&&We(T,_,g),We(T,"VER",c.la),Ur(c,T),T}function lc(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new tt(new Mr({eb:_})):new tt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}n=Eu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Mo(){}Mo.prototype.g=function(c,g){return new Zt(c,g)};function Zt(c,g){wt.call(this),this.g=new vu(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!G(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!G(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new dr(this)}N(Zt,wt),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Ot(this.g)},Zt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=iu(c),c=_);g.i.push(new Wl(g.Ya++,c)),g.G==3&&hr(g)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Zt.aa.N.call(this)};function cc(c){or.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}N(cc,or);function hc(){wo.call(this),this.status=1}N(hc,wo);function dr(c){this.g=c}N(dr,Eu),dr.prototype.ua=function(){Et(this.g,"a")},dr.prototype.ta=function(c){Et(this.g,new cc(c))},dr.prototype.sa=function(c){Et(this.g,new hc)},dr.prototype.ra=function(){Et(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,SI=function(){return new Mo},TI=function(){return vs()},II=ar,jp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,Th=To,ql.COMPLETE="complete",EI=ql,vo.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Zu=vo,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,wI=tt}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const Vv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new wm("@firebase/firestore");function la(){return ro.logLevel}function Z(n,...e){if(ro.logLevel<=be.DEBUG){const t=e.map(Nm);ro.debug(`Firestore (${Ga}): ${n}`,...t)}}function mt(n,...e){if(ro.logLevel<=be.ERROR){const t=e.map(Nm);ro.error(`Firestore (${Ga}): ${n}`,...t)}}function ka(n,...e){if(ro.logLevel<=be.WARN){const t=e.map(Nm);ro.warn(`Firestore (${Ga}): ${n}`,...t)}}function Nm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n="Unexpected state"){const e=`FIRESTORE (${Ga}) INTERNAL ASSERTION FAILED: `+n;throw mt(e),new Error(e)}function _e(n,e){n||pe()}function ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wt.UNAUTHENTICATED))}shutdown(){}}class P1{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new es;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new es,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},d=f=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new es)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new R1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Wt(e)}}class C1{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class k1{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new C1(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){_e(this.o===void 0);const r=a=>{a.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,Z("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string"),this.R=t.token,new x1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=b1(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function Ae(n,e){return n<e?-1:n>e?1:0}function xa(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function AI(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ut(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new ut(0,0))}static max(){return new we(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(),r===void 0?r=e.length-t:r>e.length-t&&pe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=yr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=yr.isNumericId(e),s=yr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?yr.extractNumericId(e).compare(yr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zi.fromString(e.substring(4,e.length-2))}}class $e extends yr{construct(e,t,r){return new $e(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new $e(t)}static emptyPath(){return new $e([])}}const N1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends yr{construct(e,t,r){return new at(e,t,r)}static isValidIdentifier(e){return N1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(l=!l,s++):d!=="."||l?(r+=d,s++):(a(),s++)}if(a(),l)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(t)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue($e.fromString(e))}static fromName(e){return new ue($e.fromString(e).popFirst(5))}static empty(){return new ue($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new $e(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function $p(n){return n.fields.find(e=>e.kind===2)}function Ks(n){return n.fields.filter(e=>e.kind!==2)}qh.UNKNOWN_ID=-1;class Sh{constructor(e,t){this.fieldPath=e,this.kind=t}}class yl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yl(0,Pn.min())}}function PI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new ut(t+1,0):new ut(t,r));return new Pn(s,ue.empty(),e)}function CI(n){return new Pn(n.readTime,n.key,-1)}class Pn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pn(we.min(),ue.empty(),-1)}static max(){return new Pn(we.max(),ue.empty(),-1)}}function Vm(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cs(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==kI)throw n;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,r)=>{t(e)})}static reject(e){return new U((t,r)=>{r(e)})}static waitFor(e){return new U((t,r)=>{let s=0,a=0,l=!1;e.forEach(d=>{++s,d.next(()=>{++a,l&&a===s&&t()},f=>r(f))}),l=!0,a===s&&t()})}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next(s=>s?U.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new U((r,s)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{l[m]=v,++d,d===a&&r(l)},v=>s(v))}})}static doWhile(e,t){return new U((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{static open(e,t,r,s){try{return new pd(t,e.transaction(s,r))}catch(a){throw new sl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new es,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new sl(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Om(r.target.error);this.V.reject(new sl(e,s))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new O1(t)}}class ts{static delete(e){return Z("SimpleDb","Removing database:",e),Gs(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!kE())return!1;if(ts.S())return!0;const e=Rt(),t=ts.D(e),r=0<t&&t<10,s=DI(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.F=r,ts.D(Rt())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(Z("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{r(new sl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new se(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new se(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new sl(e,l))},s.onupgradeneeded=a=>{Z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.F.O(l,s.transaction,a.oldVersion,this.version).next(()=>{Z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}B(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const d=pd.open(this.db,e,a?"readonly":"readwrite",r),f=s(d).next(m=>(d.g(),m)).catch(m=>(d.abort(m),U.reject(m))).toPromise();return f.catch(()=>{}),await d.m,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&l<3;if(Z("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function DI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class V1{constructor(e){this.L=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.L=e}done(){this.k=!0}$(e){this.q=e}delete(){return Gs(this.L.delete())}}class sl extends se{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hs(n){return n.name==="IndexedDbTransactionError"}class O1{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Z("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gs(r)}add(e){return Z("SimpleDb","ADD",this.store.name,e,e),Gs(this.store.add(e))}get(e){return Gs(this.store.get(e)).next(t=>(t===void 0&&(t=null),Z("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Z("SimpleDb","DELETE",this.store.name,e),Gs(this.store.delete(e))}count(){return Z("SimpleDb","COUNT",this.store.name),Gs(this.store.count())}U(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new U((l,d)=>{a.onerror=f=>{d(f.target.error)},a.onsuccess=f=>{l(f.target.result)}})}{const a=this.cursor(r),l=[];return this.W(a,(d,f)=>{l.push(f)}).next(()=>l)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U((s,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}j(e,t){Z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.W(s,(a,l,d)=>d.delete())}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Y(e){const t=this.cursor({});return new U((r,s)=>{t.onerror=a=>{const l=Om(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}W(e,t){const r=[];return new U((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void s();const f=new V1(d),m=t(d.primaryKey,d.value,f);if(m instanceof U){const v=m.catch(E=>(f.done(),U.reject(E)));r.push(v)}f.isDone?s():f.K===null?d.continue():d.continue(f.K)}}).next(()=>U.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gs(n){return new U((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Om(r.target.error);t(s)}})}let Ov=!1;function Om(n){const e=ts.D(Rt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ov||(Ov=!0,setTimeout(()=>{throw r},0)),r}}return n}class L1{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Z("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){hs(t)?Z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await cs(t)}await this.X(6e4)})}}class M1{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let s=t,a=!0;return U.doWhile(()=>a===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return Z("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,s).next(d=>{s-=d,r.add(l)});a=!1})).next(()=>t-s)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.re(s,a)).next(d=>(Z("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}re(e,t){let r=e;return t.changes.forEach((s,a)=>{const l=CI(a);Vm(l,r)>0&&(r=l)}),new Pn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mn.oe=-1;function md(n){return n==null}function _l(n){return n===0&&1/n==-1/0}function bI(n){return typeof n=="number"&&Number.isInteger(n)&&!_l(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lv(e)),e=F1(n.get(t),e);return Lv(e)}function F1(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Lv(n){return n+""}function Er(n){const e=n.length;if(_e(e>=2),e===2)return _e(n.charAt(0)===""&&n.charAt(1)===""),$e.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const l=n.indexOf("",a);switch((l<0||l>t)&&pe(),n.charAt(l+1)){case"":const d=n.substring(a,l);let f;s.length===0?f=d:(s+=d,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:pe()}a=l+2}return new $e(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n,e){return[n,Yt(e)]}function NI(n,e,t){return[n,Yt(e),t]}const U1={},B1=["prefixPath","collectionGroup","readTime","documentId"],z1=["prefixPath","collectionGroup","documentId"],j1=["collectionGroup","readTime","prefixPath","documentId"],$1=["canonicalId","targetId"],q1=["targetId","path"],K1=["path","targetId"],G1=["collectionId","parent"],H1=["indexId","uid"],W1=["uid","sequenceNumber"],Q1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],J1=["indexId","uid","orderedDocumentKey"],Y1=["userId","collectionPath","documentId"],X1=["userId","collectionPath","largestBatchId"],Z1=["userId","collectionGroup","largestBatchId"],VI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ex=[...VI,"documentOverlays"],OI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LI=OI,Lm=[...LI,"indexConfiguration","indexState","indexEntries"],tx=Lm,nx=[...Lm,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp extends xI{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Pt(n,e){const t=ge(n);return ts.C(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ds(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new Xe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Ft(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,t,r,s,a){return this}insert(e,t,r){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(e){return new Uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ge(this.comparator);return t.data=e,t}}class Uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sa(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new gn([])}unionWith(e){let t=new Ge(at.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new FI("Invalid base64 string: "+a):a}}(e);return new gt(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(n){if(_e(!!n),typeof n=="string"){let e=0;const t=rx.exec(n);if(_e(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(n.seconds),nanos:rt(n.nanos)}}function rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ai(n){return typeof n=="string"?gt.fromBase64String(n):gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gd(n){const e=n.mapValue.fields.__previous_value__;return Mm(e)?gd(e):e}function vl(n){const e=oi(n.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,r,s,a,l,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class io{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ah={nullValue:"NULL_VALUE"};function os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mm(n)?4:UI(n)?9007199254740991:yd(n)?10:11:pe()}function Pr(n,e){if(n===e)return!0;const t=os(n);if(t!==os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vl(n).isEqual(vl(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=oi(s.timestampValue),d=oi(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return ai(s.bytesValue).isEqual(ai(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return rt(s.geoPointValue.latitude)===rt(a.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return rt(s.integerValue)===rt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=rt(s.doubleValue),d=rt(a.doubleValue);return l===d?_l(l)===_l(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return xa(n.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},d=a.mapValue.fields||{};if(Fv(l)!==Fv(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(d[f]===void 0||!Pr(l[f],d[f])))return!1;return!0}(n,e);default:return pe()}}function wl(n,e){return(n.values||[]).find(t=>Pr(t,e))!==void 0}function as(n,e){if(n===e)return 0;const t=os(n),r=os(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return function(a,l){const d=rt(a.integerValue||a.doubleValue),f=rt(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return Bv(n.timestampValue,e.timestampValue);case 4:return Bv(vl(n),vl(e));case 5:return Ae(n.stringValue,e.stringValue);case 6:return function(a,l){const d=ai(a),f=ai(l);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const d=a.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=Ae(d[m],f[m]);if(v!==0)return v}return Ae(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const d=Ae(rt(a.latitude),rt(l.latitude));return d!==0?d:Ae(rt(a.longitude),rt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return zv(n.arrayValue,e.arrayValue);case 10:return function(a,l){var d,f,m,v;const E=a.fields||{},I=l.fields||{},P=(d=E.value)===null||d===void 0?void 0:d.arrayValue,N=(f=I.value)===null||f===void 0?void 0:f.arrayValue,V=Ae(((m=P==null?void 0:P.values)===null||m===void 0?void 0:m.length)||0,((v=N==null?void 0:N.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:zv(P,N)}(n.mapValue,e.mapValue);case 11:return function(a,l){if(a===Qi.mapValue&&l===Qi.mapValue)return 0;if(a===Qi.mapValue)return 1;if(l===Qi.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=l.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const I=Ae(f[E],v[E]);if(I!==0)return I;const P=as(d[f[E]],m[v[E]]);if(P!==0)return P}return Ae(f.length,v.length)}(n.mapValue,e.mapValue);default:throw pe()}}function Bv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);const t=oi(n),r=oi(e),s=Ae(t.seconds,r.seconds);return s!==0?s:Ae(t.nanos,r.nanos)}function zv(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=as(t[s],r[s]);if(a)return a}return Ae(t.length,r.length)}function Da(n){return Kp(n)}function Kp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=oi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ai(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Kp(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Kp(t.fields[l])}`;return s+"}"}(n.mapValue):pe()}function Ph(n){switch(os(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gd(n);return e?16+Ph(e):16;case 5:return 2*n.stringValue.length;case 6:return ai(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Ph(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return ds(r.fields,(a,l)=>{s+=a.length+Ph(l)}),s}(n.mapValue);default:throw pe()}}function El(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gp(n){return!!n&&"integerValue"in n}function Il(n){return!!n&&"arrayValue"in n}function jv(n){return!!n&&"nullValue"in n}function $v(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ch(n){return!!n&&"mapValue"in n}function yd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ds(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ol(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const BI={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function sx(n){return"nullValue"in n?Ah:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?El(io.empty(),ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?yd(n)?BI:{mapValue:{}}:pe()}function ox(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?El(io.empty(),ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?BI:"mapValue"in n?yd(n)?{mapValue:{}}:Qi:pe()}function qv(n,e){const t=as(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Kv(n,e){const t=as(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ol(t)}setAll(e){let t=at.emptyPath(),r={},s=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}l?r[d.lastSegment()]=ol(l):s.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ch(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ds(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Jt(ol(this.value))}}function zI(n){const e=[];return ds(n.fields,(t,r)=>{const s=new at([t]);if(Ch(r)){const a=zI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t,r,s,a,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new ht(e,0,we.min(),we.min(),we.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,s){return new ht(e,1,t,we.min(),r,s,0)}static newNoDocument(e,t){return new ht(e,2,t,we.min(),we.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new ht(e,3,t,we.min(),we.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.position=e,this.inclusive=t}}function Gv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=ue.comparator(ue.fromName(l.referenceValue),t.key):r=as(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t="asc"){this.field=e,this.dir=t}}function ax(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{}class Ne extends jI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ux(e,t,r):t==="array-contains"?new hx(e,r):t==="in"?new WI(e,r):t==="not-in"?new dx(e,r):t==="array-contains-any"?new fx(e,r):new Ne(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lx(e,r):new cx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(as(t,this.value)):t!==null&&os(this.value)===os(t)&&this.matchesComparison(as(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends jI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ke(e,t)}matches(e){return Na(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Na(n){return n.op==="and"}function Hp(n){return n.op==="or"}function Fm(n){return $I(n)&&Na(n)}function $I(n){for(const e of n.filters)if(e instanceof Ke)return!1;return!0}function Wp(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+Da(n.value);if(Fm(n))return n.filters.map(e=>Wp(e)).join(",");{const e=n.filters.map(t=>Wp(t)).join(",");return`${n.op}(${e})`}}function qI(n,e){return n instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.field.isEqual(s.field)&&Pr(r.value,s.value)}(n,e):n instanceof Ke?function(r,s){return s instanceof Ke&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,l,d)=>a&&qI(l,s.filters[d]),!0):!1}(n,e):void pe()}function KI(n,e){const t=n.filters.concat(e);return Ke.create(t,n.op)}function GI(n){return n instanceof Ne?function(t){return`${t.field.canonicalString()} ${t.op} ${Da(t.value)}`}(n):n instanceof Ke?function(t){return t.op.toString()+" {"+t.getFilters().map(GI).join(" ,")+"}"}(n):"Filter"}class ux extends Ne{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class lx extends Ne{constructor(e,t){super(e,"in",t),this.keys=HI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cx extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=HI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ue.fromName(r.referenceValue))}class hx extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Il(t)&&wl(t.arrayValue,this.value)}}class WI extends Ne{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wl(this.value.arrayValue,t)}}class dx extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!wl(this.value.arrayValue,t)}}class fx extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Il(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t=null,r=[],s=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function Qp(n,e=null,t=[],r=[],s=null,a=null,l=null){return new px(n,e,t,r,s,a,l)}function so(n){const e=ge(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Da(r)).join(",")),e.ue=t}return e.ue}function Ml(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ax(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hv(n.startAt,e.startAt)&&Hv(n.endAt,e.endAt)}function Kh(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Gh(n,e){return n.filters.filter(t=>t instanceof Ne&&t.field.isEqual(e))}function Wv(n,e,t){let r=Ah,s=!0;for(const a of Gh(n,e)){let l=Ah,d=!0;switch(a.op){case"<":case"<=":l=sx(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=Ah}qv({value:r,inclusive:s},{value:l,inclusive:d})<0&&(r=l,s=d)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];qv({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function Qv(n,e,t){let r=Qi,s=!0;for(const a of Gh(n,e)){let l=Qi,d=!0;switch(a.op){case">=":case">":l=ox(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Qi}Kv({value:r,inclusive:s},{value:l,inclusive:d})>0&&(r=l,s=d)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Kv({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t=null,r=[],s=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function QI(n,e,t,r,s,a,l,d){return new Ha(n,e,t,r,s,a,l,d)}function _d(n){return new Ha(n)}function Jv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JI(n){return n.collectionGroup!==null}function al(n){const e=ge(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Ge(at.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Tl(a,r))}),t.has(at.keyField().canonicalString())||e.ce.push(new Tl(at.keyField(),r))}return e.ce}function An(n){const e=ge(n);return e.le||(e.le=mx(e,al(n))),e.le}function mx(n,e){if(n.limitType==="F")return Qp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Tl(s.field,a)});const t=n.endAt?new ba(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ba(n.startAt.position,n.startAt.inclusive):null;return Qp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Jp(n,e){const t=n.filters.concat([e]);return new Ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hh(n,e,t){return new Ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vd(n,e){return Ml(An(n),An(e))&&n.limitType===e.limitType}function YI(n){return`${so(An(n))}|lt:${n.limitType}`}function ca(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>GI(s)).join(", ")}]`),md(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Da(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Da(s)).join(",")),`Target(${r})`}(An(n))}; limitType=${n.limitType})`}function Fl(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ue.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of al(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,d,f){const m=Gv(l,d,f);return l.inclusive?m<=0:m<0}(r.startAt,al(r),s)||r.endAt&&!function(l,d,f){const m=Gv(l,d,f);return l.inclusive?m>=0:m>0}(r.endAt,al(r),s))}(n,e)}function XI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZI(n){return(e,t)=>{let r=!1;for(const s of al(n)){const a=gx(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function gx(n,e,t){const r=n.field.isKeyField()?ue.comparator(e.key,t.key):function(a,l,d){const f=l.data.field(a),m=d.data.field(a);return f!==null&&m!==null?as(f,m):pe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return MI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Xe(ue.comparator);function Rn(){return yx}const eT=new Xe(ue.comparator);function el(...n){let e=eT;for(const t of n)e=e.insert(t.key,t);return e}function tT(n){let e=eT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ir(){return ul()}function nT(){return ul()}function ul(){return new ui(n=>n.toString(),(n,e)=>n.isEqual(e))}const _x=new Xe(ue.comparator),vx=new Ge(ue.comparator);function ke(...n){let e=vx;for(const t of n)e=e.add(t);return e}const wx=new Ge(Ae);function Um(){return wx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_l(e)?"-0":e}}function rT(n){return{integerValue:""+n}}function Ex(n,e){return bI(e)?rT(e):Bm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function Ix(n,e,t){return n instanceof Sl?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Mm(a)&&(a=gd(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof Va?sT(n,e):n instanceof Oa?oT(n,e):function(s,a){const l=iT(s,a),d=Yv(l)+Yv(s.Pe);return Gp(l)&&Gp(s.Pe)?rT(d):Bm(s.serializer,d)}(n,e)}function Tx(n,e,t){return n instanceof Va?sT(n,e):n instanceof Oa?oT(n,e):t}function iT(n,e){return n instanceof Rl?function(r){return Gp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Sl extends wd{}class Va extends wd{constructor(e){super(),this.elements=e}}function sT(n,e){const t=aT(e);for(const r of n.elements)t.some(s=>Pr(s,r))||t.push(r);return{arrayValue:{values:t}}}class Oa extends wd{constructor(e){super(),this.elements=e}}function oT(n,e){let t=aT(e);for(const r of n.elements)t=t.filter(s=>!Pr(s,r));return{arrayValue:{values:t}}}class Rl extends wd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Yv(n){return rt(n.integerValue||n.doubleValue)}function aT(n){return Il(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.field=e,this.transform=t}}function Rx(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Va&&s instanceof Va||r instanceof Oa&&s instanceof Oa?xa(r.elements,s.elements,Pr):r instanceof Rl&&s instanceof Rl?Pr(r.Pe,s.Pe):r instanceof Sl&&s instanceof Sl}(n.transform,e.transform)}class Ax{constructor(e,t){this.version=e,this.transformResults=t}}class sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ed{}function uT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Id(n.key,sn.none()):new Wa(n.key,n.data,sn.none());{const t=n.data,r=Jt.empty();let s=new Ge(at.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new li(n.key,r,new gn(s.toArray()),sn.none())}}function Px(n,e,t){n instanceof Wa?function(s,a,l){const d=s.value.clone(),f=Zv(s.fieldTransforms,a,l.transformResults);d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof li?function(s,a,l){if(!kh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const d=Zv(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(lT(s)),f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function ll(n,e,t,r){return n instanceof Wa?function(a,l,d,f){if(!kh(a.precondition,l))return d;const m=a.value.clone(),v=ew(a.fieldTransforms,f,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof li?function(a,l,d,f){if(!kh(a.precondition,l))return d;const m=ew(a.fieldTransforms,f,l),v=l.data;return v.setAll(lT(a)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(a,l,d){return kh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(n,e,t)}function Cx(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=iT(r.transform,s||null);a!=null&&(t===null&&(t=Jt.empty()),t.set(r.field,a))}return t||null}function Xv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xa(r,s,(a,l)=>Rx(a,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wa extends Ed{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class li extends Ed{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function lT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zv(n,e,t){const r=new Map;_e(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,d=e.data.field(a.field);r.set(a.field,Tx(l,d,t[s]))}return r}function ew(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,Ix(a,l,e))}return r}class Id extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cT extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Px(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ll(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ll(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nT();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(s.key)?null:d;const f=uT(l,d);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(t,r)=>Xv(t,r))&&xa(this.baseMutations,e.baseMutations,(t,r)=>Xv(t,r))}}class jm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){_e(e.mutations.length===r.length);let s=function(){return _x}();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new jm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Me;function xx(n){switch(n){default:return pe();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function hT(n){if(n===void 0)return mt("GRPC error has no .code"),W.UNKNOWN;switch(n){case vt.OK:return W.OK;case vt.CANCELLED:return W.CANCELLED;case vt.UNKNOWN:return W.UNKNOWN;case vt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case vt.INTERNAL:return W.INTERNAL;case vt.UNAVAILABLE:return W.UNAVAILABLE;case vt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case vt.NOT_FOUND:return W.NOT_FOUND;case vt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case vt.ABORTED:return W.ABORTED;case vt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case vt.DATA_LOSS:return W.DATA_LOSS;default:return pe()}}(Me=vt||(vt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Zi([4294967295,4294967295],0);function tw(n){const e=Dx().encode(n),t=new vI;return t.update(e),new Uint8Array(t.digest())}function nw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zi([t,r],0),new Zi([s,a],0)]}class qm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tl(`Invalid padding: ${t}`);if(r<0)throw new tl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new tl(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Zi.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(Zi.fromNumber(r)));return s.compare(bx)===1&&(s=new Zi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=tw(e),[r,s]=nw(t);for(let a=0;a<this.hashCount;a++){const l=this.de(r,s,a);if(!this.Ee(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new qm(a,s,t);return r.forEach(d=>l.insert(d)),l}insert(e){if(this.Te===0)return;const t=tw(e),[r,s]=nw(t);for(let a=0;a<this.hashCount;a++){const l=this.de(r,s,a);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Bl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ul(we.min(),s,new Xe(Ae),Rn(),ke())}}class Bl{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bl(r,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class dT{constructor(e,t){this.targetId=e,this.me=t}}class fT{constructor(e,t,r=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class rw{constructor(){this.fe=0,this.ge=iw(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),r=ke();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:pe()}}),new Bl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=iw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Nx{constructor(e){this.Be=e,this.Le=new Map,this.ke=Rn(),this.qe=dh(),this.Qe=dh(),this.Ke=new Xe(Ae)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const a=s.target;if(Kh(a))if(r===0){const l=new ue(a.path);this.We(t,l,ht.newNoDocument(l,we.min()))}else _e(r===1);else{const l=this.Ze(t);if(l!==r){const d=this.Xe(e),f=d?this.et(d,e,l):1;if(f!==0){this.He(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,m)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,d;try{l=ai(r).toUint8Array()}catch(f){if(f instanceof FI)return ka("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new qm(l,s,a)}catch(f){return ka(f instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Te===0?null:d}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Be.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const l=this.Be.nt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.We(t,a,null),s++)}),s}it(e){const t=new Map;this.Le.forEach((a,l)=>{const d=this.Ye(l);if(d){if(a.current&&Kh(d.target)){const f=new ue(d.target.path);this.st(f).has(l)||this.ot(l,f)||this.We(l,f,ht.newNoDocument(f,e))}a.be&&(t.set(l,a.ve()),a.Ce())}});let r=ke();this.Qe.forEach((a,l)=>{let d=!0;l.forEachWhile(f=>{const m=this.Ye(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ke.forEach((a,l)=>l.setReadTime(e));const s=new Ul(e,t,this.Ke,this.ke,r);return this.ke=Rn(),this.qe=dh(),this.Qe=dh(),this.Ke=new Xe(Ae),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new rw,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Ge(Ae),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ge(Ae),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new rw),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function dh(){return new Xe(ue.comparator)}function iw(){return new Xe(ue.comparator)}const Vx={asc:"ASCENDING",desc:"DESCENDING"},Ox={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lx={and:"AND",or:"OR"};class Mx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(n,e){return n.useProto3Json||md(e)?e:{value:e}}function La(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fx(n,e){return La(n,e.toTimestamp())}function on(n){return _e(!!n),we.fromTimestamp(function(t){const r=oi(t);return new ut(r.seconds,r.nanos)}(n))}function Km(n,e){return Xp(n,e).canonicalString()}function Xp(n,e){const t=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function mT(n){const e=$e.fromString(n);return _e(ST(e)),e}function Wh(n,e){return Km(n.databaseId,e.path)}function eo(n,e){const t=mT(e);if(t.get(1)!==n.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(_T(t))}function gT(n,e){return Km(n.databaseId,e)}function yT(n){const e=mT(n);return e.length===4?$e.emptyPath():_T(e)}function Zp(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _T(n){return _e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function sw(n,e,t){return{name:Wh(n,e),fields:t.value.mapValue.fields}}function Ux(n,e,t){const r=eo(n,e.name),s=on(e.updateTime),a=e.createTime?on(e.createTime):we.min(),l=new Jt({mapValue:{fields:e.fields}}),d=ht.newFoundDocument(r,s,a,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Bx(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(_e(v===void 0||typeof v=="string"),gt.fromBase64String(v||"")):(_e(v===void 0||v instanceof Buffer||v instanceof Uint8Array),gt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(m){const v=m.code===void 0?W.UNKNOWN:hT(m.code);return new se(v,m.message||"")}(l);t=new fT(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=eo(n,r.document.name),a=on(r.document.updateTime),l=r.document.createTime?on(r.document.createTime):we.min(),d=new Jt({mapValue:{fields:r.document.fields}}),f=ht.newFoundDocument(s,a,l,d),m=r.targetIds||[],v=r.removedTargetIds||[];t=new xh(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=eo(n,r.document),a=r.readTime?on(r.readTime):we.min(),l=ht.newNoDocument(s,a),d=r.removedTargetIds||[];t=new xh([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=eo(n,r.document),a=r.removedTargetIds||[];t=new xh([],a,s,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new kx(s,a),d=r.targetId;t=new dT(d,l)}}return t}function Qh(n,e){let t;if(e instanceof Wa)t={update:sw(n,e.key,e.value)};else if(e instanceof Id)t={delete:Wh(n,e.key)};else if(e instanceof li)t={update:sw(n,e.key,e.data),updateMask:Gx(e.fieldMask)};else{if(!(e instanceof cT))return pe();t={verify:Wh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const d=l.transform;if(d instanceof Sl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Va)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Oa)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Rl)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw pe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:Fx(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:pe()}(n,e.precondition)),t}function em(n,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?sn.updateTime(on(a.updateTime)):a.exists!==void 0?sn.exists(a.exists):sn.none()}(e.currentDocument):sn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(l,d){let f=null;if("setToServerValue"in d)_e(d.setToServerValue==="REQUEST_TIME"),f=new Sl;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];f=new Va(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];f=new Oa(v)}else"increment"in d?f=new Rl(l,d.increment):pe();const m=at.fromServerFormat(d.fieldPath);return new Sx(m,f)}(n,s)):[];if(e.update){e.update.name;const s=eo(n,e.update.name),a=new Jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(f){const m=f.fieldPaths||[];return new gn(m.map(v=>at.fromServerFormat(v)))}(e.updateMask);return new li(s,a,l,t,r)}return new Wa(s,a,t,r)}if(e.delete){const s=eo(n,e.delete);return new Id(s,t)}if(e.verify){const s=eo(n,e.verify);return new cT(s,t)}return pe()}function zx(n,e){return n&&n.length>0?(_e(e!==void 0),n.map(t=>function(s,a){let l=s.updateTime?on(s.updateTime):on(a);return l.isEqual(we.min())&&(l=on(a)),new Ax(l,s.transformResults||[])}(t,e))):[]}function vT(n,e){return{documents:[gT(n,e.path)]}}function wT(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gT(n,s);const a=function(m){if(m.length!==0)return TT(Ke.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(m){if(m.length!==0)return m.map(v=>function(I){return{field:ha(I.field),direction:$x(I.dir)}}(v))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=Yp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ct:t,parent:s}}function ET(n){let e=yT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){_e(r===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(E){const I=IT(E);return I instanceof Ke&&Fm(I)?I.getFilters():[I]}(t.where));let l=[];t.orderBy&&(l=function(E){return E.map(I=>function(N){return new Tl(da(N.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(E){let I;return I=typeof E=="object"?E.value:E,md(I)?null:I}(t.limit));let f=null;t.startAt&&(f=function(E){const I=!!E.before,P=E.values||[];return new ba(P,I)}(t.startAt));let m=null;return t.endAt&&(m=function(E){const I=!E.before,P=E.values||[];return new ba(P,I)}(t.endAt)),QI(e,s,l,a,d,"F",f,m)}function jx(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=da(t.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=da(t.unaryFilter.field);return Ne.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=da(t.unaryFilter.field);return Ne.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=da(t.unaryFilter.field);return Ne.create(l,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(n):n.fieldFilter!==void 0?function(t){return Ne.create(da(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ke.create(t.compositeFilter.filters.map(r=>IT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe()}}(t.compositeFilter.op))}(n):pe()}function $x(n){return Vx[n]}function qx(n){return Ox[n]}function Kx(n){return Lx[n]}function ha(n){return{fieldPath:n.canonicalString()}}function da(n){return at.fromServerFormat(n.fieldPath)}function TT(n){return n instanceof Ne?function(t){if(t.op==="=="){if($v(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NAN"}};if(jv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($v(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NAN"}};if(jv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(t.field),op:qx(t.op),value:t.value}}}(n):n instanceof Ke?function(t){const r=t.getFilters().map(s=>TT(s));return r.length===1?r[0]:{compositeFilter:{op:Kx(t.op),filters:r}}}(n):pe()}function Gx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ST(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t,r,s,a=we.min(),l=we.min(),d=gt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.ht=e}}function Hx(n,e){let t;if(e.document)t=Ux(n.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ue.fromSegments(e.noDocument.path),s=ao(e.noDocument.readTime);t=ht.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe();{const r=ue.fromSegments(e.unknownDocument.path),s=ao(e.unknownDocument.version);t=ht.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const a=new ut(s[0],s[1]);return we.fromTimestamp(a)}(e.readTime)),t}function ow(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(a,l){return{name:Wh(a,l.key),fields:l.data.value.mapValue.fields,updateTime:La(a,l.version.toTimestamp()),createTime:La(a,l.createTime.toTimestamp())}}(n.ht,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:oo(e.version)};else{if(!e.isUnknownDocument())return pe();r.unknownDocument={path:t.path.toArray(),version:oo(e.version)}}return r}function Jh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function oo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ao(n){const e=new ut(n.seconds,n.nanoseconds);return we.fromTimestamp(e)}function Hs(n,e){const t=(e.baseMutations||[]).map(a=>em(n.ht,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];l.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>em(n.ht,a)),s=ut.fromMillis(e.localWriteTimeMs);return new zm(e.batchId,s,t,r)}function nl(n){const e=ao(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ao(n.lastLimboFreeSnapshotVersion):we.min();let r;return r=function(a){return a.documents!==void 0}(n.query)?function(a){return _e(a.documents.length===1),An(_d(yT(a.documents[0])))}(n.query):function(a){return An(ET(a))}(n.query),new ti(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,gt.fromBase64String(n.resumeToken))}function AT(n,e){const t=oo(e.snapshotVersion),r=oo(e.lastLimboFreeSnapshotVersion);let s;s=Kh(e.target)?vT(n.ht,e.target):wT(n.ht,e.target).ct;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:so(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function PT(n){const e=ET({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hh(e,e.limit,"L"):e}function Rp(n,e){return new $m(e.largestBatchId,em(n.ht,e.overlayMutation))}function aw(n,e){const t=e.path.lastSegment();return[n,Yt(e.path.popLast()),t]}function uw(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:oo(r.readTime),documentKey:Yt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{getBundleMetadata(e,t){return lw(e).get(t).next(r=>{if(r)return function(a){return{id:a.bundleId,createTime:ao(a.createTime),version:a.version}}(r)})}saveBundleMetadata(e,t){return lw(e).put(function(s){return{bundleId:s.id,createTime:oo(on(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return cw(e).get(t).next(r=>{if(r)return function(a){return{name:a.name,query:PT(a.bundledQuery),readTime:ao(a.readTime)}}(r)})}saveNamedQuery(e,t){return cw(e).put(function(s){return{name:s.name,readTime:oo(on(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function lw(n){return Pt(n,"bundles")}function cw(n){return Pt(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){const r=t.uid||"";return new Td(e,r)}getOverlay(e,t){return Wu(e).get(aw(this.userId,t)).next(r=>r?Rp(this.serializer,r):null)}getOverlays(e,t){const r=Ir();return U.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((a,l)=>{const d=new $m(t,l);s.push(this.Tt(e,d))}),U.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(Yt(l.getCollectionPath())));const a=[];return s.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Wu(e).j("collectionPathOverlayIndex",d))}),U.waitFor(a)}getOverlaysForCollection(e,t,r){const s=Ir(),a=Yt(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Wu(e).U("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const m=Rp(this.serializer,f);s.set(m.getKey(),m)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const a=Ir();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wu(e).J({index:"collectionGroupOverlayIndex",range:d},(f,m,v)=>{const E=Rp(this.serializer,m);a.size()<s||E.largestBatchId===l?(a.set(E.getKey(),E),l=E.largestBatchId):v.done()}).next(()=>a)}Tt(e,t){return Wu(e).put(function(s,a,l){const[d,f,m]=aw(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Qh(s.ht,l.mutation)}}(this.serializer,this.userId,t))}}function Wu(n){return Pt(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{It(e){return Pt(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?gt.fromUint8Array(r):gt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.It(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(rt(e.integerValue));else if("doubleValue"in e){const r=rt(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),_l(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=oi(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(ai(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?UI(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):yd(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):pe()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const r=e.fields||{};this.Rt(t,55);for(const s of Object.keys(r))this.gt(s,t),this.Et(r[s],t)}bt(e,t){var r,s;const a=e.fields||{};this.Rt(t,53);const l="value",d=((s=(r=a[l].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Rt(t,15),t.Vt(rt(d)),this.gt(l,t),this.Et(a[l],t)}vt(e,t){const r=e.values||[];this.Rt(t,50);for(const s of r)this.Et(s,t)}St(e,t){this.Rt(t,37),ue.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}Ws.Ft=new Ws;function Jx(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function hw(n){const e=64-function(r){let s=0;for(let a=0;a<8;++a){const l=Jx(255&r[a]);if(s+=l,l!==8)break}return s}(n);return Math.ceil(e/8)}class Yx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xt(r.value),r=t.next();this.Ot()}Nt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Bt(r.value),r=t.next();this.Lt()}kt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const s=t.codePointAt(0);this.xt(240|s>>>18),this.xt(128|63&s>>>12),this.xt(128|63&s>>>6),this.xt(128|63&s)}}this.Ot()}qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Bt(r);else if(r<2048)this.Bt(960|r>>>6),this.Bt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Bt(480|r>>>12),this.Bt(128|63&r>>>6),this.Bt(128|63&r);else{const s=t.codePointAt(0);this.Bt(240|s>>>18),this.Bt(128|63&s>>>12),this.Bt(128|63&s>>>6),this.Bt(128|63&s)}}this.Lt()}Qt(e){const t=this.Kt(e),r=hw(t);this.$t(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ut(e){const t=this.Kt(e),r=hw(t);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}xt(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Bt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Lt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Xx{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class Zx{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class Qu{constructor(){this.Jt=new Yx,this.Yt=new Xx(this.Jt),this.Zt=new Zx(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}en(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Qs(this.indexId,this.documentKey,this.arrayValue,r)}}function Li(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=dw(n.arrayValue,e.arrayValue),t!==0?t:(t=dw(n.directionalValue,e.directionalValue),t!==0?t:ue.comparator(n.documentKey,e.documentKey)))}function dw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.tn=new Ge((t,r)=>at.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const t of e.filters){const r=t;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(_e(e.collectionGroup===this.collectionId),this.sn)return!1;const t=$p(e);if(t!==void 0&&!this._n(t))return!1;const r=Ks(e);let s=new Set,a=0,l=0;for(;a<r.length&&this._n(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.tn.size>0){const d=this.tn.getIterator().getNext();if(!s.has(d.field.canonicalString())){const f=r[a];if(!this.an(d,f)||!this.un(this.nn[l++],f))return!1}++a}for(;a<r.length;++a){const d=r[a];if(l>=this.nn.length||!this.un(this.nn[l++],d))return!1}return!0}cn(){if(this.sn)return null;let e=new Ge(at.comparator);const t=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Sh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Sh(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Sh(r.field,r.dir==="asc"?0:1)));return new qh(qh.UNKNOWN_ID,this.collectionId,t,yl.empty())}_n(e){for(const t of this.rn)if(this.an(t,e))return!0;return!1}an(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}un(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){var e,t;if(_e(n instanceof Ne||n instanceof Ke),n instanceof Ne){if(n instanceof WI){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>Ne.create(n.field,"==",a)))||[];return Ke.create(s,"or")}return n}const r=n.filters.map(s=>CT(s));return Ke.create(r,n.op)}function eD(n){if(n.getFilters().length===0)return[];const e=rm(CT(n));return _e(kT(e)),tm(e)||nm(e)?[e]:e.getFilters()}function tm(n){return n instanceof Ne}function nm(n){return n instanceof Ke&&Fm(n)}function kT(n){return tm(n)||nm(n)||function(t){if(t instanceof Ke&&Hp(t)){for(const r of t.getFilters())if(!tm(r)&&!nm(r))return!1;return!0}return!1}(n)}function rm(n){if(_e(n instanceof Ne||n instanceof Ke),n instanceof Ne)return n;if(n.filters.length===1)return rm(n.filters[0]);const e=n.filters.map(r=>rm(r));let t=Ke.create(e,n.op);return t=Yh(t),kT(t)?t:(_e(t instanceof Ke),_e(Na(t)),_e(t.filters.length>1),t.filters.reduce((r,s)=>Gm(r,s)))}function Gm(n,e){let t;return _e(n instanceof Ne||n instanceof Ke),_e(e instanceof Ne||e instanceof Ke),t=n instanceof Ne?e instanceof Ne?function(s,a){return Ke.create([s,a],"and")}(n,e):pw(n,e):e instanceof Ne?pw(e,n):function(s,a){if(_e(s.filters.length>0&&a.filters.length>0),Na(s)&&Na(a))return KI(s,a.getFilters());const l=Hp(s)?s:a,d=Hp(s)?a:s,f=l.filters.map(m=>Gm(m,d));return Ke.create(f,"or")}(n,e),Yh(t)}function pw(n,e){if(Na(e))return KI(e,n.getFilters());{const t=e.filters.map(r=>Gm(n,r));return Ke.create(t,"or")}}function Yh(n){if(_e(n instanceof Ne||n instanceof Ke),n instanceof Ne)return n;const e=n.getFilters();if(e.length===1)return Yh(e[0]);if($I(n))return n;const t=e.map(s=>Yh(s)),r=[];return t.forEach(s=>{s instanceof Ne?r.push(s):s instanceof Ke&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Ke.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.ln=new Hm}addToCollectionParentIndex(e,t){return this.ln.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Pn.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class Hm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ge($e.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Uint8Array(0);class nD{constructor(e,t){this.databaseId=t,this.hn=new Hm,this.Pn=new ui(r=>so(r),(r,s)=>Ml(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.hn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.hn.add(t)});const a={collectionId:r,parent:Yt(s)};return mw(e).put(a)}return U.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[AI(t),""],!1,!0);return mw(e).U(s).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Er(l.parent))}return r})}addFieldIndex(e,t){const r=Ju(e),s=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])}}(t);delete s.indexId;const a=r.add(s);if(t.indexState){const l=aa(e);return a.next(d=>{l.put(uw(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Ju(e),s=aa(e),a=oa(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ju(e),r=oa(e),s=aa(e);return t.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,t){return U.forEach(this.Tn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const a=new fw(r).cn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const r=oa(e);let s=!0;const a=new Map;return U.forEach(this.Tn(t),l=>this.In(e,l).next(d=>{s&&(s=!!d),a.set(l,d)})).next(()=>{if(s){let l=ke();const d=[];return U.forEach(a,(f,m)=>{Z("IndexedDbIndexManager",`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`}(f)} to execute ${so(t)}`);const v=function(H,te){const le=$p(te);if(le===void 0)return null;for(const ae of Gh(H,le.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null}(m,f),E=function(H,te){const le=new Map;for(const ae of Ks(te))for(const k of Gh(H,ae.fieldPath))switch(k.op){case"==":case"in":le.set(ae.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return le.set(ae.fieldPath.canonicalString(),k.value),Array.from(le.values())}return null}(m,f),I=function(H,te){const le=[];let ae=!0;for(const k of Ks(te)){const S=k.kind===0?Wv(H,k.fieldPath,H.startAt):Qv(H,k.fieldPath,H.startAt);le.push(S.value),ae&&(ae=S.inclusive)}return new ba(le,ae)}(m,f),P=function(H,te){const le=[];let ae=!0;for(const k of Ks(te)){const S=k.kind===0?Qv(H,k.fieldPath,H.endAt):Wv(H,k.fieldPath,H.endAt);le.push(S.value),ae&&(ae=S.inclusive)}return new ba(le,ae)}(m,f),N=this.dn(f,m,I),V=this.dn(f,m,P),x=this.En(f,m,E),q=this.An(f.indexId,v,N,I.inclusive,V,P.inclusive,x);return U.forEach(q,G=>r.G(G,t.limit).next(H=>{H.forEach(te=>{const le=ue.fromSegments(te.documentKey);l.has(le)||(l=l.add(le),d.push(le))})}))}).next(()=>d)}return U.resolve(null)})}Tn(e){let t=this.Pn.get(e);return t||(e.filters.length===0?t=[e]:t=eD(Ke.create(e.filters,"and")).map(r=>Qp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,t),t)}An(e,t,r,s,a,l,d){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),m=f/(t!=null?t.length:1),v=[];for(let E=0;E<f;++E){const I=t?this.Rn(t[E/m]):fh,P=this.Vn(e,I,r[E%m],s),N=this.mn(e,I,a[E%m],l),V=d.map(x=>this.Vn(e,I,x,!0));v.push(...this.createRange(P,N,V))}return v}Vn(e,t,r,s){const a=new Qs(e,ue.empty(),t,r);return s?a:a.en()}mn(e,t,r,s){const a=new Qs(e,ue.empty(),t,r);return s?a.en():a}In(e,t){const r=new fw(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(a=>{let l=null;for(const d of a)r.on(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;const s=this.Tn(t);return U.forEach(s,a=>this.In(e,a).next(l=>{l?r!==0&&l.fields.length<function(f){let m=new Ge(at.comparator),v=!1;for(const E of f.filters)for(const I of E.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?v=!0:m=m.add(I.field));for(const E of f.orderBy)E.field.isKeyField()||(m=m.add(E.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>function(l){return l.limit!==null}(t)&&s.length>1&&r===2?1:r)}fn(e,t){const r=new Qu;for(const s of Ks(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=r.Xt(s.kind);Ws.Ft.dt(a,l)}return r.Ht()}Rn(e){const t=new Qu;return Ws.Ft.dt(e,t.Xt(0)),t.Ht()}gn(e,t){const r=new Qu;return Ws.Ft.dt(El(this.databaseId,t),r.Xt(function(a){const l=Ks(a);return l.length===0?0:l[l.length-1].kind}(e))),r.Ht()}En(e,t,r){if(r===null)return[];let s=[];s.push(new Qu);let a=0;for(const l of Ks(e)){const d=r[a++];for(const f of s)if(this.pn(t,l.fieldPath)&&Il(d))s=this.yn(s,l,d);else{const m=f.Xt(l.kind);Ws.Ft.dt(d,m)}}return this.wn(s)}dn(e,t,r){return this.En(e,t,r.position)}wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ht();return t}yn(e,t,r){const s=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of s){const f=new Qu;f.seed(d.Ht()),Ws.Ft.dt(l,f.Xt(t.kind)),a.push(f)}return a}pn(e,t){return!!e.filters.find(r=>r instanceof Ne&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ju(e),s=aa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(a=>{const l=[];return U.forEach(a,d=>s.get([d.indexId,this.uid]).next(f=>{l.push(function(v,E){const I=E?new yl(E.sequenceNumber,new Pn(ao(E.readTime),new ue(Er(E.documentKey)),E.largestBatchId)):yl.empty(),P=v.fields.map(([N,V])=>new Sh(at.fromServerFormat(N),V));return new qh(v.indexId,v.collectionGroup,P,I)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Ae(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Ju(e),a=aa(e);return this.Sn(e).next(l=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>U.forEach(d,f=>a.put(uw(f.indexId,this.uid,l,r)))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,(s,a)=>{const l=r.get(s.collectionGroup);return(l?U.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(d=>(r.set(s.collectionGroup,d),U.forEach(d,f=>this.bn(e,s,f).next(m=>{const v=this.Dn(a,f);return m.isEqual(v)?U.resolve():this.vn(e,a,f,m,v)}))))})}Cn(e,t,r,s){return oa(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Fn(e,t,r,s){return oa(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}bn(e,t,r){const s=oa(e);let a=new Ge(Li);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,d)=>{a=a.add(new Qs(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}Dn(e,t){let r=new Ge(Li);const s=this.fn(t,e);if(s==null)return r;const a=$p(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Il(l))for(const d of l.arrayValue.values||[])r=r.add(new Qs(t.indexId,e.key,this.Rn(d),s))}else r=r.add(new Qs(t.indexId,e.key,fh,s));return r}vn(e,t,r,s,a){Z("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,E,I){const P=f.getIterator(),N=m.getIterator();let V=sa(P),x=sa(N);for(;V||x;){let q=!1,G=!1;if(V&&x){const H=v(V,x);H<0?G=!0:H>0&&(q=!0)}else V!=null?G=!0:q=!0;q?(E(x),x=sa(N)):G?(I(V),V=sa(P)):(V=sa(P),x=sa(N))}}(s,a,Li,d=>{l.push(this.Cn(e,t,r,d))},d=>{l.push(this.Fn(e,t,r,d))}),U.waitFor(l)}Sn(e){let t=1;return aa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,a)=>{a.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>Li(l,d)).filter((l,d,f)=>!d||Li(l,f[d-1])!==0);const s=[];s.push(e);for(const l of r){const d=Li(l,e),f=Li(l,t);if(d===0)s[0]=e.en();else if(d>0&&f<0)s.push(l),s.push(l.en());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Mn(s[l],s[l+1]))return[];const d=[s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,fh,[]],f=[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,fh,[]];a.push(IDBKeyRange.bound(d,f))}return a}Mn(e,t){return Li(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gw)}getMinOffset(e,t){return U.mapArray(this.Tn(t),r=>this.In(e,r).next(s=>s||pe())).next(gw)}}function mw(n){return Pt(n,"collectionParents")}function oa(n){return Pt(n,"indexEntries")}function Ju(n){return Pt(n,"indexConfiguration")}function aa(n){return Pt(n,"indexState")}function gw(n){_e(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Vm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Pn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=r.J({range:l},(v,E,I)=>(d++,I.delete()));a.push(f.next(()=>{_e(d===1)}));const m=[];for(const v of t.mutations){const E=NI(e,v.key.path,t.batchId);a.push(s.delete(E)),m.push(v.key)}return U.waitFor(a).next(()=>m)}function Xh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(41943040,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class Sd{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.xn={}}static Pt(e,t,r,s){_e(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Sd(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mi(e).J({index:"userMutationsIndex",range:r},(s,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const a=fa(e),l=Mi(e);return l.add({}).next(d=>{_e(typeof d=="number");const f=new zm(d,t,r,s),m=function(P,N,V){const x=V.baseMutations.map(G=>Qh(P.ht,G)),q=V.mutations.map(G=>Qh(P.ht,G));return{userId:N,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:x,mutations:q}}(this.serializer,this.userId,f),v=[];let E=new Ge((I,P)=>Ae(I.canonicalString(),P.canonicalString()));for(const I of s){const P=NI(this.userId,I.key.path,d);E=E.add(I.key.path.popLast()),v.push(l.put(m)),v.push(a.put(P,U1))}return E.forEach(I=>{v.push(this.indexManager.addToCollectionParentIndex(e,I))}),e.addOnCommittedListener(()=>{this.xn[d]=f.keys()}),U.waitFor(v).next(()=>f)})}lookupMutationBatch(e,t){return Mi(e).get(t).next(r=>r?(_e(r.userId===this.userId),Hs(this.serializer,r)):null)}On(e,t){return this.xn[t]?U.resolve(this.xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.xn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Mi(e).J({index:"userMutationsIndex",range:s},(l,d,f)=>{d.userId===this.userId&&(_e(d.batchId>=r),a=Hs(this.serializer,d)),f.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Mi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mi(e).U("userMutationsIndex",t).next(r=>r.map(s=>Hs(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Rh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return fa(e).J({range:s},(l,d,f)=>{const[m,v,E]=l,I=Er(v);if(m===this.userId&&t.path.isEqual(I))return Mi(e).get(E).next(P=>{if(!P)throw pe();_e(P.userId===this.userId),a.push(Hs(this.serializer,P))});f.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(Ae);const s=[];return t.forEach(a=>{const l=Rh(this.userId,a.path),d=IDBKeyRange.lowerBound(l),f=fa(e).J({range:d},(m,v,E)=>{const[I,P,N]=m,V=Er(P);I===this.userId&&a.path.isEqual(V)?r=r.add(N):E.done()});s.push(f)}),U.waitFor(s).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=Rh(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Ge(Ae);return fa(e).J({range:l},(f,m,v)=>{const[E,I,P]=f,N=Er(I);E===this.userId&&r.isPrefixOf(N)?N.length===s&&(d=d.add(P)):v.done()}).next(()=>this.Nn(e,d))}Nn(e,t){const r=[],s=[];return t.forEach(a=>{s.push(Mi(e).get(a).next(l=>{if(l===null)throw pe();_e(l.userId===this.userId),r.push(Hs(this.serializer,l))}))}),U.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return xT(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Bn(t.batchId)}),U.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Bn(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),s=[];return fa(e).J({range:r},(a,l,d)=>{if(a[0]===this.userId){const f=Er(a[1]);s.push(f)}else d.done()}).next(()=>{_e(s.length===0)})})}containsKey(e,t){return DT(e,this.userId,t)}Ln(e){return bT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DT(n,e,t){const r=Rh(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return fa(n).J({range:a,H:!0},(d,f,m)=>{const[v,E,I]=d;v===e&&E===s&&(l=!0),m.done()}).next(()=>l)}function Mi(n){return Pt(n,"mutations")}function fa(n){return Pt(n,"documentMutations")}function bT(n){return Pt(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new uo(0)}static Qn(){return new uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Kn(e).next(t=>{const r=new uo(t.highestTargetId);return t.highestTargetId=r.next(),this.$n(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(t=>we.fromTimestamp(new ut(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Kn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.$n(e,s)))}addTargetData(e,t){return this.Un(e,t).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(t,r),this.$n(e,r))))}updateTargetData(e,t){return this.Un(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ua(e).delete(t.targetId)).next(()=>this.Kn(e)).next(r=>(_e(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,t,r){let s=0;const a=[];return ua(e).J((l,d)=>{const f=nl(d);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))}).next(()=>U.waitFor(a)).next(()=>s)}forEachTarget(e,t){return ua(e).J((r,s)=>{const a=nl(s);t(a)})}Kn(e){return _w(e).get("targetGlobalKey").next(t=>(_e(t!==null),t))}$n(e,t){return _w(e).put("targetGlobalKey",t)}Un(e,t){return ua(e).put(AT(this.serializer,t))}Wn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=so(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ua(e).J({range:s,index:"queryTargetsIndex"},(l,d,f)=>{const m=nl(d);Ml(t,m.target)&&(a=m,f.done())}).next(()=>a)}addMatchingKeys(e,t,r){const s=[],a=$i(e);return t.forEach(l=>{const d=Yt(l.path);s.push(a.put({targetId:r,path:d})),s.push(this.referenceDelegate.addReference(e,r,l))}),U.waitFor(s)}removeMatchingKeys(e,t,r){const s=$i(e);return U.forEach(t,a=>{const l=Yt(a.path);return U.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=$i(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=$i(e);let a=ke();return s.J({range:r,H:!0},(l,d,f)=>{const m=Er(l[1]),v=new ue(m);a=a.add(v)}).next(()=>a)}containsKey(e,t){const r=Yt(t.path),s=IDBKeyRange.bound([r],[AI(r)],!1,!0);let a=0;return $i(e).J({index:"documentTargetsIndex",H:!0,range:s},([l,d],f,m)=>{l!==0&&(a++,m.done())}).next(()=>a>0)}ut(e,t){return ua(e).get(t).next(r=>r?nl(r):null)}}function ua(n){return Pt(n,"targets")}function _w(n){return Pt(n,"targetGlobal")}function $i(n){return Pt(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw([n,e],[t,r]){const s=Ae(n,t);return s===0?Ae(e,r):s}class iD{constructor(e){this.Gn=e,this.buffer=new Ge(vw),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hs(t)?Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await cs(t)}await this.Yn(3e5)})}}class sD{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(mn.oe);const r=new iD(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(yw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yw):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,a,l,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s))).next(E=>(r=E,d=Date.now(),this.removeTargets(e,r,t))).next(E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(m=Date.now(),la()<=be.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${s} in `+(d-l)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E})))}}function VT(n,e){return new sD(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t){this.db=e,this.garbageCollector=VT(this,t)}Xn(e){const t=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}er(e,t){return this.rr(e,(r,s)=>t(s))}addReference(e,t,r){return ph(e,r)}removeReference(e,t,r){return ph(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ph(e,t)}ir(e,t){return function(s,a){let l=!1;return bT(s).Y(d=>DT(s,d,a).next(f=>(f&&(l=!0),U.resolve(!f)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.rr(e,(l,d)=>{if(d<=t){const f=this.ir(e,l).next(m=>{if(!m)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,we.min()),$i(e).delete(function(E){return[0,Yt(E.path)]}(l))))});s.push(f)}}).next(()=>U.waitFor(s)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ph(e,t)}rr(e,t){const r=$i(e);let s,a=mn.oe;return r.J({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:m})=>{l===0?(a!==mn.oe&&t(new ue(Er(s)),a),a=m,s=f):a=mn.oe}).next(()=>{a!==mn.oe&&t(new ue(Er(s)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ph(n,e){return $i(n).put(function(r,s){return{targetId:0,path:Yt(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.changes=new ui(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $s(e).put(r)}removeEntry(e,t,r){return $s(e).delete(function(a,l){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Jh(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.sr(e,r)))}getEntry(e,t){let r=ht.newInvalidDocument(t);return $s(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yu(t))},(s,a)=>{r=this._r(t,a)}).next(()=>r)}ar(e,t){let r={size:0,document:ht.newInvalidDocument(t)};return $s(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yu(t))},(s,a)=>{r={document:this._r(t,a),size:Xh(a)}}).next(()=>r)}getEntries(e,t){let r=Rn();return this.ur(e,t,(s,a)=>{const l=this._r(s,a);r=r.insert(s,l)}).next(()=>r)}cr(e,t){let r=Rn(),s=new Xe(ue.comparator);return this.ur(e,t,(a,l)=>{const d=this._r(a,l);r=r.insert(a,d),s=s.insert(a,Xh(l))}).next(()=>({documents:r,lr:s}))}ur(e,t,r){if(t.isEmpty())return U.resolve();let s=new Ge(Iw);t.forEach(f=>s=s.add(f));const a=IDBKeyRange.bound(Yu(s.first()),Yu(s.last())),l=s.getIterator();let d=l.getNext();return $s(e).J({index:"documentKeyIndex",range:a},(f,m,v)=>{const E=ue.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&Iw(d,E)<0;)r(d,null),d=l.getNext();d&&d.isEqual(E)&&(r(d,m),d=l.hasNext()?l.getNext():null),d?v.$(Yu(d)):v.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,a){const l=t.path,d=[l.popLast().toArray(),l.lastSegment(),Jh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $s(e).U(IDBKeyRange.bound(d,f,!0)).next(m=>{a==null||a.incrementDocumentReadCount(m.length);let v=Rn();for(const E of m){const I=this._r(ue.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);I.isFoundDocument()&&(Fl(t,I)||s.has(I.key))&&(v=v.insert(I.key,I))}return v})}getAllFromCollectionGroup(e,t,r,s){let a=Rn();const l=Ew(t,r),d=Ew(t,Pn.max());return $s(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,m,v)=>{const E=this._r(ue.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(E.key,E),a.size===s&&v.done()}).next(()=>a)}newChangeBuffer(e){return new uD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ww(e).get("remoteDocumentGlobalKey").next(t=>(_e(!!t),t))}sr(e,t){return ww(e).put("remoteDocumentGlobalKey",t)}_r(e,t){if(t){const r=Hx(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(we.min())))return r}return ht.newInvalidDocument(e)}}function LT(n){return new aD(n)}class uD extends OT{constructor(e,t){super(),this.hr=e,this.trackRemovals=t,this.Pr=new ui(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Ge((a,l)=>Ae(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Pr.get(a);if(t.push(this.hr.removeEntry(e,a,d.readTime)),l.isValidDocument()){const f=ow(this.hr.serializer,l);s=s.add(a.path.popLast());const m=Xh(f);r+=m-d.size,t.push(this.hr.addEntry(e,a,f))}else if(r-=d.size,this.trackRemovals){const f=ow(this.hr.serializer,l.convertToNoDocument(we.min()));t.push(this.hr.addEntry(e,a,f))}}),s.forEach(a=>{t.push(this.hr.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.hr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.hr.ar(e,t).next(r=>(this.Pr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.hr.cr(e,t).next(({documents:r,lr:s})=>(s.forEach((a,l)=>{this.Pr.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function ww(n){return Pt(n,"remoteDocumentGlobal")}function $s(n){return Pt(n,"remoteDocumentsV14")}function Yu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ew(n,e){const t=e.documentKey.path.toArray();return[n,Jh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Iw(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=Ae(t[a],r[a]),s)return s;return s=Ae(t.length,r.length),s||(s=Ae(t[t.length-2],r[r.length-2]),s||Ae(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ll(r.mutation,s,gn.empty(),ut.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ke()){const s=Ir();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let l=el();return a.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ke()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,s){let a=Rn();const l=ul(),d=function(){return ul()}();return t.forEach((f,m)=>{const v=r.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof li)?a=a.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),ll(v.mutation,m,v.mutation.getFieldMask(),ut.now())):l.set(m.key,gn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>l.set(m,v)),t.forEach((m,v)=>{var E;return d.set(m,new lD(v,(E=l.get(m))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,t){const r=ul();let s=new Xe((l,d)=>l-d),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||gn.empty();v=d.applyToLocalView(m,v),r.set(f,v);const E=(s.get(d.batchId)||ke()).add(f);s=s.insert(d.batchId,E)})}).next(()=>{const l=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,E=nT();v.forEach(I=>{if(!a.has(I)){const P=uT(t.get(I),r.get(I));P!==null&&E.set(I,P),a=a.add(I)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,E))}return U.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return ue.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):U.resolve(Ir());let d=-1,f=a;return l.next(m=>U.forEach(m,(v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?U.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{f=f.insert(v,I)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,ke())).next(v=>({batchId:d,changes:tT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(r=>{let s=el();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=el();return this.indexManager.getCollectionParents(e,a).next(d=>U.forEach(d,f=>{const m=function(E,I){return new Ha(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(v=>{v.forEach((E,I)=>{l=l.insert(E,I)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(l=>{a.forEach((f,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,ht.newInvalidDocument(v)))});let d=el();return l.forEach((f,m)=>{const v=a.get(f);v!==void 0&&ll(v.mutation,m,gn.empty(),ut.now()),Fl(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return U.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:on(s.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:PT(s.bundledQuery),readTime:on(s.readTime)}}(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.overlays=new Xe(ue.comparator),this.dr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ir();return U.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.Tt(e,t,a)}),U.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.dr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.dr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const s=Ir(),a=t.length+1,l=new ue(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return U.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Xe((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=Ir(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Ir(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=s)););return U.resolve(d)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.dr.get(s.largestBatchId).delete(r.key);this.dr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new $m(t,r));let a=this.dr.get(t);a===void 0&&(a=ke(),this.dr.set(t,a)),this.dr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.Er=new Ge(Nt.Ar),this.Rr=new Ge(Nt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const r=new Nt(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Nt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new ue(new $e([])),r=new Nt(t,e),s=new Nt(t,e+1),a=[];return this.Rr.forEachInRange([r,s],l=>{this.gr(l),a.push(l.key)}),a}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ue(new $e([])),r=new Nt(t,e),s=new Nt(t,e+1);let a=ke();return this.Rr.forEachInRange([r,s],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Nt(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ue.comparator(e.key,t.key)||Ae(e.br,t.br)}static Vr(e,t){return Ae(e.br,t.br)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Ge(Nt.Ar)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new zm(a,t,r,s);this.mutationQueue.push(l);for(const d of s)this.vr=this.vr.add(new Nt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return U.resolve(l)}lookupMutationBatch(e,t){return U.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),a=s<0?0:s;return U.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nt(t,0),s=new Nt(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([r,s],l=>{const d=this.Cr(l.br);a.push(d)}),U.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(Ae);return t.forEach(s=>{const a=new Nt(s,0),l=new Nt(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,l],d=>{r=r.add(d.br)})}),U.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;ue.isDocumentKey(a)||(a=a.child(""));const l=new Nt(new ue(a),0);let d=new Ge(Ae);return this.vr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.br)),!0)},l),U.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){_e(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return U.forEach(t.mutations,s=>{const a=new Nt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){const r=new Nt(t,0),s=this.vr.firstAfterOrEqual(r);return U.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.Nr=e,this.docs=function(){return new Xe(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let r=Rn();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():ht.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Rn();const l=t.path,d=new ue(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Vm(CI(v),r)<=0||(s.has(v.key)||Fl(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return U.resolve(a)}getAllFromCollectionGroup(e,t,r,s){pe()}Br(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mD(this)}getSize(e){return U.resolve(this.size)}}class mD extends OT{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.persistence=e,this.Lr=new ui(t=>so(t),Ml),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.kr=0,this.qr=new Wm,this.targetCount=0,this.Qr=uo.qn()}forEachTarget(e,t){return this.Lr.forEach((r,s)=>t(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),U.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new uo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Un(t),U.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Lr.forEach((l,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Lr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),U.waitFor(a).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.Lr.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),U.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t){this.Kr={},this.overlays={},this.$r=new mn(0),this.Ur=!1,this.Ur=!0,this.Wr=new dD,this.referenceDelegate=e(this),this.Gr=new gD(this),this.indexManager=new tD,this.remoteDocumentCache=function(s){return new pD(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new RT(t),this.jr=new cD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new fD(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Z("MemoryPersistence","Starting transaction:",e);const s=new yD(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(a=>this.referenceDelegate.Jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Yr(e,t){return U.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class yD extends xI{constructor(e){super(),this.currentSequenceNumber=e}}class Rd{constructor(e){this.persistence=e,this.Zr=new Wm,this.Xr=null}static ei(e){return new Rd(e)}get ti(){if(this.Xr)return this.Xr;throw pe()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),U.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.ti.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.ti,r=>{const s=ue.fromPath(r);return this.ni(e,s).next(a=>{a||t.removeEntry(s,we.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return U.or([()=>U.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Zh{constructor(e,t){this.persistence=e,this.ri=new ui(r=>Yt(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=VT(this,t)}static ei(e,t){return new Zh(e,t)}Hr(){}Jr(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return U.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(a=>a?U.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.Br(e,l=>this.ir(e,l,t).next(d=>{d||(r++,a.removeEntry(l,we.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),U.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}ir(e,t,r){return U.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.serializer=e}O(e,t,r,s){const a=new pd("createOrUpgrade",t);r<1&&s>=1&&(function(f){f.createObjectStore("owner")}(e),function(f){f.createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mv,{unique:!0}),f.createObjectStore("documentMutations")}(e),Tw(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=U.resolve();return r<3&&s>=3&&(r!==0&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Tw(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:we.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&s>=4&&(r!==0&&(l=l.next(()=>function(f,m){return m.store("mutations").U().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mv,{unique:!0});const E=m.store("mutations"),I=v.map(P=>E.put(P));return U.waitFor(I)})}(e,a))),l=l.next(()=>{(function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(l=l.next(()=>this.ii(a))),r<6&&s>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.si(a)))),r<7&&s>=7&&(l=l.next(()=>this.oi(a))),r<8&&s>=8&&(l=l.next(()=>this._i(e,a))),r<9&&s>=9&&(l=l.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(l=l.next(()=>this.ai(a))),r<11&&s>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{(function(f){const m=f.createObjectStore("documentOverlays",{keyPath:Y1});m.createIndex("collectionPathOverlayIndex",X1,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Z1,{unique:!1})})(e)})),r<13&&s>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:B1});m.createIndex("documentKeyIndex",z1),m.createIndex("collectionGroupIndex",j1)}(e)).next(()=>this.ui(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.ci(e,a))),r<15&&s>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:H1}).createIndex("sequenceNumberIndex",W1,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Q1}).createIndex("documentKeyIndex",J1,{unique:!1})}(e))),r<16&&s>=16&&(l=l.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&s>=17&&(l=l.next(()=>{(function(f){f.createObjectStore("globals",{keyPath:"name"})})(e)})),l}si(e){let t=0;return e.store("remoteDocuments").J((r,s)=>{t+=Xh(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(s=>U.forEach(s,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",l).next(d=>U.forEach(d,f=>{_e(f.userId===a.userId);const m=Hs(this.serializer,f);return xT(e,a.userId,m).next(()=>{})}))}))}oi(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const a=[];return r.J((l,d)=>{const f=new $e(l),m=function(E){return[0,Yt(E)]}(f);a.push(t.get(m).next(v=>v?U.resolve():(E=>t.put({targetId:0,path:Yt(E),sequenceNumber:s.highestListenSequenceNumber}))(f)))}).next(()=>U.waitFor(a))})}_i(e,t){e.createObjectStore("collectionParents",{keyPath:G1});const r=t.store("collectionParents"),s=new Hm,a=l=>{if(s.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:Yt(f)})}};return t.store("remoteDocuments").J({H:!0},(l,d)=>{const f=new $e(l);return a(f.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,d,f],m)=>{const v=Er(d);return a(v.popLast())}))}ai(e){const t=e.store("targets");return t.J((r,s)=>{const a=nl(s),l=AT(this.serializer,a);return t.put(l)})}ui(e,t){const r=t.store("remoteDocuments"),s=[];return r.J((a,l)=>{const d=t.store("remoteDocumentsV14"),f=function(E){return E.document?new ue($e.fromString(E.document.name).popFirst(5)):E.noDocument?ue.fromSegments(E.noDocument.path):E.unknownDocument?ue.fromSegments(E.unknownDocument.path):pe()}(l).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(d.put(m))}).next(()=>U.waitFor(s))}ci(e,t){const r=t.store("mutations"),s=LT(this.serializer),a=new Qm(Rd.ei,this.serializer.ht);return r.U().next(l=>{const d=new Map;return l.forEach(f=>{var m;let v=(m=d.get(f.userId))!==null&&m!==void 0?m:ke();Hs(this.serializer,f).keys().forEach(E=>v=v.add(E)),d.set(f.userId,v)}),U.forEach(d,(f,m)=>{const v=new Wt(m),E=Td.Pt(this.serializer,v),I=a.getIndexManager(v),P=Sd.Pt(v,this.serializer,I,a.referenceDelegate);return new MT(s,P,E,I).recalculateAndSaveOverlaysForDocumentKeys(new qp(t,mn.oe),f).next()})})}}function Tw(n){n.createObjectStore("targetDocuments",{keyPath:q1}).createIndex("documentTargetsIndex",K1,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$1,{unique:!0}),n.createObjectStore("targetGlobal")}const Ap="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jm{constructor(e,t,r,s,a,l,d,f,m,v,E=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.li=a,this.window=l,this.document=d,this.hi=m,this.Pi=v,this.Ti=E,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.di=null,this.Ei=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=I=>Promise.resolve(),!Jm.p())throw new se(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oD(this,s),this.Vi=t+"main",this.serializer=new RT(f),this.mi=new ts(this.Vi,this.Ti,new _D(this.serializer)),this.Wr=new Qx,this.Gr=new rD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LT(this.serializer),this.jr=new Wx,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,v===!1&&mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,Ap);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new mn(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.B(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(t=>{t||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(t=>this.isPrimary&&!t?this.vi(e).next(()=>!1):!!t&&this.Ci(e).next(()=>!0))).catch(e=>{if(hs(e))return Z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return Xu(e).get("owner").next(t=>U.resolve(this.Fi(t)))}Mi(e){return mh(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Pt(t,"clientMetadata");return r.U().next(s=>{const a=this.Ni(s,18e5),l=s.filter(d=>a.indexOf(d)===-1);return U.forEach(l,d=>r.delete(d.clientId)).next(()=>l)})}).catch(()=>[]);if(this.fi)for(const t of e)this.fi.removeItem(this.Bi(t.clientId))}}wi(){this.Ei=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?U.resolve(!0):Xu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Li(t.ownerId)){if(this.Fi(t)&&this.networkEnabled)return!0;if(!this.Fi(t)){if(!t.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,Ap);return!1}}return!(!this.networkEnabled||!this.inForeground)||mh(e).U().next(r=>this.Ni(r,5e3).find(s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,d=this.networkEnabled===s.networkEnabled;if(a||l&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Z("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Ur=!1,this.ki(),this.Ei&&(this.Ei.cancel(),this.Ei=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new qp(e,mn.oe);return this.vi(t).next(()=>this.Mi(t))}),this.mi.close(),this.Ki()}Ni(e,t){return e.filter(r=>this.Oi(r.updateTimeMs,t)&&!this.Li(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>mh(e).U().next(t=>this.Ni(t,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,t){return Sd.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nD(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return Td.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,t,r){Z("IndexedDbPersistence","Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=function(f){return f===17?nx:f===16?tx:f===15?Lm:f===14?LI:f===13?OI:f===12?ex:f===11?VI:void pe()}(this.Ti);let l;return this.mi.runTransaction(e,s,a,d=>(l=new qp(d,this.$r?this.$r.next():mn.oe),t==="readwrite-primary"?this.bi(l).next(f=>!!f||this.Di(l)).next(f=>{if(!f)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new se(W.FAILED_PRECONDITION,kI);return r(l)}).next(f=>this.Ci(l).next(()=>f)):this.Ui(l).next(()=>r(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}Ui(e){return Xu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Li(t.ownerId)&&!this.Fi(t)&&!(this.Pi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(W.FAILED_PRECONDITION,Ap)})}Ci(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xu(e).put("owner",t)}static p(){return ts.p()}vi(e){const t=Xu(e);return t.get("owner").next(r=>this.Fi(r)?(Z("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):U.resolve())}Oi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.di=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.di),this.inForeground=this.document.visibilityState==="visible")}qi(){this.di&&(this.document.removeEventListener("visibilitychange",this.di),this.di=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const t=/(?:Version|Mobile)\/1[456]/;CE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Li(e){var t;try{const r=((t=this.fi)===null||t===void 0?void 0:t.getItem(this.Bi(e)))!==null;return Z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Bi(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Bi(this.clientId))}catch{}}Bi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xu(n){return Pt(n,"owner")}function mh(n){return Pt(n,"clientMetadata")}function FT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=ke(),s=ke();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Ym(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return CE()?8:DI(Rt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Xi(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.es(e,t,s,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new vD;return this.ts(e,t,l).next(d=>{if(a.result=d,this.Hi)return this.ns(e,t,l,d.size)})}).next(()=>a.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(la()<=be.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",ca(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),U.resolve()):(la()<=be.DEBUG&&Z("QueryEngine","Query:",ca(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(la()<=be.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",ca(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(t))):U.resolve())}Xi(e,t){if(Jv(t))return U.resolve(null);let r=An(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Hh(t,null,"F"),r=An(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=ke(...a);return this.Zi.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.rs(t,d);return this.ss(t,m,l,f.readTime)?this.Xi(e,Hh(t,null,"F")):this.os(e,m,t,f)}))})))}es(e,t,r,s){return Jv(t)||s.isEqual(we.min())?U.resolve(null):this.Zi.getDocuments(e,r).next(a=>{const l=this.rs(t,a);return this.ss(t,l,r,s)?U.resolve(null):(la()<=be.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ca(t)),this.os(e,l,t,PI(s,-1)).next(d=>d))})}rs(e,t){let r=new Ge(ZI(e));return t.forEach((s,a)=>{Fl(e,a)&&(r=r.add(a))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ts(e,t,r){return la()<=be.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",ca(t)),this.Zi.getDocumentsMatchingQuery(e,t,Pn.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new Xe(Ae),this.cs=new ui(a=>so(a),Ml),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MT(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function BT(n,e,t,r){return new wD(n,e,t,r)}async function zT(n,e){const t=ge(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let f=ke();for(const m of s){l.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(m=>({Ts:m,removedBatchIds:l,addedBatchIds:d}))})})}function ED(n,e){const t=ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,v){const E=m.batch,I=E.keys();let P=U.resolve();return I.forEach(N=>{P=P.next(()=>v.getEntry(f,N)).next(V=>{const x=m.docVersions.get(N);_e(x!==null),V.version.compareTo(x)<0&&(E.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),v.addEntry(V)))})}),P.next(()=>d.mutationQueue.removeMutationBatch(f,E))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function jT(n){const e=ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function ID(n,e){const t=ge(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const d=[];e.targetChanges.forEach((v,E)=>{const I=s.get(E);if(!I)return;d.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,E).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,E)));let P=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(gt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,r)),s=s.insert(E,P),function(V,x,q){return V.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,P,v)&&d.push(t.Gr.updateTargetData(a,P))});let f=Rn(),m=ke();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(TD(a,l,e.documentUpdates).next(v=>{f=v.Is,m=v.ds})),!r.isEqual(we.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(E=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(v)}return U.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.us=s,a))}function TD(n,e,t){let r=ke(),s=ke();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Rn();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(we.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):Z("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Is:l,ds:s}})}function SD(n,e){const t=ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ed(n,e){const t=ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(a=>a?(s=a,U.resolve(s)):t.Gr.allocateTargetId(r).next(l=>(s=new ti(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function Ma(n,e,t){const r=ge(n),s=r.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!hs(l))throw l;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function im(n,e,t){const r=ge(n);let s=we.min(),a=ke();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,m,v){const E=ge(f),I=E.cs.get(v);return I!==void 0?U.resolve(E.us.get(I)):E.Gr.getTargetData(m,v)}(r,l,An(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(l,d.targetId).next(f=>{a=f})}).next(()=>r._s.getDocumentsMatchingQuery(l,e,t?s:we.min(),t?a:ke())).next(d=>(KT(r,XI(e),d),{documents:d,Es:a})))}function $T(n,e){const t=ge(n),r=ge(t.Gr),s=t.us.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ut(a,e).next(l=>l?l.target:null))}function qT(n,e){const t=ge(n),r=t.ls.get(e)||we.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.hs.getAllFromCollectionGroup(s,e,PI(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(KT(t,e,s),s))}function KT(n,e,t){let r=n.ls.get(e)||we.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ls.set(e,r)}function Sw(n,e){return`firestore_clients_${n}_${e}`}function Rw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pp(n,e){return`firestore_targets_${n}_${e}`}class td{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static fs(e,t,r){const s=JSON.parse(r);let a,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(a=new se(s.error.code,s.error.message))),l?new td(e,t,s.state,a):(mt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cl{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fs(e,t){const r=JSON.parse(t);let s,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new se(r.error.code,r.error.message))),a?new cl(e,r.state,s):(mt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,a=Um();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=bI(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return s?new nd(e,a):(mt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Xm{constructor(e,t){this.clientId=e,this.onlineState=t}static fs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Xm(t.clientId,t.onlineState):(mt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sm{constructor(){this.activeTargetIds=Um()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cp{constructor(e,t,r,s,a){this.window=e,this.li=t,this.persistenceKey=r,this.ws=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new Xe(Ae),this.started=!1,this.vs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Cs=Sw(this.persistenceKey,this.ws),this.Fs=function(f){return`firestore_sequence_number_${f}`}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new sm),this.Ms=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.xs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Os=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ns=function(f){return`firestore_online_state_${f}`}(this.persistenceKey),this.Bs=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.ws)continue;const s=this.getItem(Sw(this.persistenceKey,r));if(s){const a=nd.fs(r,s);a&&(this.Ds=this.Ds.insert(a.clientId,a))}}this.Ls();const t=this.storage.getItem(this.Ns);if(t){const r=this.ks(t);r&&this.qs(r)}for(const r of this.vs)this.bs(r);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let t=!1;return this.Ds.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,t,r){this.Ks(e,t,r),this.$s(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pp(this.persistenceKey,e));if(s){const a=cl.fs(e,s);a&&(r=a.state)}}return t&&this.Us.ps(e),this.Ls(),r}removeLocalQueryTarget(e){this.Us.ys(e),this.Ls()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ws(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.$s(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Z("SharedClientState","READ",e,t),t}setItem(e,t){Z("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const t=e;if(t.storageArea===this.storage){if(Z("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Cs)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ms.test(t.key)){if(t.newValue==null){const r=this.js(t.key);return this.Hs(r,null)}{const r=this.Js(t.key,t.newValue);if(r)return this.Hs(r.clientId,r)}}else if(this.xs.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(this.Os.test(t.key)){if(t.newValue!==null){const r=this.Xs(t.key,t.newValue);if(r)return this.eo(r)}}else if(t.key===this.Ns){if(t.newValue!==null){const r=this.ks(t.newValue);if(r)return this.qs(r)}}else if(t.key===this.Fs){const r=function(a){let l=mn.oe;if(a!=null)try{const d=JSON.parse(a);_e(typeof d=="number"),l=d}catch(d){mt("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(t.newValue);r!==mn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Bs){const r=this.no(t.newValue);await Promise.all(r.map(s=>this.syncEngine.ro(s)))}}}else this.vs.push(t)})}}get Us(){return this.Ds.get(this.ws)}Ls(){this.setItem(this.Cs,this.Us.gs())}Ks(e,t,r){const s=new td(this.currentUser,e,t,r),a=Rw(this.persistenceKey,this.currentUser,e);this.setItem(a,s.gs())}$s(e){const t=Rw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Gs(e){const t={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(t))}Ws(e,t,r){const s=Pp(this.persistenceKey,e),a=new cl(e,t,r);this.setItem(s,a.gs())}zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Bs,t)}js(e){const t=this.Ms.exec(e);return t?t[1]:null}Js(e,t){const r=this.js(e);return nd.fs(r,t)}Ys(e,t){const r=this.xs.exec(e),s=Number(r[1]),a=r[2]!==void 0?r[2]:null;return td.fs(new Wt(a),s,t)}Xs(e,t){const r=this.Os.exec(e),s=Number(r[1]);return cl.fs(s,t)}ks(e){return Xm.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);Z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,t){const r=t?this.Ds.insert(e,t):this.Ds.remove(e),s=this.Qs(this.Ds),a=this.Qs(r),l=[],d=[];return a.forEach(f=>{s.has(f)||l.push(f)}),s.forEach(f=>{a.has(f)||d.push(f)}),this.syncEngine.oo(l,d).then(()=>{this.Ds=r})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let t=Um();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class GT{constructor(){this._o=new sm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new sm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function kp(){return gh===null?gh=function(){return 268435456+Math.round(2147483648*Math.random())}():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class CD extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Oo(t,r,s,a,l){const d=kp(),f=this.No(t,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${t}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(m,a,l),this.Lo(t,f,m,s).then(v=>(Z("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw ka("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",f,"request:",s),v})}ko(t,r,s,a,l,d){return this.Oo(t,r,s,a,l)}Bo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ga}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,l)=>t[l]=a),s&&s.headers.forEach((a,l)=>t[l]=a)}No(t,r){const s=AD[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,s){const a=kp();return new Promise((l,d)=>{const f=new wI;f.setWithCredentials(!0),f.listenOnce(EI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Th.NO_ERROR:const v=f.getResponseJson();Z(Gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case Th.TIMEOUT:Z(Gt,`RPC '${e}' ${a} timed out`),d(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const E=f.getStatus();if(Z(Gt,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const N=function(x){const q=x.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(q)>=0?q:W.UNKNOWN}(P.status);d(new se(N,P.message))}else d(new se(W.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new se(W.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{Z(Gt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);Z(Gt,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)})}qo(e,t,r){const s=kp(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=SI(),d=TI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Bo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");Z(Gt,`Creating RPC '${e}' stream ${s}: ${v}`,f);const E=l.createWebChannel(v,f);let I=!1,P=!1;const N=new PD({Eo:x=>{P?Z(Gt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(I||(Z(Gt,`Opening RPC '${e}' stream ${s} transport.`),E.open(),I=!0),Z(Gt,`RPC '${e}' stream ${s} sending:`,x),E.send(x))},Ao:()=>E.close()}),V=(x,q,G)=>{x.listen(q,H=>{try{G(H)}catch(te){setTimeout(()=>{throw te},0)}})};return V(E,Zu.EventType.OPEN,()=>{P||(Z(Gt,`RPC '${e}' stream ${s} transport opened.`),N.So())}),V(E,Zu.EventType.CLOSE,()=>{P||(P=!0,Z(Gt,`RPC '${e}' stream ${s} transport closed`),N.Do())}),V(E,Zu.EventType.ERROR,x=>{P||(P=!0,ka(Gt,`RPC '${e}' stream ${s} transport errored:`,x),N.Do(new se(W.UNAVAILABLE,"The operation could not be completed")))}),V(E,Zu.EventType.MESSAGE,x=>{var q;if(!P){const G=x.data[0];_e(!!G);const H=G,te=(H==null?void 0:H.error)||((q=H[0])===null||q===void 0?void 0:q.error);if(te){Z(Gt,`RPC '${e}' stream ${s} received error:`,te);const le=te.status;let ae=function(R){const b=vt[R];if(b!==void 0)return hT(b)}(le),k=te.message;ae===void 0&&(ae=W.INTERNAL,k="Unknown error status: "+le+" with message "+te.message),P=!0,N.Do(new se(ae,k)),E.close()}else Z(Gt,`RPC '${e}' stream ${s} received:`,G),N.vo(G)}}),V(d,II.STAT_EVENT,x=>{x.stat===jp.PROXY?Z(Gt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===jp.NOPROXY&&Z(Gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.bo()},0),N}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){return typeof window<"u"?window:null}function Dh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n){return new Mx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t,r,s,a,l,d,f){this.li=e,this.Yo=r,this.Zo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new WT(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(mt(t.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new se(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.d_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kD extends QT{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=Bx(this.serializer,e),r=function(a){if(!("targetChange"in a))return we.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?we.min():l.readTime?on(l.readTime):we.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=Zp(this.serializer),t.addTarget=function(a,l){let d;const f=l.target;if(d=Kh(f)?{documents:vT(a,f)}:{query:wT(a,f).ct},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=pT(a,l.resumeToken);const m=Yp(a,l.expectedCount);m!==null&&(d.expectedCount=m)}else if(l.snapshotVersion.compareTo(we.min())>0){d.readTime=La(a,l.snapshotVersion.toTimestamp());const m=Yp(a,l.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=jx(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.c_(t)}}class xD extends QT{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=zx(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=Zp(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qh(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Oo(e,Xp(t,r),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(W.UNKNOWN,a.toString())})}ko(e,t,r,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.ko(e,Xp(t,r),s,l,d,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(W.UNKNOWN,l.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class bD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(mt(t),this.C_=!1):Z("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(l=>{r.enqueueAndForget(async()=>{ho(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(f){const m=ge(f);m.k_.add(4),await zl(m),m.K_.set("Unknown"),m.k_.delete(4),await Pd(m)}(this))})}),this.K_=new bD(r,s)}}async function Pd(n){if(ho(n))for(const e of n.q_)await e(!0)}async function zl(n){for(const e of n.q_)await e(!1)}function Cd(n,e){const t=ge(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),tg(t)?eg(t):Ja(t).s_()&&Zm(t,e))}function Fa(n,e){const t=ge(n),r=Ja(t);t.L_.delete(e),r.s_()&&JT(t,e),t.L_.size===0&&(r.s_()?r.a_():ho(t)&&t.K_.set("Unknown"))}function Zm(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ja(n).V_(e)}function JT(n,e){n.U_.xe(e),Ja(n).m_(e)}function eg(n){n.U_=new Nx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Ja(n).start(),n.K_.F_()}function tg(n){return ho(n)&&!Ja(n).i_()&&n.L_.size>0}function ho(n){return ge(n).k_.size===0}function YT(n){n.U_=void 0}async function VD(n){n.K_.set("Online")}async function OD(n){n.L_.forEach((e,t)=>{Zm(n,e)})}async function LD(n,e){YT(n),tg(n)?(n.K_.O_(e),eg(n)):n.K_.set("Unknown")}async function MD(n,e,t){if(n.K_.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await async function(s,a){const l=a.cause;for(const d of a.targetIds)s.L_.has(d)&&(await s.remoteSyncer.rejectListen(d,l),s.L_.delete(d),s.U_.removeTarget(d))}(n,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rd(n,r)}else if(e instanceof xh?n.U_.$e(e):e instanceof dT?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(we.min()))try{const r=await jT(n.localStore);t.compareTo(r)>=0&&await function(a,l){const d=a.U_.it(l);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.L_.get(m);v&&a.L_.set(m,v.withResumeToken(f.resumeToken,l))}}),d.targetMismatches.forEach((f,m)=>{const v=a.L_.get(f);if(!v)return;a.L_.set(f,v.withResumeToken(gt.EMPTY_BYTE_STRING,v.snapshotVersion)),JT(a,f);const E=new ti(v.target,f,m,v.sequenceNumber);Zm(a,E)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await rd(n,r)}}async function rd(n,e,t){if(!hs(e))throw e;n.k_.add(1),await zl(n),n.K_.set("Offline"),t||(t=()=>jT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Pd(n)})}function XT(n,e){return e().catch(t=>rd(n,t,e))}async function Qa(n){const e=ge(n),t=us(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;FD(e);)try{const s=await SD(e.localStore,r);if(s===null){e.B_.length===0&&t.a_();break}r=s.batchId,UD(e,s)}catch(s){await rd(e,s)}ZT(e)&&eS(e)}function FD(n){return ho(n)&&n.B_.length<10}function UD(n,e){n.B_.push(e);const t=us(n);t.s_()&&t.f_&&t.g_(e.mutations)}function ZT(n){return ho(n)&&!us(n).i_()&&n.B_.length>0}function eS(n){us(n).start()}async function BD(n){us(n).w_()}async function zD(n){const e=us(n);for(const t of n.B_)e.g_(t.mutations)}async function jD(n,e,t){const r=n.B_.shift(),s=jm.from(r,e,t);await XT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Qa(n)}async function $D(n,e){e&&us(n).f_&&await async function(r,s){if(function(l){return xx(l)&&l!==W.ABORTED}(s.code)){const a=r.B_.shift();us(r).__(),await XT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Qa(r)}}(n,e),ZT(n)&&eS(n)}async function Pw(n,e){const t=ge(n);t.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=ho(t);t.k_.add(3),await zl(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Pd(t)}async function om(n,e){const t=ge(n);e?(t.k_.delete(2),await Pd(t)):e||(t.k_.add(2),await zl(t),t.K_.set("Unknown"))}function Ja(n){return n.W_||(n.W_=function(t,r,s){const a=ge(t);return a.b_(),new kD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:VD.bind(null,n),mo:OD.bind(null,n),po:LD.bind(null,n),R_:MD.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),tg(n)?eg(n):n.K_.set("Unknown")):(await n.W_.stop(),YT(n))})),n.W_}function us(n){return n.G_||(n.G_=function(t,r,s){const a=ge(t);return a.b_(),new xD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:BD.bind(null,n),po:$D.bind(null,n),p_:zD.bind(null,n),y_:jD.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Qa(n)):(await n.G_.stop(),n.B_.length>0&&(Z("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,d=new ng(e,t,l,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(n,e){if(mt("AsyncQueue",`${e}: ${n}`),hs(n))return new se(W.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static emptySet(e){return new _a(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=el(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new _a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.z_=new Xe(ue.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):pe():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ua{constructor(e,t,r,s,a,l,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new Ua(e,t,_a.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class KD{constructor(){this.queries=kw(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=ge(t),a=s.queries;s.queries=kw(),a.forEach((l,d)=>{for(const f of d.J_)f.onError(r)})})(this,new se(W.ABORTED,"Firestore shutting down"))}}function kw(){return new ui(n=>YI(n),vd)}async function GD(n,e){const t=ge(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Y_()&&e.Z_()&&(r=2):(a=new qD,r=e.Z_()?0:1);try{switch(r){case 0:a.H_=await t.onListen(s,!0);break;case 1:a.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const d=rg(l,`Initialization of query '${ca(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&ig(t)}async function HD(n,e){const t=ge(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.J_.indexOf(e);l>=0&&(a.J_.splice(l,1),a.J_.length===0?s=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function WD(n,e){const t=ge(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const d of l.J_)d.ta(s)&&(r=!0);l.H_=s}}r&&ig(t)}function QD(n,e,t){const r=ge(n),s=r.queries.get(e);if(s)for(const a of s.J_)a.onError(t);r.queries.delete(e)}function ig(n){n.X_.forEach(e=>{e.next()})}var am,xw;(xw=am||(am={})).na="default",xw.Cache="cache";class JD{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.key=e}}class nS{constructor(e){this.key=e}}class YD{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=ZI(e),this.ma=new _a(this.Va)}get fa(){return this.Ea}ga(e,t){const r=t?t.pa:new Cw,s=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,E)=>{const I=s.get(v),P=Fl(this.query,E)?E:null,N=!!I&&this.mutatedKeys.has(I.key),V=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let x=!1;I&&P?I.data.isEqual(P.data)?N!==V&&(r.track({type:3,doc:P}),x=!0):this.ya(I,P)||(r.track({type:2,doc:P}),x=!0,(f&&this.Va(P,f)>0||m&&this.Va(P,m)<0)&&(d=!0)):!I&&P?(r.track({type:0,doc:P}),x=!0):I&&!P&&(r.track({type:1,doc:I}),x=!0,(f||m)&&(d=!0)),x&&(P?(l=l.add(P),a=V?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{ma:l,pa:r,ss:d,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const l=e.pa.j_();l.sort((v,E)=>function(P,N){const V=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return V(P)-V(N)}(v.type,E.type)||this.Va(v.doc,E.doc)),this.wa(r),s=s!=null&&s;const d=t&&!s?this.Sa():[],f=this.Ra.size===0&&this.current&&!s?1:0,m=f!==this.Aa;return this.Aa=f,l.length!==0||m?{snapshot:new Ua(this.query,e.ma,a,l,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Cw,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ke(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new nS(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new tS(r))}),t}va(e){this.Ea=e.Es,this.Ra=ke();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Ua.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class XD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZD{constructor(e){this.key=e,this.Fa=!1}}class eb{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ma={},this.xa=new ui(d=>YI(d),vd),this.Oa=new Map,this.Na=new Set,this.Ba=new Xe(ue.comparator),this.La=new Map,this.ka=new Wm,this.qa={},this.Qa=new Map,this.Ka=uo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function tb(n,e,t=!0){const r=kd(n);let s;const a=r.xa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Ca()):s=await rS(r,e,t,!0),s}async function nb(n,e){const t=kd(n);await rS(t,e,!0,!1)}async function rS(n,e,t,r){const s=await ed(n.localStore,An(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await sg(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Cd(n.remoteStore,s),d}async function sg(n,e,t,r,s){n.Ua=(E,I,P)=>async function(V,x,q,G){let H=x.view.ga(q);H.ss&&(H=await im(V.localStore,x.query,!1).then(({documents:k})=>x.view.ga(k,H)));const te=G&&G.targetChanges.get(x.targetId),le=G&&G.targetMismatches.get(x.targetId)!=null,ae=x.view.applyChanges(H,V.isPrimaryClient,te,le);return um(V,x.targetId,ae.ba),ae.snapshot}(n,E,I,P);const a=await im(n.localStore,e,!0),l=new YD(e,a.Es),d=l.ga(a.documents),f=Bl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=l.applyChanges(d,n.isPrimaryClient,f);um(n,t,m.ba);const v=new XD(e,t,l);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),m.snapshot}async function rb(n,e,t){const r=ge(n),s=r.xa.get(e),a=r.Oa.get(s.targetId);if(a.length>1)return r.Oa.set(s.targetId,a.filter(l=>!vd(l,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ma(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Fa(r.remoteStore,s.targetId),Ba(r,s.targetId)}).catch(cs)):(Ba(r,s.targetId),await Ma(r.localStore,s.targetId,!0))}async function ib(n,e){const t=ge(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fa(t.remoteStore,r.targetId))}async function sb(n,e,t){const r=lg(n);try{const s=await function(l,d){const f=ge(l),m=ut.now(),v=d.reduce((P,N)=>P.add(N.key),ke());let E,I;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let N=Rn(),V=ke();return f.hs.getEntries(P,v).next(x=>{N=x,N.forEach((q,G)=>{G.isValidDocument()||(V=V.add(q))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,N)).next(x=>{E=x;const q=[];for(const G of d){const H=Cx(G,E.get(G.key).overlayedDocument);H!=null&&q.push(new li(G.key,H,zI(H.value.mapValue),sn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,q,d)}).next(x=>{I=x;const q=x.applyToLocalDocumentSet(E,V);return f.documentOverlayCache.saveOverlays(P,x.batchId,q)})}).then(()=>({batchId:I.batchId,changes:tT(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,d,f){let m=l.qa[l.currentUser.toKey()];m||(m=new Xe(Ae)),m=m.insert(d,f),l.qa[l.currentUser.toKey()]=m}(r,s.batchId,t),await fs(r,s.changes),await Qa(r.remoteStore)}catch(s){const a=rg(s,"Failed to persist write");t.reject(a)}}async function iS(n,e){const t=ge(n);try{const r=await ID(t.localStore,e);e.targetChanges.forEach((s,a)=>{const l=t.La.get(a);l&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Fa=!0:s.modifiedDocuments.size>0?_e(l.Fa):s.removedDocuments.size>0&&(_e(l.Fa),l.Fa=!1))}),await fs(t,r,e)}catch(r){await cs(r)}}function Dw(n,e,t){const r=ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((a,l)=>{const d=l.view.ea(e);d.snapshot&&s.push(d.snapshot)}),function(l,d){const f=ge(l);f.onlineState=d;let m=!1;f.queries.forEach((v,E)=>{for(const I of E.J_)I.ea(d)&&(m=!0)}),m&&ig(f)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ob(n,e,t){const r=ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.La.get(e),a=s&&s.key;if(a){let l=new Xe(ue.comparator);l=l.insert(a,ht.newNoDocument(a,we.min()));const d=ke().add(a),f=new Ul(we.min(),new Map,new Xe(Ae),l,d);await iS(r,f),r.Ba=r.Ba.remove(a),r.La.delete(e),ug(r)}else await Ma(r.localStore,e,!1).then(()=>Ba(r,e,t)).catch(cs)}async function ab(n,e){const t=ge(n),r=e.batch.batchId;try{const s=await ED(t.localStore,e);ag(t,r,null),og(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await fs(t,s)}catch(s){await cs(s)}}async function ub(n,e,t){const r=ge(n);try{const s=await function(l,d){const f=ge(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next(E=>(_e(E!==null),v=E.keys(),f.mutationQueue.removeMutationBatch(m,E))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);ag(r,e,t),og(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await fs(r,s)}catch(s){await cs(s)}}function og(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function ag(n,e,t){const r=ge(n);let s=r.qa[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.qa[r.currentUser.toKey()]=s}}function Ba(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||sS(n,r)})}function sS(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(Fa(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),ug(n))}function um(n,e,t){for(const r of t)r instanceof tS?(n.ka.addReference(r.key,e),lb(n,r)):r instanceof nS?(Z("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||sS(n,r.key)):pe()}function lb(n,e){const t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(Z("SyncEngine","New document in limbo: "+t),n.Na.add(r),ug(n))}function ug(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new ue($e.fromString(e)),r=n.Ka.next();n.La.set(r,new ZD(t)),n.Ba=n.Ba.insert(t,r),Cd(n.remoteStore,new ti(An(_d(t.path)),r,"TargetPurposeLimboResolution",mn.oe))}}async function fs(n,e,t){const r=ge(n),s=[],a=[],l=[];r.xa.isEmpty()||(r.xa.forEach((d,f)=>{l.push(r.Ua(f,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Ym.zi(f.targetId,m);a.push(E)}}))}),await Promise.all(l),r.Ma.R_(s),await async function(f,m){const v=ge(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>U.forEach(m,I=>U.forEach(I.Wi,P=>v.persistence.referenceDelegate.addReference(E,I.targetId,P)).next(()=>U.forEach(I.Gi,P=>v.persistence.referenceDelegate.removeReference(E,I.targetId,P)))))}catch(E){if(!hs(E))throw E;Z("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const I=E.targetId;if(!E.fromCache){const P=v.us.get(I),N=P.snapshotVersion,V=P.withLastLimboFreeSnapshotVersion(N);v.us=v.us.insert(I,V)}}}(r.localStore,a))}async function cb(n,e){const t=ge(n);if(!t.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await zT(t.localStore,e);t.currentUser=e,function(a,l){a.Qa.forEach(d=>{d.forEach(f=>{f.reject(new se(W.CANCELLED,l))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fs(t,r.Ts)}}function hb(n,e){const t=ge(n),r=t.La.get(e);if(r&&r.Fa)return ke().add(r.key);{let s=ke();const a=t.Oa.get(e);if(!a)return s;for(const l of a){const d=t.xa.get(l);s=s.unionWith(d.view.fa)}return s}}async function db(n,e){const t=ge(n),r=await im(t.localStore,e.query,!0),s=e.view.va(r);return t.isPrimaryClient&&um(t,e.targetId,s.ba),s}async function fb(n,e){const t=ge(n);return qT(t.localStore,e).then(r=>fs(t,r))}async function pb(n,e,t,r){const s=ge(n),a=await function(d,f){const m=ge(d),v=ge(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",E=>v.On(E,f).next(I=>I?m.localDocuments.getDocuments(E,I):U.resolve(null)))}(s.localStore,e);a!==null?(t==="pending"?await Qa(s.remoteStore):t==="acknowledged"||t==="rejected"?(ag(s,e,r||null),og(s,e),function(d,f){ge(ge(d).mutationQueue).Bn(f)}(s.localStore,e)):pe(),await fs(s,a)):Z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function mb(n,e){const t=ge(n);if(kd(t),lg(t),e===!0&&t.$a!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await bw(t,r.toArray());t.$a=!0,await om(t.remoteStore,!0);for(const a of s)Cd(t.remoteStore,a)}else if(e===!1&&t.$a!==!1){const r=[];let s=Promise.resolve();t.Oa.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Ba(t,l),Ma(t.localStore,l,!0))),Fa(t.remoteStore,l)}),await s,await bw(t,r),function(l){const d=ge(l);d.La.forEach((f,m)=>{Fa(d.remoteStore,m)}),d.ka.wr(),d.La=new Map,d.Ba=new Xe(ue.comparator)}(t),t.$a=!1,await om(t.remoteStore,!1)}}async function bw(n,e,t){const r=ge(n),s=[],a=[];for(const l of e){let d;const f=r.Oa.get(l);if(f&&f.length!==0){d=await ed(r.localStore,An(f[0]));for(const m of f){const v=r.xa.get(m),E=await db(r,v);E.snapshot&&a.push(E.snapshot)}}else{const m=await $T(r.localStore,l);d=await ed(r.localStore,m),await sg(r,oS(m),l,!1,d.resumeToken)}s.push(d)}return r.Ma.R_(a),s}function oS(n){return QI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gb(n){return function(t){return ge(ge(t).persistence).$i()}(ge(n).localStore)}async function yb(n,e,t,r){const s=ge(n);if(s.$a)return void Z("SyncEngine","Ignoring unexpected query state notification.");const a=s.Oa.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await qT(s.localStore,XI(a[0])),d=Ul.createSynthesizedRemoteEventForCurrentChange(e,t==="current",gt.EMPTY_BYTE_STRING);await fs(s,l,d);break}case"rejected":await Ma(s.localStore,e,!0),Ba(s,e,r);break;default:pe()}}async function _b(n,e,t){const r=kd(n);if(r.$a){for(const s of e){if(r.Oa.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Z("SyncEngine","Adding an already active target "+s);continue}const a=await $T(r.localStore,s),l=await ed(r.localStore,a);await sg(r,oS(a),l.targetId,!1,l.resumeToken),Cd(r.remoteStore,l)}for(const s of t)r.Oa.has(s)&&await Ma(r.localStore,s,!1).then(()=>{Fa(r.remoteStore,s),Ba(r,s)}).catch(cs)}}function kd(n){const e=ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ob.bind(null,e),e.Ma.R_=WD.bind(null,e.eventManager),e.Ma.Wa=QD.bind(null,e.eventManager),e}function lg(n){const e=ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ab.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ub.bind(null,e),e}class Al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return BT(this.persistence,new UT,e.initialUser,this.serializer)}ja(e){return new Qm(Rd.ei,this.serializer)}za(e){return new GT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Al.provider={build:()=>new Al};class vb extends Al{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){_e(this.persistence.referenceDelegate instanceof Zh);const r=this.persistence.referenceDelegate.garbageCollector;return new NT(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Qm(r=>Zh.ei(r,t),this.serializer)}}class wb extends Al{constructor(e,t,r){super(),this.Za=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await lg(this.Za.syncEngine),await Qa(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return BT(this.persistence,new UT,e.initialUser,this.serializer)}Ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new NT(r,e.asyncQueue,t)}Ya(e,t){const r=new M1(t,this.persistence);return new L1(e.asyncQueue,r)}ja(e){const t=FT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Jm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HT(),Dh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new GT}}class Eb extends wb{constructor(e,t){super(e,t,!1),this.Za=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Za.syncEngine;this.sharedClientState instanceof Cp&&(this.sharedClientState.syncEngine={io:pb.bind(null,t),so:yb.bind(null,t),oo:_b.bind(null,t),$i:gb.bind(null,t),ro:fb.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Si(async r=>{await mb(this.Za.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}za(e){const t=HT();if(!Cp.p(t))throw new se(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class id{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cb.bind(null,this.syncEngine),await om(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KD}()}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),r=function(a){return new CD(a)}(e.databaseInfo);return function(a,l,d,f){return new DD(a,l,d,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,l,d){return new ND(r,s,a,l,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Dw(this.syncEngine,t,0),function(){return Aw.p()?new Aw:new RD}())}createSyncEngine(e,t){return function(s,a,l,d,f,m,v){const E=new eb(s,a,l,d,f,m);return v&&(E.$a=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=ge(s);Z("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await zl(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}id.provider={build:()=>new id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Wt.UNAUTHENTICATED,this.clientId=RI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{Z("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Z("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=rg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xp(n,e){n.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await zT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Nw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Sb(n);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Pw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Pw(e.remoteStore,s)),n._onlineComponents=e}async function Sb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await xp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ka("Error using user provided cache. Falling back to memory cache: "+t),await xp(n,new Al)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await xp(n,new vb(void 0));return n._offlineComponents}async function aS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Nw(n,n._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Nw(n,new id))),n._onlineComponents}function Rb(n){return aS(n).then(e=>e.syncEngine)}async function Vw(n){const e=await aS(n),t=e.eventManager;return t.onListen=tb.bind(null,e.syncEngine),t.onUnlisten=rb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ib.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(n,e,t){if(!t)throw new se(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ab(n,e,t,r){if(e===!0&&r===!0)throw new se(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Lw(n){if(!ue.isDocumentKey(n))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mw(n){if(ue.isDocumentKey(n))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe()}function ns(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xd(n);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ab("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cg{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new A1;switch(r.type){case"firstParty":return new k1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Ow.get(t);r&&(Z("ComponentProvider","Removing Datastore"),Ow.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ps(this.firestore,e,this._query)}}class yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class rs extends ps{constructor(e,t,r){super(e,t,_d(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new ue(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function pN(n,e,...t){if(n=At(n),lS("collection","path",e),n instanceof cg){const r=$e.fromString(e,...t);return Mw(r),new rs(n,null,r)}{if(!(n instanceof yn||n instanceof rs))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return Mw(r),new rs(n.firestore,null,r)}}function Pb(n,e,...t){if(n=At(n),arguments.length===1&&(e=RI.newId()),lS("doc","path",e),n instanceof cg){const r=$e.fromString(e,...t);return Lw(r),new yn(n,null,new ue(r))}{if(!(n instanceof yn||n instanceof rs))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return Lw(r),new yn(n.firestore,n instanceof rs?n.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new WT(this,"async_queue_retry"),this.fu=()=>{const r=Dh();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Dh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=Dh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new es;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!hs(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d}(r);throw mt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=ng.createAndSchedule(this,e,t,r,a=>this.Su(a));return this.Eu.push(s),s}pu(){this.Au&&pe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function Bw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class lo extends cg{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Uw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uw(e),this._firestoreClient=void 0,await e}}}function Cb(n,e,t){t||(t="(default)");const r=hd(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(pl(a,e))return s;throw new se(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function cS(n){if(n._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hS(n),n._firestoreClient}function hS(n){var e,t,r;const s=n._freezeSettings(),a=function(d,f,m,v){return new ix(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,uS(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Tb(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}async function kb(n){ka("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();xb(n,id.provider,{build:t=>new Eb(t,e.cacheSizeBytes)})}function xb(n,e,t){if((n=ns(n,lo))._firestoreClient||n._terminated)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new se(W.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},hS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new za(gt.fromBase64String(e))}catch(t){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new za(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=/^__.*__$/;class bb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wa(e,this.data,t,this.fieldTransforms)}}class dS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new li(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class pg{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Bu(e),s}Lu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Fu(),s}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return sd(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(fS(this.Mu)&&Db.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Nb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ad(e)}$u(e,t,r,s=!1){return new pg({Mu:e,methodName:t,Ku:r,path:at.emptyPath(),Nu:!1,Qu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mg(n){const e=n._freezeSettings(),t=Ad(n._databaseId);return new Nb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vb(n,e,t,r,s,a={}){const l=n.$u(a.merge||a.mergeFields?2:0,e,t,s);gg("Data must be an object, but it was:",l,r);const d=pS(r,l);let f,m;if(a.merge)f=new gn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const I=lm(e,E,t);if(!l.contains(I))throw new se(W.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);gS(v,I)||v.push(I)}f=new gn(v),m=l.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,m=l.fieldTransforms;return new bb(new Jt(d),f,m)}class bd extends hg{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bd}}function Ob(n,e,t,r){const s=n.$u(1,e,t);gg("Data must be an object, but it was:",s,r);const a=[],l=Jt.empty();ds(r,(f,m)=>{const v=yg(e,f,t);m=At(m);const E=s.Lu(v);if(m instanceof bd)a.push(v);else{const I=jl(m,E);I!=null&&(a.push(v),l.set(v,I))}});const d=new gn(a);return new dS(l,d,s.fieldTransforms)}function Lb(n,e,t,r,s,a){const l=n.$u(1,e,t),d=[lm(e,r,t)],f=[s];if(a.length%2!=0)throw new se(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)d.push(lm(e,a[I])),f.push(a[I+1]);const m=[],v=Jt.empty();for(let I=d.length-1;I>=0;--I)if(!gS(m,d[I])){const P=d[I];let N=f[I];N=At(N);const V=l.Lu(P);if(N instanceof bd)m.push(P);else{const x=jl(N,V);x!=null&&(m.push(P),v.set(P,x))}}const E=new gn(m);return new dS(v,E,l.fieldTransforms)}function Mb(n,e,t,r=!1){return jl(t,n.$u(r?4:3,e))}function jl(n,e){if(mS(n=At(n)))return gg("Unsupported field value:",e,n),pS(n,e);if(n instanceof hg)return function(r,s){if(!fS(s.Mu))throw s.qu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,s){const a=[];let l=0;for(const d of r){let f=jl(d,s.ku(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ex(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ut.fromDate(r);return{timestampValue:La(s.serializer,a)}}if(r instanceof ut){const a=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:La(s.serializer,a)}}if(r instanceof dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof za)return{bytesValue:pT(s.serializer,r._byteString)};if(r instanceof yn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.qu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Km(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fg)return function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw d.qu("VectorValues must only contain numeric values.");return Bm(d.serializer,f)})}}}}}}(r,s);throw s.qu(`Unsupported field value: ${xd(r)}`)}(n,e)}function pS(n,e){const t={};return MI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(n,(r,s)=>{const a=jl(s,e.Ou(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function mS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof dg||n instanceof za||n instanceof yn||n instanceof hg||n instanceof fg)}function gg(n,e,t){if(!mS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=xd(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function lm(n,e,t){if((e=At(e))instanceof Dd)return e._internalPath;if(typeof e=="string")return yg(n,e);throw sd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fb=new RegExp("[~\\*/\\[\\]]");function yg(n,e,t){if(e.search(Fb)>=0)throw sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dd(...e.split("."))._internalPath}catch{throw sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sd(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new se(W.INVALID_ARGUMENT,d+n+f)}function gS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ub(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ub extends yS{data(){return super.data()}}function Nd(n,e){return typeof e=="string"?yg(n,e):e instanceof Dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class vg extends _g{}function mN(n,e,...t){let r=[];e instanceof _g&&r.push(e),r=r.concat(t),function(a){const l=a.filter(f=>f instanceof wg).length,d=a.filter(f=>f instanceof Vd).length;if(l>1||l>0&&d>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Vd extends vg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Vd(e,t,r)}_apply(e){const t=this._parse(e);return _S(e._query,t),new ps(e.firestore,e.converter,Jp(e._query,t))}_parse(e){const t=mg(e.firestore);return function(a,l,d,f,m,v,E){let I;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){jw(E,v);const P=[];for(const N of E)P.push(zw(f,a,N));I={arrayValue:{values:P}}}else I=zw(f,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||jw(E,v),I=Mb(d,l,E,v==="in"||v==="not-in");return Ne.create(m,v,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gN(n,e,t){const r=e,s=Nd("where",n);return Vd._create(s,r,t)}class wg extends _g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ke.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let l=s;const d=a.getFlattenedFilters();for(const f of d)_S(l,f),l=Jp(l,f)}(e._query,t),new ps(e.firestore,e.converter,Jp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eg extends vg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Eg(e,t)}_apply(e){const t=function(s,a,l){if(s.startAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tl(a,l)}(e._query,this._field,this._direction);return new ps(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Ha(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function yN(n,e="asc"){const t=e,r=Nd("orderBy",n);return Eg._create(r,t)}class Ig extends vg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ig(e,t,r)}_apply(e){return new ps(e.firestore,e.converter,Hh(e._query,this._limit,this._limitType))}}function _N(n){return Ig._create("limit",n,"F")}function zw(n,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JI(e)&&t.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($e.fromString(t));if(!ue.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return El(n,new ue(r))}if(t instanceof yn)return El(n,t._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(t)}.`)}function jw(n,e){if(!Array.isArray(n)||n.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _S(n,e){const t=function(s,a){for(const l of s)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zb{convertValue(e,t="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ds(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>rt(l.doubleValue));return new fg(a)}convertGeoPoint(e){return new dg(rt(e.latitude),rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const t=oi(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$e.fromString(e);_e(ST(r));const s=new io(r.get(1),r.get(3)),a=new ue(r.popFirst(5));return s.isEqual(t)||mt(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vS extends yS{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Nd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bh extends vS{data(e={}){return super.data(e)}}class $b{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new rl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bh(this._firestore,this._userDataWriter,r.key,r,new rl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(d=>{const f=new bh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new rl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new bh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new rl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return d.type!==0&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),v=l.indexOf(d.doc.key)),{type:qb(d.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}class wS extends zb{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function vN(n,e,t,...r){n=ns(n,yn);const s=ns(n.firestore,lo),a=mg(s);let l;return l=typeof(e=At(e))=="string"||e instanceof Dd?Lb(a,"updateDoc",n._key,e,t,r):Ob(a,"updateDoc",n._key,e),Tg(s,[l.toMutation(n._key,sn.exists(!0))])}function wN(n){return Tg(ns(n.firestore,lo),[new Id(n._key,sn.none())])}function EN(n,e){const t=ns(n.firestore,lo),r=Pb(n),s=jb(n.converter,e);return Tg(t,[Vb(mg(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function IN(n,...e){var t,r,s;n=At(n);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Bw(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Bw(e[l])){const E=e[l];e[l]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[l+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[l+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let f,m,v;if(n instanceof yn)m=ns(n.firestore,lo),v=_d(n._key.path),f={next:E=>{e[l]&&e[l](Kb(m,n,E))},error:e[l+1],complete:e[l+2]};else{const E=ns(n,ps);m=ns(E.firestore,lo),v=E._query;const I=new wS(m);f={next:P=>{e[l]&&e[l](new $b(m,I,E,P))},error:e[l+1],complete:e[l+2]},Bb(n._query)}return function(I,P,N,V){const x=new Ib(V),q=new JD(P,x,N);return I.asyncQueue.enqueueAndForget(async()=>GD(await Vw(I),q)),()=>{x.eu(),I.asyncQueue.enqueueAndForget(async()=>HD(await Vw(I),q))}}(cS(m),v,d,f)}function Tg(n,e){return function(r,s){const a=new es;return r.asyncQueue.enqueueAndForget(async()=>sb(await Rb(r),s,a)),a.promise}(cS(n),e)}function Kb(n,e,t){const r=t.docs.get(e._key),s=new wS(n);return new vS(n,s,e._key,r,new rl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Ga=s})(co),to(new ss("firestore",(r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new lo(new P1(r.getProvider("auth-internal")),new D1(r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(m.options.projectId,v)}(l,s),l);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),ri(Vv,"4.7.6",e),ri(Vv,"4.7.6","esm2017")})();const Gb={apiKey:"AIzaSyBC_pXiOvMdvLCLXHyR_cXXlE2DgLRTCM0",authDomain:"task-management-tao.firebaseapp.com",projectId:"task-management-tao",storageBucket:"task-management-tao.firebasestorage.app",messagingSenderId:"188220638618",appId:"1:188220638618:web:47b82da54170c4b9646623",measurementId:"G-JCPN57Z8D3"},Sg=bE(Gb),TN=Wk(Sg);E1(Sg);const Hb=Cb(Sg,{experimentalForceLongPolling:!0,cacheSizeBytes:5e7,ignoreUndefinedProperties:!0});kb(Hb).catch(n=>{n.code==="failed-precondition"?console.warn("Persistence failed to enable"):n.code==="unimplemented"&&console.warn("Persistence is not available in this browser")});const $w=n=>{let e;const t=new Set,r=(m,v)=>{const E=typeof m=="function"?m(e):m;if(!Object.is(E,e)){const I=e;e=v??(typeof E!="object"||E===null)?E:Object.assign({},e,E),t.forEach(P=>P(e,I))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(t.add(m),()=>t.delete(m))},f=e=n(r,s,d);return d},Wb=n=>n?$w(n):$w,Qb=n=>n;function Jb(n,e=Qb){const t=L_.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return L_.useDebugValue(t),t}const qw=n=>{const e=Wb(n),t=r=>Jb(e,r);return Object.assign(t,e),t},Yb=n=>n?qw(n):qw,SN=Yb(n=>({user:null,loading:!0,setUser:e=>n({user:e}),setLoading:e=>n({loading:e})}));export{lN as A,oN as B,cN as C,Zb as D,kr as F,Bi as G,iN as N,nN as Q,L_ as R,pN as a,IN as b,Yb as c,Hb as d,EN as e,Pb as f,Zw as g,vN as h,wN as i,AR as j,TN as k,_N as l,Q as m,cm as n,yN as o,aN as p,mN as q,xR as r,uN as s,sN as t,SN as u,$A as v,gN as w,bR as x,rN as y,pE as z};
