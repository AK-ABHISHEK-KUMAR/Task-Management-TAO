(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function zv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yf={exports:{}},lu={},_f={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function tS(){if(Oy)return ke;Oy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,z={};function b(L,Q,_e){this.props=L,this.context=Q,this.refs=z,this.updater=_e||C}b.prototype.isReactComponent={},b.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function K(){}K.prototype=b.prototype;function H(L,Q,_e){this.props=L,this.context=Q,this.refs=z,this.updater=_e||C}var J=H.prototype=new K;J.constructor=H,V(J,b.prototype),J.isPureReactComponent=!0;var re=Array.isArray,me=Object.prototype.hasOwnProperty,ce={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(L,Q,_e){var Ae,Ce={},Ve=null,Fe=null;if(Q!=null)for(Ae in Q.ref!==void 0&&(Fe=Q.ref),Q.key!==void 0&&(Ve=""+Q.key),Q)me.call(Q,Ae)&&!k.hasOwnProperty(Ae)&&(Ce[Ae]=Q[Ae]);var Ue=arguments.length-2;if(Ue===1)Ce.children=_e;else if(1<Ue){for(var Ge=Array(Ue),St=0;St<Ue;St++)Ge[St]=arguments[St+2];Ce.children=Ge}if(L&&L.defaultProps)for(Ae in Ue=L.defaultProps,Ue)Ce[Ae]===void 0&&(Ce[Ae]=Ue[Ae]);return{$$typeof:r,type:L,key:Ve,ref:Fe,props:Ce,_owner:ce.current}}function A(L,Q){return{$$typeof:r,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function D(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function O(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(_e){return Q[_e]})}var M=/\/+/g;function P(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):Q.toString(36)}function ut(L,Q,_e,Ae,Ce){var Ve=typeof L;(Ve==="undefined"||Ve==="boolean")&&(L=null);var Fe=!1;if(L===null)Fe=!0;else switch(Ve){case"string":case"number":Fe=!0;break;case"object":switch(L.$$typeof){case r:case e:Fe=!0}}if(Fe)return Fe=L,Ce=Ce(Fe),L=Ae===""?"."+P(Fe,0):Ae,re(Ce)?(_e="",L!=null&&(_e=L.replace(M,"$&/")+"/"),ut(Ce,Q,_e,"",function(St){return St})):Ce!=null&&(D(Ce)&&(Ce=A(Ce,_e+(!Ce.key||Fe&&Fe.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+L)),Q.push(Ce)),1;if(Fe=0,Ae=Ae===""?".":Ae+":",re(L))for(var Ue=0;Ue<L.length;Ue++){Ve=L[Ue];var Ge=Ae+P(Ve,Ue);Fe+=ut(Ve,Q,_e,Ge,Ce)}else if(Ge=T(L),typeof Ge=="function")for(L=Ge.call(L),Ue=0;!(Ve=L.next()).done;)Ve=Ve.value,Ge=Ae+P(Ve,Ue++),Fe+=ut(Ve,Q,_e,Ge,Ce);else if(Ve==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Ot(L,Q,_e){if(L==null)return L;var Ae=[],Ce=0;return ut(L,Ae,"","",function(Ve){return Q.call(_e,Ve,Ce++)}),Ae}function Lt(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(_e){(L._status===0||L._status===-1)&&(L._status=1,L._result=_e)},function(_e){(L._status===0||L._status===-1)&&(L._status=2,L._result=_e)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var qe={current:null},se={transition:null},Ee={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:se,ReactCurrentOwner:ce};function ue(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:Ot,forEach:function(L,Q,_e){Ot(L,function(){Q.apply(this,arguments)},_e)},count:function(L){var Q=0;return Ot(L,function(){Q++}),Q},toArray:function(L){return Ot(L,function(Q){return Q})||[]},only:function(L){if(!D(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ke.Component=b,ke.Fragment=t,ke.Profiler=s,ke.PureComponent=H,ke.StrictMode=n,ke.Suspense=f,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,ke.act=ue,ke.cloneElement=function(L,Q,_e){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ae=V({},L.props),Ce=L.key,Ve=L.ref,Fe=L._owner;if(Q!=null){if(Q.ref!==void 0&&(Ve=Q.ref,Fe=ce.current),Q.key!==void 0&&(Ce=""+Q.key),L.type&&L.type.defaultProps)var Ue=L.type.defaultProps;for(Ge in Q)me.call(Q,Ge)&&!k.hasOwnProperty(Ge)&&(Ae[Ge]=Q[Ge]===void 0&&Ue!==void 0?Ue[Ge]:Q[Ge])}var Ge=arguments.length-2;if(Ge===1)Ae.children=_e;else if(1<Ge){Ue=Array(Ge);for(var St=0;St<Ge;St++)Ue[St]=arguments[St+2];Ae.children=Ue}return{$$typeof:r,type:L.type,key:Ce,ref:Ve,props:Ae,_owner:Fe}},ke.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},ke.createElement=S,ke.createFactory=function(L){var Q=S.bind(null,L);return Q.type=L,Q},ke.createRef=function(){return{current:null}},ke.forwardRef=function(L){return{$$typeof:d,render:L}},ke.isValidElement=D,ke.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:Lt}},ke.memo=function(L,Q){return{$$typeof:m,type:L,compare:Q===void 0?null:Q}},ke.startTransition=function(L){var Q=se.transition;se.transition={};try{L()}finally{se.transition=Q}},ke.unstable_act=ue,ke.useCallback=function(L,Q){return qe.current.useCallback(L,Q)},ke.useContext=function(L){return qe.current.useContext(L)},ke.useDebugValue=function(){},ke.useDeferredValue=function(L){return qe.current.useDeferredValue(L)},ke.useEffect=function(L,Q){return qe.current.useEffect(L,Q)},ke.useId=function(){return qe.current.useId()},ke.useImperativeHandle=function(L,Q,_e){return qe.current.useImperativeHandle(L,Q,_e)},ke.useInsertionEffect=function(L,Q){return qe.current.useInsertionEffect(L,Q)},ke.useLayoutEffect=function(L,Q){return qe.current.useLayoutEffect(L,Q)},ke.useMemo=function(L,Q){return qe.current.useMemo(L,Q)},ke.useReducer=function(L,Q,_e){return qe.current.useReducer(L,Q,_e)},ke.useRef=function(L){return qe.current.useRef(L)},ke.useState=function(L){return qe.current.useState(L)},ke.useSyncExternalStore=function(L,Q,_e){return qe.current.useSyncExternalStore(L,Q,_e)},ke.useTransition=function(){return qe.current.useTransition()},ke.version="18.3.1",ke}var Ly;function gp(){return Ly||(Ly=1,_f.exports=tS()),_f.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function nS(){if(My)return lu;My=1;var r=gp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,f,m){var v,w={},T=null,C=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(C=f.ref);for(v in f)n.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:T,ref:C,props:w,_owner:s.current}}return lu.Fragment=t,lu.jsx=l,lu.jsxs=l,lu}var Fy;function rS(){return Fy||(Fy=1,yf.exports=nS()),yf.exports}var uD=rS(),W=gp();const Uy=zv(W);var yc={},vf={exports:{}},on={},Ef={exports:{}},wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function iS(){return By||(By=1,function(r){function e(se,Ee){var ue=se.length;se.push(Ee);e:for(;0<ue;){var L=ue-1>>>1,Q=se[L];if(0<s(Q,Ee))se[L]=Ee,se[ue]=Q,ue=L;else break e}}function t(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var Ee=se[0],ue=se.pop();if(ue!==Ee){se[0]=ue;e:for(var L=0,Q=se.length,_e=Q>>>1;L<_e;){var Ae=2*(L+1)-1,Ce=se[Ae],Ve=Ae+1,Fe=se[Ve];if(0>s(Ce,ue))Ve<Q&&0>s(Fe,Ce)?(se[L]=Fe,se[Ve]=ue,L=Ve):(se[L]=Ce,se[Ae]=ue,L=Ae);else if(Ve<Q&&0>s(Fe,ue))se[L]=Fe,se[Ve]=ue,L=Ve;else break e}}return Ee}function s(se,Ee){var ue=se.sortIndex-Ee.sortIndex;return ue!==0?ue:se.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();r.unstable_now=function(){return l.now()-d}}var f=[],m=[],v=1,w=null,T=3,C=!1,V=!1,z=!1,b=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(se){for(var Ee=t(m);Ee!==null;){if(Ee.callback===null)n(m);else if(Ee.startTime<=se)n(m),Ee.sortIndex=Ee.expirationTime,e(f,Ee);else break;Ee=t(m)}}function re(se){if(z=!1,J(se),!V)if(t(f)!==null)V=!0,Lt(me);else{var Ee=t(m);Ee!==null&&qe(re,Ee.startTime-se)}}function me(se,Ee){V=!1,z&&(z=!1,K(S),S=-1),C=!0;var ue=T;try{for(J(Ee),w=t(f);w!==null&&(!(w.expirationTime>Ee)||se&&!O());){var L=w.callback;if(typeof L=="function"){w.callback=null,T=w.priorityLevel;var Q=L(w.expirationTime<=Ee);Ee=r.unstable_now(),typeof Q=="function"?w.callback=Q:w===t(f)&&n(f),J(Ee)}else n(f);w=t(f)}if(w!==null)var _e=!0;else{var Ae=t(m);Ae!==null&&qe(re,Ae.startTime-Ee),_e=!1}return _e}finally{w=null,T=ue,C=!1}}var ce=!1,k=null,S=-1,A=5,D=-1;function O(){return!(r.unstable_now()-D<A)}function M(){if(k!==null){var se=r.unstable_now();D=se;var Ee=!0;try{Ee=k(!0,se)}finally{Ee?P():(ce=!1,k=null)}}else ce=!1}var P;if(typeof H=="function")P=function(){H(M)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,Ot=ut.port2;ut.port1.onmessage=M,P=function(){Ot.postMessage(null)}}else P=function(){b(M,0)};function Lt(se){k=se,ce||(ce=!0,P())}function qe(se,Ee){S=b(function(){se(r.unstable_now())},Ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){V||C||(V=!0,Lt(me))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(se){switch(T){case 1:case 2:case 3:var Ee=3;break;default:Ee=T}var ue=T;T=Ee;try{return se()}finally{T=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,Ee){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ue=T;T=se;try{return Ee()}finally{T=ue}},r.unstable_scheduleCallback=function(se,Ee,ue){var L=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?L+ue:L):ue=L,se){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ue+Q,se={id:v++,callback:Ee,priorityLevel:se,startTime:ue,expirationTime:Q,sortIndex:-1},ue>L?(se.sortIndex=ue,e(m,se),t(f)===null&&se===t(m)&&(z?(K(S),S=-1):z=!0,qe(re,ue-L))):(se.sortIndex=Q,e(f,se),V||C||(V=!0,Lt(me))),se},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(se){var Ee=T;return function(){var ue=T;T=Ee;try{return se.apply(this,arguments)}finally{T=ue}}}}(wf)),wf}var zy;function sS(){return zy||(zy=1,Ef.exports=iS()),Ef.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function oS(){if(jy)return on;jy=1;var r=gp(),e=sS();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function T(i){return f.call(w,i)?!0:f.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function C(i,o,u,h){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function V(i,o,u,h){if(o===null||typeof o>"u"||C(i,o,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function z(i,o,u,h,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new z(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];b[o]=new z(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new z(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new z(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new z(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new z(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new z(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new z(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new z(i,5,!1,i.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(K,H);b[o]=new z(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(K,H);b[o]=new z(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(K,H);b[o]=new z(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new z(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new z(i,1,!1,i.toLowerCase(),null,!0,!0)});function J(i,o,u,h){var p=b.hasOwnProperty(o)?b[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(V(o,u,p,h)&&(u=null),h||p===null?T(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):p.mustUseProperty?i[p.propertyName]=u===null?p.type===3?!1:"":u:(o=p.attributeName,h=p.attributeNamespace,u===null?i.removeAttribute(o):(p=p.type,u=p===3||p===4&&u===!0?"":""+u,h?i.setAttributeNS(h,o,u):i.setAttribute(o,u))))}var re=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),ce=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),Ot=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),qe=Symbol.for("react.offscreen"),se=Symbol.iterator;function Ee(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,L;function Q(i){if(L===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);L=o&&o[1]||""}return`
`+L+i}var _e=!1;function Ae(i,o){if(!i||_e)return"";_e=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch($){var h=$}Reflect.construct(i,[],o)}else{try{o.call()}catch($){h=$}i.call(o.prototype)}else{try{throw Error()}catch($){h=$}i()}}catch($){if($&&h&&typeof $.stack=="string"){for(var p=$.stack.split(`
`),y=h.stack.split(`
`),E=p.length-1,R=y.length-1;1<=E&&0<=R&&p[E]!==y[R];)R--;for(;1<=E&&0<=R;E--,R--)if(p[E]!==y[R]){if(E!==1||R!==1)do if(E--,R--,0>R||p[E]!==y[R]){var x=`
`+p[E].replace(" at new "," at ");return i.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",i.displayName)),x}while(1<=E&&0<=R);break}}}finally{_e=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Q(i):""}function Ce(i){switch(i.tag){case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case ce:return"Portal";case A:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case ut:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case D:return(i._context.displayName||"Context")+".Provider";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ot:return o=i.displayName||null,o!==null?o:Ve(i.type)||"Memo";case Lt:o=i._payload,i=i._init;try{return Ve(i(o))}catch{}}return null}function Fe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ge(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function St(i){var o=Ge(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){h=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function gr(i){i._valueTracker||(i._valueTracker=St(i))}function Bs(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Ge(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function Hr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ki(i,o){var u=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function zs(i,o){var u=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),i._wrapperState={initialChecked:h,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ma(i,o){o=o.checked,o!=null&&J(i,"checked",o,!1)}function ga(i,o){ma(i,o);var u=Ue(o.value),h=o.type;if(u!=null)h==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?js(i,o.type,u):o.hasOwnProperty("defaultValue")&&js(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function nl(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function js(i,o,u){(o!=="number"||Hr(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var yr=Array.isArray;function _r(i,o,u,h){if(i=i.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<i.length;u++)p=o.hasOwnProperty("$"+i[u].value),i[u].selected!==p&&(i[u].selected=p),p&&h&&(i[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,p=0;p<i.length;p++){if(i[p].value===u){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function ya(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function $s(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(yr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Ue(u)}}function qs(i,o){var u=Ue(o.value),h=Ue(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),h!=null&&(i.defaultValue=""+h)}function _a(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function gt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?gt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var vr,va=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,u,h,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(vr=vr||document.createElement("div"),vr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=vr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Wr(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hi=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(i){Hi.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Gi[o]=Gi[i]})});function Ea(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Gi.hasOwnProperty(i)&&Gi[i]?(""+o).trim():o+"px"}function wa(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var h=u.indexOf("--")===0,p=Ea(u,o[u],h);u==="float"&&(u="cssFloat"),h?i.setProperty(u,p):i[u]=p}}var Ia=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(i,o){if(o){if(Ia[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Sa(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wi=null;function Ks(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gs=null,En=null,Qn=null;function Hs(i){if(i=Wa(i)){if(typeof Gs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Nl(o),Gs(i.stateNode,i.type,o))}}function Jn(i){En?Qn?Qn.push(i):Qn=[i]:En=i}function Ra(){if(En){var i=En,o=Qn;if(Qn=En=null,Hs(i),o)for(i=0;i<o.length;i++)Hs(o[i])}}function Qi(i,o){return i(o)}function Aa(){}var Er=!1;function Pa(i,o,u){if(Er)return i(o,u);Er=!0;try{return Qi(i,o,u)}finally{Er=!1,(En!==null||Qn!==null)&&(Aa(),Ra())}}function lt(i,o){var u=i.stateNode;if(u===null)return null;var h=Nl(u);if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Ws=!1;if(d)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Ws=!1}function Ji(i,o,u,h,p,y,E,R,x){var $=Array.prototype.slice.call(arguments,3);try{o.apply(u,$)}catch(Z){this.onError(Z)}}var Yi=!1,Qs=null,Dn=!1,Ca=null,qh={onError:function(i){Yi=!0,Qs=i}};function Js(i,o,u,h,p,y,E,R,x){Yi=!1,Qs=null,Ji.apply(qh,arguments)}function rl(i,o,u,h,p,y,E,R,x){if(Js.apply(this,arguments),Yi){if(Yi){var $=Qs;Yi=!1,Qs=null}else throw Error(t(198));Dn||(Dn=!0,Ca=$)}}function Nn(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Xi(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Vn(i){if(Nn(i)!==i)throw Error(t(188))}function il(i){var o=i.alternate;if(!o){if(o=Nn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,h=o;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){u=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return Vn(p),i;if(y===h)return Vn(p),o;y=y.sibling}throw Error(t(188))}if(u.return!==h.return)u=p,h=y;else{for(var E=!1,R=p.child;R;){if(R===u){E=!0,u=p,h=y;break}if(R===h){E=!0,h=p,u=y;break}R=R.sibling}if(!E){for(R=y.child;R;){if(R===u){E=!0,u=y,h=p;break}if(R===h){E=!0,h=y,u=p;break}R=R.sibling}if(!E)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function ka(i){return i=il(i),i!==null?Ys(i):null}function Ys(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ys(i);if(o!==null)return o;i=i.sibling}return null}var Xs=e.unstable_scheduleCallback,xa=e.unstable_cancelCallback,sl=e.unstable_shouldYield,Kh=e.unstable_requestPaint,He=e.unstable_now,ol=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,Qr=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,Da=e.unstable_LowPriority,al=e.unstable_IdlePriority,es=null,cn=null;function ul(i){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(es,i,void 0,(i.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:cl,Na=Math.log,ll=Math.LN2;function cl(i){return i>>>=0,i===0?32:31-(Na(i)/ll|0)|0}var Zs=64,eo=4194304;function Jr(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ts(i,o){var u=i.pendingLanes;if(u===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,E=u&268435455;if(E!==0){var R=E&~p;R!==0?h=Jr(R):(y&=E,y!==0&&(h=Jr(y)))}else E=u&~p,E!==0?h=Jr(E):y!==0&&(h=Jr(y));if(h===0)return 0;if(o!==0&&o!==h&&!(o&p)&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if(h&4&&(h|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)u=31-Gt(o),p=1<<u,h|=i[u],o&=~p;return h}function Gh(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wr(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-Gt(y),R=1<<E,x=p[E];x===-1?(!(R&u)||R&h)&&(p[E]=Gh(R,o)):x<=o&&(i.expiredLanes|=R),y&=~R}}function hn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ns(){var i=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),i}function Yr(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Xr(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Gt(o),i[o]=u}function Ke(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<u;){var p=31-Gt(u),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,u&=~y}}function Zr(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-Gt(u),p=1<<h;p&o|i[h]&o&&(i[h]|=o),u&=~p}}var Ne=0;function ei(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var hl,to,dl,fl,pl,Va=!1,Yn=[],xt=null,bn=null,On=null,ti=new Map,In=new Map,Xn=[],Hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ml(i,o){switch(i){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":ti.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(o.pointerId)}}function Xt(i,o,u,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Wa(o),o!==null&&to(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Wh(i,o,u,h,p){switch(o){case"focusin":return xt=Xt(xt,i,o,u,h,p),!0;case"dragenter":return bn=Xt(bn,i,o,u,h,p),!0;case"mouseover":return On=Xt(On,i,o,u,h,p),!0;case"pointerover":var y=p.pointerId;return ti.set(y,Xt(ti.get(y)||null,i,o,u,h,p)),!0;case"gotpointercapture":return y=p.pointerId,In.set(y,Xt(In.get(y)||null,i,o,u,h,p)),!0}return!1}function gl(i){var o=as(i.target);if(o!==null){var u=Nn(o);if(u!==null){if(o=u.tag,o===13){if(o=Xi(u),o!==null){i.blockedOn=o,pl(i.priority,function(){dl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ir(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=no(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);Wi=h,u.target.dispatchEvent(h),Wi=null}else return o=Wa(u),o!==null&&to(o),i.blockedOn=u,!1;o.shift()}return!0}function rs(i,o,u){Ir(i)&&u.delete(o)}function yl(){Va=!1,xt!==null&&Ir(xt)&&(xt=null),bn!==null&&Ir(bn)&&(bn=null),On!==null&&Ir(On)&&(On=null),ti.forEach(rs),In.forEach(rs)}function Ln(i,o){i.blockedOn===o&&(i.blockedOn=null,Va||(Va=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yl)))}function Mn(i){function o(p){return Ln(p,i)}if(0<Yn.length){Ln(Yn[0],i);for(var u=1;u<Yn.length;u++){var h=Yn[u];h.blockedOn===i&&(h.blockedOn=null)}}for(xt!==null&&Ln(xt,i),bn!==null&&Ln(bn,i),On!==null&&Ln(On,i),ti.forEach(o),In.forEach(o),u=0;u<Xn.length;u++)h=Xn[u],h.blockedOn===i&&(h.blockedOn=null);for(;0<Xn.length&&(u=Xn[0],u.blockedOn===null);)gl(u),u.blockedOn===null&&Xn.shift()}var Tr=re.ReactCurrentBatchConfig,ni=!0;function Xe(i,o,u,h){var p=Ne,y=Tr.transition;Tr.transition=null;try{Ne=1,ba(i,o,u,h)}finally{Ne=p,Tr.transition=y}}function Qh(i,o,u,h){var p=Ne,y=Tr.transition;Tr.transition=null;try{Ne=4,ba(i,o,u,h)}finally{Ne=p,Tr.transition=y}}function ba(i,o,u,h){if(ni){var p=no(i,o,u,h);if(p===null)od(i,o,h,is,u),ml(i,h);else if(Wh(p,i,o,u,h))h.stopPropagation();else if(ml(i,h),o&4&&-1<Hh.indexOf(i)){for(;p!==null;){var y=Wa(p);if(y!==null&&hl(y),y=no(i,o,u,h),y===null&&od(i,o,h,is,u),y===p)break;p=y}p!==null&&h.stopPropagation()}else od(i,o,h,null,u)}}var is=null;function no(i,o,u,h){if(is=null,i=Ks(h),i=as(i),i!==null)if(o=Nn(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Xi(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return is=i,null}function Oa(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ol()){case Zi:return 1;case Qr:return 4;case wn:case Da:return 16;case al:return 536870912;default:return 16}default:return 16}}var dn=null,ro=null,Zt=null;function La(){if(Zt)return Zt;var i,o=ro,u=o.length,h,p="value"in dn?dn.value:dn.textContent,y=p.length;for(i=0;i<u&&o[i]===p[i];i++);var E=u-i;for(h=1;h<=E&&o[u-h]===p[y-h];h++);return Zt=p.slice(i,1<h?1-h:void 0)}function io(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Zn(){return!0}function Ma(){return!1}function Dt(i){function o(u,h,p,y,E){this._reactName=u,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(u=i[R],this[R]=u?u(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Zn:Ma,this.isPropagationStopped=Ma,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),o}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Dt(Fn),er=ue({},Fn,{view:0,detail:0}),Jh=Dt(er),oo,Sr,ri,ss=ue({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ri&&(ri&&i.type==="mousemove"?(oo=i.screenX-ri.screenX,Sr=i.screenY-ri.screenY):Sr=oo=0,ri=i),oo)},movementY:function(i){return"movementY"in i?i.movementY:Sr}}),ao=Dt(ss),Fa=ue({},ss,{dataTransfer:0}),_l=Dt(Fa),uo=ue({},er,{relatedTarget:0}),lo=Dt(uo),vl=ue({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rr=Dt(vl),El=ue({},Fn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),wl=Dt(El),Il=ue({},Fn,{data:0}),Ua=Dt(Il),co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sl(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Tl[i])?!!o[i]:!1}function tr(){return Sl}var c=ue({},er,{key:function(i){if(i.key){var o=co[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ht[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(i){return i.type==="keypress"?io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Dt(c),_=ue({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Dt(_),U=ue({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),q=Dt(U),ne=ue({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Dt(ne),_t=ue({},ss,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Dt(_t),Rt=[9,13,27,32],ft=d&&"CompositionEvent"in window,Tn=null;d&&"documentMode"in document&&(Tn=document.documentMode);var fn=d&&"TextEvent"in window&&!Tn,os=d&&(!ft||Tn&&8<Tn&&11>=Tn),ho=" ",km=!1;function xm(i,o){switch(i){case"keyup":return Rt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fo=!1;function ZI(i,o){switch(i){case"compositionend":return Dm(o);case"keypress":return o.which!==32?null:(km=!0,ho);case"textInput":return i=o.data,i===ho&&km?null:i;default:return null}}function eT(i,o){if(fo)return i==="compositionend"||!ft&&xm(i,o)?(i=La(),Zt=ro=dn=null,fo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return os&&o.locale!=="ko"?null:o.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!tT[i.type]:o==="textarea"}function Vm(i,o,u,h){Jn(h),o=kl(o,"onChange"),0<o.length&&(u=new so("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var Ba=null,za=null;function nT(i){Ym(i,0)}function Rl(i){var o=_o(i);if(Bs(o))return i}function rT(i,o){if(i==="change")return o}var bm=!1;if(d){var Yh;if(d){var Xh="oninput"in document;if(!Xh){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),Xh=typeof Om.oninput=="function"}Yh=Xh}else Yh=!1;bm=Yh&&(!document.documentMode||9<document.documentMode)}function Lm(){Ba&&(Ba.detachEvent("onpropertychange",Mm),za=Ba=null)}function Mm(i){if(i.propertyName==="value"&&Rl(za)){var o=[];Vm(o,za,i,Ks(i)),Pa(nT,o)}}function iT(i,o,u){i==="focusin"?(Lm(),Ba=o,za=u,Ba.attachEvent("onpropertychange",Mm)):i==="focusout"&&Lm()}function sT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Rl(za)}function oT(i,o){if(i==="click")return Rl(o)}function aT(i,o){if(i==="input"||i==="change")return Rl(o)}function uT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Un=typeof Object.is=="function"?Object.is:uT;function ja(i,o){if(Un(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var p=u[h];if(!f.call(o,p)||!Un(i[p],o[p]))return!1}return!0}function Fm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Um(i,o){var u=Fm(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Fm(u)}}function Bm(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Bm(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function zm(){for(var i=window,o=Hr();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Hr(i.document)}return o}function Zh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function lT(i){var o=zm(),u=i.focusedElem,h=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Bm(u.ownerDocument.documentElement,u)){if(h!==null&&Zh(u)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=u.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=Um(u,y);var E=Um(u,h);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var cT=d&&"documentMode"in document&&11>=document.documentMode,po=null,ed=null,$a=null,td=!1;function jm(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;td||po==null||po!==Hr(h)||(h=po,"selectionStart"in h&&Zh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),$a&&ja($a,h)||($a=h,h=kl(ed,"onSelect"),0<h.length&&(o=new so("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=po)))}function Al(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var mo={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},nd={},$m={};d&&($m=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Pl(i){if(nd[i])return nd[i];if(!mo[i])return i;var o=mo[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in $m)return nd[i]=o[u];return i}var qm=Pl("animationend"),Km=Pl("animationiteration"),Gm=Pl("animationstart"),Hm=Pl("transitionend"),Wm=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(i,o){Wm.set(i,o),a(o,[i])}for(var rd=0;rd<Qm.length;rd++){var id=Qm[rd],hT=id.toLowerCase(),dT=id[0].toUpperCase()+id.slice(1);ii(hT,"on"+dT)}ii(qm,"onAnimationEnd"),ii(Km,"onAnimationIteration"),ii(Gm,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(Hm,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function Jm(i,o,u){var h=i.type||"unknown-event";i.currentTarget=u,rl(h,o,void 0,i),i.currentTarget=null}function Ym(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var E=h.length-1;0<=E;E--){var R=h[E],x=R.instance,$=R.currentTarget;if(R=R.listener,x!==y&&p.isPropagationStopped())break e;Jm(p,R,$),y=x}else for(E=0;E<h.length;E++){if(R=h[E],x=R.instance,$=R.currentTarget,R=R.listener,x!==y&&p.isPropagationStopped())break e;Jm(p,R,$),y=x}}}if(Dn)throw i=Ca,Dn=!1,Ca=null,i}function Je(i,o){var u=o[dd];u===void 0&&(u=o[dd]=new Set);var h=i+"__bubble";u.has(h)||(Xm(o,i,2,!1),u.add(h))}function sd(i,o,u){var h=0;o&&(h|=4),Xm(u,i,h,o)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function Ka(i){if(!i[Cl]){i[Cl]=!0,n.forEach(function(u){u!=="selectionchange"&&(fT.has(u)||sd(u,!1,i),sd(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Cl]||(o[Cl]=!0,sd("selectionchange",!1,o))}}function Xm(i,o,u,h){switch(Oa(o)){case 1:var p=Xe;break;case 4:p=Qh;break;default:p=ba}u=p.bind(null,o,u,i),p=void 0,!Ws||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,u,{capture:!0,passive:p}):i.addEventListener(o,u,!0):p!==void 0?i.addEventListener(o,u,{passive:p}):i.addEventListener(o,u,!1)}function od(i,o,u,h,p){var y=h;if(!(o&1)&&!(o&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var R=h.stateNode.containerInfo;if(R===p||R.nodeType===8&&R.parentNode===p)break;if(E===4)for(E=h.return;E!==null;){var x=E.tag;if((x===3||x===4)&&(x=E.stateNode.containerInfo,x===p||x.nodeType===8&&x.parentNode===p))return;E=E.return}for(;R!==null;){if(E=as(R),E===null)return;if(x=E.tag,x===5||x===6){h=y=E;continue e}R=R.parentNode}}h=h.return}Pa(function(){var $=y,Z=Ks(u),ee=[];e:{var Y=Wm.get(i);if(Y!==void 0){var ae=so,he=i;switch(i){case"keypress":if(io(u)===0)break e;case"keydown":case"keyup":ae=g;break;case"focusin":he="focus",ae=lo;break;case"focusout":he="blur",ae=lo;break;case"beforeblur":case"afterblur":ae=lo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=_l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=q;break;case qm:case Km:case Gm:ae=Rr;break;case Hm:ae=ze;break;case"scroll":ae=Jh;break;case"wheel":ae=be;break;case"copy":case"cut":case"paste":ae=wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=I}var fe=(o&4)!==0,ct=!fe&&i==="scroll",B=fe?Y!==null?Y+"Capture":null:Y;fe=[];for(var N=$,j;N!==null;){j=N;var te=j.stateNode;if(j.tag===5&&te!==null&&(j=te,B!==null&&(te=lt(N,B),te!=null&&fe.push(Ga(N,te,j)))),ct)break;N=N.return}0<fe.length&&(Y=new ae(Y,he,null,u,Z),ee.push({event:Y,listeners:fe}))}}if(!(o&7)){e:{if(Y=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",Y&&u!==Wi&&(he=u.relatedTarget||u.fromElement)&&(as(he)||he[Ar]))break e;if((ae||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,ae?(he=u.relatedTarget||u.toElement,ae=$,he=he?as(he):null,he!==null&&(ct=Nn(he),he!==ct||he.tag!==5&&he.tag!==6)&&(he=null)):(ae=null,he=$),ae!==he)){if(fe=ao,te="onMouseLeave",B="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(fe=I,te="onPointerLeave",B="onPointerEnter",N="pointer"),ct=ae==null?Y:_o(ae),j=he==null?Y:_o(he),Y=new fe(te,N+"leave",ae,u,Z),Y.target=ct,Y.relatedTarget=j,te=null,as(Z)===$&&(fe=new fe(B,N+"enter",he,u,Z),fe.target=j,fe.relatedTarget=ct,te=fe),ct=te,ae&&he)t:{for(fe=ae,B=he,N=0,j=fe;j;j=go(j))N++;for(j=0,te=B;te;te=go(te))j++;for(;0<N-j;)fe=go(fe),N--;for(;0<j-N;)B=go(B),j--;for(;N--;){if(fe===B||B!==null&&fe===B.alternate)break t;fe=go(fe),B=go(B)}fe=null}else fe=null;ae!==null&&Zm(ee,Y,ae,fe,!1),he!==null&&ct!==null&&Zm(ee,ct,he,fe,!0)}}e:{if(Y=$?_o($):window,ae=Y.nodeName&&Y.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Y.type==="file")var ge=rT;else if(Nm(Y))if(bm)ge=aT;else{ge=sT;var we=iT}else(ae=Y.nodeName)&&ae.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(ge=oT);if(ge&&(ge=ge(i,$))){Vm(ee,ge,u,Z);break e}we&&we(i,Y,$),i==="focusout"&&(we=Y._wrapperState)&&we.controlled&&Y.type==="number"&&js(Y,"number",Y.value)}switch(we=$?_o($):window,i){case"focusin":(Nm(we)||we.contentEditable==="true")&&(po=we,ed=$,$a=null);break;case"focusout":$a=ed=po=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,jm(ee,u,Z);break;case"selectionchange":if(cT)break;case"keydown":case"keyup":jm(ee,u,Z)}var Ie;if(ft)e:{switch(i){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else fo?xm(i,u)&&(Te="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Te="onCompositionStart");Te&&(os&&u.locale!=="ko"&&(fo||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&fo&&(Ie=La()):(dn=Z,ro="value"in dn?dn.value:dn.textContent,fo=!0)),we=kl($,Te),0<we.length&&(Te=new Ua(Te,i,null,u,Z),ee.push({event:Te,listeners:we}),Ie?Te.data=Ie:(Ie=Dm(u),Ie!==null&&(Te.data=Ie)))),(Ie=fn?ZI(i,u):eT(i,u))&&($=kl($,"onBeforeInput"),0<$.length&&(Z=new Ua("onBeforeInput","beforeinput",null,u,Z),ee.push({event:Z,listeners:$}),Z.data=Ie))}Ym(ee,o)})}function Ga(i,o,u){return{instance:i,listener:o,currentTarget:u}}function kl(i,o){for(var u=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=lt(i,u),y!=null&&h.unshift(Ga(i,y,p)),y=lt(i,o),y!=null&&h.push(Ga(i,y,p))),i=i.return}return h}function go(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Zm(i,o,u,h,p){for(var y=o._reactName,E=[];u!==null&&u!==h;){var R=u,x=R.alternate,$=R.stateNode;if(x!==null&&x===h)break;R.tag===5&&$!==null&&(R=$,p?(x=lt(u,y),x!=null&&E.unshift(Ga(u,x,R))):p||(x=lt(u,y),x!=null&&E.push(Ga(u,x,R)))),u=u.return}E.length!==0&&i.push({event:o,listeners:E})}var pT=/\r\n?/g,mT=/\u0000|\uFFFD/g;function eg(i){return(typeof i=="string"?i:""+i).replace(pT,`
`).replace(mT,"")}function xl(i,o,u){if(o=eg(o),eg(i)!==o&&u)throw Error(t(425))}function Dl(){}var ad=null,ud=null;function ld(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cd=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(i){return tg.resolve(null).then(i).catch(_T)}:cd;function _T(i){setTimeout(function(){throw i})}function hd(i,o){var u=o,h=0;do{var p=u.nextSibling;if(i.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(h===0){i.removeChild(p),Mn(o);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=p}while(u);Mn(o)}function si(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function ng(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var yo=Math.random().toString(36).slice(2),nr="__reactFiber$"+yo,Ha="__reactProps$"+yo,Ar="__reactContainer$"+yo,dd="__reactEvents$"+yo,vT="__reactListeners$"+yo,ET="__reactHandles$"+yo;function as(i){var o=i[nr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Ar]||u[nr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=ng(i);i!==null;){if(u=i[nr])return u;i=ng(i)}return o}i=u,u=i.parentNode}return null}function Wa(i){return i=i[nr]||i[Ar],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _o(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Nl(i){return i[Ha]||null}var fd=[],vo=-1;function oi(i){return{current:i}}function Ye(i){0>vo||(i.current=fd[vo],fd[vo]=null,vo--)}function We(i,o){vo++,fd[vo]=i.current,i.current=o}var ai={},Mt=oi(ai),en=oi(!1),us=ai;function Eo(i,o){var u=i.type.contextTypes;if(!u)return ai;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in u)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function tn(i){return i=i.childContextTypes,i!=null}function Vl(){Ye(en),Ye(Mt)}function rg(i,o,u){if(Mt.current!==ai)throw Error(t(168));We(Mt,o),We(en,u)}function ig(i,o,u){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Fe(i)||"Unknown",p));return ue({},u,h)}function bl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ai,us=Mt.current,We(Mt,i),We(en,en.current),!0}function sg(i,o,u){var h=i.stateNode;if(!h)throw Error(t(169));u?(i=ig(i,o,us),h.__reactInternalMemoizedMergedChildContext=i,Ye(en),Ye(Mt),We(Mt,i)):Ye(en),We(en,u)}var Pr=null,Ol=!1,pd=!1;function og(i){Pr===null?Pr=[i]:Pr.push(i)}function wT(i){Ol=!0,og(i)}function ui(){if(!pd&&Pr!==null){pd=!0;var i=0,o=Ne;try{var u=Pr;for(Ne=1;i<u.length;i++){var h=u[i];do h=h(!0);while(h!==null)}Pr=null,Ol=!1}catch(p){throw Pr!==null&&(Pr=Pr.slice(i+1)),Xs(Zi,ui),p}finally{Ne=o,pd=!1}}return null}var wo=[],Io=0,Ll=null,Ml=0,Sn=[],Rn=0,ls=null,Cr=1,kr="";function cs(i,o){wo[Io++]=Ml,wo[Io++]=Ll,Ll=i,Ml=o}function ag(i,o,u){Sn[Rn++]=Cr,Sn[Rn++]=kr,Sn[Rn++]=ls,ls=i;var h=Cr;i=kr;var p=32-Gt(h)-1;h&=~(1<<p),u+=1;var y=32-Gt(o)+p;if(30<y){var E=p-p%5;y=(h&(1<<E)-1).toString(32),h>>=E,p-=E,Cr=1<<32-Gt(o)+p|u<<p|h,kr=y+i}else Cr=1<<y|u<<p|h,kr=i}function md(i){i.return!==null&&(cs(i,1),ag(i,1,0))}function gd(i){for(;i===Ll;)Ll=wo[--Io],wo[Io]=null,Ml=wo[--Io],wo[Io]=null;for(;i===ls;)ls=Sn[--Rn],Sn[Rn]=null,kr=Sn[--Rn],Sn[Rn]=null,Cr=Sn[--Rn],Sn[Rn]=null}var pn=null,mn=null,Ze=!1,Bn=null;function ug(i,o){var u=kn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function lg(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,pn=i,mn=si(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,pn=i,mn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ls!==null?{id:Cr,overflow:kr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=kn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,pn=i,mn=null,!0):!1;default:return!1}}function yd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function _d(i){if(Ze){var o=mn;if(o){var u=o;if(!lg(i,o)){if(yd(i))throw Error(t(418));o=si(u.nextSibling);var h=pn;o&&lg(i,o)?ug(h,u):(i.flags=i.flags&-4097|2,Ze=!1,pn=i)}}else{if(yd(i))throw Error(t(418));i.flags=i.flags&-4097|2,Ze=!1,pn=i}}}function cg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;pn=i}function Fl(i){if(i!==pn)return!1;if(!Ze)return cg(i),Ze=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!ld(i.type,i.memoizedProps)),o&&(o=mn)){if(yd(i))throw hg(),Error(t(418));for(;o;)ug(i,o),o=si(o.nextSibling)}if(cg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){mn=si(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}mn=null}}else mn=pn?si(i.stateNode.nextSibling):null;return!0}function hg(){for(var i=mn;i;)i=si(i.nextSibling)}function To(){mn=pn=null,Ze=!1}function vd(i){Bn===null?Bn=[i]:Bn.push(i)}var IT=re.ReactCurrentBatchConfig;function Qa(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var R=p.refs;E===null?delete R[y]:R[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Ul(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function dg(i){var o=i._init;return o(i._payload)}function fg(i){function o(B,N){if(i){var j=B.deletions;j===null?(B.deletions=[N],B.flags|=16):j.push(N)}}function u(B,N){if(!i)return null;for(;N!==null;)o(B,N),N=N.sibling;return null}function h(B,N){for(B=new Map;N!==null;)N.key!==null?B.set(N.key,N):B.set(N.index,N),N=N.sibling;return B}function p(B,N){return B=gi(B,N),B.index=0,B.sibling=null,B}function y(B,N,j){return B.index=j,i?(j=B.alternate,j!==null?(j=j.index,j<N?(B.flags|=2,N):j):(B.flags|=2,N)):(B.flags|=1048576,N)}function E(B){return i&&B.alternate===null&&(B.flags|=2),B}function R(B,N,j,te){return N===null||N.tag!==6?(N=hf(j,B.mode,te),N.return=B,N):(N=p(N,j),N.return=B,N)}function x(B,N,j,te){var ge=j.type;return ge===k?Z(B,N,j.props.children,te,j.key):N!==null&&(N.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Lt&&dg(ge)===N.type)?(te=p(N,j.props),te.ref=Qa(B,N,j),te.return=B,te):(te=lc(j.type,j.key,j.props,null,B.mode,te),te.ref=Qa(B,N,j),te.return=B,te)}function $(B,N,j,te){return N===null||N.tag!==4||N.stateNode.containerInfo!==j.containerInfo||N.stateNode.implementation!==j.implementation?(N=df(j,B.mode,te),N.return=B,N):(N=p(N,j.children||[]),N.return=B,N)}function Z(B,N,j,te,ge){return N===null||N.tag!==7?(N=_s(j,B.mode,te,ge),N.return=B,N):(N=p(N,j),N.return=B,N)}function ee(B,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return N=hf(""+N,B.mode,j),N.return=B,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case me:return j=lc(N.type,N.key,N.props,null,B.mode,j),j.ref=Qa(B,null,N),j.return=B,j;case ce:return N=df(N,B.mode,j),N.return=B,N;case Lt:var te=N._init;return ee(B,te(N._payload),j)}if(yr(N)||Ee(N))return N=_s(N,B.mode,j,null),N.return=B,N;Ul(B,N)}return null}function Y(B,N,j,te){var ge=N!==null?N.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ge!==null?null:R(B,N,""+j,te);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case me:return j.key===ge?x(B,N,j,te):null;case ce:return j.key===ge?$(B,N,j,te):null;case Lt:return ge=j._init,Y(B,N,ge(j._payload),te)}if(yr(j)||Ee(j))return ge!==null?null:Z(B,N,j,te,null);Ul(B,j)}return null}function ae(B,N,j,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number")return B=B.get(j)||null,R(N,B,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case me:return B=B.get(te.key===null?j:te.key)||null,x(N,B,te,ge);case ce:return B=B.get(te.key===null?j:te.key)||null,$(N,B,te,ge);case Lt:var we=te._init;return ae(B,N,j,we(te._payload),ge)}if(yr(te)||Ee(te))return B=B.get(j)||null,Z(N,B,te,ge,null);Ul(N,te)}return null}function he(B,N,j,te){for(var ge=null,we=null,Ie=N,Te=N=0,Ct=null;Ie!==null&&Te<j.length;Te++){Ie.index>Te?(Ct=Ie,Ie=null):Ct=Ie.sibling;var Me=Y(B,Ie,j[Te],te);if(Me===null){Ie===null&&(Ie=Ct);break}i&&Ie&&Me.alternate===null&&o(B,Ie),N=y(Me,N,Te),we===null?ge=Me:we.sibling=Me,we=Me,Ie=Ct}if(Te===j.length)return u(B,Ie),Ze&&cs(B,Te),ge;if(Ie===null){for(;Te<j.length;Te++)Ie=ee(B,j[Te],te),Ie!==null&&(N=y(Ie,N,Te),we===null?ge=Ie:we.sibling=Ie,we=Ie);return Ze&&cs(B,Te),ge}for(Ie=h(B,Ie);Te<j.length;Te++)Ct=ae(Ie,B,Te,j[Te],te),Ct!==null&&(i&&Ct.alternate!==null&&Ie.delete(Ct.key===null?Te:Ct.key),N=y(Ct,N,Te),we===null?ge=Ct:we.sibling=Ct,we=Ct);return i&&Ie.forEach(function(yi){return o(B,yi)}),Ze&&cs(B,Te),ge}function fe(B,N,j,te){var ge=Ee(j);if(typeof ge!="function")throw Error(t(150));if(j=ge.call(j),j==null)throw Error(t(151));for(var we=ge=null,Ie=N,Te=N=0,Ct=null,Me=j.next();Ie!==null&&!Me.done;Te++,Me=j.next()){Ie.index>Te?(Ct=Ie,Ie=null):Ct=Ie.sibling;var yi=Y(B,Ie,Me.value,te);if(yi===null){Ie===null&&(Ie=Ct);break}i&&Ie&&yi.alternate===null&&o(B,Ie),N=y(yi,N,Te),we===null?ge=yi:we.sibling=yi,we=yi,Ie=Ct}if(Me.done)return u(B,Ie),Ze&&cs(B,Te),ge;if(Ie===null){for(;!Me.done;Te++,Me=j.next())Me=ee(B,Me.value,te),Me!==null&&(N=y(Me,N,Te),we===null?ge=Me:we.sibling=Me,we=Me);return Ze&&cs(B,Te),ge}for(Ie=h(B,Ie);!Me.done;Te++,Me=j.next())Me=ae(Ie,B,Te,Me.value,te),Me!==null&&(i&&Me.alternate!==null&&Ie.delete(Me.key===null?Te:Me.key),N=y(Me,N,Te),we===null?ge=Me:we.sibling=Me,we=Me);return i&&Ie.forEach(function(eS){return o(B,eS)}),Ze&&cs(B,Te),ge}function ct(B,N,j,te){if(typeof j=="object"&&j!==null&&j.type===k&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case me:e:{for(var ge=j.key,we=N;we!==null;){if(we.key===ge){if(ge=j.type,ge===k){if(we.tag===7){u(B,we.sibling),N=p(we,j.props.children),N.return=B,B=N;break e}}else if(we.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Lt&&dg(ge)===we.type){u(B,we.sibling),N=p(we,j.props),N.ref=Qa(B,we,j),N.return=B,B=N;break e}u(B,we);break}else o(B,we);we=we.sibling}j.type===k?(N=_s(j.props.children,B.mode,te,j.key),N.return=B,B=N):(te=lc(j.type,j.key,j.props,null,B.mode,te),te.ref=Qa(B,N,j),te.return=B,B=te)}return E(B);case ce:e:{for(we=j.key;N!==null;){if(N.key===we)if(N.tag===4&&N.stateNode.containerInfo===j.containerInfo&&N.stateNode.implementation===j.implementation){u(B,N.sibling),N=p(N,j.children||[]),N.return=B,B=N;break e}else{u(B,N);break}else o(B,N);N=N.sibling}N=df(j,B.mode,te),N.return=B,B=N}return E(B);case Lt:return we=j._init,ct(B,N,we(j._payload),te)}if(yr(j))return he(B,N,j,te);if(Ee(j))return fe(B,N,j,te);Ul(B,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,N!==null&&N.tag===6?(u(B,N.sibling),N=p(N,j),N.return=B,B=N):(u(B,N),N=hf(j,B.mode,te),N.return=B,B=N),E(B)):u(B,N)}return ct}var So=fg(!0),pg=fg(!1),Bl=oi(null),zl=null,Ro=null,Ed=null;function wd(){Ed=Ro=zl=null}function Id(i){var o=Bl.current;Ye(Bl),i._currentValue=o}function Td(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Ao(i,o){zl=i,Ed=Ro=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(nn=!0),i.firstContext=null)}function An(i){var o=i._currentValue;if(Ed!==i)if(i={context:i,memoizedValue:o,next:null},Ro===null){if(zl===null)throw Error(t(308));Ro=i,zl.dependencies={lanes:0,firstContext:i}}else Ro=Ro.next=i;return o}var hs=null;function Sd(i){hs===null?hs=[i]:hs.push(i)}function mg(i,o,u,h){var p=o.interleaved;return p===null?(u.next=u,Sd(o)):(u.next=p.next,p.next=u),o.interleaved=u,xr(i,h)}function xr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var li=!1;function Rd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Dr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ci(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,Le&2){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,xr(i,u)}return p=h.interleaved,p===null?(o.next=o,Sd(h)):(o.next=p.next,p.next=o),h.interleaved=o,xr(i,u)}function jl(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Zr(i,u)}}function yg(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?p=y=E:y=y.next=E,u=u.next}while(u!==null);y===null?p=y=o:y=y.next=o}else p=y=o;u={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function $l(i,o,u,h){var p=i.updateQueue;li=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var x=R,$=x.next;x.next=null,E===null?y=$:E.next=$,E=x;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==E&&(R===null?Z.firstBaseUpdate=$:R.next=$,Z.lastBaseUpdate=x))}if(y!==null){var ee=p.baseState;E=0,Z=$=x=null,R=y;do{var Y=R.lane,ae=R.eventTime;if((h&Y)===Y){Z!==null&&(Z=Z.next={eventTime:ae,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var he=i,fe=R;switch(Y=o,ae=u,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){ee=he.call(ae,ee,Y);break e}ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,Y=typeof he=="function"?he.call(ae,ee,Y):he,Y==null)break e;ee=ue({},ee,Y);break e;case 2:li=!0}}R.callback!==null&&R.lane!==0&&(i.flags|=64,Y=p.effects,Y===null?p.effects=[R]:Y.push(R))}else ae={eventTime:ae,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?($=Z=ae,x=ee):Z=Z.next=ae,E|=Y;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,p.lastBaseUpdate=Y,p.shared.pending=null}}while(!0);if(Z===null&&(x=ee),p.baseState=x,p.firstBaseUpdate=$,p.lastBaseUpdate=Z,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);ps|=E,i.lanes=E,i.memoizedState=ee}}function _g(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=u,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Ja={},rr=oi(Ja),Ya=oi(Ja),Xa=oi(Ja);function ds(i){if(i===Ja)throw Error(t(174));return i}function Ad(i,o){switch(We(Xa,o),We(Ya,i),We(rr,Ja),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:yt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=yt(o,i)}Ye(rr),We(rr,o)}function Po(){Ye(rr),Ye(Ya),Ye(Xa)}function vg(i){ds(Xa.current);var o=ds(rr.current),u=yt(o,i.type);o!==u&&(We(Ya,i),We(rr,u))}function Pd(i){Ya.current===i&&(Ye(rr),Ye(Ya))}var nt=oi(0);function ql(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Cd=[];function kd(){for(var i=0;i<Cd.length;i++)Cd[i]._workInProgressVersionPrimary=null;Cd.length=0}var Kl=re.ReactCurrentDispatcher,xd=re.ReactCurrentBatchConfig,fs=0,rt=null,vt=null,At=null,Gl=!1,Za=!1,eu=0,TT=0;function Ft(){throw Error(t(321))}function Dd(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Un(i[u],o[u]))return!1;return!0}function Nd(i,o,u,h,p,y){if(fs=y,rt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Kl.current=i===null||i.memoizedState===null?PT:CT,i=u(h,p),Za){y=0;do{if(Za=!1,eu=0,25<=y)throw Error(t(301));y+=1,At=vt=null,o.updateQueue=null,Kl.current=kT,i=u(h,p)}while(Za)}if(Kl.current=Ql,o=vt!==null&&vt.next!==null,fs=0,At=vt=rt=null,Gl=!1,o)throw Error(t(300));return i}function Vd(){var i=eu!==0;return eu=0,i}function ir(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?rt.memoizedState=At=i:At=At.next=i,At}function Pn(){if(vt===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=vt.next;var o=At===null?rt.memoizedState:At.next;if(o!==null)At=o,vt=i;else{if(i===null)throw Error(t(310));vt=i,i={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},At===null?rt.memoizedState=At=i:At=At.next=i}return At}function tu(i,o){return typeof o=="function"?o(i):o}function bd(i){var o=Pn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=vt,p=h.baseQueue,y=u.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}h.baseQueue=p=y,u.pending=null}if(p!==null){y=p.next,h=h.baseState;var R=E=null,x=null,$=y;do{var Z=$.lane;if((fs&Z)===Z)x!==null&&(x=x.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:i(h,$.action);else{var ee={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};x===null?(R=x=ee,E=h):x=x.next=ee,rt.lanes|=Z,ps|=Z}$=$.next}while($!==null&&$!==y);x===null?E=h:x.next=R,Un(h,o.memoizedState)||(nn=!0),o.memoizedState=h,o.baseState=E,o.baseQueue=x,u.lastRenderedState=h}if(i=u.interleaved,i!==null){p=i;do y=p.lane,rt.lanes|=y,ps|=y,p=p.next;while(p!==i)}else p===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Od(i){var o=Pn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=u.dispatch,p=u.pending,y=o.memoizedState;if(p!==null){u.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Un(y,o.memoizedState)||(nn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,h]}function Eg(){}function wg(i,o){var u=rt,h=Pn(),p=o(),y=!Un(h.memoizedState,p);if(y&&(h.memoizedState=p,nn=!0),h=h.queue,Ld(Sg.bind(null,u,h,i),[i]),h.getSnapshot!==o||y||At!==null&&At.memoizedState.tag&1){if(u.flags|=2048,nu(9,Tg.bind(null,u,h,p,o),void 0,null),Pt===null)throw Error(t(349));fs&30||Ig(u,o,p)}return p}function Ig(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=rt.updateQueue,o===null?(o={lastEffect:null,stores:null},rt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Tg(i,o,u,h){o.value=u,o.getSnapshot=h,Rg(o)&&Ag(i)}function Sg(i,o,u){return u(function(){Rg(o)&&Ag(i)})}function Rg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Un(i,u)}catch{return!0}}function Ag(i){var o=xr(i,1);o!==null&&qn(o,i,1,-1)}function Pg(i){var o=ir();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:i},o.queue=i,i=i.dispatch=AT.bind(null,rt,i),[o.memoizedState,i]}function nu(i,o,u,h){return i={tag:i,create:o,destroy:u,deps:h,next:null},o=rt.updateQueue,o===null?(o={lastEffect:null,stores:null},rt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i)),i}function Cg(){return Pn().memoizedState}function Hl(i,o,u,h){var p=ir();rt.flags|=i,p.memoizedState=nu(1|o,u,void 0,h===void 0?null:h)}function Wl(i,o,u,h){var p=Pn();h=h===void 0?null:h;var y=void 0;if(vt!==null){var E=vt.memoizedState;if(y=E.destroy,h!==null&&Dd(h,E.deps)){p.memoizedState=nu(o,u,y,h);return}}rt.flags|=i,p.memoizedState=nu(1|o,u,y,h)}function kg(i,o){return Hl(8390656,8,i,o)}function Ld(i,o){return Wl(2048,8,i,o)}function xg(i,o){return Wl(4,2,i,o)}function Dg(i,o){return Wl(4,4,i,o)}function Ng(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Vg(i,o,u){return u=u!=null?u.concat([i]):null,Wl(4,4,Ng.bind(null,o,i),u)}function Md(){}function bg(i,o){var u=Pn();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Dd(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function Og(i,o){var u=Pn();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Dd(o,h[1])?h[0]:(i=i(),u.memoizedState=[i,o],i)}function Lg(i,o,u){return fs&21?(Un(u,o)||(u=ns(),rt.lanes|=u,ps|=u,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,nn=!0),i.memoizedState=u)}function ST(i,o){var u=Ne;Ne=u!==0&&4>u?u:4,i(!0);var h=xd.transition;xd.transition={};try{i(!1),o()}finally{Ne=u,xd.transition=h}}function Mg(){return Pn().memoizedState}function RT(i,o,u){var h=pi(i);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},Fg(i))Ug(o,u);else if(u=mg(i,o,u,h),u!==null){var p=Qt();qn(u,i,h,p),Bg(u,o,h)}}function AT(i,o,u){var h=pi(i),p={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fg(i))Ug(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,R=y(E,u);if(p.hasEagerState=!0,p.eagerState=R,Un(R,E)){var x=o.interleaved;x===null?(p.next=p,Sd(o)):(p.next=x.next,x.next=p),o.interleaved=p;return}}catch{}finally{}u=mg(i,o,p,h),u!==null&&(p=Qt(),qn(u,i,h,p),Bg(u,o,h))}}function Fg(i){var o=i.alternate;return i===rt||o!==null&&o===rt}function Ug(i,o){Za=Gl=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Bg(i,o,u){if(u&4194240){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Zr(i,u)}}var Ql={readContext:An,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},PT={readContext:An,useCallback:function(i,o){return ir().memoizedState=[i,o===void 0?null:o],i},useContext:An,useEffect:kg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Hl(4194308,4,Ng.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Hl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Hl(4,2,i,o)},useMemo:function(i,o){var u=ir();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var h=ir();return o=u!==void 0?u(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=RT.bind(null,rt,i),[h.memoizedState,i]},useRef:function(i){var o=ir();return i={current:i},o.memoizedState=i},useState:Pg,useDebugValue:Md,useDeferredValue:function(i){return ir().memoizedState=i},useTransition:function(){var i=Pg(!1),o=i[0];return i=ST.bind(null,i[1]),ir().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var h=rt,p=ir();if(Ze){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Pt===null)throw Error(t(349));fs&30||Ig(h,o,u)}p.memoizedState=u;var y={value:u,getSnapshot:o};return p.queue=y,kg(Sg.bind(null,h,y,i),[i]),h.flags|=2048,nu(9,Tg.bind(null,h,y,u,o),void 0,null),u},useId:function(){var i=ir(),o=Pt.identifierPrefix;if(Ze){var u=kr,h=Cr;u=(h&~(1<<32-Gt(h)-1)).toString(32)+u,o=":"+o+"R"+u,u=eu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=TT++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},CT={readContext:An,useCallback:bg,useContext:An,useEffect:Ld,useImperativeHandle:Vg,useInsertionEffect:xg,useLayoutEffect:Dg,useMemo:Og,useReducer:bd,useRef:Cg,useState:function(){return bd(tu)},useDebugValue:Md,useDeferredValue:function(i){var o=Pn();return Lg(o,vt.memoizedState,i)},useTransition:function(){var i=bd(tu)[0],o=Pn().memoizedState;return[i,o]},useMutableSource:Eg,useSyncExternalStore:wg,useId:Mg,unstable_isNewReconciler:!1},kT={readContext:An,useCallback:bg,useContext:An,useEffect:Ld,useImperativeHandle:Vg,useInsertionEffect:xg,useLayoutEffect:Dg,useMemo:Og,useReducer:Od,useRef:Cg,useState:function(){return Od(tu)},useDebugValue:Md,useDeferredValue:function(i){var o=Pn();return vt===null?o.memoizedState=i:Lg(o,vt.memoizedState,i)},useTransition:function(){var i=Od(tu)[0],o=Pn().memoizedState;return[i,o]},useMutableSource:Eg,useSyncExternalStore:wg,useId:Mg,unstable_isNewReconciler:!1};function zn(i,o){if(i&&i.defaultProps){o=ue({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Fd(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:ue({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Jl={isMounted:function(i){return(i=i._reactInternals)?Nn(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var h=Qt(),p=pi(i),y=Dr(h,p);y.payload=o,u!=null&&(y.callback=u),o=ci(i,y,p),o!==null&&(qn(o,i,p,h),jl(o,i,p))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=Qt(),p=pi(i),y=Dr(h,p);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=ci(i,y,p),o!==null&&(qn(o,i,p,h),jl(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Qt(),h=pi(i),p=Dr(u,h);p.tag=2,o!=null&&(p.callback=o),o=ci(i,p,h),o!==null&&(qn(o,i,h,u),jl(o,i,h))}};function zg(i,o,u,h,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,E):o.prototype&&o.prototype.isPureReactComponent?!ja(u,h)||!ja(p,y):!0}function jg(i,o,u){var h=!1,p=ai,y=o.contextType;return typeof y=="object"&&y!==null?y=An(y):(p=tn(o)?us:Mt.current,h=o.contextTypes,y=(h=h!=null)?Eo(i,p):ai),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Jl,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function $g(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&Jl.enqueueReplaceState(o,o.state,null)}function Ud(i,o,u,h){var p=i.stateNode;p.props=u,p.state=i.memoizedState,p.refs={},Rd(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=An(y):(y=tn(o)?us:Mt.current,p.context=Eo(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Fd(i,o,y,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Jl.enqueueReplaceState(p,p.state,null),$l(i,u,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Co(i,o){try{var u="",h=o;do u+=Ce(h),h=h.return;while(h);var p=u}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function Bd(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function zd(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var xT=typeof WeakMap=="function"?WeakMap:Map;function qg(i,o,u){u=Dr(-1,u),u.tag=3,u.payload={element:null};var h=o.value;return u.callback=function(){rc||(rc=!0,nf=h),zd(i,o)},u}function Kg(i,o,u){u=Dr(-1,u),u.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;u.payload=function(){return h(p)},u.callback=function(){zd(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){zd(i,o),typeof h!="function"&&(di===null?di=new Set([this]):di.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function Gg(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new xT;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(u)||(p.add(u),i=qT.bind(null,i,o,u),o.then(i,i))}function Hg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Wg(i,o,u,h,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Dr(-1,1),o.tag=2,ci(u,o,1))),u.lanes|=1),i)}var DT=re.ReactCurrentOwner,nn=!1;function Wt(i,o,u,h){o.child=i===null?pg(o,null,u,h):So(o,i.child,u,h)}function Qg(i,o,u,h,p){u=u.render;var y=o.ref;return Ao(o,p),h=Nd(i,o,u,h,y,p),u=Vd(),i!==null&&!nn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Nr(i,o,p)):(Ze&&u&&md(o),o.flags|=1,Wt(i,o,h,p),o.child)}function Jg(i,o,u,h,p){if(i===null){var y=u.type;return typeof y=="function"&&!cf(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Yg(i,o,y,h,p)):(i=lc(u.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!(i.lanes&p)){var E=y.memoizedProps;if(u=u.compare,u=u!==null?u:ja,u(E,h)&&i.ref===o.ref)return Nr(i,o,p)}return o.flags|=1,i=gi(y,h),i.ref=o.ref,i.return=o,o.child=i}function Yg(i,o,u,h,p){if(i!==null){var y=i.memoizedProps;if(ja(y,h)&&i.ref===o.ref)if(nn=!1,o.pendingProps=h=y,(i.lanes&p)!==0)i.flags&131072&&(nn=!0);else return o.lanes=i.lanes,Nr(i,o,p)}return jd(i,o,u,h,p)}function Xg(i,o,u){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(xo,gn),gn|=u;else{if(!(u&1073741824))return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,We(xo,gn),gn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:u,We(xo,gn),gn|=h}else y!==null?(h=y.baseLanes|u,o.memoizedState=null):h=u,We(xo,gn),gn|=h;return Wt(i,o,p,u),o.child}function Zg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function jd(i,o,u,h,p){var y=tn(u)?us:Mt.current;return y=Eo(o,y),Ao(o,p),u=Nd(i,o,u,h,y,p),h=Vd(),i!==null&&!nn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Nr(i,o,p)):(Ze&&h&&md(o),o.flags|=1,Wt(i,o,u,p),o.child)}function ey(i,o,u,h,p){if(tn(u)){var y=!0;bl(o)}else y=!1;if(Ao(o,p),o.stateNode===null)Xl(i,o),jg(o,u,h),Ud(o,u,h,p),h=!0;else if(i===null){var E=o.stateNode,R=o.memoizedProps;E.props=R;var x=E.context,$=u.contextType;typeof $=="object"&&$!==null?$=An($):($=tn(u)?us:Mt.current,$=Eo(o,$));var Z=u.getDerivedStateFromProps,ee=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function";ee||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==h||x!==$)&&$g(o,E,h,$),li=!1;var Y=o.memoizedState;E.state=Y,$l(o,h,E,p),x=o.memoizedState,R!==h||Y!==x||en.current||li?(typeof Z=="function"&&(Fd(o,u,Z,h),x=o.memoizedState),(R=li||zg(o,u,R,h,Y,x,$))?(ee||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=x),E.props=h,E.state=x,E.context=$,h=R):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{E=o.stateNode,gg(i,o),R=o.memoizedProps,$=o.type===o.elementType?R:zn(o.type,R),E.props=$,ee=o.pendingProps,Y=E.context,x=u.contextType,typeof x=="object"&&x!==null?x=An(x):(x=tn(u)?us:Mt.current,x=Eo(o,x));var ae=u.getDerivedStateFromProps;(Z=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==ee||Y!==x)&&$g(o,E,h,x),li=!1,Y=o.memoizedState,E.state=Y,$l(o,h,E,p);var he=o.memoizedState;R!==ee||Y!==he||en.current||li?(typeof ae=="function"&&(Fd(o,u,ae,h),he=o.memoizedState),($=li||zg(o,u,$,h,Y,he,x)||!1)?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,he,x),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,he,x)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=he),E.props=h,E.state=he,E.context=x,h=$):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),h=!1)}return $d(i,o,u,h,y,p)}function $d(i,o,u,h,p,y){Zg(i,o);var E=(o.flags&128)!==0;if(!h&&!E)return p&&sg(o,u,!1),Nr(i,o,y);h=o.stateNode,DT.current=o;var R=E&&typeof u.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&E?(o.child=So(o,i.child,null,y),o.child=So(o,null,R,y)):Wt(i,o,R,y),o.memoizedState=h.state,p&&sg(o,u,!0),o.child}function ty(i){var o=i.stateNode;o.pendingContext?rg(i,o.pendingContext,o.pendingContext!==o.context):o.context&&rg(i,o.context,!1),Ad(i,o.containerInfo)}function ny(i,o,u,h,p){return To(),vd(p),o.flags|=256,Wt(i,o,u,h),o.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function Kd(i){return{baseLanes:i,cachePool:null,transitions:null}}function ry(i,o,u){var h=o.pendingProps,p=nt.current,y=!1,E=(o.flags&128)!==0,R;if((R=E)||(R=i!==null&&i.memoizedState===null?!1:(p&2)!==0),R?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),We(nt,p&1),i===null)return _d(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(E=h.children,i=h.fallback,y?(h=o.mode,y=o.child,E={mode:"hidden",children:E},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=E):y=cc(E,h,0,null),i=_s(i,h,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Kd(u),o.memoizedState=qd,i):Gd(o,E));if(p=i.memoizedState,p!==null&&(R=p.dehydrated,R!==null))return NT(i,o,E,h,R,p,u);if(y){y=h.fallback,E=o.mode,p=i.child,R=p.sibling;var x={mode:"hidden",children:h.children};return!(E&1)&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=x,o.deletions=null):(h=gi(p,x),h.subtreeFlags=p.subtreeFlags&14680064),R!==null?y=gi(R,y):(y=_s(y,E,u,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,E=i.child.memoizedState,E=E===null?Kd(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~u,o.memoizedState=qd,h}return y=i.child,i=y.sibling,h=gi(y,{mode:"visible",children:h.children}),!(o.mode&1)&&(h.lanes=u),h.return=o,h.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=h,o.memoizedState=null,h}function Gd(i,o){return o=cc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Yl(i,o,u,h){return h!==null&&vd(h),So(o,i.child,null,u),i=Gd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function NT(i,o,u,h,p,y,E){if(u)return o.flags&256?(o.flags&=-257,h=Bd(Error(t(422))),Yl(i,o,E,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=cc({mode:"visible",children:h.children},p,0,null),y=_s(y,p,E,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,o.mode&1&&So(o,i.child,null,E),o.child.memoizedState=Kd(E),o.memoizedState=qd,y);if(!(o.mode&1))return Yl(i,o,E,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var R=h.dgst;return h=R,y=Error(t(419)),h=Bd(y,h,void 0),Yl(i,o,E,h)}if(R=(E&i.childLanes)!==0,nn||R){if(h=Pt,h!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(h.suspendedLanes|E)?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,xr(i,p),qn(h,i,p,-1))}return lf(),h=Bd(Error(t(421))),Yl(i,o,E,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=KT.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,mn=si(p.nextSibling),pn=o,Ze=!0,Bn=null,i!==null&&(Sn[Rn++]=Cr,Sn[Rn++]=kr,Sn[Rn++]=ls,Cr=i.id,kr=i.overflow,ls=o),o=Gd(o,h.children),o.flags|=4096,o)}function iy(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Td(i.return,o,u)}function Hd(i,o,u,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=p)}function sy(i,o,u){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(Wt(i,o,h.children,u),h=nt.current,h&2)h=h&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&iy(i,u,o);else if(i.tag===19)iy(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(We(nt,h),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(u=o.child,p=null;u!==null;)i=u.alternate,i!==null&&ql(i)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),Hd(o,!1,p,u,y);break;case"backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&ql(i)===null){o.child=p;break}i=p.sibling,p.sibling=u,u=p,p=i}Hd(o,!0,u,null,y);break;case"together":Hd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Xl(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Nr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ps|=o.lanes,!(u&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=gi(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=gi(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function VT(i,o,u){switch(o.tag){case 3:ty(o),To();break;case 5:vg(o);break;case 1:tn(o.type)&&bl(o);break;case 4:Ad(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;We(Bl,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(We(nt,nt.current&1),o.flags|=128,null):u&o.child.childLanes?ry(i,o,u):(We(nt,nt.current&1),i=Nr(i,o,u),i!==null?i.sibling:null);We(nt,nt.current&1);break;case 19:if(h=(u&o.childLanes)!==0,i.flags&128){if(h)return sy(i,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),We(nt,nt.current),h)break;return null;case 22:case 23:return o.lanes=0,Xg(i,o,u)}return Nr(i,o,u)}var oy,Wd,ay,uy;oy=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Wd=function(){},ay=function(i,o,u,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,ds(rr.current);var y=null;switch(u){case"input":p=Ki(i,p),h=Ki(i,h),y=[];break;case"select":p=ue({},p,{value:void 0}),h=ue({},h,{value:void 0}),y=[];break;case"textarea":p=ya(i,p),h=ya(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Dl)}Ta(u,h);var E;u=null;for($ in p)if(!h.hasOwnProperty($)&&p.hasOwnProperty($)&&p[$]!=null)if($==="style"){var R=p[$];for(E in R)R.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(s.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in h){var x=h[$];if(R=p!=null?p[$]:void 0,h.hasOwnProperty($)&&x!==R&&(x!=null||R!=null))if($==="style")if(R){for(E in R)!R.hasOwnProperty(E)||x&&x.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in x)x.hasOwnProperty(E)&&R[E]!==x[E]&&(u||(u={}),u[E]=x[E])}else u||(y||(y=[]),y.push($,u)),u=x;else $==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,R=R?R.__html:void 0,x!=null&&R!==x&&(y=y||[]).push($,x)):$==="children"?typeof x!="string"&&typeof x!="number"||(y=y||[]).push($,""+x):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(s.hasOwnProperty($)?(x!=null&&$==="onScroll"&&Je("scroll",i),y||R===x||(y=[])):(y=y||[]).push($,x))}u&&(y=y||[]).push("style",u);var $=y;(o.updateQueue=$)&&(o.flags|=4)}},uy=function(i,o,u,h){u!==h&&(o.flags|=4)};function ru(i,o){if(!Ze)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ut(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var p=i.child;p!==null;)u|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)u|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function bT(i,o,u){var h=o.pendingProps;switch(gd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(o),null;case 1:return tn(o.type)&&Vl(),Ut(o),null;case 3:return h=o.stateNode,Po(),Ye(en),Ye(Mt),kd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Fl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Bn!==null&&(of(Bn),Bn=null))),Wd(i,o),Ut(o),null;case 5:Pd(o);var p=ds(Xa.current);if(u=o.type,i!==null&&o.stateNode!=null)ay(i,o,u,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return Ut(o),null}if(i=ds(rr.current),Fl(o)){h=o.stateNode,u=o.type;var y=o.memoizedProps;switch(h[nr]=o,h[Ha]=y,i=(o.mode&1)!==0,u){case"dialog":Je("cancel",h),Je("close",h);break;case"iframe":case"object":case"embed":Je("load",h);break;case"video":case"audio":for(p=0;p<qa.length;p++)Je(qa[p],h);break;case"source":Je("error",h);break;case"img":case"image":case"link":Je("error",h),Je("load",h);break;case"details":Je("toggle",h);break;case"input":zs(h,y),Je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Je("invalid",h);break;case"textarea":$s(h,y),Je("invalid",h)}Ta(u,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var R=y[E];E==="children"?typeof R=="string"?h.textContent!==R&&(y.suppressHydrationWarning!==!0&&xl(h.textContent,R,i),p=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&xl(h.textContent,R,i),p=["children",""+R]):s.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&Je("scroll",h)}switch(u){case"input":gr(h),nl(h,y,!0);break;case"textarea":gr(h),_a(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Dl)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=gt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=E.createElement(u,{is:h.is}):(i=E.createElement(u),u==="select"&&(E=i,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):i=E.createElementNS(i,u),i[nr]=o,i[Ha]=h,oy(i,o,!1,!1),o.stateNode=i;e:{switch(E=Sa(u,h),u){case"dialog":Je("cancel",i),Je("close",i),p=h;break;case"iframe":case"object":case"embed":Je("load",i),p=h;break;case"video":case"audio":for(p=0;p<qa.length;p++)Je(qa[p],i);p=h;break;case"source":Je("error",i),p=h;break;case"img":case"image":case"link":Je("error",i),Je("load",i),p=h;break;case"details":Je("toggle",i),p=h;break;case"input":zs(i,h),p=Ki(i,h),Je("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=ue({},h,{value:void 0}),Je("invalid",i);break;case"textarea":$s(i,h),p=ya(i,h),Je("invalid",i);break;default:p=h}Ta(u,p),R=p;for(y in R)if(R.hasOwnProperty(y)){var x=R[y];y==="style"?wa(i,x):y==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&va(i,x)):y==="children"?typeof x=="string"?(u!=="textarea"||x!=="")&&Wr(i,x):typeof x=="number"&&Wr(i,""+x):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?x!=null&&y==="onScroll"&&Je("scroll",i):x!=null&&J(i,y,x,E))}switch(u){case"input":gr(i),nl(i,h,!1);break;case"textarea":gr(i),_a(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Ue(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?_r(i,!!h.multiple,y,!1):h.defaultValue!=null&&_r(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Dl)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ut(o),null;case 6:if(i&&o.stateNode!=null)uy(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(u=ds(Xa.current),ds(rr.current),Fl(o)){if(h=o.stateNode,u=o.memoizedProps,h[nr]=o,(y=h.nodeValue!==u)&&(i=pn,i!==null))switch(i.tag){case 3:xl(h.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&xl(h.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[nr]=o,o.stateNode=h}return Ut(o),null;case 13:if(Ye(nt),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ze&&mn!==null&&o.mode&1&&!(o.flags&128))hg(),To(),o.flags|=98560,y=!1;else if(y=Fl(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[nr]=o}else To(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Ut(o),y=!1}else Bn!==null&&(of(Bn),Bn=null),y=!0;if(!y)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(i===null||nt.current&1?Et===0&&(Et=3):lf())),o.updateQueue!==null&&(o.flags|=4),Ut(o),null);case 4:return Po(),Wd(i,o),i===null&&Ka(o.stateNode.containerInfo),Ut(o),null;case 10:return Id(o.type._context),Ut(o),null;case 17:return tn(o.type)&&Vl(),Ut(o),null;case 19:if(Ye(nt),y=o.memoizedState,y===null)return Ut(o),null;if(h=(o.flags&128)!==0,E=y.rendering,E===null)if(h)ru(y,!1);else{if(Et!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(E=ql(i),E!==null){for(o.flags|=128,ru(y,!1),h=E.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=u,u=o.child;u!==null;)y=u,i=h,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return We(nt,nt.current&1|2),o.child}i=i.sibling}y.tail!==null&&He()>Do&&(o.flags|=128,h=!0,ru(y,!1),o.lanes=4194304)}else{if(!h)if(i=ql(E),i!==null){if(o.flags|=128,h=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),ru(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Ze)return Ut(o),null}else 2*He()-y.renderingStartTime>Do&&u!==1073741824&&(o.flags|=128,h=!0,ru(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(u=y.last,u!==null?u.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=He(),o.sibling=null,u=nt.current,We(nt,h?u&1|2:u&1),o):(Ut(o),null);case 22:case 23:return uf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?gn&1073741824&&(Ut(o),o.subtreeFlags&6&&(o.flags|=8192)):Ut(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function OT(i,o){switch(gd(o),o.tag){case 1:return tn(o.type)&&Vl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Po(),Ye(en),Ye(Mt),kd(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Pd(o),null;case 13:if(Ye(nt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));To()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ye(nt),null;case 4:return Po(),null;case 10:return Id(o.type._context),null;case 22:case 23:return uf(),null;case 24:return null;default:return null}}var Zl=!1,Bt=!1,LT=typeof WeakSet=="function"?WeakSet:Set,le=null;function ko(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){ot(i,o,h)}else u.current=null}function Qd(i,o,u){try{u()}catch(h){ot(i,o,h)}}var ly=!1;function MT(i,o){if(ad=ni,i=zm(),Zh(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var E=0,R=-1,x=-1,$=0,Z=0,ee=i,Y=null;t:for(;;){for(var ae;ee!==u||p!==0&&ee.nodeType!==3||(R=E+p),ee!==y||h!==0&&ee.nodeType!==3||(x=E+h),ee.nodeType===3&&(E+=ee.nodeValue.length),(ae=ee.firstChild)!==null;)Y=ee,ee=ae;for(;;){if(ee===i)break t;if(Y===u&&++$===p&&(R=E),Y===y&&++Z===h&&(x=E),(ae=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=ae}u=R===-1||x===-1?null:{start:R,end:x}}else u=null}u=u||{start:0,end:0}}else u=null;for(ud={focusedElem:i,selectionRange:u},ni=!1,le=o;le!==null;)if(o=le,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,le=i;else for(;le!==null;){o=le;try{var he=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,ct=he.memoizedState,B=o.stateNode,N=B.getSnapshotBeforeUpdate(o.elementType===o.type?fe:zn(o.type,fe),ct);B.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var j=o.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){ot(o,o.return,te)}if(i=o.sibling,i!==null){i.return=o.return,le=i;break}le=o.return}return he=ly,ly=!1,he}function iu(i,o,u){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Qd(o,u,y)}p=p.next}while(p!==h)}}function ec(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var h=u.create;u.destroy=h()}u=u.next}while(u!==o)}}function Jd(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function cy(i){var o=i.alternate;o!==null&&(i.alternate=null,cy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[nr],delete o[Ha],delete o[dd],delete o[vT],delete o[ET])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function hy(i){return i.tag===5||i.tag===3||i.tag===4}function dy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||hy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yd(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Dl));else if(h!==4&&(i=i.child,i!==null))for(Yd(i,o,u),i=i.sibling;i!==null;)Yd(i,o,u),i=i.sibling}function Xd(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(Xd(i,o,u),i=i.sibling;i!==null;)Xd(i,o,u),i=i.sibling}var Nt=null,jn=!1;function hi(i,o,u){for(u=u.child;u!==null;)fy(i,o,u),u=u.sibling}function fy(i,o,u){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(es,u)}catch{}switch(u.tag){case 5:Bt||ko(u,o);case 6:var h=Nt,p=jn;Nt=null,hi(i,o,u),Nt=h,jn=p,Nt!==null&&(jn?(i=Nt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Nt.removeChild(u.stateNode));break;case 18:Nt!==null&&(jn?(i=Nt,u=u.stateNode,i.nodeType===8?hd(i.parentNode,u):i.nodeType===1&&hd(i,u),Mn(i)):hd(Nt,u.stateNode));break;case 4:h=Nt,p=jn,Nt=u.stateNode.containerInfo,jn=!0,hi(i,o,u),Nt=h,jn=p;break;case 0:case 11:case 14:case 15:if(!Bt&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&(y&2||y&4)&&Qd(u,o,E),p=p.next}while(p!==h)}hi(i,o,u);break;case 1:if(!Bt&&(ko(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(R){ot(u,o,R)}hi(i,o,u);break;case 21:hi(i,o,u);break;case 22:u.mode&1?(Bt=(h=Bt)||u.memoizedState!==null,hi(i,o,u),Bt=h):hi(i,o,u);break;default:hi(i,o,u)}}function py(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new LT),o.forEach(function(h){var p=GT.bind(null,i,h);u.has(h)||(u.add(h),h.then(p,p))})}}function $n(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var p=u[h];try{var y=i,E=o,R=E;e:for(;R!==null;){switch(R.tag){case 5:Nt=R.stateNode,jn=!1;break e;case 3:Nt=R.stateNode.containerInfo,jn=!0;break e;case 4:Nt=R.stateNode.containerInfo,jn=!0;break e}R=R.return}if(Nt===null)throw Error(t(160));fy(y,E,p),Nt=null,jn=!1;var x=p.alternate;x!==null&&(x.return=null),p.return=null}catch($){ot(p,o,$)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)my(o,i),o=o.sibling}function my(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if($n(o,i),sr(i),h&4){try{iu(3,i,i.return),ec(3,i)}catch(fe){ot(i,i.return,fe)}try{iu(5,i,i.return)}catch(fe){ot(i,i.return,fe)}}break;case 1:$n(o,i),sr(i),h&512&&u!==null&&ko(u,u.return);break;case 5:if($n(o,i),sr(i),h&512&&u!==null&&ko(u,u.return),i.flags&32){var p=i.stateNode;try{Wr(p,"")}catch(fe){ot(i,i.return,fe)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=u!==null?u.memoizedProps:y,R=i.type,x=i.updateQueue;if(i.updateQueue=null,x!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&ma(p,y),Sa(R,E);var $=Sa(R,y);for(E=0;E<x.length;E+=2){var Z=x[E],ee=x[E+1];Z==="style"?wa(p,ee):Z==="dangerouslySetInnerHTML"?va(p,ee):Z==="children"?Wr(p,ee):J(p,Z,ee,$)}switch(R){case"input":ga(p,y);break;case"textarea":qs(p,y);break;case"select":var Y=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ae=y.value;ae!=null?_r(p,!!y.multiple,ae,!1):Y!==!!y.multiple&&(y.defaultValue!=null?_r(p,!!y.multiple,y.defaultValue,!0):_r(p,!!y.multiple,y.multiple?[]:"",!1))}p[Ha]=y}catch(fe){ot(i,i.return,fe)}}break;case 6:if($n(o,i),sr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(fe){ot(i,i.return,fe)}}break;case 3:if($n(o,i),sr(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Mn(o.containerInfo)}catch(fe){ot(i,i.return,fe)}break;case 4:$n(o,i),sr(i);break;case 13:$n(o,i),sr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(tf=He())),h&4&&py(i);break;case 22:if(Z=u!==null&&u.memoizedState!==null,i.mode&1?(Bt=($=Bt)||Z,$n(o,i),Bt=$):$n(o,i),sr(i),h&8192){if($=i.memoizedState!==null,(i.stateNode.isHidden=$)&&!Z&&i.mode&1)for(le=i,Z=i.child;Z!==null;){for(ee=le=Z;le!==null;){switch(Y=le,ae=Y.child,Y.tag){case 0:case 11:case 14:case 15:iu(4,Y,Y.return);break;case 1:ko(Y,Y.return);var he=Y.stateNode;if(typeof he.componentWillUnmount=="function"){h=Y,u=Y.return;try{o=h,he.props=o.memoizedProps,he.state=o.memoizedState,he.componentWillUnmount()}catch(fe){ot(h,u,fe)}}break;case 5:ko(Y,Y.return);break;case 22:if(Y.memoizedState!==null){_y(ee);continue}}ae!==null?(ae.return=Y,le=ae):_y(ee)}Z=Z.sibling}e:for(Z=null,ee=i;;){if(ee.tag===5){if(Z===null){Z=ee;try{p=ee.stateNode,$?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=ee.stateNode,x=ee.memoizedProps.style,E=x!=null&&x.hasOwnProperty("display")?x.display:null,R.style.display=Ea("display",E))}catch(fe){ot(i,i.return,fe)}}}else if(ee.tag===6){if(Z===null)try{ee.stateNode.nodeValue=$?"":ee.memoizedProps}catch(fe){ot(i,i.return,fe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===i)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===i)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===i)break e;Z===ee&&(Z=null),ee=ee.return}Z===ee&&(Z=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:$n(o,i),sr(i),h&4&&py(i);break;case 21:break;default:$n(o,i),sr(i)}}function sr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(hy(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Wr(p,""),h.flags&=-33);var y=dy(i);Xd(i,y,p);break;case 3:case 4:var E=h.stateNode.containerInfo,R=dy(i);Yd(i,R,E);break;default:throw Error(t(161))}}catch(x){ot(i,i.return,x)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function FT(i,o,u){le=i,gy(i)}function gy(i,o,u){for(var h=(i.mode&1)!==0;le!==null;){var p=le,y=p.child;if(p.tag===22&&h){var E=p.memoizedState!==null||Zl;if(!E){var R=p.alternate,x=R!==null&&R.memoizedState!==null||Bt;R=Zl;var $=Bt;if(Zl=E,(Bt=x)&&!$)for(le=p;le!==null;)E=le,x=E.child,E.tag===22&&E.memoizedState!==null?vy(p):x!==null?(x.return=E,le=x):vy(p);for(;y!==null;)le=y,gy(y),y=y.sibling;le=p,Zl=R,Bt=$}yy(i)}else p.subtreeFlags&8772&&y!==null?(y.return=p,le=y):yy(i)}}function yy(i){for(;le!==null;){var o=le;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Bt||ec(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!Bt)if(u===null)h.componentDidMount();else{var p=o.elementType===o.type?u.memoizedProps:zn(o.type,u.memoizedProps);h.componentDidUpdate(p,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&_g(o,y,h);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}_g(o,E,u)}break;case 5:var R=o.stateNode;if(u===null&&o.flags&4){u=R;var x=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&u.focus();break;case"img":x.src&&(u.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var $=o.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var ee=Z.dehydrated;ee!==null&&Mn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||o.flags&512&&Jd(o)}catch(Y){ot(o,o.return,Y)}}if(o===i){le=null;break}if(u=o.sibling,u!==null){u.return=o.return,le=u;break}le=o.return}}function _y(i){for(;le!==null;){var o=le;if(o===i){le=null;break}var u=o.sibling;if(u!==null){u.return=o.return,le=u;break}le=o.return}}function vy(i){for(;le!==null;){var o=le;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ec(4,o)}catch(x){ot(o,u,x)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(x){ot(o,p,x)}}var y=o.return;try{Jd(o)}catch(x){ot(o,y,x)}break;case 5:var E=o.return;try{Jd(o)}catch(x){ot(o,E,x)}}}catch(x){ot(o,o.return,x)}if(o===i){le=null;break}var R=o.sibling;if(R!==null){R.return=o.return,le=R;break}le=o.return}}var UT=Math.ceil,tc=re.ReactCurrentDispatcher,Zd=re.ReactCurrentOwner,Cn=re.ReactCurrentBatchConfig,Le=0,Pt=null,pt=null,Vt=0,gn=0,xo=oi(0),Et=0,su=null,ps=0,nc=0,ef=0,ou=null,rn=null,tf=0,Do=1/0,Vr=null,rc=!1,nf=null,di=null,ic=!1,fi=null,sc=0,au=0,rf=null,oc=-1,ac=0;function Qt(){return Le&6?He():oc!==-1?oc:oc=He()}function pi(i){return i.mode&1?Le&2&&Vt!==0?Vt&-Vt:IT.transition!==null?(ac===0&&(ac=ns()),ac):(i=Ne,i!==0||(i=window.event,i=i===void 0?16:Oa(i.type)),i):1}function qn(i,o,u,h){if(50<au)throw au=0,rf=null,Error(t(185));Xr(i,u,h),(!(Le&2)||i!==Pt)&&(i===Pt&&(!(Le&2)&&(nc|=u),Et===4&&mi(i,Vt)),sn(i,h),u===1&&Le===0&&!(o.mode&1)&&(Do=He()+500,Ol&&ui()))}function sn(i,o){var u=i.callbackNode;wr(i,o);var h=ts(i,i===Pt?Vt:0);if(h===0)u!==null&&xa(u),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(u!=null&&xa(u),o===1)i.tag===0?wT(wy.bind(null,i)):og(wy.bind(null,i)),yT(function(){!(Le&6)&&ui()}),u=null;else{switch(ei(h)){case 1:u=Zi;break;case 4:u=Qr;break;case 16:u=wn;break;case 536870912:u=al;break;default:u=wn}u=ky(u,Ey.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function Ey(i,o){if(oc=-1,ac=0,Le&6)throw Error(t(327));var u=i.callbackNode;if(No()&&i.callbackNode!==u)return null;var h=ts(i,i===Pt?Vt:0);if(h===0)return null;if(h&30||h&i.expiredLanes||o)o=uc(i,h);else{o=h;var p=Le;Le|=2;var y=Ty();(Pt!==i||Vt!==o)&&(Vr=null,Do=He()+500,gs(i,o));do try{jT();break}catch(R){Iy(i,R)}while(!0);wd(),tc.current=y,Le=p,pt!==null?o=0:(Pt=null,Vt=0,o=Et)}if(o!==0){if(o===2&&(p=hn(i),p!==0&&(h=p,o=sf(i,p))),o===1)throw u=su,gs(i,0),mi(i,h),sn(i,He()),u;if(o===6)mi(i,h);else{if(p=i.current.alternate,!(h&30)&&!BT(p)&&(o=uc(i,h),o===2&&(y=hn(i),y!==0&&(h=y,o=sf(i,y))),o===1))throw u=su,gs(i,0),mi(i,h),sn(i,He()),u;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:ys(i,rn,Vr);break;case 3:if(mi(i,h),(h&130023424)===h&&(o=tf+500-He(),10<o)){if(ts(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){Qt(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=cd(ys.bind(null,i,rn,Vr),o);break}ys(i,rn,Vr);break;case 4:if(mi(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var E=31-Gt(h);y=1<<E,E=o[E],E>p&&(p=E),h&=~y}if(h=p,h=He()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*UT(h/1960))-h,10<h){i.timeoutHandle=cd(ys.bind(null,i,rn,Vr),h);break}ys(i,rn,Vr);break;case 5:ys(i,rn,Vr);break;default:throw Error(t(329))}}}return sn(i,He()),i.callbackNode===u?Ey.bind(null,i):null}function sf(i,o){var u=ou;return i.current.memoizedState.isDehydrated&&(gs(i,o).flags|=256),i=uc(i,o),i!==2&&(o=rn,rn=u,o!==null&&of(o)),i}function of(i){rn===null?rn=i:rn.push.apply(rn,i)}function BT(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var p=u[h],y=p.getSnapshot;p=p.value;try{if(!Un(y(),p))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function mi(i,o){for(o&=~ef,o&=~nc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Gt(o),h=1<<u;i[u]=-1,o&=~h}}function wy(i){if(Le&6)throw Error(t(327));No();var o=ts(i,0);if(!(o&1))return sn(i,He()),null;var u=uc(i,o);if(i.tag!==0&&u===2){var h=hn(i);h!==0&&(o=h,u=sf(i,h))}if(u===1)throw u=su,gs(i,0),mi(i,o),sn(i,He()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,ys(i,rn,Vr),sn(i,He()),null}function af(i,o){var u=Le;Le|=1;try{return i(o)}finally{Le=u,Le===0&&(Do=He()+500,Ol&&ui())}}function ms(i){fi!==null&&fi.tag===0&&!(Le&6)&&No();var o=Le;Le|=1;var u=Cn.transition,h=Ne;try{if(Cn.transition=null,Ne=1,i)return i()}finally{Ne=h,Cn.transition=u,Le=o,!(Le&6)&&ui()}}function uf(){gn=xo.current,Ye(xo)}function gs(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,gT(u)),pt!==null)for(u=pt.return;u!==null;){var h=u;switch(gd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Vl();break;case 3:Po(),Ye(en),Ye(Mt),kd();break;case 5:Pd(h);break;case 4:Po();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:Id(h.type._context);break;case 22:case 23:uf()}u=u.return}if(Pt=i,pt=i=gi(i.current,null),Vt=gn=o,Et=0,su=null,ef=nc=ps=0,rn=ou=null,hs!==null){for(o=0;o<hs.length;o++)if(u=hs[o],h=u.interleaved,h!==null){u.interleaved=null;var p=h.next,y=u.pending;if(y!==null){var E=y.next;y.next=p,h.next=E}u.pending=h}hs=null}return i}function Iy(i,o){do{var u=pt;try{if(wd(),Kl.current=Ql,Gl){for(var h=rt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Gl=!1}if(fs=0,At=vt=rt=null,Za=!1,eu=0,Zd.current=null,u===null||u.return===null){Et=1,su=o,pt=null;break}e:{var y=i,E=u.return,R=u,x=o;if(o=Vt,R.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var $=x,Z=R,ee=Z.tag;if(!(Z.mode&1)&&(ee===0||ee===11||ee===15)){var Y=Z.alternate;Y?(Z.updateQueue=Y.updateQueue,Z.memoizedState=Y.memoizedState,Z.lanes=Y.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ae=Hg(E);if(ae!==null){ae.flags&=-257,Wg(ae,E,R,y,o),ae.mode&1&&Gg(y,$,o),o=ae,x=$;var he=o.updateQueue;if(he===null){var fe=new Set;fe.add(x),o.updateQueue=fe}else he.add(x);break e}else{if(!(o&1)){Gg(y,$,o),lf();break e}x=Error(t(426))}}else if(Ze&&R.mode&1){var ct=Hg(E);if(ct!==null){!(ct.flags&65536)&&(ct.flags|=256),Wg(ct,E,R,y,o),vd(Co(x,R));break e}}y=x=Co(x,R),Et!==4&&(Et=2),ou===null?ou=[y]:ou.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var B=qg(y,x,o);yg(y,B);break e;case 1:R=x;var N=y.type,j=y.stateNode;if(!(y.flags&128)&&(typeof N.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(di===null||!di.has(j)))){y.flags|=65536,o&=-o,y.lanes|=o;var te=Kg(y,R,o);yg(y,te);break e}}y=y.return}while(y!==null)}Ry(u)}catch(ge){o=ge,pt===u&&u!==null&&(pt=u=u.return);continue}break}while(!0)}function Ty(){var i=tc.current;return tc.current=Ql,i===null?Ql:i}function lf(){(Et===0||Et===3||Et===2)&&(Et=4),Pt===null||!(ps&268435455)&&!(nc&268435455)||mi(Pt,Vt)}function uc(i,o){var u=Le;Le|=2;var h=Ty();(Pt!==i||Vt!==o)&&(Vr=null,gs(i,o));do try{zT();break}catch(p){Iy(i,p)}while(!0);if(wd(),Le=u,tc.current=h,pt!==null)throw Error(t(261));return Pt=null,Vt=0,Et}function zT(){for(;pt!==null;)Sy(pt)}function jT(){for(;pt!==null&&!sl();)Sy(pt)}function Sy(i){var o=Cy(i.alternate,i,gn);i.memoizedProps=i.pendingProps,o===null?Ry(i):pt=o,Zd.current=null}function Ry(i){var o=i;do{var u=o.alternate;if(i=o.return,o.flags&32768){if(u=OT(u,o),u!==null){u.flags&=32767,pt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Et=6,pt=null;return}}else if(u=bT(u,o,gn),u!==null){pt=u;return}if(o=o.sibling,o!==null){pt=o;return}pt=o=i}while(o!==null);Et===0&&(Et=5)}function ys(i,o,u){var h=Ne,p=Cn.transition;try{Cn.transition=null,Ne=1,$T(i,o,u,h)}finally{Cn.transition=p,Ne=h}return null}function $T(i,o,u,h){do No();while(fi!==null);if(Le&6)throw Error(t(327));u=i.finishedWork;var p=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(Ke(i,y),i===Pt&&(pt=Pt=null,Vt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||ic||(ic=!0,ky(wn,function(){return No(),null})),y=(u.flags&15990)!==0,u.subtreeFlags&15990||y){y=Cn.transition,Cn.transition=null;var E=Ne;Ne=1;var R=Le;Le|=4,Zd.current=null,MT(i,u),my(u,i),lT(ud),ni=!!ad,ud=ad=null,i.current=u,FT(u),Kh(),Le=R,Ne=E,Cn.transition=y}else i.current=u;if(ic&&(ic=!1,fi=i,sc=p),y=i.pendingLanes,y===0&&(di=null),ul(u.stateNode),sn(i,He()),o!==null)for(h=i.onRecoverableError,u=0;u<o.length;u++)p=o[u],h(p.value,{componentStack:p.stack,digest:p.digest});if(rc)throw rc=!1,i=nf,nf=null,i;return sc&1&&i.tag!==0&&No(),y=i.pendingLanes,y&1?i===rf?au++:(au=0,rf=i):au=0,ui(),null}function No(){if(fi!==null){var i=ei(sc),o=Cn.transition,u=Ne;try{if(Cn.transition=null,Ne=16>i?16:i,fi===null)var h=!1;else{if(i=fi,fi=null,sc=0,Le&6)throw Error(t(331));var p=Le;for(Le|=4,le=i.current;le!==null;){var y=le,E=y.child;if(le.flags&16){var R=y.deletions;if(R!==null){for(var x=0;x<R.length;x++){var $=R[x];for(le=$;le!==null;){var Z=le;switch(Z.tag){case 0:case 11:case 15:iu(8,Z,y)}var ee=Z.child;if(ee!==null)ee.return=Z,le=ee;else for(;le!==null;){Z=le;var Y=Z.sibling,ae=Z.return;if(cy(Z),Z===$){le=null;break}if(Y!==null){Y.return=ae,le=Y;break}le=ae}}}var he=y.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var ct=fe.sibling;fe.sibling=null,fe=ct}while(fe!==null)}}le=y}}if(y.subtreeFlags&2064&&E!==null)E.return=y,le=E;else e:for(;le!==null;){if(y=le,y.flags&2048)switch(y.tag){case 0:case 11:case 15:iu(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,le=B;break e}le=y.return}}var N=i.current;for(le=N;le!==null;){E=le;var j=E.child;if(E.subtreeFlags&2064&&j!==null)j.return=E,le=j;else e:for(E=N;le!==null;){if(R=le,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:ec(9,R)}}catch(ge){ot(R,R.return,ge)}if(R===E){le=null;break e}var te=R.sibling;if(te!==null){te.return=R.return,le=te;break e}le=R.return}}if(Le=p,ui(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(es,i)}catch{}h=!0}return h}finally{Ne=u,Cn.transition=o}}return!1}function Ay(i,o,u){o=Co(u,o),o=qg(i,o,1),i=ci(i,o,1),o=Qt(),i!==null&&(Xr(i,1,o),sn(i,o))}function ot(i,o,u){if(i.tag===3)Ay(i,i,u);else for(;o!==null;){if(o.tag===3){Ay(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(di===null||!di.has(h))){i=Co(u,i),i=Kg(o,i,1),o=ci(o,i,1),i=Qt(),o!==null&&(Xr(o,1,i),sn(o,i));break}}o=o.return}}function qT(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),o=Qt(),i.pingedLanes|=i.suspendedLanes&u,Pt===i&&(Vt&u)===u&&(Et===4||Et===3&&(Vt&130023424)===Vt&&500>He()-tf?gs(i,0):ef|=u),sn(i,o)}function Py(i,o){o===0&&(i.mode&1?(o=eo,eo<<=1,!(eo&130023424)&&(eo=4194304)):o=1);var u=Qt();i=xr(i,o),i!==null&&(Xr(i,o,u),sn(i,u))}function KT(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),Py(i,u)}function GT(i,o){var u=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(u=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),Py(i,u)}var Cy;Cy=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||en.current)nn=!0;else{if(!(i.lanes&u)&&!(o.flags&128))return nn=!1,VT(i,o,u);nn=!!(i.flags&131072)}else nn=!1,Ze&&o.flags&1048576&&ag(o,Ml,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Xl(i,o),i=o.pendingProps;var p=Eo(o,Mt.current);Ao(o,u),p=Nd(null,o,h,i,p,u);var y=Vd();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,tn(h)?(y=!0,bl(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Rd(o),p.updater=Jl,o.stateNode=p,p._reactInternals=o,Ud(o,h,i,u),o=$d(null,o,h,!0,y,u)):(o.tag=0,Ze&&y&&md(o),Wt(null,o,p,u),o=o.child),o;case 16:h=o.elementType;e:{switch(Xl(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=WT(h),i=zn(h,i),p){case 0:o=jd(null,o,h,i,u);break e;case 1:o=ey(null,o,h,i,u);break e;case 11:o=Qg(null,o,h,i,u);break e;case 14:o=Jg(null,o,h,zn(h.type,i),u);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:zn(h,p),jd(i,o,h,p,u);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:zn(h,p),ey(i,o,h,p,u);case 3:e:{if(ty(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,gg(i,o),$l(o,h,null,u);var E=o.memoizedState;if(h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Co(Error(t(423)),o),o=ny(i,o,h,u,p);break e}else if(h!==p){p=Co(Error(t(424)),o),o=ny(i,o,h,u,p);break e}else for(mn=si(o.stateNode.containerInfo.firstChild),pn=o,Ze=!0,Bn=null,u=pg(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(To(),h===p){o=Nr(i,o,u);break e}Wt(i,o,h,u)}o=o.child}return o;case 5:return vg(o),i===null&&_d(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,ld(h,p)?E=null:y!==null&&ld(h,y)&&(o.flags|=32),Zg(i,o),Wt(i,o,E,u),o.child;case 6:return i===null&&_d(o),null;case 13:return ry(i,o,u);case 4:return Ad(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=So(o,null,h,u):Wt(i,o,h,u),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:zn(h,p),Qg(i,o,h,p,u);case 7:return Wt(i,o,o.pendingProps,u),o.child;case 8:return Wt(i,o,o.pendingProps.children,u),o.child;case 12:return Wt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,We(Bl,h._currentValue),h._currentValue=E,y!==null)if(Un(y.value,E)){if(y.children===p.children&&!en.current){o=Nr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var R=y.dependencies;if(R!==null){E=y.child;for(var x=R.firstContext;x!==null;){if(x.context===h){if(y.tag===1){x=Dr(-1,u&-u),x.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?x.next=x:(x.next=Z.next,Z.next=x),$.pending=x}}y.lanes|=u,x=y.alternate,x!==null&&(x.lanes|=u),Td(y.return,u,o),R.lanes|=u;break}x=x.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=u,R=E.alternate,R!==null&&(R.lanes|=u),Td(E,u,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}Wt(i,o,p.children,u),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,Ao(o,u),p=An(p),h=h(p),o.flags|=1,Wt(i,o,h,u),o.child;case 14:return h=o.type,p=zn(h,o.pendingProps),p=zn(h.type,p),Jg(i,o,h,p,u);case 15:return Yg(i,o,o.type,o.pendingProps,u);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:zn(h,p),Xl(i,o),o.tag=1,tn(h)?(i=!0,bl(o)):i=!1,Ao(o,u),jg(o,h,p),Ud(o,h,p,u),$d(null,o,h,!0,i,u);case 19:return sy(i,o,u);case 22:return Xg(i,o,u)}throw Error(t(156,o.tag))};function ky(i,o){return Xs(i,o)}function HT(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(i,o,u,h){return new HT(i,o,u,h)}function cf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function WT(i){if(typeof i=="function")return cf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===Ot)return 14}return 2}function gi(i,o){var u=i.alternate;return u===null?(u=kn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function lc(i,o,u,h,p,y){var E=2;if(h=i,typeof i=="function")cf(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case k:return _s(u.children,p,y,o);case S:E=8,p|=8;break;case A:return i=kn(12,u,o,p|2),i.elementType=A,i.lanes=y,i;case P:return i=kn(13,u,o,p),i.elementType=P,i.lanes=y,i;case ut:return i=kn(19,u,o,p),i.elementType=ut,i.lanes=y,i;case qe:return cc(u,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:E=10;break e;case O:E=9;break e;case M:E=11;break e;case Ot:E=14;break e;case Lt:E=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=kn(E,u,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function _s(i,o,u,h){return i=kn(7,i,h,o),i.lanes=u,i}function cc(i,o,u,h){return i=kn(22,i,h,o),i.elementType=qe,i.lanes=u,i.stateNode={isHidden:!1},i}function hf(i,o,u){return i=kn(6,i,null,o),i.lanes=u,i}function df(i,o,u){return o=kn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function QT(i,o,u,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yr(0),this.expirationTimes=Yr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function ff(i,o,u,h,p,y,E,R,x){return i=new QT(i,o,u,R,x),o===1?(o=1,y===!0&&(o|=8)):o=0,y=kn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rd(y),i}function JT(i,o,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:h==null?null:""+h,children:i,containerInfo:o,implementation:u}}function xy(i){if(!i)return ai;i=i._reactInternals;e:{if(Nn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(tn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(tn(u))return ig(i,u,o)}return o}function Dy(i,o,u,h,p,y,E,R,x){return i=ff(u,h,!0,i,p,y,E,R,x),i.context=xy(null),u=i.current,h=Qt(),p=pi(u),y=Dr(h,p),y.callback=o??null,ci(u,y,p),i.current.lanes=p,Xr(i,p,h),sn(i,h),i}function hc(i,o,u,h){var p=o.current,y=Qt(),E=pi(p);return u=xy(u),o.context===null?o.context=u:o.pendingContext=u,o=Dr(y,E),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=ci(p,o,E),i!==null&&(qn(i,p,E,y),jl(i,p,E)),E}function dc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Ny(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function pf(i,o){Ny(i,o),(i=i.alternate)&&Ny(i,o)}var Vy=typeof reportError=="function"?reportError:function(i){console.error(i)};function mf(i){this._internalRoot=i}fc.prototype.render=mf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));hc(i,o,null,null)},fc.prototype.unmount=mf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ms(function(){hc(null,i,null,null)}),o[Ar]=null}};function fc(i){this._internalRoot=i}fc.prototype.unstable_scheduleHydration=function(i){if(i){var o=fl();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Xn.length&&o!==0&&o<Xn[u].priority;u++);Xn.splice(u,0,i),u===0&&gl(i)}};function gf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function by(){}function YT(i,o,u,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var $=dc(E);y.call($)}}var E=Dy(o,h,i,0,null,!1,!1,"",by);return i._reactRootContainer=E,i[Ar]=E.current,Ka(i.nodeType===8?i.parentNode:i),ms(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var R=h;h=function(){var $=dc(x);R.call($)}}var x=ff(i,0,!1,null,null,!1,!1,"",by);return i._reactRootContainer=x,i[Ar]=x.current,Ka(i.nodeType===8?i.parentNode:i),ms(function(){hc(o,x,u,h)}),x}function mc(i,o,u,h,p){var y=u._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var R=p;p=function(){var x=dc(E);R.call(x)}}hc(o,E,i,p)}else E=YT(u,o,i,p,h);return dc(E)}hl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Jr(o.pendingLanes);u!==0&&(Zr(o,u|1),sn(o,He()),!(Le&6)&&(Do=He()+500,ui()))}break;case 13:ms(function(){var h=xr(i,1);if(h!==null){var p=Qt();qn(h,i,1,p)}}),pf(i,1)}},to=function(i){if(i.tag===13){var o=xr(i,134217728);if(o!==null){var u=Qt();qn(o,i,134217728,u)}pf(i,134217728)}},dl=function(i){if(i.tag===13){var o=pi(i),u=xr(i,o);if(u!==null){var h=Qt();qn(u,i,o,h)}pf(i,o)}},fl=function(){return Ne},pl=function(i,o){var u=Ne;try{return Ne=i,o()}finally{Ne=u}},Gs=function(i,o,u){switch(o){case"input":if(ga(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var p=Nl(h);if(!p)throw Error(t(90));Bs(h),ga(h,p)}}}break;case"textarea":qs(i,u);break;case"select":o=u.value,o!=null&&_r(i,!!u.multiple,o,!1)}},Qi=af,Aa=ms;var XT={usingClientEntryPoint:!1,Events:[Wa,_o,Nl,Jn,Ra,af]},uu={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZT={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ka(i),i===null?null:i.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{es=gc.inject(ZT),cn=gc}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XT,on.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gf(o))throw Error(t(200));return JT(i,o,null,u)},on.createRoot=function(i,o){if(!gf(i))throw Error(t(299));var u=!1,h="",p=Vy;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=ff(i,1,!1,null,null,u,!1,h,p),i[Ar]=o.current,Ka(i.nodeType===8?i.parentNode:i),new mf(o)},on.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=ka(o),i=i===null?null:i.stateNode,i},on.flushSync=function(i){return ms(i)},on.hydrate=function(i,o,u){if(!pc(o))throw Error(t(200));return mc(null,i,o,!0,u)},on.hydrateRoot=function(i,o,u){if(!gf(i))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,p=!1,y="",E=Vy;if(u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=Dy(o,null,i,1,u??null,p,!1,y,E),i[Ar]=o.current,Ka(i),h)for(i=0;i<h.length;i++)u=h[i],p=u._getVersion,p=p(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,p]:o.mutableSourceEagerHydrationData.push(u,p);return new fc(o)},on.render=function(i,o,u){if(!pc(o))throw Error(t(200));return mc(null,i,o,!1,u)},on.unmountComponentAtNode=function(i){if(!pc(i))throw Error(t(40));return i._reactRootContainer?(ms(function(){mc(null,null,i,!1,function(){i._reactRootContainer=null,i[Ar]=null})}),!0):!1},on.unstable_batchedUpdates=af,on.unstable_renderSubtreeIntoContainer=function(i,o,u,h){if(!pc(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return mc(i,o,u,!1,h)},on.version="18.3.1-next-f1338f8080-20240426",on}var $y;function aS(){if($y)return vf.exports;$y=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vf.exports=oS(),vf.exports}var qy;function uS(){if(qy)return yc;qy=1;var r=aS();return yc.createRoot=r.createRoot,yc.hydrateRoot=r.hydrateRoot,yc}var lS=uS();const lD=zv(lS);var cu={},Ky;function cS(){if(Ky)return cu;Ky=1,Object.defineProperty(cu,"__esModule",{value:!0}),cu.parse=l,cu.serialize=m;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function l(T,C){const V=new a,z=T.length;if(z<2)return V;const b=(C==null?void 0:C.decode)||v;let K=0;do{const H=T.indexOf("=",K);if(H===-1)break;const J=T.indexOf(";",K),re=J===-1?z:J;if(H>re){K=T.lastIndexOf(";",H-1)+1;continue}const me=d(T,K,H),ce=f(T,H,me),k=T.slice(me,ce);if(V[k]===void 0){let S=d(T,H+1,re),A=f(T,re,S);const D=b(T.slice(S,A));V[k]=D}K=re+1}while(K<z);return V}function d(T,C,V){do{const z=T.charCodeAt(C);if(z!==32&&z!==9)return C}while(++C<V);return V}function f(T,C,V){for(;C>V;){const z=T.charCodeAt(--C);if(z!==32&&z!==9)return C+1}return V}function m(T,C,V){const z=(V==null?void 0:V.encode)||encodeURIComponent;if(!r.test(T))throw new TypeError(`argument name is invalid: ${T}`);const b=z(C);if(!e.test(b))throw new TypeError(`argument val is invalid: ${C}`);let K=T+"="+b;if(!V)return K;if(V.maxAge!==void 0){if(!Number.isInteger(V.maxAge))throw new TypeError(`option maxAge is invalid: ${V.maxAge}`);K+="; Max-Age="+V.maxAge}if(V.domain){if(!t.test(V.domain))throw new TypeError(`option domain is invalid: ${V.domain}`);K+="; Domain="+V.domain}if(V.path){if(!n.test(V.path))throw new TypeError(`option path is invalid: ${V.path}`);K+="; Path="+V.path}if(V.expires){if(!w(V.expires)||!Number.isFinite(V.expires.valueOf()))throw new TypeError(`option expires is invalid: ${V.expires}`);K+="; Expires="+V.expires.toUTCString()}if(V.httpOnly&&(K+="; HttpOnly"),V.secure&&(K+="; Secure"),V.partitioned&&(K+="; Partitioned"),V.priority)switch(typeof V.priority=="string"?V.priority.toLowerCase():void 0){case"low":K+="; Priority=Low";break;case"medium":K+="; Priority=Medium";break;case"high":K+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${V.priority}`)}if(V.sameSite)switch(typeof V.sameSite=="string"?V.sameSite.toLowerCase():V.sameSite){case!0:case"strict":K+="; SameSite=Strict";break;case"lax":K+="; SameSite=Lax";break;case"none":K+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${V.sameSite}`)}return K}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return s.call(T)==="[object Date]"}return cu}cS();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gy="popstate";function hS(r={}){function e(n,s){let{pathname:a,search:l,hash:d}=n.location;return Ff("",{pathname:a,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:ku(s)}return fS(e,t,null,r)}function tt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Hn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dS(){return Math.random().toString(36).substring(2,10)}function Hy(r,e){return{usr:r.state,key:r.key,idx:e}}function Ff(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?oa(e):e,state:t,key:e&&e.key||n||dS()}}function ku({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function oa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function fS(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,d="POP",f=null,m=v();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function v(){return(l.state||{idx:null}).idx}function w(){d="POP";let b=v(),K=b==null?null:b-m;m=b,f&&f({action:d,location:z.location,delta:K})}function T(b,K){d="PUSH";let H=Ff(z.location,b,K);m=v()+1;let J=Hy(H,m),re=z.createHref(H);try{l.pushState(J,"",re)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;s.location.assign(re)}a&&f&&f({action:d,location:z.location,delta:1})}function C(b,K){d="REPLACE";let H=Ff(z.location,b,K);m=v();let J=Hy(H,m),re=z.createHref(H);l.replaceState(J,"",re),a&&f&&f({action:d,location:z.location,delta:0})}function V(b){let K=s.location.origin!=="null"?s.location.origin:s.location.href,H=typeof b=="string"?b:ku(b);return H=H.replace(/ $/,"%20"),tt(K,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,K)}let z={get action(){return d},get location(){return r(s,l)},listen(b){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Gy,w),f=b,()=>{s.removeEventListener(Gy,w),f=null}},createHref(b){return e(s,b)},createURL:V,encodeLocation(b){let K=V(b);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:T,replace:C,go(b){return l.go(b)}};return z}function jv(r,e,t="/"){return pS(r,e,t,!1)}function pS(r,e,t,n){let s=typeof e=="string"?oa(e):e,a=bi(s.pathname||"/",t);if(a==null)return null;let l=$v(r);mS(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let m=AS(a);d=SS(l[f],m,n)}return d}function $v(r,e=[],t=[],n=""){let s=(a,l,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(tt(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length));let m=Ur([n,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(tt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),$v(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:IS(m,a.index),routesMeta:v})};return r.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,l);else for(let f of qv(a.path))s(a,l,f)}),e}function qv(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=qv(n.join("/")),d=[];return d.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...l),d.map(f=>r.startsWith("/")&&f===""?"/":f)}function mS(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:TS(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var gS=/^:[\w-]+$/,yS=3,_S=2,vS=1,ES=10,wS=-2,Wy=r=>r==="*";function IS(r,e){let t=r.split("/"),n=t.length;return t.some(Wy)&&(n+=wS),e&&(n+=_S),t.filter(s=>!Wy(s)).reduce((s,a)=>s+(gS.test(a)?yS:a===""?vS:ES),n)}function TS(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function SS(r,e,t=!1){let{routesMeta:n}=r,s={},a="/",l=[];for(let d=0;d<n.length;++d){let f=n[d],m=d===n.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=qc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!w&&m&&t&&!n[n.length-1].route.index&&(w=qc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!w)return null;Object.assign(s,w.params),l.push({params:s,pathname:Ur([a,w.pathname]),pathnameBase:xS(Ur([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=Ur([a,w.pathnameBase]))}return l}function qc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=RS(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((m,{paramName:v,isOptional:w},T)=>{if(v==="*"){let V=d[T]||"";l=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const C=d[T];return w&&!C?m[v]=void 0:m[v]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:r}}function RS(r,e=!1,t=!0){Hn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function AS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function bi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function PS(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?oa(r):r;return{pathname:t?t.startsWith("/")?t:CS(t,e):e,search:DS(n),hash:NS(s)}}function CS(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function If(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kS(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yp(r){let e=kS(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function _p(r,e,t,n=!1){let s;typeof r=="string"?s=oa(r):(s={...r},tt(!s.pathname||!s.pathname.includes("?"),If("?","pathname","search",s)),tt(!s.pathname||!s.pathname.includes("#"),If("#","pathname","hash",s)),tt(!s.search||!s.search.includes("#"),If("#","search","hash",s)));let a=r===""||s.pathname==="",l=a?"/":s.pathname,d;if(l==null)d=t;else{let w=e.length-1;if(!n&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}d=w>=0?e[w]:"/"}let f=PS(s,d),m=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var Ur=r=>r.join("/").replace(/\/\/+/g,"/"),xS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),DS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,NS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function VS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Kv=["POST","PUT","PATCH","DELETE"];new Set(Kv);var bS=["GET",...Kv];new Set(bS);var aa=W.createContext(null);aa.displayName="DataRouter";var gh=W.createContext(null);gh.displayName="DataRouterState";var Gv=W.createContext({isTransitioning:!1});Gv.displayName="ViewTransition";var OS=W.createContext(new Map);OS.displayName="Fetchers";var LS=W.createContext(null);LS.displayName="Await";var Wn=W.createContext(null);Wn.displayName="Navigation";var $u=W.createContext(null);$u.displayName="Location";var fr=W.createContext({outlet:null,matches:[],isDataRoute:!1});fr.displayName="Route";var vp=W.createContext(null);vp.displayName="RouteError";function MS(r,{relative:e}={}){tt(ua(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=W.useContext(Wn),{hash:s,pathname:a,search:l}=qu(r,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:Ur([t,a])),n.createHref({pathname:d,search:l,hash:s})}function ua(){return W.useContext($u)!=null}function Ui(){return tt(ua(),"useLocation() may be used only in the context of a <Router> component."),W.useContext($u).location}var Hv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wv(r){W.useContext(Wn).static||W.useLayoutEffect(r)}function Qv(){let{isDataRoute:r}=W.useContext(fr);return r?JS():FS()}function FS(){tt(ua(),"useNavigate() may be used only in the context of a <Router> component.");let r=W.useContext(aa),{basename:e,navigator:t}=W.useContext(Wn),{matches:n}=W.useContext(fr),{pathname:s}=Ui(),a=JSON.stringify(yp(n)),l=W.useRef(!1);return Wv(()=>{l.current=!0}),W.useCallback((f,m={})=>{if(Hn(l.current,Hv),!l.current)return;if(typeof f=="number"){t.go(f);return}let v=_p(f,JSON.parse(a),s,m.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ur([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,s,r])}W.createContext(null);function qu(r,{relative:e}={}){let{matches:t}=W.useContext(fr),{pathname:n}=Ui(),s=JSON.stringify(yp(t));return W.useMemo(()=>_p(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function US(r,e){return Jv(r,e)}function Jv(r,e,t,n){var K;tt(ua(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=W.useContext(Wn),{matches:a}=W.useContext(fr),l=a[a.length-1],d=l?l.params:{},f=l?l.pathname:"/",m=l?l.pathnameBase:"/",v=l&&l.route;{let H=v&&v.path||"";Yv(f,!v||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let w=Ui(),T;if(e){let H=typeof e=="string"?oa(e):e;tt(m==="/"||((K=H.pathname)==null?void 0:K.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${H.pathname}" was given in the \`location\` prop.`),T=H}else T=w;let C=T.pathname||"/",V=C;if(m!=="/"){let H=m.replace(/^\//,"").split("/");V="/"+C.replace(/^\//,"").split("/").slice(H.length).join("/")}let z=jv(r,{pathname:V});Hn(v||z!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Hn(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=qS(z&&z.map(H=>Object.assign({},H,{params:Object.assign({},d,H.params),pathname:Ur([m,s.encodeLocation?s.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?m:Ur([m,s.encodeLocation?s.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),a,t,n);return e&&b?W.createElement($u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},b):b}function BS(){let r=QS(),e=VS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=W.createElement(W.Fragment,null,W.createElement("p",null,"💿 Hey developer 👋"),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:a},"ErrorBoundary")," or"," ",W.createElement("code",{style:a},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:s},t):null,l)}var zS=W.createElement(BS,null),jS=class extends W.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?W.createElement(fr.Provider,{value:this.props.routeContext},W.createElement(vp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $S({routeContext:r,match:e,children:t}){let n=W.useContext(aa);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(fr.Provider,{value:r},t)}function qS(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);tt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,d=-1;if(t)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:v,errors:w}=t,T=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||T){l=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,m,v)=>{let w,T=!1,C=null,V=null;t&&(w=a&&m.route.id?a[m.route.id]:void 0,C=m.route.errorElement||zS,l&&(d<0&&v===0?(Yv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,V=null):d===v&&(T=!0,V=m.route.hydrateFallbackElement||null)));let z=e.concat(s.slice(0,v+1)),b=()=>{let K;return w?K=C:T?K=V:m.route.Component?K=W.createElement(m.route.Component,null):m.route.element?K=m.route.element:K=f,W.createElement($S,{match:m,routeContext:{outlet:f,matches:z,isDataRoute:t!=null},children:K})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?W.createElement(jS,{location:t.location,revalidation:t.revalidation,component:C,error:w,children:b(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):b()},null)}function Ep(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KS(r){let e=W.useContext(aa);return tt(e,Ep(r)),e}function GS(r){let e=W.useContext(gh);return tt(e,Ep(r)),e}function HS(r){let e=W.useContext(fr);return tt(e,Ep(r)),e}function wp(r){let e=HS(r),t=e.matches[e.matches.length-1];return tt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function WS(){return wp("useRouteId")}function QS(){var n;let r=W.useContext(vp),e=GS("useRouteError"),t=wp("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function JS(){let{router:r}=KS("useNavigate"),e=wp("useNavigate"),t=W.useRef(!1);return Wv(()=>{t.current=!0}),W.useCallback(async(s,a={})=>{Hn(t.current,Hv),t.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...a}))},[r,e])}var Qy={};function Yv(r,e,t){!e&&!Qy[r]&&(Qy[r]=!0,Hn(!1,t))}W.memo(YS);function YS({routes:r,future:e,state:t}){return Jv(r,void 0,t,e)}function cD({to:r,replace:e,state:t,relative:n}){tt(ua(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=W.useContext(Wn);Hn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=W.useContext(fr),{pathname:l}=Ui(),d=Qv(),f=_p(r,yp(a),l,n==="path"),m=JSON.stringify(f);return W.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:n})},[d,m,n,e,t]),null}function XS(r){tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZS({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:a=!1}){tt(!ua(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),d=W.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=oa(t));let{pathname:f="/",search:m="",hash:v="",state:w=null,key:T="default"}=t,C=W.useMemo(()=>{let V=bi(f,l);return V==null?null:{location:{pathname:V,search:m,hash:v,state:w,key:T},navigationType:n}},[l,f,m,v,w,T,n]);return Hn(C!=null,`<Router basename="${l}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:W.createElement(Wn.Provider,{value:d},W.createElement($u.Provider,{children:e,value:C}))}function hD({children:r,location:e}){return US(Uf(r),e)}function Uf(r,e=[]){let t=[];return W.Children.forEach(r,(n,s)=>{if(!W.isValidElement(n))return;let a=[...e,s];if(n.type===W.Fragment){t.push.apply(t,Uf(n.props.children,a));return}tt(n.type===XS,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Uf(n.props.children,a)),t.push(l)}),t}var Cc="get",kc="application/x-www-form-urlencoded";function yh(r){return r!=null&&typeof r.tagName=="string"}function eR(r){return yh(r)&&r.tagName.toLowerCase()==="button"}function tR(r){return yh(r)&&r.tagName.toLowerCase()==="form"}function nR(r){return yh(r)&&r.tagName.toLowerCase()==="input"}function rR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function iR(r,e){return r.button===0&&(!e||e==="_self")&&!rR(r)}var _c=null;function sR(){if(_c===null)try{new FormData(document.createElement("form"),0),_c=!1}catch{_c=!0}return _c}var oR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tf(r){return r!=null&&!oR.has(r)?(Hn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kc}"`),null):r}function aR(r,e){let t,n,s,a,l;if(tR(r)){let d=r.getAttribute("action");n=d?bi(d,e):null,t=r.getAttribute("method")||Cc,s=Tf(r.getAttribute("enctype"))||kc,a=new FormData(r)}else if(eR(r)||nR(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=r.getAttribute("formaction")||d.getAttribute("action");if(n=f?bi(f,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||Cc,s=Tf(r.getAttribute("formenctype"))||Tf(d.getAttribute("enctype"))||kc,a=new FormData(d,r),!sR()){let{name:m,type:v,value:w}=r;if(v==="image"){let T=m?`${m}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else m&&a.append(m,w)}}else{if(yh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cc,n=null,s=kc,l=r}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:a,body:l}}function Ip(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function uR(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lR(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function cR(r,e,t){let n=await Promise.all(r.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await uR(a,t);return l.links?l.links():[]}return[]}));return pR(n.flat(1).filter(lR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Jy(r,e,t,n,s,a){let l=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>l(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var w;let v=n.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(l(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function hR(r,e){return dR(r.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function dR(r){return[...new Set(r)]}function fR(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function pR(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let a=JSON.stringify(fR(s));return t.has(a)||(t.add(a),n.push({key:a,link:s})),n},[])}function mR(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function gR(){let r=W.useContext(aa);return Ip(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function yR(){let r=W.useContext(gh);return Ip(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Tp=W.createContext(void 0);Tp.displayName="FrameworkContext";function Xv(){let r=W.useContext(Tp);return Ip(r,"You must render this element inside a <HydratedRouter> element"),r}function _R(r,e){let t=W.useContext(Tp),[n,s]=W.useState(!1),[a,l]=W.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:w}=e,T=W.useRef(null);W.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let z=K=>{K.forEach(H=>{l(H.isIntersecting)})},b=new IntersectionObserver(z,{threshold:.5});return T.current&&b.observe(T.current),()=>{b.disconnect()}}},[r]),W.useEffect(()=>{if(n){let z=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(z)}}},[n]);let C=()=>{s(!0)},V=()=>{s(!1),l(!1)};return t?r!=="intent"?[a,T,{}]:[a,T,{onFocus:hu(d,C),onBlur:hu(f,V),onMouseEnter:hu(m,C),onMouseLeave:hu(v,V),onTouchStart:hu(w,C)}]:[!1,T,{}]}function hu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function vR({page:r,...e}){let{router:t}=gR(),n=W.useMemo(()=>jv(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?W.createElement(wR,{page:r,matches:n,...e}):null}function ER(r){let{manifest:e,routeModules:t}=Xv(),[n,s]=W.useState([]);return W.useEffect(()=>{let a=!1;return cR(r,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[r,e,t]),n}function wR({page:r,matches:e,...t}){let n=Ui(),{manifest:s,routeModules:a}=Xv(),{loaderData:l,matches:d}=yR(),f=W.useMemo(()=>Jy(r,e,d,s,n,"data"),[r,e,d,s,n]),m=W.useMemo(()=>Jy(r,e,d,s,n,"assets"),[r,e,d,s,n]),v=W.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let C=new Set,V=!1;if(e.forEach(b=>{var H;let K=s.routes[b.route.id];!K||!K.hasLoader||(!f.some(J=>J.route.id===b.route.id)&&b.route.id in l&&((H=a[b.route.id])!=null&&H.shouldRevalidate)||K.hasClientLoader?V=!0:C.add(b.route.id))}),C.size===0)return[];let z=mR(r);return V&&C.size>0&&z.searchParams.set("_routes",e.filter(b=>C.has(b.route.id)).map(b=>b.route.id).join(",")),[z.pathname+z.search]},[l,n,s,f,e,r,a]),w=W.useMemo(()=>hR(m,s),[m,s]),T=ER(m);return W.createElement(W.Fragment,null,v.map(C=>W.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>W.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),T.map(({key:C,link:V})=>W.createElement("link",{key:C,...V})))}function IR(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Zv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zv&&(window.__reactRouterVersion="7.1.3")}catch{}function dD({basename:r,children:e,window:t}){let n=W.useRef();n.current==null&&(n.current=hS({window:t,v5Compat:!0}));let s=n.current,[a,l]=W.useState({action:s.action,location:s.location}),d=W.useCallback(f=>{W.startTransition(()=>l(f))},[l]);return W.useLayoutEffect(()=>s.listen(d),[s,d]),W.createElement(ZS,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:s})}var eE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tE=W.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:d,target:f,to:m,preventScrollReset:v,viewTransition:w,...T},C){let{basename:V}=W.useContext(Wn),z=typeof m=="string"&&eE.test(m),b,K=!1;if(typeof m=="string"&&z&&(b=m,Zv))try{let A=new URL(window.location.href),D=m.startsWith("//")?new URL(A.protocol+m):new URL(m),O=bi(D.pathname,V);D.origin===A.origin&&O!=null?m=O+D.search+D.hash:K=!0}catch{Hn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=MS(m,{relative:s}),[J,re,me]=_R(n,T),ce=AR(m,{replace:l,state:d,target:f,preventScrollReset:v,relative:s,viewTransition:w});function k(A){e&&e(A),A.defaultPrevented||ce(A)}let S=W.createElement("a",{...T,...me,href:b||H,onClick:K||a?e:k,ref:IR(C,re),target:f,"data-discover":!z&&t==="render"?"true":void 0});return J&&!z?W.createElement(W.Fragment,null,S,W.createElement(vR,{page:H})):S});tE.displayName="Link";var TR=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:d,children:f,...m},v){let w=qu(l,{relative:m.relative}),T=Ui(),C=W.useContext(gh),{navigator:V,basename:z}=W.useContext(Wn),b=C!=null&&DR(w)&&d===!0,K=V.encodeLocation?V.encodeLocation(w).pathname:w.pathname,H=T.pathname,J=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(H=H.toLowerCase(),J=J?J.toLowerCase():null,K=K.toLowerCase()),J&&z&&(J=bi(J,z)||J);const re=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let me=H===K||!s&&H.startsWith(K)&&H.charAt(re)==="/",ce=J!=null&&(J===K||!s&&J.startsWith(K)&&J.charAt(K.length)==="/"),k={isActive:me,isPending:ce,isTransitioning:b},S=me?e:void 0,A;typeof n=="function"?A=n(k):A=[n,me?"active":null,ce?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(k):a;return W.createElement(tE,{...m,"aria-current":S,className:A,ref:v,style:D,to:l,viewTransition:d},typeof f=="function"?f(k):f)});TR.displayName="NavLink";var SR=W.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:a,method:l=Cc,action:d,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:w,...T},C)=>{let V=kR(),z=xR(d,{relative:m}),b=l.toLowerCase()==="get"?"get":"post",K=typeof d=="string"&&eE.test(d),H=J=>{if(f&&f(J),J.defaultPrevented)return;J.preventDefault();let re=J.nativeEvent.submitter,me=(re==null?void 0:re.getAttribute("formmethod"))||l;V(re||J.currentTarget,{fetcherKey:e,method:me,navigate:t,replace:s,state:a,relative:m,preventScrollReset:v,viewTransition:w})};return W.createElement("form",{ref:C,method:b,action:z,onSubmit:n?f:H,...T,"data-discover":!K&&r==="render"?"true":void 0})});SR.displayName="Form";function RR(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nE(r){let e=W.useContext(aa);return tt(e,RR(r)),e}function AR(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:a,viewTransition:l}={}){let d=Qv(),f=Ui(),m=qu(r,{relative:a});return W.useCallback(v=>{if(iR(v,e)){v.preventDefault();let w=t!==void 0?t:ku(f)===ku(m);d(r,{replace:w,state:n,preventScrollReset:s,relative:a,viewTransition:l})}},[f,d,m,t,n,e,r,s,a,l])}var PR=0,CR=()=>`__${String(++PR)}__`;function kR(){let{router:r}=nE("useSubmit"),{basename:e}=W.useContext(Wn),t=WS();return W.useCallback(async(n,s={})=>{let{action:a,method:l,encType:d,formData:f,body:m}=aR(n,e);if(s.navigate===!1){let v=s.fetcherKey||CR();await r.fetch(v,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||l,formEncType:s.encType||d,flushSync:s.flushSync})}else await r.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||l,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,t])}function xR(r,{relative:e}={}){let{basename:t}=W.useContext(Wn),n=W.useContext(fr);tt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...qu(r||".",{relative:e})},l=Ui();if(r==null){a.search=l.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let v=d.toString();a.search=v?`?${v}`:""}}return(!r||r===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ur([t,a.pathname])),ku(a)}function DR(r,e={}){let t=W.useContext(Gv);tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=nE("useViewTransitionState"),s=qu(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=bi(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=bi(t.nextLocation.pathname,n)||t.nextLocation.pathname;return qc(s.pathname,l)!=null||qc(s.pathname,a)!=null}new TextEncoder;var Yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},NR=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=r[t++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=r[t++],l=r[t++],d=r[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],l=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const a=r[s],l=s+1<r.length,d=l?r[s+1]:0,f=s+2<r.length,m=f?r[s+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,C=m&63;f||(C=64,l||(T=64)),n.push(t[v],t[w],t[T],t[C])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(rE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):NR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const a=t[r.charAt(s++)],d=s<r.length?t[r.charAt(s)]:0;++s;const m=s<r.length?t[r.charAt(s)]:64;++s;const w=s<r.length?t[r.charAt(s)]:64;if(++s,a==null||d==null||m==null||w==null)throw new VR;const T=a<<2|d>>4;if(n.push(T),m!==64){const C=d<<4&240|m>>2;if(n.push(C),w!==64){const V=m<<6&192|w;n.push(V)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class VR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bR=function(r){const e=rE(r);return iE.encodeByteArray(e,!0)},Kc=function(r){return bR(r).replace(/\./g,"")},sE=function(r){try{return iE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=()=>OR().__FIREBASE_DEFAULTS__,MR=()=>{if(typeof process>"u"||typeof Yy>"u")return;const r=Yy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},FR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&sE(r[1]);return e&&JSON.parse(e)},_h=()=>{try{return LR()||MR()||FR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},oE=r=>{var e,t;return(t=(e=_h())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},UR=r=>{const e=oE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},aE=()=>{var r;return(r=_h())===null||r===void 0?void 0:r.config},uE=r=>{var e;return(e=_h())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Kc(JSON.stringify(t)),Kc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function $R(){var r;const e=(r=_h())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function GR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HR(){const r=wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function lE(){return!$R()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cE(){try{return typeof indexedDB=="object"}catch{return!1}}function WR(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="FirebaseError";class pr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=QR,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?JR(a,n):"Error",d=`${this.serviceName}: ${l} (${s}).`;return new pr(s,d,n)}}function JR(r,e){return r.replace(YR,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const YR=/\{\$([^}]+)}/g;function XR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function xu(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const a=r[s],l=e[s];if(Xy(a)&&Xy(l)){if(!xu(a,l))return!1}else if(a!==l)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function Xy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ZR(r,e){const t=new eA(r,e);return t.subscribe.bind(t)}class eA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");tA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Sf),s.error===void 0&&(s.error=Sf),s.complete===void 0&&(s.complete=Sf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tA(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r){return r&&r._delegate?r._delegate:r}class Oi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new BR;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iA(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);n===d&&l.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rA(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rA(r){return r===Es?void 0:r}function iA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(xe||(xe={}));const oA={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},aA=xe.INFO,uA={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},lA=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=uA[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=aA,this._logHandler=lA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const cA=(r,e)=>e.some(t=>r instanceof t);let Zy,e_;function hA(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dA(){return e_||(e_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,Bf=new WeakMap,dE=new WeakMap,Rf=new WeakMap,Rp=new WeakMap;function fA(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",a),r.removeEventListener("error",l)},a=()=>{t(Pi(r.result)),s()},l=()=>{n(r.error),s()};r.addEventListener("success",a),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&hE.set(t,r)}).catch(()=>{}),Rp.set(e,r),e}function pA(r){if(Bf.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",l),r.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",a),r.addEventListener("error",l),r.addEventListener("abort",l)});Bf.set(r,e)}let zf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||dE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mA(r){zf=r(zf)}function gA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Af(this),e,...t);return dE.set(n,e.sort?e.sort():[e]),Pi(n)}:dA().includes(r)?function(...e){return r.apply(Af(this),e),Pi(hE.get(this))}:function(...e){return Pi(r.apply(Af(this),e))}}function yA(r){return typeof r=="function"?gA(r):(r instanceof IDBTransaction&&pA(r),cA(r,hA())?new Proxy(r,zf):r)}function Pi(r){if(r instanceof IDBRequest)return fA(r);if(Rf.has(r))return Rf.get(r);const e=yA(r);return e!==r&&(Rf.set(r,e),Rp.set(e,r)),e}const Af=r=>Rp.get(r);function _A(r,e,{blocked:t,upgrade:n,blocking:s,terminated:a}={}){const l=indexedDB.open(r,e),d=Pi(l);return n&&l.addEventListener("upgradeneeded",f=>{n(Pi(l.result),f.oldVersion,f.newVersion,Pi(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const vA=["get","getKey","getAll","getAllKeys","count"],EA=["put","add","delete","clear"],Pf=new Map;function t_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pf.get(e))return Pf.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=EA.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||vA.includes(t)))return;const a=async function(l,...d){const f=this.transaction(l,s?"readwrite":"readonly");let m=f.store;return n&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return Pf.set(e,a),a}mA(r=>({...r,get:(e,t,n)=>t_(e,t)||r.get(e,t,n),has:(e,t)=>!!t_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IA(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function IA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jf="@firebase/app",n_="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Sp("@firebase/app"),TA="@firebase/app-compat",SA="@firebase/analytics-compat",RA="@firebase/analytics",AA="@firebase/app-check-compat",PA="@firebase/app-check",CA="@firebase/auth",kA="@firebase/auth-compat",xA="@firebase/database",DA="@firebase/data-connect",NA="@firebase/database-compat",VA="@firebase/functions",bA="@firebase/functions-compat",OA="@firebase/installations",LA="@firebase/installations-compat",MA="@firebase/messaging",FA="@firebase/messaging-compat",UA="@firebase/performance",BA="@firebase/performance-compat",zA="@firebase/remote-config",jA="@firebase/remote-config-compat",$A="@firebase/storage",qA="@firebase/storage-compat",KA="@firebase/firestore",GA="@firebase/vertexai",HA="@firebase/firestore-compat",WA="firebase",QA="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]",JA={[jf]:"fire-core",[TA]:"fire-core-compat",[RA]:"fire-analytics",[SA]:"fire-analytics-compat",[PA]:"fire-app-check",[AA]:"fire-app-check-compat",[CA]:"fire-auth",[kA]:"fire-auth-compat",[xA]:"fire-rtdb",[DA]:"fire-data-connect",[NA]:"fire-rtdb-compat",[VA]:"fire-fn",[bA]:"fire-fn-compat",[OA]:"fire-iid",[LA]:"fire-iid-compat",[MA]:"fire-fcm",[FA]:"fire-fcm-compat",[UA]:"fire-perf",[BA]:"fire-perf-compat",[zA]:"fire-rc",[jA]:"fire-rc-compat",[$A]:"fire-gcs",[qA]:"fire-gcs-compat",[KA]:"fire-fst",[HA]:"fire-fst-compat",[GA]:"fire-vertex","fire-js":"fire-js",[WA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,YA=new Map,qf=new Map;function r_(r,e){try{r.container.addComponent(e)}catch(t){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ks(r){const e=r.name;if(qf.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;qf.set(e,r);for(const t of Gc.values())r_(t,r);for(const t of YA.values())r_(t,r);return!0}function vh(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function br(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new Ku("app","Firebase",XA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=QA;function fE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:$f,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Ci.create("bad-app-name",{appName:String(s)});if(t||(t=aE()),!t)throw Ci.create("no-options");const a=Gc.get(s);if(a){if(xu(t,a.options)&&xu(n,a.config))return a;throw Ci.create("duplicate-app",{appName:s})}const l=new sA(s);for(const f of qf.values())l.addComponent(f);const d=new ZA(t,n,l);return Gc.set(s,d),d}function pE(r=$f){const e=Gc.get(r);if(!e&&r===$f&&aE())return fE();if(!e)throw Ci.create("no-app",{appName:r});return e}function Br(r,e,t){var n;let s=(n=JA[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(d.join(" "));return}ks(new Oi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="firebase-heartbeat-database",t0=1,Du="firebase-heartbeat-store";let Cf=null;function mE(){return Cf||(Cf=_A(e0,t0,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Du)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ci.create("idb-open",{originalErrorMessage:r.message})})),Cf}async function n0(r){try{const t=(await mE()).transaction(Du),n=await t.objectStore(Du).get(gE(r));return await t.done,n}catch(e){if(e instanceof pr)zr.warn(e.message);else{const t=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(t.message)}}}async function i_(r,e){try{const n=(await mE()).transaction(Du,"readwrite");await n.objectStore(Du).put(e,gE(r)),await n.done}catch(t){if(t instanceof pr)zr.warn(t.message);else{const n=Ci.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});zr.warn(n.message)}}}function gE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=1024,i0=30*24*60*60*1e3;class s0{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a0(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=s_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=i0}),this._storage.overwrite(this._heartbeatsCache))}catch(n){zr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=s_(),{heartbeatsToSend:n,unsentEntries:s}=o0(this._heartbeatsCache.heartbeats),a=Kc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zr.warn(t),""}}}function s_(){return new Date().toISOString().substring(0,10)}function o0(r,e=r0){const t=[];let n=r.slice();for(const s of r){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),o_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),o_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class a0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cE()?WR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await n0(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function o_(r){return Kc(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(r){ks(new Oi("platform-logger",e=>new wA(e),"PRIVATE")),ks(new Oi("heartbeat",e=>new s0(e),"PRIVATE")),Br(jf,n_,r),Br(jf,n_,"esm2017"),Br("fire-js","")}u0("");function Ap(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function yE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l0=yE,_E=new Ku("auth","Firebase",yE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Sp("@firebase/auth");function c0(r,...e){Hc.logLevel<=xe.WARN&&Hc.warn(`Auth (${Fs}): ${r}`,...e)}function xc(r,...e){Hc.logLevel<=xe.ERROR&&Hc.error(`Auth (${Fs}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(r,...e){throw Cp(r,...e)}function Gn(r,...e){return Cp(r,...e)}function Pp(r,e,t){const n=Object.assign(Object.assign({},l0()),{[e]:t});return new Ku("auth","Firebase",n).create(e,{appName:r.name})}function Ps(r){return Pp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h0(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&cr(r,"argument-error"),Pp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cp(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return _E.create(r,...e)}function Se(r,e,...t){if(!r)throw Cp(e,...t)}function Or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw xc(e),new Error(e)}function jr(r,e){r||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function d0(){return a_()==="http:"||a_()==="https:"}function a_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d0()||KR()||"connection"in navigator)?navigator.onLine:!0}function p0(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=jR()||GR()}get(){return f0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(r,e){jr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Hu(3e4,6e4);function xp(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function la(r,e,t,n,s={}){return EE(r,s,async()=>{let a={},l={};n&&(e==="GET"?l=n:a={body:JSON.stringify(n)});const d=Gu(Object.assign({key:r.config.apiKey},l)).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const m=Object.assign({method:e,headers:f},a);return qR()||(m.referrerPolicy="no-referrer"),vE.fetch()(wE(r,r.config.apiHost,t,d),m)})}async function EE(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},m0),e);try{const s=new _0(r),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw vc(r,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw vc(r,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw vc(r,"email-already-in-use",l);if(f==="USER_DISABLED")throw vc(r,"user-disabled",l);const v=n[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Pp(r,v,m);cr(r,v)}}catch(s){if(s instanceof pr)throw s;cr(r,"network-request-failed",{message:String(s)})}}async function y0(r,e,t,n,s={}){const a=await la(r,e,t,n,s);return"mfaPendingCredential"in a&&cr(r,"multi-factor-auth-required",{_serverResponse:a}),a}function wE(r,e,t,n){const s=`${e}${t}?${n}`;return r.config.emulator?kp(r.config,s):`${r.config.apiScheme}://${s}`}class _0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Gn(this.auth,"network-request-failed")),g0.get())})}}function vc(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Gn(r,e,n);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v0(r,e){return la(r,"POST","/v1/accounts:delete",e)}async function IE(r,e){return la(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E0(r,e=!1){const t=It(r),n=await t.getIdToken(e),s=Dp(n);Se(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:Iu(kf(s.auth_time)),issuedAtTime:Iu(kf(s.iat)),expirationTime:Iu(kf(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function kf(r){return Number(r)*1e3}function Dp(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return xc("JWT malformed, contained fewer than 3 sections"),null;try{const s=sE(t);return s?JSON.parse(s):(xc("Failed to decode base64 JWT payload"),null)}catch(s){return xc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function u_(r){const e=Dp(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof pr&&w0(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function w0({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(r){var e;const t=r.auth,n=await r.getIdToken(),s=await Nu(r,IE(t,{idToken:n}));Se(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?TE(a.providerUserInfo):[],d=S0(r.providerData,l),f=r.isAnonymous,m=!(r.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Gf(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(r,w)}async function T0(r){const e=It(r);await Wc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S0(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function TE(r){return r.map(e=>{var{providerId:t}=e,n=Ap(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(r,e){const t=await EE(r,{},async()=>{const n=Gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=r.config,l=wE(r,s,"/v1/token",`key=${a}`),d=await r._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",vE.fetch()(l,{method:"POST",headers:d,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function A0(r,e){return la(r,"POST","/v2/accounts:revokeToken",xp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=u_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:a}=await R0(e,t);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:a}=t,l=new jo;return n&&(Se(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),s&&(Se(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Se(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,a=Ap(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Nu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return E0(this,e)}reload(){return T0(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Wc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(Ps(this.auth));const e=await this.getIdToken();return await Nu(this,v0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,a,l,d,f,m,v;const w=(n=t.displayName)!==null&&n!==void 0?n:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,C=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,V=(l=t.photoURL)!==null&&l!==void 0?l:void 0,z=(d=t.tenantId)!==null&&d!==void 0?d:void 0,b=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,K=(m=t.createdAt)!==null&&m!==void 0?m:void 0,H=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:J,emailVerified:re,isAnonymous:me,providerData:ce,stsTokenManager:k}=t;Se(J&&k,e,"internal-error");const S=jo.fromJSON(this.name,k);Se(typeof J=="string",e,"internal-error"),_i(w,e.name),_i(T,e.name),Se(typeof re=="boolean",e,"internal-error"),Se(typeof me=="boolean",e,"internal-error"),_i(C,e.name),_i(V,e.name),_i(z,e.name),_i(b,e.name),_i(K,e.name),_i(H,e.name);const A=new Lr({uid:J,auth:e,email:T,emailVerified:re,displayName:w,isAnonymous:me,photoURL:V,phoneNumber:C,tenantId:z,stsTokenManager:S,createdAt:K,lastLoginAt:H});return ce&&Array.isArray(ce)&&(A.providerData=ce.map(D=>Object.assign({},D))),b&&(A._redirectEventId=b),A}static async _fromIdTokenResponse(e,t,n=!1){const s=new jo;s.updateFromServerResponse(t);const a=new Lr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Wc(a),a}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Se(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?TE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new jo;d.updateFromIdToken(n);const f=new Lr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;function Mr(r){jr(r instanceof Function,"Expected a class definition");let e=l_.get(r);return e?(jr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,l_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SE.type="NONE";const c_=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r,e,t){return`firebase:${r}:${e}:${t}`}class $o{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=Dc(this.userKey,s.apiKey,a),this.fullPersistenceKey=Dc("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new $o(Mr(c_),e,n);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Mr(c_);const l=Dc(n,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(l);if(v){const w=Lr._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new $o(a,e,n):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new $o(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xE(e))return"Blackberry";if(DE(e))return"Webos";if(AE(e))return"Safari";if((e.includes("chrome/")||PE(e))&&!e.includes("edge/"))return"Chrome";if(kE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function RE(r=wt()){return/firefox\//i.test(r)}function AE(r=wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PE(r=wt()){return/crios\//i.test(r)}function CE(r=wt()){return/iemobile/i.test(r)}function kE(r=wt()){return/android/i.test(r)}function xE(r=wt()){return/blackberry/i.test(r)}function DE(r=wt()){return/webos/i.test(r)}function Np(r=wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function P0(r=wt()){var e;return Np(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C0(){return HR()&&document.documentMode===10}function NE(r=wt()){return Np(r)||kE(r)||DE(r)||xE(r)||/windows phone/i.test(r)||CE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(r,e=[]){let t;switch(r){case"Browser":t=h_(wt());break;case"Worker":t=`${h_(wt())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fs}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0(r,e={}){return la(r,"GET","/v2/passwordPolicy",xp(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=6;class N0{constructor(e){var t,n,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:D0,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,a,l,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(n=f.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d_(this),this.idTokenSubscription=new d_(this),this.beforeStateQueue=new k0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_E,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mr(t)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await IE(this,{idToken:e}),n=await Lr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(br(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(br(this.app))return Promise.reject(Ps(this));const t=e?It(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return br(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return br(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x0(this),t=new N0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await A0(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[Mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,n,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&c0(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Eh(r){return It(r)}class d_{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZR(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b0(r){Vp=r}function O0(r){return Vp.loadJS(r)}function L0(){return Vp.gapiScript}function M0(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(r,e){const t=vh(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(xu(a,e??{}))return s;cr(s,"already-initialized")}return t.initialize({options:e})}function U0(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Mr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function B0(r,e,t){const n=Eh(r);Se(n._canInitEmulator,n,"emulator-config-failed"),Se(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=bE(e),{host:l,port:d}=z0(e),f=d===null?"":`:${d}`;n.config.emulator={url:`${a}//${l}${f}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),j0()}function bE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function z0(r){const e=bE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:f_(n.substr(a.length+1))}}else{const[a,l]=n.split(":");return{host:a,port:f_(l)}}}function f_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function j0(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r,e){return y0(r,"POST","/v1/accounts:signInWithIdp",xp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="http://localhost";class xs extends OE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,a=Ap(t,["providerId","signInMethod"]);if(!n||!s)return null;const l=new xs(n,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return qo(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}buildRequest(){const e={requestUri:$0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends bp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Wu{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ii.credential(t,n)}catch{return null}}}Ii.GOOGLE_SIGN_IN_METHOD="google.com";Ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Wu{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Wu{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Si.credential(t,n)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const a=await Lr._fromIdTokenResponse(e,n,s),l=p_(n);return new Go({user:a,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=p_(n);return new Go({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function p_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends pr{constructor(e,t,n,s){var a;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new Qc(e,t,n,s)}}function LE(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(r,a,e,n):a})}async function q0(r,e,t=!1){const n=await Nu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Go._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(r,e,t=!1){const{auth:n}=r;if(br(n.app))return Promise.reject(Ps(n));const s="reauthenticate";try{const a=await Nu(r,LE(n,s,e,r),t);Se(a.idToken,n,"internal-error");const l=Dp(a.idToken);Se(l,n,"internal-error");const{sub:d}=l;return Se(r.uid===d,n,"user-mismatch"),Go._forOperation(r,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&cr(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0(r,e,t=!1){if(br(r.app))return Promise.reject(Ps(r));const n="signIn",s=await LE(r,n,e),a=await Go._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(a.user),a}function H0(r,e,t,n){return It(r).onIdTokenChanged(e,t,n)}function W0(r,e,t){return It(r).beforeAuthStateChanged(e,t)}function fD(r,e,t,n){return It(r).onAuthStateChanged(e,t,n)}function pD(r){return It(r).signOut()}const Jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jc,"1"),this.storage.removeItem(Jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=1e3,J0=10;class FE extends ME{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},a=this.storage.getItem(n);C0()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,J0):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Q0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FE.type="LOCAL";const Y0=FE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends ME{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}UE.type="SESSION";const BE=UE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new wh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const d=Array.from(l).map(async m=>m(t.origin,a)),f=await X0(d);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const m=Op("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},n);l={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function eP(r){lr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function tP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nP(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function rP(){return zE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firebaseLocalStorageDb",iP=1,Yc="firebaseLocalStorage",$E="fbase_key";class Qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ih(r,e){return r.transaction([Yc],e?"readwrite":"readonly").objectStore(Yc)}function sP(){const r=indexedDB.deleteDatabase(jE);return new Qu(r).toPromise()}function Hf(){const r=indexedDB.open(jE,iP);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Yc,{keyPath:$E})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Yc)?e(n):(n.close(),await sP(),e(await Hf()))})})}async function m_(r,e,t){const n=Ih(r,!0).put({[$E]:e,value:t});return new Qu(n).toPromise()}async function oP(r,e){const t=Ih(r,!1).get(e),n=await new Qu(t).toPromise();return n===void 0?null:n.value}function g_(r,e){const t=Ih(r,!0).delete(e);return new Qu(t).toPromise()}const aP=800,uP=3;class qE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>uP)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(rP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await tP(),!this.activeServiceWorker)return;this.sender=new Z0(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hf();return await m_(e,Jc,"1"),await g_(e,Jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>m_(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>oP(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Ih(s,!1).getAll();return new Qu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qE.type="LOCAL";const lP=qE;new Hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(r,e){return e?Mr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends OE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cP(r){return G0(r.auth,new Lp(r),r.bypassAuthState)}function hP(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),K0(t,new Lp(r),r.bypassAuthState)}async function dP(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),q0(t,new Lp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cP;case"linkViaPopup":case"linkViaRedirect":return dP;case"reauthViaPopup":case"reauthViaRedirect":return hP;default:cr(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Hu(2e3,1e4);async function mD(r,e,t){if(br(r.app))return Promise.reject(Gn(r,"operation-not-supported-in-this-environment"));const n=Eh(r);h0(r,e,bp);const s=KE(n,t);return new As(n,"signInViaPopup",e,s).executeNotNull()}class As extends GE{constructor(e,t,n,s,a){super(e,t,s,a),this.provider=n,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fP.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="pendingRedirect",Nc=new Map;class mP extends GE{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const n=await gP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gP(r,e){const t=vP(e),n=_P(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function yP(r,e){Nc.set(r._key(),e)}function _P(r){return Mr(r._redirectPersistence)}function vP(r){return Dc(pP,r.config.apiKey,r.name)}async function EP(r,e,t=!1){if(br(r.app))return Promise.reject(Ps(r));const n=Eh(r),s=KE(n,e),l=await new mP(n,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=10*60*1e3;class IP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!HE(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wP&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(e))}saveEventToCache(e){this.cachedEventUids.add(y_(e)),this.lastProcessedEventTime=Date.now()}}function y_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function HE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TP(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(r,e={}){return la(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AP=/^https?/;async function PP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await SP(r);for(const t of e)try{if(CP(t))return}catch{}cr(r,"unauthorized-domain")}function CP(r){const e=Kf(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!AP.test(t))return!1;if(RP.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=new Hu(3e4,6e4);function __(){const r=lr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function xP(r){return new Promise((e,t)=>{var n,s,a;function l(){__(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{__(),t(Gn(r,"network-request-failed"))},timeout:kP.get()})}if(!((s=(n=lr().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=lr().gapi)===null||a===void 0)&&a.load)l();else{const d=M0("iframefcb");return lr()[d]=()=>{gapi.load?l():t(Gn(r,"network-request-failed"))},O0(`${L0()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Vc=null,e})}let Vc=null;function DP(r){return Vc=Vc||xP(r),Vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=new Hu(5e3,15e3),VP="__/auth/iframe",bP="emulator/auth/iframe",OP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MP(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?kp(e,bP):`https://${r.config.authDomain}/${VP}`,n={apiKey:e.apiKey,appName:r.name,v:Fs},s=LP.get(r.config.apiHost);s&&(n.eid=s);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${Gu(n).slice(1)}`}async function FP(r){const e=await DP(r),t=lr().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:MP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OP,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const l=Gn(r,"network-request-failed"),d=lr().setTimeout(()=>{a(l)},NP.get());function f(){lr().clearTimeout(d),s(n)}n.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BP=500,zP=600,jP="_blank",$P="http://localhost";class v_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qP(r,e,t,n=BP,s=zP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const f=Object.assign(Object.assign({},UP),{width:n.toString(),height:s.toString(),top:a,left:l}),m=wt().toLowerCase();t&&(d=PE(m)?jP:t),RE(m)&&(e=e||$P,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[C,V])=>`${T}${C}=${V},`,"");if(P0(m)&&d!=="_self")return KP(e||"",d),new v_(null);const w=window.open(e||"",d,v);Se(w,r,"popup-blocked");try{w.focus()}catch{}return new v_(w)}function KP(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="__/auth/handler",HP="emulator/auth/handler",WP=encodeURIComponent("fac");async function E_(r,e,t,n,s,a){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Fs,eventId:s};if(e instanceof bp){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",XR(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))l[v]=w}if(e instanceof Wu){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(l.scopes=v.join(","))}r.tenantId&&(l.tid=r.tenantId);const d=l;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await r._getAppCheckToken(),m=f?`#${WP}=${encodeURIComponent(f)}`:"";return`${QP(r)}?${Gu(d).slice(1)}${m}`}function QP({config:r}){return r.emulator?kp(r,HP):`https://${r.authDomain}/${GP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="webStorageSupport";class JP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BE,this._completeRedirectFn=EP,this._overrideRedirectResult=yP}async _openPopup(e,t,n,s){var a;jr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await E_(e,t,n,Kf(),s);return qP(e,l,Op())}async _openRedirect(e,t,n,s){await this._originValidation(e);const a=await E_(e,t,n,Kf(),s);return eP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(jr(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await FP(e),n=new IP(e);return t.register("authEvent",s=>(Se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xf,{type:xf},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[xf];l!==void 0&&t(!!l),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NE()||AE()||Np()}}const YP=JP;var w_="@firebase/auth",I_="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eC(r){ks(new Oi("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=n.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const f={apiKey:l,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VE(r)},m=new V0(n,s,a,f);return U0(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ks(new Oi("auth-internal",e=>{const t=Eh(e.getProvider("auth").getImmediate());return(n=>new XP(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(w_,I_,ZP(r)),Br(w_,I_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=5*60,nC=uE("authIdTokenMaxAge")||tC;let T_=null;const rC=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>nC)return;const s=t==null?void 0:t.token;T_!==s&&(T_=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iC(r=pE()){const e=vh(r,"auth");if(e.isInitialized())return e.getImmediate();const t=F0(r,{popupRedirectResolver:YP,persistence:[lP,Y0,BE]}),n=uE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const l=rC(a.toString());W0(t,l,()=>l(t.currentUser)),H0(t,d=>l(d))}}const s=oE("auth");return s&&B0(t,`http://${s}`),t}function sC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}b0({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const a=Gn("internal-error");a.customData=s,t(a)},n.type="text/javascript",n.charset="UTF-8",sC().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eC("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="firebasestorage.googleapis.com",oC="storageBucket",aC=2*60*1e3,uC=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends pr{constructor(e,t,n=0){super(Df(e),`Firebase Storage: ${t} (${Df(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Df(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hr||(hr={}));function Df(r){return"storage/"+r}function lC(){const r="An unknown error occurred, please check the error payload for server response.";return new mr(hr.UNKNOWN,r)}function cC(){return new mr(hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hC(){return new mr(hr.CANCELED,"User canceled the upload/download.")}function dC(r){return new mr(hr.INVALID_URL,"Invalid URL '"+r+"'.")}function fC(r){return new mr(hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function S_(r){return new mr(hr.INVALID_ARGUMENT,r)}function QE(){return new mr(hr.APP_DELETED,"The Firebase app was deleted.")}function pC(r){return new mr(hr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Kn.makeFromUrl(e,t)}catch{return new Kn(e,"")}if(n.path==="")return n;throw fC(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+s+l,"i"),f={bucket:1,path:3};function m(re){re.path_=decodeURIComponent(re.path)}const v="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${v}/b/${s}/o${T}`,"i"),V={bucket:1,path:3},z=t===WE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",K=new RegExp(`^https?://${z}/${s}/${b}`,"i"),J=[{regex:d,indices:f,postModify:a},{regex:C,indices:V,postModify:m},{regex:K,indices:{bucket:1,path:2},postModify:m}];for(let re=0;re<J.length;re++){const me=J[re],ce=me.regex.exec(e);if(ce){const k=ce[me.indices.bucket];let S=ce[me.indices.path];S||(S=""),n=new Kn(k,S),me.postModify(n);break}}if(n==null)throw dC(e);return n}}class mC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(r,e,t){let n=1,s=null,a=null,l=!1,d=0;function f(){return d===2}let m=!1;function v(...b){m||(m=!0,e.apply(null,b))}function w(b){s=setTimeout(()=>{s=null,r(C,f())},b)}function T(){a&&clearTimeout(a)}function C(b,...K){if(m){T();return}if(b){T(),v.call(null,b,...K);return}if(f()||l){T(),v.call(null,b,...K);return}n<64&&(n*=2);let J;d===1?(d=2,J=0):J=(n+Math.random())*1e3,w(J)}let V=!1;function z(b){V||(V=!0,T(),!m&&(s!==null?(b||(d=2),clearTimeout(s),w(0)):b||(d=1)))}return w(0),a=setTimeout(()=>{l=!0,z(!0)},t),z}function yC(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(r){return r!==void 0}function R_(r,e,t,n){if(n<e)throw S_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw S_(`Invalid value for '${r}'. Expected ${t} or less.`)}function vC(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var Xc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Xc||(Xc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,n,s,a,l,d,f,m,v,w,T=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,V)=>{this.resolve_=C,this.reject_=V,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Ec(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Xc.NO_ERROR,f=a.getStatus();if(!d||EC(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Xc.ABORT;n(!1,new Ec(!1,null,v));return}const m=this.successCodes_.indexOf(f)!==-1;n(!0,new Ec(m,a))})},t=(n,s)=>{const a=this.resolve_,l=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());_C(f)?a(f):a()}catch(f){l(f)}else if(d!==null){const f=lC();f.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,f)):l(f)}else if(s.canceled){const f=this.appDelete_?QE():hC();l(f)}else{const f=cC();l(f)}};this.canceled_?t(!1,new Ec(!1,null,!0)):this.backoffId_=gC(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ec{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function IC(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function TC(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SC(r,e){e&&(r["X-Firebase-GMPID"]=e)}function RC(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function AC(r,e,t,n,s,a,l=!0){const d=vC(r.urlParams),f=r.url+d,m=Object.assign({},r.headers);return SC(m,e),IC(m,t),TC(m,a),RC(m,n),new wC(f,r.method,m,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function CC(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this._service=e,t instanceof Kn?this._location=t:this._location=Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zc(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CC(this._location.path)}get storage(){return this._service}get parent(){const e=PC(this._location.path);if(e===null)return null;const t=new Kn(this._location.bucket,e);return new Zc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw pC(e)}}function A_(r,e){const t=e==null?void 0:e[oC];return t==null?null:Kn.makeFromBucketSpec(t,r)}function kC(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:s}=n;s&&(r._overrideAuthToken=typeof s=="string"?s:zR(s,r.app.options.projectId))}class xC{constructor(e,t,n,s,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=WE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aC,this._maxUploadRetryTime=uC,this._requests=new Set,s!=null?this._bucket=Kn.makeFromBucketSpec(s,this._host):this._bucket=A_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=A_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zc(this,e)}_makeRequest(e,t,n,s,a=!0){if(this._deleted)return new mC(QE());{const l=AC(e,this._appId,n,s,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const P_="@firebase/storage",C_="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="storage";function DC(r=pE(),e){r=It(r);const n=vh(r,JE).getImmediate({identifier:e}),s=UR("storage");return s&&NC(n,...s),n}function NC(r,e,t,n={}){kC(r,e,t,n)}function VC(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new xC(t,n,s,e,Fs)}function bC(){ks(new Oi(JE,VC,"PUBLIC").setMultipleInstances(!0)),Br(P_,C_,""),Br(P_,C_,"esm2017")}bC();var k_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,YE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function A(){}A.prototype=S.prototype,k.D=S.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(D,O,M){for(var P=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)P[ut-2]=arguments[ut];return S.prototype[O].apply(D,P)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,S,A){A||(A=0);var D=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)D[O]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(O=0;16>O;++O)D[O]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=k.g[0],A=k.g[1],O=k.g[2];var M=k.g[3],P=S+(M^A&(O^M))+D[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=M+(O^S&(A^O))+D[1]+3905402710&4294967295,M=S+(P<<12&4294967295|P>>>20),P=O+(A^M&(S^A))+D[2]+606105819&4294967295,O=M+(P<<17&4294967295|P>>>15),P=A+(S^O&(M^S))+D[3]+3250441966&4294967295,A=O+(P<<22&4294967295|P>>>10),P=S+(M^A&(O^M))+D[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=M+(O^S&(A^O))+D[5]+1200080426&4294967295,M=S+(P<<12&4294967295|P>>>20),P=O+(A^M&(S^A))+D[6]+2821735955&4294967295,O=M+(P<<17&4294967295|P>>>15),P=A+(S^O&(M^S))+D[7]+4249261313&4294967295,A=O+(P<<22&4294967295|P>>>10),P=S+(M^A&(O^M))+D[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=M+(O^S&(A^O))+D[9]+2336552879&4294967295,M=S+(P<<12&4294967295|P>>>20),P=O+(A^M&(S^A))+D[10]+4294925233&4294967295,O=M+(P<<17&4294967295|P>>>15),P=A+(S^O&(M^S))+D[11]+2304563134&4294967295,A=O+(P<<22&4294967295|P>>>10),P=S+(M^A&(O^M))+D[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=M+(O^S&(A^O))+D[13]+4254626195&4294967295,M=S+(P<<12&4294967295|P>>>20),P=O+(A^M&(S^A))+D[14]+2792965006&4294967295,O=M+(P<<17&4294967295|P>>>15),P=A+(S^O&(M^S))+D[15]+1236535329&4294967295,A=O+(P<<22&4294967295|P>>>10),P=S+(O^M&(A^O))+D[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=M+(A^O&(S^A))+D[6]+3225465664&4294967295,M=S+(P<<9&4294967295|P>>>23),P=O+(S^A&(M^S))+D[11]+643717713&4294967295,O=M+(P<<14&4294967295|P>>>18),P=A+(M^S&(O^M))+D[0]+3921069994&4294967295,A=O+(P<<20&4294967295|P>>>12),P=S+(O^M&(A^O))+D[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=M+(A^O&(S^A))+D[10]+38016083&4294967295,M=S+(P<<9&4294967295|P>>>23),P=O+(S^A&(M^S))+D[15]+3634488961&4294967295,O=M+(P<<14&4294967295|P>>>18),P=A+(M^S&(O^M))+D[4]+3889429448&4294967295,A=O+(P<<20&4294967295|P>>>12),P=S+(O^M&(A^O))+D[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=M+(A^O&(S^A))+D[14]+3275163606&4294967295,M=S+(P<<9&4294967295|P>>>23),P=O+(S^A&(M^S))+D[3]+4107603335&4294967295,O=M+(P<<14&4294967295|P>>>18),P=A+(M^S&(O^M))+D[8]+1163531501&4294967295,A=O+(P<<20&4294967295|P>>>12),P=S+(O^M&(A^O))+D[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=M+(A^O&(S^A))+D[2]+4243563512&4294967295,M=S+(P<<9&4294967295|P>>>23),P=O+(S^A&(M^S))+D[7]+1735328473&4294967295,O=M+(P<<14&4294967295|P>>>18),P=A+(M^S&(O^M))+D[12]+2368359562&4294967295,A=O+(P<<20&4294967295|P>>>12),P=S+(A^O^M)+D[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=M+(S^A^O)+D[8]+2272392833&4294967295,M=S+(P<<11&4294967295|P>>>21),P=O+(M^S^A)+D[11]+1839030562&4294967295,O=M+(P<<16&4294967295|P>>>16),P=A+(O^M^S)+D[14]+4259657740&4294967295,A=O+(P<<23&4294967295|P>>>9),P=S+(A^O^M)+D[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=M+(S^A^O)+D[4]+1272893353&4294967295,M=S+(P<<11&4294967295|P>>>21),P=O+(M^S^A)+D[7]+4139469664&4294967295,O=M+(P<<16&4294967295|P>>>16),P=A+(O^M^S)+D[10]+3200236656&4294967295,A=O+(P<<23&4294967295|P>>>9),P=S+(A^O^M)+D[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=M+(S^A^O)+D[0]+3936430074&4294967295,M=S+(P<<11&4294967295|P>>>21),P=O+(M^S^A)+D[3]+3572445317&4294967295,O=M+(P<<16&4294967295|P>>>16),P=A+(O^M^S)+D[6]+76029189&4294967295,A=O+(P<<23&4294967295|P>>>9),P=S+(A^O^M)+D[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=M+(S^A^O)+D[12]+3873151461&4294967295,M=S+(P<<11&4294967295|P>>>21),P=O+(M^S^A)+D[15]+530742520&4294967295,O=M+(P<<16&4294967295|P>>>16),P=A+(O^M^S)+D[2]+3299628645&4294967295,A=O+(P<<23&4294967295|P>>>9),P=S+(O^(A|~M))+D[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=M+(A^(S|~O))+D[7]+1126891415&4294967295,M=S+(P<<10&4294967295|P>>>22),P=O+(S^(M|~A))+D[14]+2878612391&4294967295,O=M+(P<<15&4294967295|P>>>17),P=A+(M^(O|~S))+D[5]+4237533241&4294967295,A=O+(P<<21&4294967295|P>>>11),P=S+(O^(A|~M))+D[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=M+(A^(S|~O))+D[3]+2399980690&4294967295,M=S+(P<<10&4294967295|P>>>22),P=O+(S^(M|~A))+D[10]+4293915773&4294967295,O=M+(P<<15&4294967295|P>>>17),P=A+(M^(O|~S))+D[1]+2240044497&4294967295,A=O+(P<<21&4294967295|P>>>11),P=S+(O^(A|~M))+D[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=M+(A^(S|~O))+D[15]+4264355552&4294967295,M=S+(P<<10&4294967295|P>>>22),P=O+(S^(M|~A))+D[6]+2734768916&4294967295,O=M+(P<<15&4294967295|P>>>17),P=A+(M^(O|~S))+D[13]+1309151649&4294967295,A=O+(P<<21&4294967295|P>>>11),P=S+(O^(A|~M))+D[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=M+(A^(S|~O))+D[11]+3174756917&4294967295,M=S+(P<<10&4294967295|P>>>22),P=O+(S^(M|~A))+D[2]+718787259&4294967295,O=M+(P<<15&4294967295|P>>>17),P=A+(M^(O|~S))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+M&4294967295}n.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var A=S-this.blockSize,D=this.B,O=this.h,M=0;M<S;){if(O==0)for(;M<=A;)s(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<S;)if(D[O++]=k.charCodeAt(M++),O==this.blockSize){s(this,D),O=0;break}}else for(;M<S;)if(D[O++]=k[M++],O==this.blockSize){s(this,D),O=0;break}}this.h=O,this.o+=S},n.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var A=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=A&255,A/=256;for(this.u(k),k=Array(16),S=A=0;4>S;++S)for(var D=0;32>D;D+=8)k[A++]=this.g[S]>>>D&255;return k};function a(k,S){var A=d;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=S(k)}function l(k,S){this.h=S;for(var A=[],D=!0,O=k.length-1;0<=O;O--){var M=k[O]|0;D&&M==S||(A[O]=M,D=!1)}this.g=A}var d={};function f(k){return-128<=k&&128>k?a(k,function(S){return new l([S|0],0>S?-1:0)}):new l([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return b(m(-k));for(var S=[],A=1,D=0;k>=A;D++)S[D]=k/A|0,A*=4294967296;return new l(S,0)}function v(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return b(v(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=m(Math.pow(S,8)),D=w,O=0;O<k.length;O+=8){var M=Math.min(8,k.length-O),P=parseInt(k.substring(O,O+M),S);8>M?(M=m(Math.pow(S,M)),D=D.j(M).add(m(P))):(D=D.j(A),D=D.add(m(P)))}return D}var w=f(0),T=f(1),C=f(16777216);r=l.prototype,r.m=function(){if(z(this))return-b(this).m();for(var k=0,S=1,A=0;A<this.g.length;A++){var D=this.i(A);k+=(0<=D?D:4294967296+D)*S,S*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(V(this))return"0";if(z(this))return"-"+b(this).toString(k);for(var S=m(Math.pow(k,6)),A=this,D="";;){var O=re(A,S).g;A=K(A,O.j(S));var M=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=O,V(A))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function V(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function z(k){return k.h==-1}r.l=function(k){return k=K(this,k),z(k)?-1:V(k)?0:1};function b(k){for(var S=k.g.length,A=[],D=0;D<S;D++)A[D]=~k.g[D];return new l(A,~k.h).add(T)}r.abs=function(){return z(this)?b(this):this},r.add=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],D=0,O=0;O<=S;O++){var M=D+(this.i(O)&65535)+(k.i(O)&65535),P=(M>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);D=P>>>16,M&=65535,P&=65535,A[O]=P<<16|M}return new l(A,A[A.length-1]&-2147483648?-1:0)};function K(k,S){return k.add(b(S))}r.j=function(k){if(V(this)||V(k))return w;if(z(this))return z(k)?b(this).j(b(k)):b(b(this).j(k));if(z(k))return b(this.j(b(k)));if(0>this.l(C)&&0>k.l(C))return m(this.m()*k.m());for(var S=this.g.length+k.g.length,A=[],D=0;D<2*S;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var O=0;O<k.g.length;O++){var M=this.i(D)>>>16,P=this.i(D)&65535,ut=k.i(O)>>>16,Ot=k.i(O)&65535;A[2*D+2*O]+=P*Ot,H(A,2*D+2*O),A[2*D+2*O+1]+=M*Ot,H(A,2*D+2*O+1),A[2*D+2*O+1]+=P*ut,H(A,2*D+2*O+1),A[2*D+2*O+2]+=M*ut,H(A,2*D+2*O+2)}for(D=0;D<S;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=S;D<2*S;D++)A[D]=0;return new l(A,0)};function H(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function J(k,S){this.g=k,this.h=S}function re(k,S){if(V(S))throw Error("division by zero");if(V(k))return new J(w,w);if(z(k))return S=re(b(k),S),new J(b(S.g),b(S.h));if(z(S))return S=re(k,b(S)),new J(b(S.g),S.h);if(30<k.g.length){if(z(k)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var A=T,D=S;0>=D.l(k);)A=me(A),D=me(D);var O=ce(A,1),M=ce(D,1);for(D=ce(D,2),A=ce(A,2);!V(D);){var P=M.add(D);0>=P.l(k)&&(O=O.add(A),M=P),D=ce(D,1),A=ce(A,1)}return S=K(k,O.j(S)),new J(O,S)}for(O=w;0<=k.l(S);){for(A=Math.max(1,Math.floor(k.m()/S.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=m(A),P=M.j(S);z(P)||0<P.l(k);)A-=D,M=m(A),P=M.j(S);V(M)&&(M=T),O=O.add(M),k=K(k,P)}return new J(O,k)}r.A=function(k){return re(this,k).h},r.and=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)&k.i(D);return new l(A,this.h&k.h)},r.or=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)|k.i(D);return new l(A,this.h|k.h)},r.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)^k.i(D);return new l(A,this.h^k.h)};function me(k){for(var S=k.g.length+1,A=[],D=0;D<S;D++)A[D]=k.i(D)<<1|k.i(D-1)>>>31;return new l(A,k.h)}function ce(k,S){var A=S>>5;S%=32;for(var D=k.g.length-A,O=[],M=0;M<D;M++)O[M]=0<S?k.i(M+A)>>>S|k.i(M+A+1)<<32-S:k.i(M+A);return new l(O,k.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,YE=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,ki=l}).apply(typeof k_<"u"?k_:typeof self<"u"?self:typeof window<"u"?window:{});var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XE,yu,ZE,bc,Wf,ew,tw,nw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wc=="object"&&wc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=t(this);function s(c,g){if(g)e:{var _=n;c=c.split(".");for(var I=0;I<c.length-1;I++){var U=c[I];if(!(U in _))break e;_=_[U]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,I=!1,U={next:function(){if(!I&&_<c.length){var q=_++;return{value:g(q,c[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,I),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function T(c,g,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function C(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function V(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,U,q){for(var ne=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ne[ze-2]=arguments[ze];return g.prototype[U].apply(I,ne)}}function z(c){const g=c.length;if(0<g){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function b(c,g){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(f(I)){const U=c.length||0,q=I.length||0;c.length=U+q;for(let ne=0;ne<q;ne++)c[U+ne]=I[ne]}else c.push(I)}}class K{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function H(c){return/^[\s\xa0]*$/.test(c)}function J(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var me=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ce(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function k(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let _,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(_ in I)c[_]=I[_];for(let q=0;q<A.length;q++)_=A[q],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function O(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function M(c){d.setTimeout(()=>{throw c},0)}function P(){var c=Ee;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ut{constructor(){this.h=this.g=null}add(g,_){const I=Ot.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Ot=new K(()=>new Lt,c=>c.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,se=!1,Ee=new ut,ue=()=>{const c=d.Promise.resolve(void 0);qe=()=>{c.then(L)}};var L=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(_){M(_)}var g=Ot;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}se=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c}();function Ce(c,g){if(_e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(me){e:{try{re(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}V(Ce,_e);var Ve={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Ge(c,g,_,I,U){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=U,this.key=++Ue,this.da=this.fa=!1}function St(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gr(c){this.src=c,this.g={},this.h=0}gr.prototype.add=function(c,g,_,I,U){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var ne=Hr(c,g,I,U);return-1<ne?(g=c[ne],_||(g.fa=!1)):(g=new Ge(g,this.src,q,!!I,U),g.fa=_,c.push(g)),g};function Bs(c,g){var _=g.type;if(_ in c.g){var I=c.g[_],U=Array.prototype.indexOf.call(I,g,void 0),q;(q=0<=U)&&Array.prototype.splice.call(I,U,1),q&&(St(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Hr(c,g,_,I){for(var U=0;U<c.length;++U){var q=c[U];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==I)return U}return-1}var Ki="closure_lm_"+(1e6*Math.random()|0),zs={};function ma(c,g,_,I,U){if(Array.isArray(g)){for(var q=0;q<g.length;q++)ma(c,g[q],_,I,U);return null}return _=_a(_),c&&c[Fe]?c.K(g,_,m(I)?!!I.capture:!1,U):ga(c,g,_,!1,I,U)}function ga(c,g,_,I,U,q){if(!g)throw Error("Invalid event type");var ne=m(U)?!!U.capture:!!U,ze=$s(c);if(ze||(c[Ki]=ze=new gr(c)),_=ze.add(g,_,I,ne,q),_.proxy)return _;if(I=nl(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Ae||(U=ne),U===void 0&&(U=!1),c.addEventListener(g.toString(),I,U);else if(c.attachEvent)c.attachEvent(_r(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function nl(){function c(_){return g.call(c.src,c.listener,_)}const g=ya;return c}function js(c,g,_,I,U){if(Array.isArray(g))for(var q=0;q<g.length;q++)js(c,g[q],_,I,U);else I=m(I)?!!I.capture:!!I,_=_a(_),c&&c[Fe]?(c=c.i,g=String(g).toString(),g in c.g&&(q=c.g[g],_=Hr(q,_,I,U),-1<_&&(St(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete c.g[g],c.h--)))):c&&(c=$s(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Hr(g,_,I,U)),(_=-1<c?g[c]:null)&&yr(_))}function yr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Fe])Bs(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(_r(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=$s(g))?(Bs(_,c),_.h==0&&(_.src=null,g[Ki]=null)):St(c)}}}function _r(c){return c in zs?zs[c]:zs[c]="on"+c}function ya(c,g){if(c.da)c=!0;else{g=new Ce(g,this);var _=c.listener,I=c.ha||c.src;c.fa&&yr(c),c=_.call(I,g)}return c}function $s(c){return c=c[Ki],c instanceof gr?c:null}var qs="__closure_events_fn_"+(1e9*Math.random()>>>0);function _a(c){return typeof c=="function"?c:(c[qs]||(c[qs]=function(g){return c.handleEvent(g)}),c[qs])}function gt(){Q.call(this),this.i=new gr(this),this.M=this,this.F=null}V(gt,Q),gt.prototype[Fe]=!0,gt.prototype.removeEventListener=function(c,g,_,I){js(this,c,g,_,I)};function yt(c,g){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new _e(g,c);else if(g instanceof _e)g.target=g.target||c;else{var U=g;g=new _e(I,c),D(g,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var ne=g.g=_[q];U=vr(ne,I,!0,g)&&U}if(ne=g.g=c,U=vr(ne,I,!0,g)&&U,U=vr(ne,I,!1,g)&&U,_)for(q=0;q<_.length;q++)ne=g.g=_[q],U=vr(ne,I,!1,g)&&U}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],I=0;I<_.length;I++)St(_[I]);delete c.g[g],c.h--}}this.F=null},gt.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},gt.prototype.L=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function vr(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,q=0;q<g.length;++q){var ne=g[q];if(ne&&!ne.da&&ne.capture==_){var ze=ne.listener,_t=ne.ha||ne.src;ne.fa&&Bs(c.i,ne),U=ze.call(_t,I)!==!1&&U}}return U&&!I.defaultPrevented}function va(c,g,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Wr(c){c.g=va(()=>{c.g=null,c.i&&(c.i=!1,Wr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Gi extends Q{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(c){Q.call(this),this.h=c,this.g={}}V(Hi,Q);var Ea=[];function wa(c){ce(c.g,function(g,_){this.g.hasOwnProperty(_)&&yr(g)},c),c.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),wa(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ia=d.JSON.stringify,Ta=d.JSON.parse,Sa=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Wi(){}Wi.prototype.h=null;function Ks(c){return c.h||(c.h=c.i())}function Gs(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){_e.call(this,"d")}V(Qn,_e);function Hs(){_e.call(this,"c")}V(Hs,_e);var Jn={},Ra=null;function Qi(){return Ra=Ra||new gt}Jn.La="serverreachability";function Aa(c){_e.call(this,Jn.La,c)}V(Aa,_e);function Er(c){const g=Qi();yt(g,new Aa(g))}Jn.STAT_EVENT="statevent";function Pa(c,g){_e.call(this,Jn.STAT_EVENT,c),this.stat=g}V(Pa,_e);function lt(c){const g=Qi();yt(g,new Pa(g,c))}Jn.Ma="timingevent";function Ws(c,g){_e.call(this,Jn.Ma,c),this.size=g}V(Ws,_e);function xn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function Yi(c,g,_,I,U,q){c.info(function(){if(c.g)if(q)for(var ne="",ze=q.split("&"),_t=0;_t<ze.length;_t++){var be=ze[_t].split("=");if(1<be.length){var Rt=be[0];be=be[1];var ft=Rt.split("_");ne=2<=ft.length&&ft[1]=="type"?ne+(Rt+"="+be+"&"):ne+(Rt+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+g+`
`+_+`
`+ne})}function Qs(c,g,_,I,U,q,ne){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+g+`
`+_+`
`+q+" "+ne})}function Dn(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+qh(c,_)+(I?" "+I:"")})}function Ca(c,g){c.info(function(){return"TIMEOUT: "+g})}Ji.prototype.info=function(){};function qh(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var U=I[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<U.length;ne++)U[ne]=""}}}}return Ia(_)}catch{return g}}var Js={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function Xi(){}V(Xi,Wi),Xi.prototype.g=function(){return new XMLHttpRequest},Xi.prototype.i=function(){return{}},Nn=new Xi;function Vn(c,g,_,I){this.j=c,this.i=g,this.l=_,this.R=I||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new il}function il(){this.i=null,this.g="",this.h=!1}var ka={},Ys={};function Xs(c,g,_){c.L=1,c.v=Zr(hn(g)),c.m=_,c.P=!0,xa(c,null)}function xa(c,g){c.F=Date.now(),He(c),c.A=hn(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),ti(_.i,"t",I),c.C=0,_=c.j.J,c.h=new il,c.g=Il(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Gi(T(c.Y,c,c.g),c.O)),g=c.U,_=c.g,I=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(Ea[0]=U.toString()),U=Ea);for(var q=0;q<U.length;q++){var ne=ma(_,U[q],I||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Er(),Yi(c.i,c.u,c.A,c.l,c.R,c.m)}Vn.prototype.ca=function(c){c=c.target;const g=this.M;g&&Zt(c)==3?g.j():this.Y(c)},Vn.prototype.Y=function(c){try{if(c==this.g)e:{const ft=Zt(this.g);var g=this.g.Ba();const Tn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||La(this.g)))){this.J||ft!=4||g==7||(g==8||0>=Tn?Er(3):Er(2)),Zi(this);var _=this.g.Z();this.X=_;t:if(sl(this)){var I=La(this.g);c="";var U=I.length,q=Zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),Qr(this);var ne="";break t}this.h.i=new d.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(q&&g==U-1)});I.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,Qs(this.i,this.u,this.A,this.l,this.R,ft,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,_t=this.g;if((ze=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ze)){var be=ze;break t}}be=null}if(_=be)Dn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Da(this,_);else{this.o=!1,this.s=3,lt(12),wn(this),Qr(this);break e}}if(this.P){_=!0;let fn;for(;!this.J&&this.C<ne.length;)if(fn=Kh(this,ne),fn==Ys){ft==4&&(this.s=4,lt(14),_=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==ka){this.s=4,lt(15),Dn(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else Dn(this.i,this.l,fn,null),Da(this,fn);if(sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||ne.length!=0||this.h.h||(this.s=1,lt(16),_=!1),this.o=this.o&&_,!_)Dn(this.i,this.l,ne,"[Invalid Chunked Response]"),wn(this),Qr(this);else if(0<ne.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Fa(Rt),Rt.M=!0,lt(11))}}else Dn(this.i,this.l,ne,null),Da(this,ne);ft==4&&wn(this),this.o&&!this.J&&(ft==4?lo(this.j,this):(this.o=!1,He(this)))}else io(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),wn(this),Qr(this)}}}catch{}finally{}};function sl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Kh(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?Ys:(_=Number(g.substring(_,I)),isNaN(_)?ka:(I+=1,I+_>g.length?Ys:(g=g.slice(I,I+_),c.C=I+_,g)))}Vn.prototype.cancel=function(){this.J=!0,wn(this)};function He(c){c.S=Date.now()+c.I,ol(c,c.I)}function ol(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=xn(T(c.ba,c),g)}function Zi(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Vn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ca(this.i,this.A),this.L!=2&&(Er(),lt(17)),wn(this),this.s=2,Qr(this)):ol(this,this.S-c)};function Qr(c){c.j.G==0||c.J||lo(c.j,c)}function wn(c){Zi(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,wa(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Da(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Gt(_.h,c))){if(!c.K&&Gt(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)uo(_),Fn(_);else break e;ao(_),lt(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=xn(T(_.Za,_),6e3));if(1>=ul(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Rr(_,11)}else if((c.K||_.g==c)&&uo(_),!H(g))for(U=_.Da.g.parse(g),g=0;g<U.length;g++){let be=U[g];if(_.T=be[0],be=be[1],_.G==2)if(be[0]=="c"){_.K=be[1],_.ia=be[2];const Rt=be[3];Rt!=null&&(_.la=Rt,_.j.info("VER="+_.la));const ft=be[4];ft!=null&&(_.Aa=ft,_.j.info("SVER="+_.Aa));const Tn=be[5];Tn!=null&&typeof Tn=="number"&&0<Tn&&(I=1.5*Tn,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const fn=c.g;if(fn){const os=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var q=I.h;q.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Na(q,q.h),q.h=null))}if(I.D){const ho=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;ho&&(I.ya=ho,Ke(I.I,I.D,ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var ne=c;if(I.qa=wl(I,I.J?I.ia:null,I.W),ne.K){ll(I.h,ne);var ze=ne,_t=I.L;_t&&(ze.I=_t),ze.B&&(Zi(ze),He(ze)),I.g=ne}else ss(I);0<_.i.length&&er(_)}else be[0]!="stop"&&be[0]!="close"||Rr(_,7);else _.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Rr(_,7):Dt(_):be[0]!="noop"&&_.l&&_.l.ta(be),_.v=0)}}Er(4)}catch{}}var al=class{constructor(c,g){this.g=c,this.map=g}};function es(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ul(c){return c.h?1:c.g?c.g.size:0}function Gt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Na(c,g){c.g?c.g.add(g):c.h=g}function ll(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}es.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function cl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return z(c.i)}function Zs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,I=0;I<_;I++)g.push(c[I]);return g}g=[],_=0;for(I in c)g[_++]=c[I];return g}function eo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const I in c)g[_++]=I;return g}}}function Jr(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=eo(c),I=Zs(c),U=I.length,q=0;q<U;q++)g.call(void 0,I[q],_&&_[q],c)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),U=null;if(0<=I){var q=c[_].substring(0,I);U=c[_].substring(I+1)}else q=c[_];g(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function wr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof wr){this.h=c.h,ns(this,c.j),this.o=c.o,this.g=c.g,Yr(this,c.s),this.l=c.l;var g=c.i,_=new Yn;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Xr(this,_),this.m=c.m}else c&&(g=String(c).match(ts))?(this.h=!1,ns(this,g[1]||"",!0),this.o=Ne(g[2]||""),this.g=Ne(g[3]||"",!0),Yr(this,g[4]),this.l=Ne(g[5]||"",!0),Xr(this,g[6]||"",!0),this.m=Ne(g[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}wr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ei(g,to,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ei(g,to,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ei(_,_.charAt(0)=="/"?fl:dl,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ei(_,Va)),c.join("")};function hn(c){return new wr(c)}function ns(c,g,_){c.j=_?Ne(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Yr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Xr(c,g,_){g instanceof Yn?(c.i=g,Xn(c.i,c.h)):(_||(g=ei(g,pl)),c.i=new Yn(g,c.h))}function Ke(c,g,_){c.i.set(g,_)}function Zr(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ne(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ei(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,hl),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var to=/[#\/\?@]/g,dl=/[#\?:]/g,fl=/[#\?]/g,pl=/[#\?@]/g,Va=/#/g;function Yn(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function xt(c){c.g||(c.g=new Map,c.h=0,c.i&&Gh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Yn.prototype,r.add=function(c,g){xt(this),this.i=null,c=In(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function bn(c,g){xt(c),g=In(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function On(c,g){return xt(c),g=In(c,g),c.g.has(g)}r.forEach=function(c,g){xt(this),this.g.forEach(function(_,I){_.forEach(function(U){c.call(g,U,I,this)},this)},this)},r.na=function(){xt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let I=0;I<g.length;I++){const U=c[I];for(let q=0;q<U.length;q++)_.push(g[I])}return _},r.V=function(c){xt(this);let g=[];if(typeof c=="string")On(this,c)&&(g=g.concat(this.g.get(In(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},r.set=function(c,g){return xt(this),this.i=null,c=In(this,c),On(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ti(c,g,_){bn(c,g),0<_.length&&(c.i=null,c.g.set(In(c,g),z(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var I=g[_];const q=encodeURIComponent(String(I)),ne=this.V(I);for(I=0;I<ne.length;I++){var U=q;ne[I]!==""&&(U+="="+encodeURIComponent(String(ne[I]))),c.push(U)}}return this.i=c.join("&")};function In(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Xn(c,g){g&&!c.j&&(xt(c),c.i=null,c.g.forEach(function(_,I){var U=I.toLowerCase();I!=U&&(bn(this,I),ti(this,U,_))},c)),c.j=g}function Hh(c,g){const _=new Ji;if(d.Image){const I=new Image;I.onload=C(Xt,_,"TestLoadImage: loaded",!0,g,I),I.onerror=C(Xt,_,"TestLoadImage: error",!1,g,I),I.onabort=C(Xt,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=C(Xt,_,"TestLoadImage: timeout",!1,g,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function ml(c,g){const _=new Ji,I=new AbortController,U=setTimeout(()=>{I.abort(),Xt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(q=>{clearTimeout(U),q.ok?Xt(_,"TestPingServer: ok",!0,g):Xt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Xt(_,"TestPingServer: error",!1,g)})}function Xt(c,g,_,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(_)}catch{}}function Wh(){this.g=new Sa}function gl(c,g,_){const I=_||"";try{Jr(c,function(U,q){let ne=U;m(U)&&(ne=Ia(U)),g.push(I+q+"="+encodeURIComponent(ne))})}catch(U){throw g.push(I+"type="+encodeURIComponent("_badmap")),U}}function Ir(c){this.l=c.Ub||null,this.j=c.eb||!1}V(Ir,Wi),Ir.prototype.g=function(){return new rs(this.l,this.j)},Ir.prototype.i=function(c){return function(){return c}}({});function rs(c,g){gt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(rs,gt),r=rs.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Mn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ln(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function yl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ln(this):Mn(this),this.readyState==3&&yl(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Ln(this))},r.Qa=function(c){this.g&&(this.response=c,Ln(this))},r.ga=function(){this.g&&Ln(this)};function Ln(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Mn(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Mn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Tr(c){let g="";return ce(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function ni(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Tr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ke(c,g,_))}function Xe(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Xe,gt);var Qh=/^https?$/i,ba=["POST","PUT"];r=Xe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?Ks(this.o):Ks(Nn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(q){is(this,q);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)_.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())_.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ba,g,void 0))||I||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of _)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){is(this,q)}};function is(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,no(c),dn(c)}function no(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,yt(this,"complete"),yt(this,"abort"),dn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),Xe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Oa(this):this.bb())},r.bb=function(){Oa(this)};function Oa(c){if(c.h&&typeof l<"u"&&(!c.v[1]||Zt(c)!=4||c.Z()!=2)){if(c.u&&Zt(c)==4)va(c.Ea,0,c);else if(yt(c,"readystatechange"),Zt(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=ne===0){var U=String(c.D).match(ts)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),I=!Qh.test(U?U.toLowerCase():"")}_=I}if(_)yt(c,"complete"),yt(c,"success");else{c.m=6;try{var q=2<Zt(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",no(c)}}finally{dn(c)}}}}function dn(c,g){if(c.g){ro(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||yt(c,"ready");try{_.onreadystatechange=I}catch{}}}function ro(c){c.I&&(d.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Zt(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Zt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ta(g)}};function La(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function io(c){const g={};c=(c.g&&2<=Zt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(H(c[I]))continue;var _=O(c[I]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[U]||[];g[U]=q,q.push(_)}k(g,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Ma(c){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,c),this.cb=Zn("retryDelaySeedMs",1e4,c),this.Wa=Zn("forwardChannelMaxRetries",2,c),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new es(c&&c.concurrentRequestLimit),this.Da=new Wh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ma.prototype,r.la=8,r.G=1,r.connect=function(c,g,_,I){lt(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=wl(this,null,this.W),er(this)};function Dt(c){if(so(c),c.G==3){var g=c.U++,_=hn(c.I);if(Ke(_,"SID",c.K),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),Sr(c,_),g=new Vn(c,c.j,g),g.L=2,g.v=Zr(hn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=Il(g.j,null),g.g.ea(g.v)),g.F=Date.now(),He(g)}El(c)}function Fn(c){c.g&&(Fa(c),c.g.cancel(),c.g=null)}function so(c){Fn(c),c.u&&(d.clearTimeout(c.u),c.u=null),uo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function er(c){if(!cn(c.h)&&!c.s){c.s=!0;var g=c.Ga;qe||ue(),se||(qe(),se=!0),Ee.add(g,c),c.B=0}}function Jh(c,g){return ul(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=xn(T(c.Ga,c,g),vl(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Vn(this,this.j,c);let q=this.o;if(this.S&&(q?(q=S(q),D(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ri(this,U,g),_=hn(this.I),Ke(_,"RID",c),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),Sr(this,_),q&&(this.O?g="headers="+encodeURIComponent(String(Tr(q)))+"&"+g:this.m&&ni(_,this.m,q)),Na(this.h,U),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",g),Ke(_,"SID","null"),U.T=!0,Xs(U,_,null)):Xs(U,_,g),this.G=2}}else this.G==3&&(c?oo(this,c):this.i.length==0||cn(this.h)||oo(this))};function oo(c,g){var _;g?_=g.l:_=c.U++;const I=hn(c.I);Ke(I,"SID",c.K),Ke(I,"RID",_),Ke(I,"AID",c.T),Sr(c,I),c.m&&c.o&&ni(I,c.m,c.o),_=new Vn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ri(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Na(c.h,_),Xs(_,I,g)}function Sr(c,g){c.H&&ce(c.H,function(_,I){Ke(g,I,_)}),c.l&&Jr({},function(_,I){Ke(g,I,_)})}function ri(c,g,_){_=Math.min(c.i.length,_);var I=c.l?T(c.l.Na,c.l,c):null;e:{var U=c.i;let q=-1;for(;;){const ne=["count="+_];q==-1?0<_?(q=U[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let ze=!0;for(let _t=0;_t<_;_t++){let be=U[_t].g;const Rt=U[_t].map;if(be-=q,0>be)q=Math.max(0,U[_t].g-100),ze=!1;else try{gl(Rt,ne,"req"+be+"_")}catch{I&&I(Rt)}}if(ze){I=ne.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,I}function ss(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;qe||ue(),se||(qe(),se=!0),Ee.add(g,c),c.v=0}}function ao(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=xn(T(c.Fa,c),vl(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,_l(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=xn(T(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Fn(this),_l(this))};function Fa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function _l(c){c.g=new Vn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=hn(c.qa);Ke(g,"RID","rpc"),Ke(g,"SID",c.K),Ke(g,"AID",c.T),Ke(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(g,"TO",c.ja),Ke(g,"TYPE","xmlhttp"),Sr(c,g),c.m&&c.o&&ni(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Zr(hn(g)),_.m=null,_.P=!0,xa(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Fn(this),ao(this),lt(19))};function uo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function lo(c,g){var _=null;if(c.g==g){uo(c),Fa(c),c.g=null;var I=2}else if(Gt(c.h,g))_=g.D,ll(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;I=Qi(),yt(I,new Ws(I,_)),er(c)}else ss(c);else if(U=g.s,U==3||U==0&&0<g.X||!(I==1&&Jh(c,g)||I==2&&ao(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),U){case 1:Rr(c,5);break;case 4:Rr(c,10);break;case 3:Rr(c,6);break;default:Rr(c,2)}}}function vl(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Rr(c,g){if(c.j.info("Error code "+g),g==2){var _=T(c.fb,c),I=c.Xa;const U=!I;I=new wr(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ns(I,"https"),Zr(I),U?Hh(I.toString(),_):ml(I.toString(),_)}else lt(2);c.G=0,c.l&&c.l.sa(g),El(c),so(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function El(c){if(c.G=0,c.ka=[],c.l){const g=cl(c.h);(g.length!=0||c.i.length!=0)&&(b(c.ka,g),b(c.ka,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.ra()}}function wl(c,g,_){var I=_ instanceof wr?hn(_):new wr(_);if(I.g!="")g&&(I.g=g+"."+I.g),Yr(I,I.s);else{var U=d.location;I=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var q=new wr(null);I&&ns(q,I),g&&(q.g=g),U&&Yr(q,U),_&&(q.l=_),I=q}return _=c.D,g=c.ya,_&&g&&Ke(I,_,g),Ke(I,"VER",c.la),Sr(c,I),I}function Il(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Xe(new Ir({eb:_})):new Xe(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ua(){}r=Ua.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function co(){}co.prototype.g=function(c,g){return new Ht(c,g)};function Ht(c,g){gt.call(this),this.g=new Ma(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!H(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!H(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new tr(this)}V(Ht,gt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Dt(this.g)},Ht.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Ia(c),c=_);g.i.push(new al(g.Ya++,c)),g.G==3&&er(g)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Ht.aa.N.call(this)};function Tl(c){Qn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}V(Tl,Qn);function Sl(){Hs.call(this),this.status=1}V(Sl,Hs);function tr(c){this.g=c}V(tr,Ua),tr.prototype.ua=function(){yt(this.g,"a")},tr.prototype.ta=function(c){yt(this.g,new Tl(c))},tr.prototype.sa=function(c){yt(this.g,new Sl)},tr.prototype.ra=function(){yt(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,nw=function(){return new co},tw=function(){return Qi()},ew=Jn,Wf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Js.NO_ERROR=0,Js.TIMEOUT=8,Js.HTTP_ERROR=6,bc=Js,rl.COMPLETE="complete",ZE=rl,Gs.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",gt.prototype.listen=gt.prototype.K,yu=Gs,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,XE=Xe}).apply(typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{});const x_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Sp("@firebase/firestore");function Mo(){return Ds.logLevel}function X(r,...e){if(Ds.logLevel<=xe.DEBUG){const t=e.map(Mp);Ds.debug(`Firestore (${ca}): ${r}`,...t)}}function ht(r,...e){if(Ds.logLevel<=xe.ERROR){const t=e.map(Mp);Ds.error(`Firestore (${ca}): ${r}`,...t)}}function Ho(r,...e){if(Ds.logLevel<=xe.WARN){const t=e.map(Mp);Ds.warn(`Firestore (${ca}): ${r}`,...t)}}function Mp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(r="Unexpected state"){const e=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: `+r;throw ht(e),new Error(e)}function ye(r,e){r||de()}function pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jt.UNAUTHENTICATED))}shutdown(){}}class MC{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0);let n=this.i;const s=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new xi,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},d=f=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xi)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ye(typeof n.accessToken=="string"),new OC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new jt(e)}}class FC{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class UC{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new FC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ye(this.o===void 0);const n=a=>{a.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,X("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string"),this.R=t.token,new BC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=jC(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<t&&(n+=e.charAt(s[a]%e.length))}return n}}function Re(r,e){return r<e?-1:r>e?1:0}function Wo(r,e,t){return r.length===e.length&&r.every((n,s)=>t(n,e[s]))}function iw(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new st(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new st(0,0))}static max(){return new ve(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t,n){t===void 0?t=0:t>e.length&&de(),n===void 0?n=e.length-t:n>e.length-t&&de(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const a=or.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=or.isNumericId(e),s=or.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?or.extractNumericId(e).compare(or.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class Be extends or{construct(e,t,n){return new Be(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new Be(t)}static emptyPath(){return new Be([])}}const $C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends or{construct(e,t,n){return new it(e,t,n)}static isValidIdentifier(e){return $C.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new it(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const a=()=>{if(n.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,s+=2}else d==="`"?(l=!l,s++):d!=="."||l?(n+=d,s++):(a(),s++)}if(a(),l)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(t)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Be.fromString(e))}static fromName(e){return new oe(Be.fromString(e).popFirst(5))}static empty(){return new oe(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function Qf(r){return r.fields.find(e=>e.kind===2)}function ws(r){return r.fields.filter(e=>e.kind!==2)}eh.UNKNOWN_ID=-1;class Oc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vu(0,vn.min())}}function sw(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(n===1e9?new st(t+1,0):new st(t,n));return new vn(s,oe.empty(),e)}function ow(r){return new vn(r.readTime,r.key,-1)}class vn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vn(ve.min(),oe.empty(),-1)}static max(){return new vn(ve.max(),oe.empty(),-1)}}function Fp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(r.documentKey,e.documentKey),t!==0?t:Re(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bi(r){if(r.code!==G.FAILED_PRECONDITION||r.message!==aw)throw r;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):F.reject(t)}static resolve(e){return new F((t,n)=>{t(e)})}static reject(e){return new F((t,n)=>{n(e)})}static waitFor(e){return new F((t,n)=>{let s=0,a=0,l=!1;e.forEach(d=>{++s,d.next(()=>{++a,l&&a===s&&t()},f=>n(f))}),l=!0,a===s&&t()})}static or(e){let t=F.resolve(!1);for(const n of e)t=t.next(s=>s?F.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,a)=>{n.push(t.call(this,s,a))}),this.waitFor(n)}static mapArray(e,t){return new F((n,s)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{l[m]=v,++d,d===a&&n(l)},v=>s(v))}})}static doWhile(e,t){return new F((n,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):n()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{static open(e,t,n,s){try{return new Th(t,e.transaction(s,n))}catch(a){throw new Tu(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new xi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Tu(e,t.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Up(n.target.error);this.V.reject(new Tu(e,s))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(X("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KC(t)}}class Di{static delete(e){return X("SimpleDb","Removing database:",e),Is(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!cE())return!1;if(Di.S())return!0;const e=wt(),t=Di.D(e),n=0<t&&t<10,s=lw(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.F=n,Di.D(wt())===12.2&&ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(X("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{n(new Tu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?n(new ie(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?n(new ie(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):n(new Tu(e,l))},s.onupgradeneeded=a=>{X("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.F.O(l,s.transaction,a.oldVersion,this.version).next(()=>{X("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}B(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const d=Th.open(this.db,e,a?"readonly":"readwrite",n),f=s(d).next(m=>(d.g(),m)).catch(m=>(d.abort(m),F.reject(m))).toPromise();return f.catch(()=>{}),await d.m,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&l<3;if(X("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function lw(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class qC{constructor(e){this.L=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.L=e}done(){this.k=!0}$(e){this.q=e}delete(){return Is(this.L.delete())}}class Tu extends ie{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zi(r){return r.name==="IndexedDbTransactionError"}class KC{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(X("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(X("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Is(n)}add(e){return X("SimpleDb","ADD",this.store.name,e,e),Is(this.store.add(e))}get(e){return Is(this.store.get(e)).next(t=>(t===void 0&&(t=null),X("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return X("SimpleDb","DELETE",this.store.name,e),Is(this.store.delete(e))}count(){return X("SimpleDb","COUNT",this.store.name),Is(this.store.count())}U(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(n.range);return new F((l,d)=>{a.onerror=f=>{d(f.target.error)},a.onsuccess=f=>{l(f.target.result)}})}{const a=this.cursor(n),l=[];return this.W(a,(d,f)=>{l.push(f)}).next(()=>l)}}G(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new F((s,a)=>{n.onerror=l=>{a(l.target.error)},n.onsuccess=l=>{s(l.target.result)}})}j(e,t){X("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const s=this.cursor(n);return this.W(s,(a,l,d)=>d.delete())}J(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.W(s,t)}Y(e){const t=this.cursor({});return new F((n,s)=>{t.onerror=a=>{const l=Up(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():n()}):n()}})}W(e,t){const n=[];return new F((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void s();const f=new qC(d),m=t(d.primaryKey,d.value,f);if(m instanceof F){const v=m.catch(w=>(f.done(),F.reject(w)));n.push(v)}f.isDone?s():f.K===null?d.continue():d.continue(f.K)}}).next(()=>F.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Is(r){return new F((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=Up(n.target.error);t(s)}})}let D_=!1;function Up(r){const e=Di.D(wt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return D_||(D_=!0,setTimeout(()=>{throw n},0)),n}}return r}class GC{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){X("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{X("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){zi(t)?X("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Bi(t)}await this.X(6e4)})}}class HC{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const n=new Set;let s=t,a=!0;return F.doWhile(()=>a===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!n.has(l))return X("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,s).next(d=>{s-=d,n.add(l)});a=!1})).next(()=>t-s)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.re(s,a)).next(d=>(X("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}re(e,t){let n=e;return t.changes.forEach((s,a)=>{const l=ow(a);Fp(l,n)>0&&(n=l)}),new vn(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}an.oe=-1;function Sh(r){return r==null}function bu(r){return r===0&&1/r==-1/0}function cw(r){return typeof r=="number"&&Number.isInteger(r)&&!bu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=N_(e)),e=WC(r.get(t),e);return N_(e)}function WC(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const a=r.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function N_(r){return r+""}function ar(r){const e=r.length;if(ye(e>=2),e===2)return ye(r.charAt(0)===""&&r.charAt(1)===""),Be.emptyPath();const t=e-2,n=[];let s="";for(let a=0;a<e;){const l=r.indexOf("",a);switch((l<0||l>t)&&de(),r.charAt(l+1)){case"":const d=r.substring(a,l);let f;s.length===0?f=d:(s+=d,f=s,s=""),n.push(f);break;case"":s+=r.substring(a,l),s+="\0";break;case"":s+=r.substring(a,l+1);break;default:de()}a=l+2}return new Be(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(r,e){return[r,Kt(e)]}function hw(r,e,t){return[r,Kt(e),t]}const QC={},JC=["prefixPath","collectionGroup","readTime","documentId"],YC=["prefixPath","collectionGroup","documentId"],XC=["collectionGroup","readTime","prefixPath","documentId"],ZC=["canonicalId","targetId"],ek=["targetId","path"],tk=["path","targetId"],nk=["collectionId","parent"],rk=["indexId","uid"],ik=["uid","sequenceNumber"],sk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ok=["indexId","uid","orderedDocumentKey"],ak=["userId","collectionPath","documentId"],uk=["userId","collectionPath","largestBatchId"],lk=["userId","collectionGroup","largestBatchId"],dw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ck=[...dw,"documentOverlays"],fw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pw=fw,Bp=[...pw,"indexConfiguration","indexState","indexEntries"],hk=Bp,dk=[...Bp,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends uw{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Tt(r,e){const t=pe(r);return Di.C(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ji(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function mw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new Qe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}}class Ic{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,n,s,a){this.key=e,this.value=t,this.color=n??bt.RED,this.left=s??bt.EMPTY,this.right=a??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,a){return new bt(e??this.key,t??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,n),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return bt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,t,n,s,a){return this}insert(e,t,n){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O_(this.data.getIterator())}getIteratorFrom(e){return new O_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $e(this.comparator);return t.data=e,t}}class O_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new un([])}unionWith(e){let t=new $e(it.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gw("Invalid base64 string: "+a):a}}(e);return new dt(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const fk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(r){if(ye(!!r),typeof r=="string"){let e=0;const t=fk.exec(r);if(ye(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:et(r.seconds),nanos:et(r.nanos)}}function et(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function qr(r){return typeof r=="string"?dt.fromBase64String(r):dt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Rh(r){const e=r.mapValue.fields.__previous_value__;return zp(e)?Rh(e):e}function Ou(r){const e=$r(r.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t,n,s,a,l,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class Ns{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ns("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ns&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mc={nullValue:"NULL_VALUE"};function Li(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?zp(r)?4:yw(r)?9007199254740991:Ah(r)?10:11:de()}function dr(r,e){if(r===e)return!0;const t=Li(r);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ou(r).isEqual(Ou(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=$r(s.timestampValue),d=$r(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(s,a){return qr(s.bytesValue).isEqual(qr(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return et(s.geoPointValue.latitude)===et(a.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return et(s.integerValue)===et(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=et(s.doubleValue),d=et(a.doubleValue);return l===d?bu(l)===bu(d):isNaN(l)&&isNaN(d)}return!1}(r,e);case 9:return Wo(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},d=a.mapValue.fields||{};if(b_(l)!==b_(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(d[f]===void 0||!dr(l[f],d[f])))return!1;return!0}(r,e);default:return de()}}function Lu(r,e){return(r.values||[]).find(t=>dr(t,e))!==void 0}function Mi(r,e){if(r===e)return 0;const t=Li(r),n=Li(e);if(t!==n)return Re(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(r.booleanValue,e.booleanValue);case 2:return function(a,l){const d=et(a.integerValue||a.doubleValue),f=et(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(r,e);case 3:return L_(r.timestampValue,e.timestampValue);case 4:return L_(Ou(r),Ou(e));case 5:return Re(r.stringValue,e.stringValue);case 6:return function(a,l){const d=qr(a),f=qr(l);return d.compareTo(f)}(r.bytesValue,e.bytesValue);case 7:return function(a,l){const d=a.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=Re(d[m],f[m]);if(v!==0)return v}return Re(d.length,f.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,l){const d=Re(et(a.latitude),et(l.latitude));return d!==0?d:Re(et(a.longitude),et(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return M_(r.arrayValue,e.arrayValue);case 10:return function(a,l){var d,f,m,v;const w=a.fields||{},T=l.fields||{},C=(d=w.value)===null||d===void 0?void 0:d.arrayValue,V=(f=T.value)===null||f===void 0?void 0:f.arrayValue,z=Re(((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:M_(C,V)}(r.mapValue,e.mapValue);case 11:return function(a,l){if(a===Ai.mapValue&&l===Ai.mapValue)return 0;if(a===Ai.mapValue)return 1;if(l===Ai.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=l.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const T=Re(f[w],v[w]);if(T!==0)return T;const C=Mi(d[f[w]],m[v[w]]);if(C!==0)return C}return Re(f.length,v.length)}(r.mapValue,e.mapValue);default:throw de()}}function L_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Re(r,e);const t=$r(r),n=$r(e),s=Re(t.seconds,n.seconds);return s!==0?s:Re(t.nanos,n.nanos)}function M_(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const a=Mi(t[s],n[s]);if(a)return a}return Re(t.length,n.length)}function Qo(r){return Yf(r)}function Yf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=$r(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return qr(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return oe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",s=!0;for(const a of t.values||[])s?s=!1:n+=",",n+=Yf(a);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of n)a?a=!1:s+=",",s+=`${l}:${Yf(t.fields[l])}`;return s+"}"}(r.mapValue):de()}function Fc(r){switch(Li(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rh(r);return e?16+Fc(e):16;case 5:return 2*r.stringValue.length;case 6:return qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,a)=>s+Fc(a),0)}(r.arrayValue);case 10:case 11:return function(n){let s=0;return ji(n.fields,(a,l)=>{s+=a.length+Fc(l)}),s}(r.mapValue);default:throw de()}}function Mu(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Xf(r){return!!r&&"integerValue"in r}function Fu(r){return!!r&&"arrayValue"in r}function F_(r){return!!r&&"nullValue"in r}function U_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uc(r){return!!r&&"mapValue"in r}function Ah(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Su(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ji(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Su(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Su(r.arrayValue.values[t]);return e}return Object.assign({},r)}function yw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const _w={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function mk(r){return"nullValue"in r?Mc:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Mu(Ns.empty(),oe.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Ah(r)?_w:{mapValue:{}}:de()}function gk(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Mu(Ns.empty(),oe.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?_w:"mapValue"in r?Ah(r)?{mapValue:{}}:Ai:de()}function B_(r,e){const t=Mi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function z_(r,e){const t=Mi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(t)}setAll(e){let t=it.emptyPath(),n={},s=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,n,s),n={},s=[],t=d.popLast()}l?n[d.lastSegment()]=Su(l):s.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,s)}delete(e){const t=this.field(e.popLast());Uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Uc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){ji(t,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new qt(Su(this.value))}}function vw(r){const e=[];return ji(r.fields,(t,n)=>{const s=new it([t]);if(Uc(n)){const a=vw(n.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t,n,s,a,l,d){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new at(e,0,ve.min(),ve.min(),ve.min(),qt.empty(),0)}static newFoundDocument(e,t,n,s){return new at(e,1,t,ve.min(),n,s,0)}static newNoDocument(e,t){return new at(e,2,t,ve.min(),ve.min(),qt.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,ve.min(),ve.min(),qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.position=e,this.inclusive=t}}function j_(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const a=e[s],l=r.position[s];if(a.field.isKeyField()?n=oe.comparator(oe.fromName(l.referenceValue),t.key):n=Mi(l,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function $_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t="asc"){this.field=e,this.dir=t}}function yk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{}class De extends Ew{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _k(e,t,n):t==="array-contains"?new wk(e,n):t==="in"?new Aw(e,n):t==="not-in"?new Ik(e,n):t==="array-contains-any"?new Tk(e,n):new De(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new vk(e,n):new Ek(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Mi(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Mi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class je extends Ew{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new je(e,t)}matches(e){return Yo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Yo(r){return r.op==="and"}function Zf(r){return r.op==="or"}function jp(r){return ww(r)&&Yo(r)}function ww(r){for(const e of r.filters)if(e instanceof je)return!1;return!0}function ep(r){if(r instanceof De)return r.field.canonicalString()+r.op.toString()+Qo(r.value);if(jp(r))return r.filters.map(e=>ep(e)).join(",");{const e=r.filters.map(t=>ep(t)).join(",");return`${r.op}(${e})`}}function Iw(r,e){return r instanceof De?function(n,s){return s instanceof De&&n.op===s.op&&n.field.isEqual(s.field)&&dr(n.value,s.value)}(r,e):r instanceof je?function(n,s){return s instanceof je&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,l,d)=>a&&Iw(l,s.filters[d]),!0):!1}(r,e):void de()}function Tw(r,e){const t=r.filters.concat(e);return je.create(t,r.op)}function Sw(r){return r instanceof De?function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`}(r):r instanceof je?function(t){return t.op.toString()+" {"+t.getFilters().map(Sw).join(" ,")+"}"}(r):"Filter"}class _k extends De{constructor(e,t,n){super(e,t,n),this.key=oe.fromName(n.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class vk extends De{constructor(e,t){super(e,"in",t),this.keys=Rw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ek extends De{constructor(e,t){super(e,"not-in",t),this.keys=Rw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rw(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>oe.fromName(n.referenceValue))}class wk extends De{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fu(t)&&Lu(t.arrayValue,this.value)}}class Aw extends De{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lu(this.value.arrayValue,t)}}class Ik extends De{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Lu(this.value.arrayValue,t)}}class Tk extends De{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Lu(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t=null,n=[],s=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function tp(r,e=null,t=[],n=[],s=null,a=null,l=null){return new Sk(r,e,t,n,s,a,l)}function Vs(r){const e=pe(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>ep(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Qo(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Qo(n)).join(",")),e.ue=t}return e.ue}function Ju(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!yk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Iw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!$_(r.startAt,e.startAt)&&$_(r.endAt,e.endAt)}function th(r){return oe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function nh(r,e){return r.filters.filter(t=>t instanceof De&&t.field.isEqual(e))}function q_(r,e,t){let n=Mc,s=!0;for(const a of nh(r,e)){let l=Mc,d=!0;switch(a.op){case"<":case"<=":l=mk(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=Mc}B_({value:n,inclusive:s},{value:l,inclusive:d})<0&&(n=l,s=d)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const l=t.position[a];B_({value:n,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(n=l,s=t.inclusive);break}}return{value:n,inclusive:s}}function K_(r,e,t){let n=Ai,s=!0;for(const a of nh(r,e)){let l=Ai,d=!0;switch(a.op){case">=":case">":l=gk(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Ai}z_({value:n,inclusive:s},{value:l,inclusive:d})>0&&(n=l,s=d)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const l=t.position[a];z_({value:n,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(n=l,s=t.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t=null,n=[],s=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Pw(r,e,t,n,s,a,l,d){return new ha(r,e,t,n,s,a,l,d)}function Ph(r){return new ha(r)}function G_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Cw(r){return r.collectionGroup!==null}function Ru(r){const e=pe(r);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new $e(it.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Uu(a,n))}),t.has(it.keyField().canonicalString())||e.ce.push(new Uu(it.keyField(),n))}return e.ce}function _n(r){const e=pe(r);return e.le||(e.le=Rk(e,Ru(r))),e.le}function Rk(r,e){if(r.limitType==="F")return tp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Uu(s.field,a)});const t=r.endAt?new Jo(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Jo(r.startAt.position,r.startAt.inclusive):null;return tp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function np(r,e){const t=r.filters.concat([e]);return new ha(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function rh(r,e,t){return new ha(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ch(r,e){return Ju(_n(r),_n(e))&&r.limitType===e.limitType}function kw(r){return`${Vs(_n(r))}|lt:${r.limitType}`}function Fo(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>Sw(s)).join(", ")}]`),Sh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Qo(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Qo(s)).join(",")),`Target(${n})`}(_n(r))}; limitType=${r.limitType})`}function Yu(r,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):oe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(r,e)&&function(n,s){for(const a of Ru(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(r,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(r,e)&&function(n,s){return!(n.startAt&&!function(l,d,f){const m=j_(l,d,f);return l.inclusive?m<=0:m<0}(n.startAt,Ru(n),s)||n.endAt&&!function(l,d,f){const m=j_(l,d,f);return l.inclusive?m>=0:m>0}(n.endAt,Ru(n),s))}(r,e)}function xw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Dw(r){return(e,t)=>{let n=!1;for(const s of Ru(r)){const a=Ak(s,e,t);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function Ak(r,e,t){const n=r.field.isKeyField()?oe.comparator(e.key,t.key):function(a,l,d){const f=l.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Mi(f,m):de()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(t,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return mw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new Qe(oe.comparator);function yn(){return Pk}const Nw=new Qe(oe.comparator);function _u(...r){let e=Nw;for(const t of r)e=e.insert(t.key,t);return e}function Vw(r){let e=Nw;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ur(){return Au()}function bw(){return Au()}function Au(){return new Kr(r=>r.toString(),(r,e)=>r.isEqual(e))}const Ck=new Qe(oe.comparator),kk=new $e(oe.comparator);function Pe(...r){let e=kk;for(const t of r)e=e.add(t);return e}const xk=new $e(Re);function $p(){return xk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function Ow(r){return{integerValue:""+r}}function Dk(r,e){return cw(e)?Ow(e):qp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function Nk(r,e,t){return r instanceof Bu?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&zp(a)&&(a=Rh(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):r instanceof Xo?Mw(r,e):r instanceof Zo?Fw(r,e):function(s,a){const l=Lw(s,a),d=H_(l)+H_(s.Pe);return Xf(l)&&Xf(s.Pe)?Ow(d):qp(s.serializer,d)}(r,e)}function Vk(r,e,t){return r instanceof Xo?Mw(r,e):r instanceof Zo?Fw(r,e):t}function Lw(r,e){return r instanceof zu?function(n){return Xf(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Bu extends kh{}class Xo extends kh{constructor(e){super(),this.elements=e}}function Mw(r,e){const t=Uw(e);for(const n of r.elements)t.some(s=>dr(s,n))||t.push(n);return{arrayValue:{values:t}}}class Zo extends kh{constructor(e){super(),this.elements=e}}function Fw(r,e){let t=Uw(e);for(const n of r.elements)t=t.filter(s=>!dr(s,n));return{arrayValue:{values:t}}}class zu extends kh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function H_(r){return et(r.integerValue||r.doubleValue)}function Uw(r){return Fu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.field=e,this.transform=t}}function Ok(r,e){return r.field.isEqual(e.field)&&function(n,s){return n instanceof Xo&&s instanceof Xo||n instanceof Zo&&s instanceof Zo?Wo(n.elements,s.elements,dr):n instanceof zu&&s instanceof zu?dr(n.Pe,s.Pe):n instanceof Bu&&s instanceof Bu}(r.transform,e.transform)}class Lk{constructor(e,t){this.version=e,this.transformResults=t}}class Jt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class xh{}function Bw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Dh(r.key,Jt.none()):new da(r.key,r.data,Jt.none());{const t=r.data,n=qt.empty();let s=new $e(it.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?n.delete(a):n.set(a,l),s=s.add(a)}return new Gr(r.key,n,new un(s.toArray()),Jt.none())}}function Mk(r,e,t){r instanceof da?function(s,a,l){const d=s.value.clone(),f=Q_(s.fieldTransforms,a,l.transformResults);d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(r,e,t):r instanceof Gr?function(s,a,l){if(!Bc(s.precondition,a))return void a.convertToUnknownDocument(l.version);const d=Q_(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(zw(s)),f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(r,e,t):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Pu(r,e,t,n){return r instanceof da?function(a,l,d,f){if(!Bc(a.precondition,l))return d;const m=a.value.clone(),v=J_(a.fieldTransforms,f,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(r,e,t,n):r instanceof Gr?function(a,l,d,f){if(!Bc(a.precondition,l))return d;const m=J_(a.fieldTransforms,f,l),v=l.data;return v.setAll(zw(a)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(r,e,t,n):function(a,l,d){return Bc(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(r,e,t)}function Fk(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),a=Lw(n.transform,s||null);a!=null&&(t===null&&(t=qt.empty()),t.set(n.field,a))}return t||null}function W_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Wo(n,s,(a,l)=>Ok(a,l))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class da extends xh{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gr extends xh{constructor(e,t,n,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function zw(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Q_(r,e,t){const n=new Map;ye(r.length===t.length);for(let s=0;s<t.length;s++){const a=r[s],l=a.transform,d=e.data.field(a.field);n.set(a.field,Vk(l,d,t[s]))}return n}function J_(r,e,t){const n=new Map;for(const s of r){const a=s.transform,l=t.data.field(s.field);n.set(s.field,Nk(a,l,e))}return n}class Dh extends xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jw extends xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Mk(a,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=bw();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(s.key)?null:d;const f=Bw(l,d);f!==null&&n.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(t,n)=>W_(t,n))&&Wo(this.baseMutations,e.baseMutations,(t,n)=>W_(t,n))}}class Gp{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){ye(e.mutations.length===n.length);let s=function(){return Ck}();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,n[l].version);return new Gp(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Oe;function Bk(r){switch(r){default:return de();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function $w(r){if(r===void 0)return ht("GRPC error has no .code"),G.UNKNOWN;switch(r){case mt.OK:return G.OK;case mt.CANCELLED:return G.CANCELLED;case mt.UNKNOWN:return G.UNKNOWN;case mt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case mt.INTERNAL:return G.INTERNAL;case mt.UNAVAILABLE:return G.UNAVAILABLE;case mt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case mt.NOT_FOUND:return G.NOT_FOUND;case mt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case mt.ABORTED:return G.ABORTED;case mt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case mt.DATA_LOSS:return G.DATA_LOSS;default:return de()}}(Oe=mt||(mt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new ki([4294967295,4294967295],0);function Y_(r){const e=zk().encode(r),t=new YE;return t.update(e),new Uint8Array(t.digest())}function X_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ki([t,n],0),new ki([s,a],0)]}class Wp{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vu(`Invalid padding: ${t}`);if(n<0)throw new vu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new vu(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ki.fromNumber(this.Te)}de(e,t,n){let s=e.add(t.multiply(ki.fromNumber(n)));return s.compare(jk)===1&&(s=new ki([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Y_(e),[n,s]=X_(t);for(let a=0;a<this.hashCount;a++){const l=this.de(n,s,a);if(!this.Ee(l))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Wp(a,s,t);return n.forEach(d=>l.insert(d)),l}insert(e){if(this.Te===0)return;const t=Y_(e),[n,s]=X_(t);for(let a=0;a<this.hashCount;a++){const l=this.de(n,s,a);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t,n,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Xu(ve.min(),s,new Qe(Re),yn(),Pe())}}class Zu{constructor(e,t,n,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Zu(n,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,n,s){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=s}}class qw{constructor(e,t){this.targetId=e,this.me=t}}class Kw{constructor(e,t,n=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class Z_{constructor(){this.fe=0,this.ge=ev(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),t=Pe(),n=Pe();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:de()}}),new Zu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=ev()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $k{constructor(e){this.Be=e,this.Le=new Map,this.ke=yn(),this.qe=Tc(),this.Qe=Tc(),this.Ke=new Qe(Re)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.je(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.De(e.resumeToken));break;default:de()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((n,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,n=e.me.count,s=this.Ye(t);if(s){const a=s.target;if(th(a))if(n===0){const l=new oe(a.path);this.We(t,l,at.newNoDocument(l,ve.min()))}else ye(n===1);else{const l=this.Ze(t);if(l!==n){const d=this.Xe(e),f=d?this.et(d,e,l):1;if(f!==0){this.He(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,m)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=t;let l,d;try{l=qr(n).toUint8Array()}catch(f){if(f instanceof gw)return Ho("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Wp(l,s,a)}catch(f){return Ho(f instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Te===0?null:d}et(e,t,n){return t.me.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let s=0;return n.forEach(a=>{const l=this.Be.nt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.We(t,a,null),s++)}),s}it(e){const t=new Map;this.Le.forEach((a,l)=>{const d=this.Ye(l);if(d){if(a.current&&th(d.target)){const f=new oe(d.target.path);this.st(f).has(l)||this.ot(l,f)||this.We(l,f,at.newNoDocument(f,e))}a.be&&(t.set(l,a.ve()),a.Ce())}});let n=Pe();this.Qe.forEach((a,l)=>{let d=!0;l.forEachWhile(f=>{const m=this.Ye(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(n=n.add(a))}),this.ke.forEach((a,l)=>l.setReadTime(e));const s=new Xu(e,t,this.Ke,this.ke,n);return this.ke=yn(),this.qe=Tc(),this.Qe=Tc(),this.Ke=new Qe(Re),s}Ue(e,t){if(!this.je(e))return;const n=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Z_,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new $e(Re),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $e(Re),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Z_),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Tc(){return new Qe(oe.comparator)}function ev(){return new Qe(oe.comparator)}const qk={asc:"ASCENDING",desc:"DESCENDING"},Kk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gk={and:"AND",or:"OR"};class Hk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rp(r,e){return r.useProto3Json||Sh(e)?e:{value:e}}function ea(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Wk(r,e){return ea(r,e.toTimestamp())}function Yt(r){return ye(!!r),ve.fromTimestamp(function(t){const n=$r(t);return new st(n.seconds,n.nanos)}(r))}function Qp(r,e){return ip(r,e).canonicalString()}function ip(r,e){const t=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Hw(r){const e=Be.fromString(r);return ye(nI(e)),e}function ih(r,e){return Qp(r.databaseId,e.path)}function Cs(r,e){const t=Hw(e);if(t.get(1)!==r.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new oe(Jw(t))}function Ww(r,e){return Qp(r.databaseId,e)}function Qw(r){const e=Hw(r);return e.length===4?Be.emptyPath():Jw(e)}function sp(r){return new Be(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Jw(r){return ye(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function tv(r,e,t){return{name:ih(r,e),fields:t.value.mapValue.fields}}function Qk(r,e,t){const n=Cs(r,e.name),s=Yt(e.updateTime),a=e.createTime?Yt(e.createTime):ve.min(),l=new qt({mapValue:{fields:e.fields}}),d=at.newFoundDocument(n,s,a,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Jk(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(ye(v===void 0||typeof v=="string"),dt.fromBase64String(v||"")):(ye(v===void 0||v instanceof Buffer||v instanceof Uint8Array),dt.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(m){const v=m.code===void 0?G.UNKNOWN:$w(m.code);return new ie(v,m.message||"")}(l);t=new Kw(n,s,a,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Cs(r,n.document.name),a=Yt(n.document.updateTime),l=n.document.createTime?Yt(n.document.createTime):ve.min(),d=new qt({mapValue:{fields:n.document.fields}}),f=at.newFoundDocument(s,a,l,d),m=n.targetIds||[],v=n.removedTargetIds||[];t=new zc(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Cs(r,n.document),a=n.readTime?Yt(n.readTime):ve.min(),l=at.newNoDocument(s,a),d=n.removedTargetIds||[];t=new zc([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Cs(r,n.document),a=n.removedTargetIds||[];t=new zc([],a,s,null)}else{if(!("filter"in e))return de();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,l=new Uk(s,a),d=n.targetId;t=new qw(d,l)}}return t}function sh(r,e){let t;if(e instanceof da)t={update:tv(r,e.key,e.value)};else if(e instanceof Dh)t={delete:ih(r,e.key)};else if(e instanceof Gr)t={update:tv(r,e.key,e.data),updateMask:n1(e.fieldMask)};else{if(!(e instanceof jw))return de();t={verify:ih(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,l){const d=l.transform;if(d instanceof Bu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Xo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Zo)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof zu)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw de()}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:Wk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:de()}(r,e.precondition)),t}function op(r,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?Jt.updateTime(Yt(a.updateTime)):a.exists!==void 0?Jt.exists(a.exists):Jt.none()}(e.currentDocument):Jt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(l,d){let f=null;if("setToServerValue"in d)ye(d.setToServerValue==="REQUEST_TIME"),f=new Bu;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];f=new Xo(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];f=new Zo(v)}else"increment"in d?f=new zu(l,d.increment):de();const m=it.fromServerFormat(d.fieldPath);return new bk(m,f)}(r,s)):[];if(e.update){e.update.name;const s=Cs(r,e.update.name),a=new qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(f){const m=f.fieldPaths||[];return new un(m.map(v=>it.fromServerFormat(v)))}(e.updateMask);return new Gr(s,a,l,t,n)}return new da(s,a,t,n)}if(e.delete){const s=Cs(r,e.delete);return new Dh(s,t)}if(e.verify){const s=Cs(r,e.verify);return new jw(s,t)}return de()}function Yk(r,e){return r&&r.length>0?(ye(e!==void 0),r.map(t=>function(s,a){let l=s.updateTime?Yt(s.updateTime):Yt(a);return l.isEqual(ve.min())&&(l=Yt(a)),new Lk(l,s.transformResults||[])}(t,e))):[]}function Yw(r,e){return{documents:[Ww(r,e.path)]}}function Xw(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Ww(r,s);const a=function(m){if(m.length!==0)return tI(je.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(m){if(m.length!==0)return m.map(v=>function(T){return{field:Uo(T.field),direction:Zk(T.dir)}}(v))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=rp(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ct:t,parent:s}}function Zw(r){let e=Qw(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){ye(n===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const T=eI(w);return T instanceof je&&jp(T)?T.getFilters():[T]}(t.where));let l=[];t.orderBy&&(l=function(w){return w.map(T=>function(V){return new Uu(Bo(V.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,Sh(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(w){const T=!!w.before,C=w.values||[];return new Jo(C,T)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const T=!w.before,C=w.values||[];return new Jo(C,T)}(t.endAt)),Pw(e,s,l,a,d,"F",f,m)}function Xk(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eI(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Bo(t.unaryFilter.field);return De.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Bo(t.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bo(t.unaryFilter.field);return De.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Bo(t.unaryFilter.field);return De.create(l,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(r):r.fieldFilter!==void 0?function(t){return De.create(Bo(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return je.create(t.compositeFilter.filters.map(n=>eI(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(t.compositeFilter.op))}(r):de()}function Zk(r){return qk[r]}function e1(r){return Kk[r]}function t1(r){return Gk[r]}function Uo(r){return{fieldPath:r.canonicalString()}}function Bo(r){return it.fromServerFormat(r.fieldPath)}function tI(r){return r instanceof De?function(t){if(t.op==="=="){if(U_(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(F_(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(U_(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NAN"}};if(F_(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:e1(t.op),value:t.value}}}(r):r instanceof je?function(t){const n=t.getFilters().map(s=>tI(s));return n.length===1?n[0]:{compositeFilter:{op:t1(t.op),filters:n}}}(r):de()}function n1(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nI(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t,n,s,a=ve.min(),l=ve.min(),d=dt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.ht=e}}function r1(r,e){let t;if(e.document)t=Qk(r.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=oe.fromSegments(e.noDocument.path),s=Os(e.noDocument.readTime);t=at.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return de();{const n=oe.fromSegments(e.unknownDocument.path),s=Os(e.unknownDocument.version);t=at.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime(function(s){const a=new st(s[0],s[1]);return ve.fromTimestamp(a)}(e.readTime)),t}function nv(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(a,l){return{name:ih(a,l.key),fields:l.data.value.mapValue.fields,updateTime:ea(a,l.version.toTimestamp()),createTime:ea(a,l.createTime.toTimestamp())}}(r.ht,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:bs(e.version)};else{if(!e.isUnknownDocument())return de();n.unknownDocument={path:t.path.toArray(),version:bs(e.version)}}return n}function oh(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function bs(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Os(r){const e=new st(r.seconds,r.nanoseconds);return ve.fromTimestamp(e)}function Ts(r,e){const t=(e.baseMutations||[]).map(a=>op(r.ht,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];l.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map(a=>op(r.ht,a)),s=st.fromMillis(e.localWriteTimeMs);return new Kp(e.batchId,s,t,n)}function Eu(r){const e=Os(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Os(r.lastLimboFreeSnapshotVersion):ve.min();let n;return n=function(a){return a.documents!==void 0}(r.query)?function(a){return ye(a.documents.length===1),_n(Ph(Qw(a.documents[0])))}(r.query):function(a){return _n(Zw(a))}(r.query),new Fr(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,dt.fromBase64String(r.resumeToken))}function iI(r,e){const t=bs(e.snapshotVersion),n=bs(e.lastLimboFreeSnapshotVersion);let s;s=th(e.target)?Yw(r.ht,e.target):Xw(r.ht,e.target).ct;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vs(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function sI(r){const e=Zw({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rh(e,e.limit,"L"):e}function Nf(r,e){return new Hp(e.largestBatchId,op(r.ht,e.overlayMutation))}function rv(r,e){const t=e.path.lastSegment();return[r,Kt(e.path.popLast()),t]}function iv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:bs(n.readTime),documentKey:Kt(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{getBundleMetadata(e,t){return sv(e).get(t).next(n=>{if(n)return function(a){return{id:a.bundleId,createTime:Os(a.createTime),version:a.version}}(n)})}saveBundleMetadata(e,t){return sv(e).put(function(s){return{bundleId:s.id,createTime:bs(Yt(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return ov(e).get(t).next(n=>{if(n)return function(a){return{name:a.name,query:sI(a.bundledQuery),readTime:Os(a.readTime)}}(n)})}saveNamedQuery(e,t){return ov(e).put(function(s){return{name:s.name,readTime:bs(Yt(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function sv(r){return Tt(r,"bundles")}function ov(r){return Tt(r,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){const n=t.uid||"";return new Nh(e,n)}getOverlay(e,t){return du(e).get(rv(this.userId,t)).next(n=>n?Nf(this.serializer,n):null)}getOverlays(e,t){const n=ur();return F.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,t,n){const s=[];return n.forEach((a,l)=>{const d=new Hp(t,l);s.push(this.Tt(e,d))}),F.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach(l=>s.add(Kt(l.getCollectionPath())));const a=[];return s.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,n+1],!1,!0);a.push(du(e).j("collectionPathOverlayIndex",d))}),F.waitFor(a)}getOverlaysForCollection(e,t,n){const s=ur(),a=Kt(t),l=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return du(e).U("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const m=Nf(this.serializer,f);s.set(m.getKey(),m)}return s})}getOverlaysForCollectionGroup(e,t,n,s){const a=ur();let l;const d=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return du(e).J({index:"collectionGroupOverlayIndex",range:d},(f,m,v)=>{const w=Nf(this.serializer,m);a.size()<s||w.largestBatchId===l?(a.set(w.getKey(),w),l=w.largestBatchId):v.done()}).next(()=>a)}Tt(e,t){return du(e).put(function(s,a,l){const[d,f,m]=rv(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:sh(s.ht,l.mutation)}}(this.serializer,this.userId,t))}}function du(r){return Tt(r,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{It(e){return Tt(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?dt.fromUint8Array(n):dt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.It(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(et(e.integerValue));else if("doubleValue"in e){const n=et(e.doubleValue);isNaN(n)?this.Rt(t,13):(this.Rt(t,15),bu(n)?t.Vt(0):t.Vt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Rt(t,20),typeof n=="string"&&(n=$r(n)),t.ft(`${n.seconds||""}`),t.Vt(n.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(qr(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Rt(t,45),t.Vt(n.latitude||0),t.Vt(n.longitude||0)}else"mapValue"in e?yw(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Ah(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):de()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const n=e.fields||{};this.Rt(t,55);for(const s of Object.keys(n))this.gt(s,t),this.Et(n[s],t)}bt(e,t){var n,s;const a=e.fields||{};this.Rt(t,53);const l="value",d=((s=(n=a[l].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.Rt(t,15),t.Vt(et(d)),this.gt(l,t),this.Et(a[l],t)}vt(e,t){const n=e.values||[];this.Rt(t,50);for(const s of n)this.Et(s,t)}St(e,t){this.Rt(t,37),oe.fromName(e).path.forEach(n=>{this.Rt(t,60),this.Ct(n,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}Ss.Ft=new Ss;function o1(r){if(r===0)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function av(r){const e=64-function(n){let s=0;for(let a=0;a<8;++a){const l=o1(255&n[a]);if(s+=l,l!==8)break}return s}(r);return Math.ceil(e/8)}class a1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.xt(n.value),n=t.next();this.Ot()}Nt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Bt(n.value),n=t.next();this.Lt()}kt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.xt(n);else if(n<2048)this.xt(960|n>>>6),this.xt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.xt(480|n>>>12),this.xt(128|63&n>>>6),this.xt(128|63&n);else{const s=t.codePointAt(0);this.xt(240|s>>>18),this.xt(128|63&s>>>12),this.xt(128|63&s>>>6),this.xt(128|63&s)}}this.Ot()}qt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Bt(n);else if(n<2048)this.Bt(960|n>>>6),this.Bt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Bt(480|n>>>12),this.Bt(128|63&n>>>6),this.Bt(128|63&n);else{const s=t.codePointAt(0);this.Bt(240|s>>>18),this.Bt(128|63&s>>>12),this.Bt(128|63&s>>>6),this.Bt(128|63&s)}}this.Lt()}Qt(e){const t=this.Kt(e),n=av(t);this.$t(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ut(e){const t=this.Kt(e),n=av(t);this.$t(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),n=(128&t[0])!=0;t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}xt(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Bt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Lt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class u1{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class l1{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class fu{constructor(){this.Jt=new a1,this.Yt=new u1(this.Jt),this.Zt=new l1(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,n,s){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=s}en(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Rs(this.indexId,this.documentKey,this.arrayValue,n)}}function vi(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=uv(r.arrayValue,e.arrayValue),t!==0?t:(t=uv(r.directionalValue,e.directionalValue),t!==0?t:oe.comparator(r.documentKey,e.documentKey)))}function uv(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.tn=new $e((t,n)=>it.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const t of e.filters){const n=t;n.isInequality()?this.tn=this.tn.add(n):this.rn.push(n)}}get sn(){return this.tn.size>1}on(e){if(ye(e.collectionGroup===this.collectionId),this.sn)return!1;const t=Qf(e);if(t!==void 0&&!this._n(t))return!1;const n=ws(e);let s=new Set,a=0,l=0;for(;a<n.length&&this._n(n[a]);++a)s=s.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.tn.size>0){const d=this.tn.getIterator().getNext();if(!s.has(d.field.canonicalString())){const f=n[a];if(!this.an(d,f)||!this.un(this.nn[l++],f))return!1}++a}for(;a<n.length;++a){const d=n[a];if(l>=this.nn.length||!this.un(this.nn[l++],d))return!1}return!0}cn(){if(this.sn)return null;let e=new $e(it.comparator);const t=[];for(const n of this.rn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Oc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Oc(n.field,0))}for(const n of this.nn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Oc(n.field,n.dir==="asc"?0:1)));return new eh(eh.UNKNOWN_ID,this.collectionId,t,Vu.empty())}_n(e){for(const t of this.rn)if(this.an(t,e))return!0;return!1}an(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}un(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(r){var e,t;if(ye(r instanceof De||r instanceof je),r instanceof De){if(r instanceof Aw){const s=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>De.create(r.field,"==",a)))||[];return je.create(s,"or")}return r}const n=r.filters.map(s=>oI(s));return je.create(n,r.op)}function c1(r){if(r.getFilters().length===0)return[];const e=lp(oI(r));return ye(aI(e)),ap(e)||up(e)?[e]:e.getFilters()}function ap(r){return r instanceof De}function up(r){return r instanceof je&&jp(r)}function aI(r){return ap(r)||up(r)||function(t){if(t instanceof je&&Zf(t)){for(const n of t.getFilters())if(!ap(n)&&!up(n))return!1;return!0}return!1}(r)}function lp(r){if(ye(r instanceof De||r instanceof je),r instanceof De)return r;if(r.filters.length===1)return lp(r.filters[0]);const e=r.filters.map(n=>lp(n));let t=je.create(e,r.op);return t=ah(t),aI(t)?t:(ye(t instanceof je),ye(Yo(t)),ye(t.filters.length>1),t.filters.reduce((n,s)=>Jp(n,s)))}function Jp(r,e){let t;return ye(r instanceof De||r instanceof je),ye(e instanceof De||e instanceof je),t=r instanceof De?e instanceof De?function(s,a){return je.create([s,a],"and")}(r,e):cv(r,e):e instanceof De?cv(e,r):function(s,a){if(ye(s.filters.length>0&&a.filters.length>0),Yo(s)&&Yo(a))return Tw(s,a.getFilters());const l=Zf(s)?s:a,d=Zf(s)?a:s,f=l.filters.map(m=>Jp(m,d));return je.create(f,"or")}(r,e),ah(t)}function cv(r,e){if(Yo(e))return Tw(e,r.getFilters());{const t=e.filters.map(n=>Jp(r,n));return je.create(t,"or")}}function ah(r){if(ye(r instanceof De||r instanceof je),r instanceof De)return r;const e=r.getFilters();if(e.length===1)return ah(e[0]);if(ww(r))return r;const t=e.map(s=>ah(s)),n=[];return t.forEach(s=>{s instanceof De?n.push(s):s instanceof je&&(s.op===r.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:je.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.ln=new Yp}addToCollectionParentIndex(e,t){return this.ln.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(vn.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(vn.min())}updateCollectionGroup(e,t,n){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class Yp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new $e(Be.comparator),a=!s.has(n);return this.index[t]=s.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new $e(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Uint8Array(0);class d1{constructor(e,t){this.databaseId=t,this.hn=new Yp,this.Pn=new Kr(n=>Vs(n),(n,s)=>Ju(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.hn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.hn.add(t)});const a={collectionId:n,parent:Kt(s)};return hv(e).put(a)}return F.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[iw(t),""],!1,!0);return hv(e).U(s).next(a=>{for(const l of a){if(l.collectionId!==t)break;n.push(ar(l.parent))}return n})}addFieldIndex(e,t){const n=pu(e),s=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])}}(t);delete s.indexId;const a=n.add(s);if(t.indexState){const l=Oo(e);return a.next(d=>{l.put(iv(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const n=pu(e),s=Oo(e),a=bo(e);return n.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=pu(e),n=bo(e),s=Oo(e);return t.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,t){return F.forEach(this.Tn(t),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const a=new lv(n).cn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const n=bo(e);let s=!0;const a=new Map;return F.forEach(this.Tn(t),l=>this.In(e,l).next(d=>{s&&(s=!!d),a.set(l,d)})).next(()=>{if(s){let l=Pe();const d=[];return F.forEach(a,(f,m)=>{X("IndexedDbIndexManager",`Using index ${function(J){return`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`}(f)} to execute ${Vs(t)}`);const v=function(J,re){const me=Qf(re);if(me===void 0)return null;for(const ce of nh(J,me.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null}(m,f),w=function(J,re){const me=new Map;for(const ce of ws(re))for(const k of nh(J,ce.fieldPath))switch(k.op){case"==":case"in":me.set(ce.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return me.set(ce.fieldPath.canonicalString(),k.value),Array.from(me.values())}return null}(m,f),T=function(J,re){const me=[];let ce=!0;for(const k of ws(re)){const S=k.kind===0?q_(J,k.fieldPath,J.startAt):K_(J,k.fieldPath,J.startAt);me.push(S.value),ce&&(ce=S.inclusive)}return new Jo(me,ce)}(m,f),C=function(J,re){const me=[];let ce=!0;for(const k of ws(re)){const S=k.kind===0?K_(J,k.fieldPath,J.endAt):q_(J,k.fieldPath,J.endAt);me.push(S.value),ce&&(ce=S.inclusive)}return new Jo(me,ce)}(m,f),V=this.dn(f,m,T),z=this.dn(f,m,C),b=this.En(f,m,w),K=this.An(f.indexId,v,V,T.inclusive,z,C.inclusive,b);return F.forEach(K,H=>n.G(H,t.limit).next(J=>{J.forEach(re=>{const me=oe.fromSegments(re.documentKey);l.has(me)||(l=l.add(me),d.push(me))})}))}).next(()=>d)}return F.resolve(null)})}Tn(e){let t=this.Pn.get(e);return t||(e.filters.length===0?t=[e]:t=c1(je.create(e.filters,"and")).map(n=>tp(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,t),t)}An(e,t,n,s,a,l,d){const f=(t!=null?t.length:1)*Math.max(n.length,a.length),m=f/(t!=null?t.length:1),v=[];for(let w=0;w<f;++w){const T=t?this.Rn(t[w/m]):Sc,C=this.Vn(e,T,n[w%m],s),V=this.mn(e,T,a[w%m],l),z=d.map(b=>this.Vn(e,T,b,!0));v.push(...this.createRange(C,V,z))}return v}Vn(e,t,n,s){const a=new Rs(e,oe.empty(),t,n);return s?a:a.en()}mn(e,t,n,s){const a=new Rs(e,oe.empty(),t,n);return s?a.en():a}In(e,t){const n=new lv(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(a=>{let l=null;for(const d of a)n.on(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let n=2;const s=this.Tn(t);return F.forEach(s,a=>this.In(e,a).next(l=>{l?n!==0&&l.fields.length<function(f){let m=new $e(it.comparator),v=!1;for(const w of f.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?v=!0:m=m.add(T.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(v?1:0)}(a)&&(n=1):n=0})).next(()=>function(l){return l.limit!==null}(t)&&s.length>1&&n===2?1:n)}fn(e,t){const n=new fu;for(const s of ws(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=n.Xt(s.kind);Ss.Ft.dt(a,l)}return n.Ht()}Rn(e){const t=new fu;return Ss.Ft.dt(e,t.Xt(0)),t.Ht()}gn(e,t){const n=new fu;return Ss.Ft.dt(Mu(this.databaseId,t),n.Xt(function(a){const l=ws(a);return l.length===0?0:l[l.length-1].kind}(e))),n.Ht()}En(e,t,n){if(n===null)return[];let s=[];s.push(new fu);let a=0;for(const l of ws(e)){const d=n[a++];for(const f of s)if(this.pn(t,l.fieldPath)&&Fu(d))s=this.yn(s,l,d);else{const m=f.Xt(l.kind);Ss.Ft.dt(d,m)}}return this.wn(s)}dn(e,t,n){return this.En(e,t,n.position)}wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ht();return t}yn(e,t,n){const s=[...e],a=[];for(const l of n.arrayValue.values||[])for(const d of s){const f=new fu;f.seed(d.Ht()),Ss.Ft.dt(l,f.Xt(t.kind)),a.push(f)}return a}pn(e,t){return!!e.filters.find(n=>n instanceof De&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=pu(e),s=Oo(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(a=>{const l=[];return F.forEach(a,d=>s.get([d.indexId,this.uid]).next(f=>{l.push(function(v,w){const T=w?new Vu(w.sequenceNumber,new vn(Os(w.readTime),new oe(ar(w.documentKey)),w.largestBatchId)):Vu.empty(),C=v.fields.map(([V,z])=>new Oc(it.fromServerFormat(V),z));return new eh(v.indexId,v.collectionGroup,C,T)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,s)=>{const a=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Re(n.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const s=pu(e),a=Oo(e);return this.Sn(e).next(l=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>F.forEach(d,f=>a.put(iv(f.indexId,this.uid,l,n)))))}updateIndexEntries(e,t){const n=new Map;return F.forEach(t,(s,a)=>{const l=n.get(s.collectionGroup);return(l?F.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(d=>(n.set(s.collectionGroup,d),F.forEach(d,f=>this.bn(e,s,f).next(m=>{const v=this.Dn(a,f);return m.isEqual(v)?F.resolve():this.vn(e,a,f,m,v)}))))})}Cn(e,t,n,s){return bo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Fn(e,t,n,s){return bo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}bn(e,t,n){const s=bo(e);let a=new $e(vi);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(l,d)=>{a=a.add(new Rs(n.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}Dn(e,t){let n=new $e(vi);const s=this.fn(t,e);if(s==null)return n;const a=Qf(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Fu(l))for(const d of l.arrayValue.values||[])n=n.add(new Rs(t.indexId,e.key,this.Rn(d),s))}else n=n.add(new Rs(t.indexId,e.key,Sc,s));return n}vn(e,t,n,s,a){X("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,w,T){const C=f.getIterator(),V=m.getIterator();let z=Vo(C),b=Vo(V);for(;z||b;){let K=!1,H=!1;if(z&&b){const J=v(z,b);J<0?H=!0:J>0&&(K=!0)}else z!=null?H=!0:K=!0;K?(w(b),b=Vo(V)):H?(T(z),z=Vo(C)):(z=Vo(C),b=Vo(V))}}(s,a,vi,d=>{l.push(this.Cn(e,t,n,d))},d=>{l.push(this.Fn(e,t,n,d))}),F.waitFor(l)}Sn(e){let t=1;return Oo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,a)=>{a.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((l,d)=>vi(l,d)).filter((l,d,f)=>!d||vi(l,f[d-1])!==0);const s=[];s.push(e);for(const l of n){const d=vi(l,e),f=vi(l,t);if(d===0)s[0]=e.en();else if(d>0&&f<0)s.push(l),s.push(l.en());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Mn(s[l],s[l+1]))return[];const d=[s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,Sc,[]],f=[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,Sc,[]];a.push(IDBKeyRange.bound(d,f))}return a}Mn(e,t){return vi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dv)}getMinOffset(e,t){return F.mapArray(this.Tn(t),n=>this.In(e,n).next(s=>s||de())).next(dv)}}function hv(r){return Tt(r,"collectionParents")}function bo(r){return Tt(r,"indexEntries")}function pu(r){return Tt(r,"indexConfiguration")}function Oo(r){return Tt(r,"indexState")}function dv(r){ye(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;Fp(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new vn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r,e,t){const n=r.store("mutations"),s=r.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=n.J({range:l},(v,w,T)=>(d++,T.delete()));a.push(f.next(()=>{ye(d===1)}));const m=[];for(const v of t.mutations){const w=hw(e,v.key.path,t.batchId);a.push(s.delete(w)),m.push(v.key)}return F.waitFor(a).next(()=>m)}function uh(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw de();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(41943040,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class Vh{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.xn={}}static Pt(e,t,n,s){ye(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Vh(a,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ei(e).J({index:"userMutationsIndex",range:n},(s,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,n,s){const a=zo(e),l=Ei(e);return l.add({}).next(d=>{ye(typeof d=="number");const f=new Kp(d,t,n,s),m=function(C,V,z){const b=z.baseMutations.map(H=>sh(C.ht,H)),K=z.mutations.map(H=>sh(C.ht,H));return{userId:V,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:b,mutations:K}}(this.serializer,this.userId,f),v=[];let w=new $e((T,C)=>Re(T.canonicalString(),C.canonicalString()));for(const T of s){const C=hw(this.userId,T.key.path,d);w=w.add(T.key.path.popLast()),v.push(l.put(m)),v.push(a.put(C,QC))}return w.forEach(T=>{v.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.xn[d]=f.keys()}),F.waitFor(v).next(()=>f)})}lookupMutationBatch(e,t){return Ei(e).get(t).next(n=>n?(ye(n.userId===this.userId),Ts(this.serializer,n)):null)}On(e,t){return this.xn[t]?F.resolve(this.xn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const s=n.keys();return this.xn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Ei(e).J({index:"userMutationsIndex",range:s},(l,d,f)=>{d.userId===this.userId&&(ye(d.batchId>=n),a=Ts(this.serializer,d)),f.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ei(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,a,l)=>{n=a.batchId,l.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ei(e).U("userMutationsIndex",t).next(n=>n.map(s=>Ts(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Lc(this.userId,t.path),s=IDBKeyRange.lowerBound(n),a=[];return zo(e).J({range:s},(l,d,f)=>{const[m,v,w]=l,T=ar(v);if(m===this.userId&&t.path.isEqual(T))return Ei(e).get(w).next(C=>{if(!C)throw de();ye(C.userId===this.userId),a.push(Ts(this.serializer,C))});f.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $e(Re);const s=[];return t.forEach(a=>{const l=Lc(this.userId,a.path),d=IDBKeyRange.lowerBound(l),f=zo(e).J({range:d},(m,v,w)=>{const[T,C,V]=m,z=ar(C);T===this.userId&&a.path.isEqual(z)?n=n.add(V):w.done()});s.push(f)}),F.waitFor(s).next(()=>this.Nn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,a=Lc(this.userId,n),l=IDBKeyRange.lowerBound(a);let d=new $e(Re);return zo(e).J({range:l},(f,m,v)=>{const[w,T,C]=f,V=ar(T);w===this.userId&&n.isPrefixOf(V)?V.length===s&&(d=d.add(C)):v.done()}).next(()=>this.Nn(e,d))}Nn(e,t){const n=[],s=[];return t.forEach(a=>{s.push(Ei(e).get(a).next(l=>{if(l===null)throw de();ye(l.userId===this.userId),n.push(Ts(this.serializer,l))}))}),F.waitFor(s).next(()=>n)}removeMutationBatch(e,t){return uI(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Bn(t.batchId)}),F.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Bn(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();const n=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),s=[];return zo(e).J({range:n},(a,l,d)=>{if(a[0]===this.userId){const f=ar(a[1]);s.push(f)}else d.done()}).next(()=>{ye(s.length===0)})})}containsKey(e,t){return lI(e,this.userId,t)}Ln(e){return cI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lI(r,e,t){const n=Lc(e,t.path),s=n[1],a=IDBKeyRange.lowerBound(n);let l=!1;return zo(r).J({range:a,H:!0},(d,f,m)=>{const[v,w,T]=d;v===e&&w===s&&(l=!0),m.done()}).next(()=>l)}function Ei(r){return Tt(r,"mutations")}function zo(r){return Tt(r,"documentMutations")}function cI(r){return Tt(r,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ls(0)}static Qn(){return new Ls(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Kn(e).next(t=>{const n=new Ls(t.highestTargetId);return t.highestTargetId=n.next(),this.$n(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(t=>ve.fromTimestamp(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.Kn(e).next(s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.$n(e,s)))}addTargetData(e,t){return this.Un(e,t).next(()=>this.Kn(e).next(n=>(n.targetCount+=1,this.Wn(t,n),this.$n(e,n))))}updateTargetData(e,t){return this.Un(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lo(e).delete(t.targetId)).next(()=>this.Kn(e)).next(n=>(ye(n.targetCount>0),n.targetCount-=1,this.$n(e,n)))}removeTargets(e,t,n){let s=0;const a=[];return Lo(e).J((l,d)=>{const f=Eu(d);f.sequenceNumber<=t&&n.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))}).next(()=>F.waitFor(a)).next(()=>s)}forEachTarget(e,t){return Lo(e).J((n,s)=>{const a=Eu(s);t(a)})}Kn(e){return pv(e).get("targetGlobalKey").next(t=>(ye(t!==null),t))}$n(e,t){return pv(e).put("targetGlobalKey",t)}Un(e,t){return Lo(e).put(iI(this.serializer,t))}Wn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Kn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=Vs(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return Lo(e).J({range:s,index:"queryTargetsIndex"},(l,d,f)=>{const m=Eu(d);Ju(t,m.target)&&(a=m,f.done())}).next(()=>a)}addMatchingKeys(e,t,n){const s=[],a=Ri(e);return t.forEach(l=>{const d=Kt(l.path);s.push(a.put({targetId:n,path:d})),s.push(this.referenceDelegate.addReference(e,n,l))}),F.waitFor(s)}removeMatchingKeys(e,t,n){const s=Ri(e);return F.forEach(t,a=>{const l=Kt(a.path);return F.waitFor([s.delete([n,l]),this.referenceDelegate.removeReference(e,n,a)])})}removeMatchingKeysForTargetId(e,t){const n=Ri(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ri(e);let a=Pe();return s.J({range:n,H:!0},(l,d,f)=>{const m=ar(l[1]),v=new oe(m);a=a.add(v)}).next(()=>a)}containsKey(e,t){const n=Kt(t.path),s=IDBKeyRange.bound([n],[iw(n)],!1,!0);let a=0;return Ri(e).J({index:"documentTargetsIndex",H:!0,range:s},([l,d],f,m)=>{l!==0&&(a++,m.done())}).next(()=>a>0)}ut(e,t){return Lo(e).get(t).next(n=>n?Eu(n):null)}}function Lo(r){return Tt(r,"targets")}function pv(r){return Tt(r,"targetGlobal")}function Ri(r){return Tt(r,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv([r,e],[t,n]){const s=Re(r,t);return s===0?Re(e,n):s}class p1{constructor(e){this.Gn=e,this.buffer=new $e(mv),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();mv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hI{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){X("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zi(t)?X("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Bi(t)}await this.Yn(3e5)})}}class m1{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return F.resolve(an.oe);const n=new p1(t);return this.Zn.forEachTarget(e,s=>n.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>n.Hn(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(fv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let n,s,a,l,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(n=w,d=Date.now(),this.removeTargets(e,n,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,n))).next(w=>(m=Date.now(),Mo()<=xe.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${s} in `+(d-l)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w})))}}function dI(r,e){return new m1(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t){this.db=e,this.garbageCollector=dI(this,t)}Xn(e){const t=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}nr(e){let t=0;return this.er(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}er(e,t){return this.rr(e,(n,s)=>t(s))}addReference(e,t,n){return Rc(e,n)}removeReference(e,t,n){return Rc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Rc(e,t)}ir(e,t){return function(s,a){let l=!1;return cI(s).Y(d=>lI(s,d,a).next(f=>(f&&(l=!0),F.resolve(!f)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.rr(e,(l,d)=>{if(d<=t){const f=this.ir(e,l).next(m=>{if(!m)return a++,n.getEntry(e,l).next(()=>(n.removeEntry(l,ve.min()),Ri(e).delete(function(w){return[0,Kt(w.path)]}(l))))});s.push(f)}}).next(()=>F.waitFor(s)).next(()=>n.apply(e)).next(()=>a)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Rc(e,t)}rr(e,t){const n=Ri(e);let s,a=an.oe;return n.J({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:m})=>{l===0?(a!==an.oe&&t(new oe(ar(s)),a),a=m,s=f):a=an.oe}).next(()=>{a!==an.oe&&t(new oe(ar(s)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rc(r,e){return Ri(r).put(function(n,s){return{targetId:0,path:Kt(n.path),sequenceNumber:s}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.changes=new Kr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?F.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return vs(e).put(n)}removeEntry(e,t,n){return vs(e).delete(function(a,l){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],oh(l),d[d.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.sr(e,n)))}getEntry(e,t){let n=at.newInvalidDocument(t);return vs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mu(t))},(s,a)=>{n=this._r(t,a)}).next(()=>n)}ar(e,t){let n={size:0,document:at.newInvalidDocument(t)};return vs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mu(t))},(s,a)=>{n={document:this._r(t,a),size:uh(a)}}).next(()=>n)}getEntries(e,t){let n=yn();return this.ur(e,t,(s,a)=>{const l=this._r(s,a);n=n.insert(s,l)}).next(()=>n)}cr(e,t){let n=yn(),s=new Qe(oe.comparator);return this.ur(e,t,(a,l)=>{const d=this._r(a,l);n=n.insert(a,d),s=s.insert(a,uh(l))}).next(()=>({documents:n,lr:s}))}ur(e,t,n){if(t.isEmpty())return F.resolve();let s=new $e(_v);t.forEach(f=>s=s.add(f));const a=IDBKeyRange.bound(mu(s.first()),mu(s.last())),l=s.getIterator();let d=l.getNext();return vs(e).J({index:"documentKeyIndex",range:a},(f,m,v)=>{const w=oe.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&_v(d,w)<0;)n(d,null),d=l.getNext();d&&d.isEqual(w)&&(n(d,m),d=l.hasNext()?l.getNext():null),d?v.$(mu(d)):v.done()}).next(()=>{for(;d;)n(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,n,s,a){const l=t.path,d=[l.popLast().toArray(),l.lastSegment(),oh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vs(e).U(IDBKeyRange.bound(d,f,!0)).next(m=>{a==null||a.incrementDocumentReadCount(m.length);let v=yn();for(const w of m){const T=this._r(oe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Yu(t,T)||s.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,n,s){let a=yn();const l=yv(t,n),d=yv(t,vn.max());return vs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,m,v)=>{const w=this._r(oe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===s&&v.done()}).next(()=>a)}newChangeBuffer(e){return new _1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gv(e).get("remoteDocumentGlobalKey").next(t=>(ye(!!t),t))}sr(e,t){return gv(e).put("remoteDocumentGlobalKey",t)}_r(e,t){if(t){const n=r1(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(ve.min())))return n}return at.newInvalidDocument(e)}}function pI(r){return new y1(r)}class _1 extends fI{constructor(e,t){super(),this.hr=e,this.trackRemovals=t,this.Pr=new Kr(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const t=[];let n=0,s=new $e((a,l)=>Re(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Pr.get(a);if(t.push(this.hr.removeEntry(e,a,d.readTime)),l.isValidDocument()){const f=nv(this.hr.serializer,l);s=s.add(a.path.popLast());const m=uh(f);n+=m-d.size,t.push(this.hr.addEntry(e,a,f))}else if(n-=d.size,this.trackRemovals){const f=nv(this.hr.serializer,l.convertToNoDocument(ve.min()));t.push(this.hr.addEntry(e,a,f))}}),s.forEach(a=>{t.push(this.hr.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.hr.updateMetadata(e,n)),F.waitFor(t)}getFromCache(e,t){return this.hr.ar(e,t).next(n=>(this.Pr.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.hr.cr(e,t).next(({documents:n,lr:s})=>(s.forEach((a,l)=>{this.Pr.set(a,{size:l,readTime:n.get(a).readTime})}),n))}}function gv(r){return Tt(r,"remoteDocumentGlobal")}function vs(r){return Tt(r,"remoteDocumentsV14")}function mu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yv(r,e){const t=e.documentKey.path.toArray();return[r,oh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _v(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(s=Re(t[a],n[a]),s)return s;return s=Re(t.length,n.length),s||(s=Re(t[t.length-2],n[n.length-2]),s||Re(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&Pu(n.mutation,s,un.empty(),st.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Pe()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Pe()){const s=ur();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(a=>{let l=_u();return a.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=ur();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Pe()))}populateOverlays(e,t,n){const s=[];return n.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,n,s){let a=yn();const l=Au(),d=function(){return Au()}();return t.forEach((f,m)=>{const v=n.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Gr)?a=a.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),Pu(v.mutation,m,v.mutation.getFieldMask(),st.now())):l.set(m.key,un.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>l.set(m,v)),t.forEach((m,v)=>{var w;return d.set(m,new v1(v,(w=l.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const n=Au();let s=new Qe((l,d)=>l-d),a=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=n.get(f)||un.empty();v=d.applyToLocalView(m,v),n.set(f,v);const w=(s.get(d.batchId)||Pe()).add(f);s=s.insert(d.batchId,w)})}).next(()=>{const l=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,w=bw();v.forEach(T=>{if(!a.has(T)){const C=Bw(t.get(T),n.get(T));C!==null&&w.set(T,C),a=a.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return F.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-a.size):F.resolve(ur());let d=-1,f=a;return l.next(m=>F.forEach(m,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?F.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{f=f.insert(v,T)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Pe())).next(v=>({batchId:d,changes:Vw(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next(n=>{let s=_u();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const a=t.collectionGroup;let l=_u();return this.indexManager.getCollectionParents(e,a).next(d=>F.forEach(d,f=>{const m=function(w,T){return new ha(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,n,s).next(v=>{v.forEach((w,T)=>{l=l.insert(w,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,s))).next(l=>{a.forEach((f,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,at.newInvalidDocument(v)))});let d=_u();return l.forEach((f,m)=>{const v=a.get(f);v!==void 0&&Pu(v.mutation,m,un.empty(),st.now()),Yu(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return F.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Yt(s.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:sI(s.bundledQuery),readTime:Yt(s.readTime)}}(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.overlays=new Qe(oe.comparator),this.dr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ur();return F.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,a)=>{this.Tt(e,t,a)}),F.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.dr.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.dr.delete(n)),F.resolve()}getOverlaysForCollection(e,t,n){const s=ur(),a=t.length+1,l=new oe(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>n&&s.set(f.getKey(),f)}return F.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let a=new Qe((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>n){let v=a.get(m.largestBatchId);v===null&&(v=ur(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=ur(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=s)););return F.resolve(d)}Tt(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.dr.get(s.largestBatchId).delete(n.key);this.dr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new Hp(t,n));let a=this.dr.get(t);a===void 0&&(a=Pe(),this.dr.set(t,a)),this.dr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Er=new $e(kt.Ar),this.Rr=new $e(kt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const n=new kt(e,t);this.Er=this.Er.add(n),this.Rr=this.Rr.add(n)}mr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.gr(new kt(e,t))}pr(e,t){e.forEach(n=>this.removeReference(n,t))}yr(e){const t=new oe(new Be([])),n=new kt(t,e),s=new kt(t,e+1),a=[];return this.Rr.forEachInRange([n,s],l=>{this.gr(l),a.push(l.key)}),a}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new oe(new Be([])),n=new kt(t,e),s=new kt(t,e+1);let a=Pe();return this.Rr.forEachInRange([n,s],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new kt(e,0),n=this.Er.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class kt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return oe.comparator(e.key,t.key)||Re(e.br,t.br)}static Vr(e,t){return Re(e.br,t.br)||oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new $e(kt.Ar)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Kp(a,t,n,s);this.mutationQueue.push(l);for(const d of s)this.vr=this.vr.add(new kt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return F.resolve(l)}lookupMutationBatch(e,t){return F.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Fr(n),a=s<0?0:s;return F.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kt(t,0),s=new kt(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([n,s],l=>{const d=this.Cr(l.br);a.push(d)}),F.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $e(Re);return t.forEach(s=>{const a=new kt(s,0),l=new kt(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,l],d=>{n=n.add(d.br)})}),F.resolve(this.Mr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let a=n;oe.isDocumentKey(a)||(a=a.child(""));const l=new kt(new oe(a),0);let d=new $e(Re);return this.vr.forEachWhile(f=>{const m=f.key.path;return!!n.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.br)),!0)},l),F.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(n=>{const s=this.Cr(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ye(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.vr;return F.forEach(t.mutations,s=>{const a=new kt(s.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=n})}Bn(e){}containsKey(e,t){const n=new kt(t,0),s=this.vr.firstAfterOrEqual(n);return F.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.Nr=e,this.docs=function(){return new Qe(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),a=s?s.size:0,l=this.Nr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return F.resolve(n?n.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let n=yn();return t.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():at.newInvalidDocument(s))}),F.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let a=yn();const l=t.path,d=new oe(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Fp(ow(v),n)<=0||(s.has(v.key)||Yu(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return F.resolve(a)}getAllFromCollectionGroup(e,t,n,s){de()}Br(e,t){return F.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new R1(this)}getSize(e){return F.resolve(this.size)}}class R1 extends fI{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(n)}),F.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.persistence=e,this.Lr=new Kr(t=>Vs(t),Ju),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.kr=0,this.qr=new Xp,this.targetCount=0,this.Qr=Ls.qn()}forEachTarget(e,t){return this.Lr.forEach((n,s)=>t(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.kr&&(this.kr=t),F.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Ls(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Un(t),F.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,n){let s=0;const a=[];return this.Lr.forEach((l,d)=>{d.sequenceNumber<=t&&n.get(d.targetId)===null&&(this.Lr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),F.waitFor(a).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const n=this.Lr.get(t)||null;return F.resolve(n)}addMatchingKeys(e,t,n){return this.qr.mr(t,n),F.resolve()}removeMatchingKeys(e,t,n){this.qr.pr(t,n);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),F.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qr.Sr(t);return F.resolve(n)}containsKey(e,t){return F.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t){this.Kr={},this.overlays={},this.$r=new an(0),this.Ur=!1,this.Ur=!0,this.Wr=new I1,this.referenceDelegate=e(this),this.Gr=new A1(this),this.indexManager=new h1,this.remoteDocumentCache=function(s){return new S1(s)}(n=>this.referenceDelegate.zr(n)),this.serializer=new rI(t),this.jr=new E1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Kr[e.toKey()];return n||(n=new T1(t,this.referenceDelegate),this.Kr[e.toKey()]=n),n}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,n){X("MemoryPersistence","Starting transaction:",e);const s=new P1(this.$r.next());return this.referenceDelegate.Hr(),n(s).next(a=>this.referenceDelegate.Jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Yr(e,t){return F.or(Object.values(this.Kr).map(n=>()=>n.containsKey(e,t)))}}class P1 extends uw{constructor(e){super(),this.currentSequenceNumber=e}}class bh{constructor(e){this.persistence=e,this.Zr=new Xp,this.Xr=null}static ei(e){return new bh(e)}get ti(){if(this.Xr)return this.Xr;throw de()}addReference(e,t,n){return this.Zr.addReference(n,t),this.ti.delete(n.toString()),F.resolve()}removeReference(e,t,n){return this.Zr.removeReference(n,t),this.ti.add(n.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),F.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.ti.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.ti,n=>{const s=oe.fromPath(n);return this.ni(e,s).next(a=>{a||t.removeEntry(s,ve.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(n=>{n?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return F.or([()=>F.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class lh{constructor(e,t){this.persistence=e,this.ri=new Kr(n=>Kt(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=dI(this,t)}static ei(e,t){return new lh(e,t)}Hr(){}Jr(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}nr(e){let t=0;return this.er(e,n=>{t++}).next(()=>t)}er(e,t){return F.forEach(this.ri,(n,s)=>this.ir(e,n,s).next(a=>a?F.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.Br(e,l=>this.ir(e,l,t).next(d=>{d||(n++,a.removeEntry(l,ve.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),F.resolve()}removeReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),F.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fc(e.data.value)),t}ir(e,t,n){return F.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return F.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.serializer=e}O(e,t,n,s){const a=new Th("createOrUpgrade",t);n<1&&s>=1&&(function(f){f.createObjectStore("owner")}(e),function(f){f.createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",V_,{unique:!0}),f.createObjectStore("documentMutations")}(e),vv(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=F.resolve();return n<3&&s>=3&&(n!==0&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),vv(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),n<4&&s>=4&&(n!==0&&(l=l.next(()=>function(f,m){return m.store("mutations").U().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",V_,{unique:!0});const w=m.store("mutations"),T=v.map(C=>w.put(C));return F.waitFor(T)})}(e,a))),l=l.next(()=>{(function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(l=l.next(()=>this.ii(a))),n<6&&s>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.si(a)))),n<7&&s>=7&&(l=l.next(()=>this.oi(a))),n<8&&s>=8&&(l=l.next(()=>this._i(e,a))),n<9&&s>=9&&(l=l.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(l=l.next(()=>this.ai(a))),n<11&&s>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(l=l.next(()=>{(function(f){const m=f.createObjectStore("documentOverlays",{keyPath:ak});m.createIndex("collectionPathOverlayIndex",uk,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",lk,{unique:!1})})(e)})),n<13&&s>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:JC});m.createIndex("documentKeyIndex",YC),m.createIndex("collectionGroupIndex",XC)}(e)).next(()=>this.ui(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(l=l.next(()=>this.ci(e,a))),n<15&&s>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:rk}).createIndex("sequenceNumberIndex",ik,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:sk}).createIndex("documentKeyIndex",ok,{unique:!1})}(e))),n<16&&s>=16&&(l=l.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&s>=17&&(l=l.next(()=>{(function(f){f.createObjectStore("globals",{keyPath:"name"})})(e)})),l}si(e){let t=0;return e.store("remoteDocuments").J((n,s)=>{t+=uh(s)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ii(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(s=>F.forEach(s,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",l).next(d=>F.forEach(d,f=>{ye(f.userId===a.userId);const m=Ts(this.serializer,f);return uI(e,a.userId,m).next(()=>{})}))}))}oi(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const a=[];return n.J((l,d)=>{const f=new Be(l),m=function(w){return[0,Kt(w)]}(f);a.push(t.get(m).next(v=>v?F.resolve():(w=>t.put({targetId:0,path:Kt(w),sequenceNumber:s.highestListenSequenceNumber}))(f)))}).next(()=>F.waitFor(a))})}_i(e,t){e.createObjectStore("collectionParents",{keyPath:nk});const n=t.store("collectionParents"),s=new Yp,a=l=>{if(s.add(l)){const d=l.lastSegment(),f=l.popLast();return n.put({collectionId:d,parent:Kt(f)})}};return t.store("remoteDocuments").J({H:!0},(l,d)=>{const f=new Be(l);return a(f.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,d,f],m)=>{const v=ar(d);return a(v.popLast())}))}ai(e){const t=e.store("targets");return t.J((n,s)=>{const a=Eu(s),l=iI(this.serializer,a);return t.put(l)})}ui(e,t){const n=t.store("remoteDocuments"),s=[];return n.J((a,l)=>{const d=t.store("remoteDocumentsV14"),f=function(w){return w.document?new oe(Be.fromString(w.document.name).popFirst(5)):w.noDocument?oe.fromSegments(w.noDocument.path):w.unknownDocument?oe.fromSegments(w.unknownDocument.path):de()}(l).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(d.put(m))}).next(()=>F.waitFor(s))}ci(e,t){const n=t.store("mutations"),s=pI(this.serializer),a=new Zp(bh.ei,this.serializer.ht);return n.U().next(l=>{const d=new Map;return l.forEach(f=>{var m;let v=(m=d.get(f.userId))!==null&&m!==void 0?m:Pe();Ts(this.serializer,f).keys().forEach(w=>v=v.add(w)),d.set(f.userId,v)}),F.forEach(d,(f,m)=>{const v=new jt(m),w=Nh.Pt(this.serializer,v),T=a.getIndexManager(v),C=Vh.Pt(v,this.serializer,T,a.referenceDelegate);return new mI(s,C,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Jf(t,an.oe),f).next()})})}}function vv(r){r.createObjectStore("targetDocuments",{keyPath:ek}).createIndex("documentTargetsIndex",tk,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZC,{unique:!0}),r.createObjectStore("targetGlobal")}const Vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class em{constructor(e,t,n,s,a,l,d,f,m,v,w=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.li=a,this.window=l,this.document=d,this.hi=m,this.Pi=v,this.Ti=w,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.di=null,this.Ei=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=T=>Promise.resolve(),!em.p())throw new ie(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g1(this,s),this.Vi=t+"main",this.serializer=new rI(f),this.mi=new Di(this.Vi,this.Ti,new C1(this.serializer)),this.Wr=new s1,this.Gr=new f1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pI(this.serializer),this.jr=new i1,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,v===!1&&ht("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(G.FAILED_PRECONDITION,Vf);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new an(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.B(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ac(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(t=>{t||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(t=>this.isPrimary&&!t?this.vi(e).next(()=>!1):!!t&&this.Ci(e).next(()=>!0))).catch(e=>{if(zi(e))return X("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return gu(e).get("owner").next(t=>F.resolve(this.Fi(t)))}Mi(e){return Ac(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Tt(t,"clientMetadata");return n.U().next(s=>{const a=this.Ni(s,18e5),l=s.filter(d=>a.indexOf(d)===-1);return F.forEach(l,d=>n.delete(d.clientId)).next(()=>l)})}).catch(()=>[]);if(this.fi)for(const t of e)this.fi.removeItem(this.Bi(t.clientId))}}wi(){this.Ei=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?F.resolve(!0):gu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Li(t.ownerId)){if(this.Fi(t)&&this.networkEnabled)return!0;if(!this.Fi(t)){if(!t.allowTabSynchronization)throw new ie(G.FAILED_PRECONDITION,Vf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ac(e).U().next(n=>this.Ni(n,5e3).find(s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,d=this.networkEnabled===s.networkEnabled;if(a||l&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&X("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Ur=!1,this.ki(),this.Ei&&(this.Ei.cancel(),this.Ei=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Jf(e,an.oe);return this.vi(t).next(()=>this.Mi(t))}),this.mi.close(),this.Ki()}Ni(e,t){return e.filter(n=>this.Oi(n.updateTimeMs,t)&&!this.Li(n.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Ac(e).U().next(t=>this.Ni(t,18e5).map(n=>n.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,t){return Vh.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d1(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return Nh.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,t,n){X("IndexedDbPersistence","Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=function(f){return f===17?dk:f===16?hk:f===15?Bp:f===14?pw:f===13?fw:f===12?ck:f===11?dw:void de()}(this.Ti);let l;return this.mi.runTransaction(e,s,a,d=>(l=new Jf(d,this.$r?this.$r.next():an.oe),t==="readwrite-primary"?this.bi(l).next(f=>!!f||this.Di(l)).next(f=>{if(!f)throw ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new ie(G.FAILED_PRECONDITION,aw);return n(l)}).next(f=>this.Ci(l).next(()=>f)):this.Ui(l).next(()=>n(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}Ui(e){return gu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Li(t.ownerId)&&!this.Fi(t)&&!(this.Pi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(G.FAILED_PRECONDITION,Vf)})}Ci(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put("owner",t)}static p(){return Di.p()}vi(e){const t=gu(e);return t.get("owner").next(n=>this.Fi(n)?(X("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):F.resolve())}Oi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ht(`Detected an update time that is in the future: ${e} > ${n}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.di=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.di),this.inForeground=this.document.visibilityState==="visible")}qi(){this.di&&(this.document.removeEventListener("visibilitychange",this.di),this.di=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const t=/(?:Version|Mobile)\/1[456]/;lE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Li(e){var t;try{const n=((t=this.fi)===null||t===void 0?void 0:t.getItem(this.Bi(e)))!==null;return X("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ht("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Bi(this.clientId),String(Date.now()))}catch(e){ht("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Bi(this.clientId))}catch{}}Bi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gu(r){return Tt(r,"owner")}function Ac(r){return Tt(r,"clientMetadata")}function gI(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Wi=n,this.Gi=s}static zi(e,t){let n=Pe(),s=Pe();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new tm(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return lE()?8:lw(wt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,n,s){const a={result:null};return this.Xi(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.es(e,t,s,n).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new k1;return this.ts(e,t,l).next(d=>{if(a.result=d,this.Hi)return this.ns(e,t,l,d.size)})}).next(()=>a.result)}ns(e,t,n,s){return n.documentReadCount<this.Ji?(Mo()<=xe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),F.resolve()):(Mo()<=xe.DEBUG&&X("QueryEngine","Query:",Fo(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Yi*s?(Mo()<=xe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(t))):F.resolve())}Xi(e,t){if(G_(t))return F.resolve(null);let n=_n(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=rh(t,null,"F"),n=_n(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const l=Pe(...a);return this.Zi.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,n).next(f=>{const m=this.rs(t,d);return this.ss(t,m,l,f.readTime)?this.Xi(e,rh(t,null,"F")):this.os(e,m,t,f)}))})))}es(e,t,n,s){return G_(t)||s.isEqual(ve.min())?F.resolve(null):this.Zi.getDocuments(e,n).next(a=>{const l=this.rs(t,a);return this.ss(t,l,n,s)?F.resolve(null):(Mo()<=xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fo(t)),this.os(e,l,t,sw(s,-1)).next(d=>d))})}rs(e,t){let n=new $e(Dw(e));return t.forEach((s,a)=>{Yu(e,a)&&(n=n.add(a))}),n}ss(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ts(e,t,n){return Mo()<=xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.Zi.getDocumentsMatchingQuery(e,t,vn.min(),n)}os(e,t,n,s){return this.Zi.getDocumentsMatchingQuery(e,n,s).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,n,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new Qe(Re),this.cs=new Kr(a=>Vs(a),Ju),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(n)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mI(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function _I(r,e,t,n){return new x1(r,e,t,n)}async function vI(r,e){const t=pe(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const l=[],d=[];let f=Pe();for(const m of s){l.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(n,f).next(m=>({Ts:m,removedBatchIds:l,addedBatchIds:d}))})})}function D1(r,e){const t=pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,v){const w=m.batch,T=w.keys();let C=F.resolve();return T.forEach(V=>{C=C.next(()=>v.getEntry(f,V)).next(z=>{const b=m.docVersions.get(V);ye(b!==null),z.version.compareTo(b)<0&&(w.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))})}),C.next(()=>d.mutationQueue.removeMutationBatch(f,w))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(d){let f=Pe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function EI(r){const e=pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function N1(r,e){const t=pe(r),n=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const d=[];e.targetChanges.forEach((v,w)=>{const T=s.get(w);if(!T)return;d.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,w)));let C=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(dt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,n)),s=s.insert(w,C),function(z,b,K){return z.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(T,C,v)&&d.push(t.Gr.updateTargetData(a,C))});let f=yn(),m=Pe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(V1(a,l,e.documentUpdates).next(v=>{f=v.Is,m=v.ds})),!n.isEqual(ve.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(w=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,n));d.push(v)}return F.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.us=s,a))}function V1(r,e,t){let n=Pe(),s=Pe();return t.forEach(a=>n=n.add(a)),e.getEntries(r,n).next(a=>{let l=yn();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(ve.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):X("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Is:l,ds:s}})}function b1(r,e){const t=pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ch(r,e){const t=pe(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.Gr.getTargetData(n,e).next(a=>a?(s=a,F.resolve(s)):t.Gr.allocateTargetId(n).next(l=>(s=new Fr(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Gr.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.us.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(n.targetId,n),t.cs.set(e,n.targetId)),n})}async function ta(r,e,t){const n=pe(r),s=n.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,l=>n.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!zi(l))throw l;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}n.us=n.us.remove(e),n.cs.delete(s.target)}function cp(r,e,t){const n=pe(r);let s=ve.min(),a=Pe();return n.persistence.runTransaction("Execute query","readwrite",l=>function(f,m,v){const w=pe(f),T=w.cs.get(v);return T!==void 0?F.resolve(w.us.get(T)):w.Gr.getTargetData(m,v)}(n,l,_n(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,n.Gr.getMatchingKeysForTargetId(l,d.targetId).next(f=>{a=f})}).next(()=>n._s.getDocumentsMatchingQuery(l,e,t?s:ve.min(),t?a:Pe())).next(d=>(TI(n,xw(e),d),{documents:d,Es:a})))}function wI(r,e){const t=pe(r),n=pe(t.Gr),s=t.us.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",a=>n.ut(a,e).next(l=>l?l.target:null))}function II(r,e){const t=pe(r),n=t.ls.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.hs.getAllFromCollectionGroup(s,e,sw(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(TI(t,e,s),s))}function TI(r,e,t){let n=r.ls.get(e)||ve.min();t.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),r.ls.set(e,n)}function Ev(r,e){return`firestore_clients_${r}_${e}`}function wv(r,e,t){let n=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function bf(r,e){return`firestore_targets_${r}_${e}`}class hh{constructor(e,t,n,s){this.user=e,this.batchId=t,this.state=n,this.error=s}static fs(e,t,n){const s=JSON.parse(n);let a,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(a=new ie(s.error.code,s.error.message))),l?new hh(e,t,s.state,a):(ht("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cu{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static fs(e,t){const n=JSON.parse(t);let s,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(s=new ie(n.error.code,n.error.message))),a?new Cu(e,n.state,s):(ht("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fs(e,t){const n=JSON.parse(t);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,a=$p();for(let l=0;s&&l<n.activeTargetIds.length;++l)s=cw(n.activeTargetIds[l]),a=a.add(n.activeTargetIds[l]);return s?new dh(e,a):(ht("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nm{constructor(e,t){this.clientId=e,this.onlineState=t}static fs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new nm(t.clientId,t.onlineState):(ht("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hp{constructor(){this.activeTargetIds=$p()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Of{constructor(e,t,n,s,a){this.window=e,this.li=t,this.persistenceKey=n,this.ws=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new Qe(Re),this.started=!1,this.vs=[];const l=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Cs=Ev(this.persistenceKey,this.ws),this.Fs=function(f){return`firestore_sequence_number_${f}`}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new hp),this.Ms=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.xs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Os=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ns=function(f){return`firestore_online_state_${f}`}(this.persistenceKey),this.Bs=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.ws)continue;const s=this.getItem(Ev(this.persistenceKey,n));if(s){const a=dh.fs(n,s);a&&(this.Ds=this.Ds.insert(a.clientId,a))}}this.Ls();const t=this.storage.getItem(this.Ns);if(t){const n=this.ks(t);n&&this.qs(n)}for(const n of this.vs)this.bs(n);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let t=!1;return this.Ds.forEach((n,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,t,n){this.Ks(e,t,n),this.$s(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(bf(this.persistenceKey,e));if(s){const a=Cu.fs(e,s);a&&(n=a.state)}}return t&&this.Us.ps(e),this.Ls(),n}removeLocalQueryTarget(e){this.Us.ys(e),this.Ls()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bf(this.persistenceKey,e))}updateQueryState(e,t,n){this.Ws(e,t,n)}handleUserChange(e,t,n){t.forEach(s=>{this.$s(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return X("SharedClientState","READ",e,t),t}setItem(e,t){X("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){X("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const t=e;if(t.storageArea===this.storage){if(X("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Cs)return void ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ms.test(t.key)){if(t.newValue==null){const n=this.js(t.key);return this.Hs(n,null)}{const n=this.Js(t.key,t.newValue);if(n)return this.Hs(n.clientId,n)}}else if(this.xs.test(t.key)){if(t.newValue!==null){const n=this.Ys(t.key,t.newValue);if(n)return this.Zs(n)}}else if(this.Os.test(t.key)){if(t.newValue!==null){const n=this.Xs(t.key,t.newValue);if(n)return this.eo(n)}}else if(t.key===this.Ns){if(t.newValue!==null){const n=this.ks(t.newValue);if(n)return this.qs(n)}}else if(t.key===this.Fs){const n=function(a){let l=an.oe;if(a!=null)try{const d=JSON.parse(a);ye(typeof d=="number"),l=d}catch(d){ht("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(t.newValue);n!==an.oe&&this.sequenceNumberHandler(n)}else if(t.key===this.Bs){const n=this.no(t.newValue);await Promise.all(n.map(s=>this.syncEngine.ro(s)))}}}else this.vs.push(t)})}}get Us(){return this.Ds.get(this.ws)}Ls(){this.setItem(this.Cs,this.Us.gs())}Ks(e,t,n){const s=new hh(this.currentUser,e,t,n),a=wv(this.persistenceKey,this.currentUser,e);this.setItem(a,s.gs())}$s(e){const t=wv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Gs(e){const t={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(t))}Ws(e,t,n){const s=bf(this.persistenceKey,e),a=new Cu(e,t,n);this.setItem(s,a.gs())}zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Bs,t)}js(e){const t=this.Ms.exec(e);return t?t[1]:null}Js(e,t){const n=this.js(e);return dh.fs(n,t)}Ys(e,t){const n=this.xs.exec(e),s=Number(n[1]),a=n[2]!==void 0?n[2]:null;return hh.fs(new jt(a),s,t)}Xs(e,t){const n=this.Os.exec(e),s=Number(n[1]);return Cu.fs(s,t)}ks(e){return nm.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);X("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,t){const n=t?this.Ds.insert(e,t):this.Ds.remove(e),s=this.Qs(this.Ds),a=this.Qs(n),l=[],d=[];return a.forEach(f=>{s.has(f)||l.push(f)}),s.forEach(f=>{a.has(f)||d.push(f)}),this.syncEngine.oo(l,d).then(()=>{this.Ds=n})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let t=$p();return e.forEach((n,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class SI{constructor(){this._o=new hp,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,n){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new hp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc=null;function Lf(){return Pc===null?Pc=function(){return 268435456+Math.round(2147483648*Math.random())}():Pc++,"0x"+Pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class F1 extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=n+"://"+t.host,this.Mo=`projects/${s}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Oo(t,n,s,a,l){const d=Lf(),f=this.No(t,n.toUriEncodedString());X("RestConnection",`Sending RPC '${t}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(m,a,l),this.Lo(t,f,m,s).then(v=>(X("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw Ho("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",f,"request:",s),v})}ko(t,n,s,a,l,d){return this.Oo(t,n,s,a,l)}Bo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),s&&s.headers.forEach((a,l)=>t[l]=a)}No(t,n){const s=L1[t];return`${this.Fo}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,n,s){const a=Lf();return new Promise((l,d)=>{const f=new XE;f.setWithCredentials(!0),f.listenOnce(ZE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case bc.NO_ERROR:const v=f.getResponseJson();X(zt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case bc.TIMEOUT:X(zt,`RPC '${e}' ${a} timed out`),d(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const w=f.getStatus();if(X(zt,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const V=function(b){const K=b.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(K)>=0?K:G.UNKNOWN}(C.status);d(new ie(V,C.message))}else d(new ie(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ie(G.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{X(zt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);X(zt,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,n,15)})}qo(e,t,n){const s=Lf(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=nw(),d=tw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Bo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const v=a.join("");X(zt,`Creating RPC '${e}' stream ${s}: ${v}`,f);const w=l.createWebChannel(v,f);let T=!1,C=!1;const V=new M1({Eo:b=>{C?X(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(T||(X(zt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),X(zt,`RPC '${e}' stream ${s} sending:`,b),w.send(b))},Ao:()=>w.close()}),z=(b,K,H)=>{b.listen(K,J=>{try{H(J)}catch(re){setTimeout(()=>{throw re},0)}})};return z(w,yu.EventType.OPEN,()=>{C||(X(zt,`RPC '${e}' stream ${s} transport opened.`),V.So())}),z(w,yu.EventType.CLOSE,()=>{C||(C=!0,X(zt,`RPC '${e}' stream ${s} transport closed`),V.Do())}),z(w,yu.EventType.ERROR,b=>{C||(C=!0,Ho(zt,`RPC '${e}' stream ${s} transport errored:`,b),V.Do(new ie(G.UNAVAILABLE,"The operation could not be completed")))}),z(w,yu.EventType.MESSAGE,b=>{var K;if(!C){const H=b.data[0];ye(!!H);const J=H,re=(J==null?void 0:J.error)||((K=J[0])===null||K===void 0?void 0:K.error);if(re){X(zt,`RPC '${e}' stream ${s} received error:`,re);const me=re.status;let ce=function(A){const D=mt[A];if(D!==void 0)return $w(D)}(me),k=re.message;ce===void 0&&(ce=G.INTERNAL,k="Unknown error status: "+me+" with message "+re.message),C=!0,V.Do(new ie(ce,k)),w.close()}else X(zt,`RPC '${e}' stream ${s} received:`,H),V.vo(H)}}),z(d,ew.STAT_EVENT,b=>{b.stat===Wf.PROXY?X(zt,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Wf.NOPROXY&&X(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.bo()},0),V}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(){return typeof window<"u"?window:null}function jc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(r){return new Hk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,n=1e3,s=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=n,this.Ko=s,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),n=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-n);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t,n,s,a,l,d,f){this.li=e,this.Yo=n,this.Zo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new AI(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(ht(t.toString()),ht("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Xo===t&&this.I_(n,s)},n=>{e(()=>{const s=new ie(G.UNKNOWN,"Fetching auth token failed: "+n.message);return this.d_(s)})})}I_(e,t){const n=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{n(()=>this.listener.Ro())}),this.stream.mo(()=>{n(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{n(()=>this.d_(s))}),this.stream.onMessage(s=>{n(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U1 extends PI{constructor(e,t,n,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,l),this.serializer=a}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=Jk(this.serializer,e),n=function(a){if(!("targetChange"in a))return ve.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?ve.min():l.readTime?Yt(l.readTime):ve.min()}(e);return this.listener.R_(t,n)}V_(e){const t={};t.database=sp(this.serializer),t.addTarget=function(a,l){let d;const f=l.target;if(d=th(f)?{documents:Yw(a,f)}:{query:Xw(a,f).ct},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=Gw(a,l.resumeToken);const m=rp(a,l.expectedCount);m!==null&&(d.expectedCount=m)}else if(l.snapshotVersion.compareTo(ve.min())>0){d.readTime=ea(a,l.snapshotVersion.toTimestamp());const m=rp(a,l.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const n=Xk(this.serializer,e);n&&(t.labels=n),this.c_(t)}m_(e){const t={};t.database=sp(this.serializer),t.removeTarget=e,this.c_(t)}}class B1 extends PI{constructor(e,t,n,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,l),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Yk(e.writeResults,e.commitTime),n=Yt(e.commitTime);return this.listener.y_(n,t)}w_(){const e={};e.database=sp(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>sh(this.serializer,n))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1 extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,n,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Oo(e,ip(t,n),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(G.UNKNOWN,a.toString())})}ko(e,t,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.ko(e,ip(t,n),s,l,d,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(G.UNKNOWN,l.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class j1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ht(t),this.C_=!1):X("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,n,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(l=>{n.enqueueAndForget(async()=>{Us(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(f){const m=pe(f);m.k_.add(4),await el(m),m.K_.set("Unknown"),m.k_.delete(4),await Lh(m)}(this))})}),this.K_=new j1(n,s)}}async function Lh(r){if(Us(r))for(const e of r.q_)await e(!0)}async function el(r){for(const e of r.q_)await e(!1)}function Mh(r,e){const t=pe(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),sm(t)?im(t):pa(t).s_()&&rm(t,e))}function na(r,e){const t=pe(r),n=pa(t);t.L_.delete(e),n.s_()&&CI(t,e),t.L_.size===0&&(n.s_()?n.a_():Us(t)&&t.K_.set("Unknown"))}function rm(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pa(r).V_(e)}function CI(r,e){r.U_.xe(e),pa(r).m_(e)}function im(r){r.U_=new $k({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),pa(r).start(),r.K_.F_()}function sm(r){return Us(r)&&!pa(r).i_()&&r.L_.size>0}function Us(r){return pe(r).k_.size===0}function kI(r){r.U_=void 0}async function q1(r){r.K_.set("Online")}async function K1(r){r.L_.forEach((e,t)=>{rm(r,e)})}async function G1(r,e){kI(r),sm(r)?(r.K_.O_(e),im(r)):r.K_.set("Unknown")}async function H1(r,e,t){if(r.K_.set("Online"),e instanceof Kw&&e.state===2&&e.cause)try{await async function(s,a){const l=a.cause;for(const d of a.targetIds)s.L_.has(d)&&(await s.remoteSyncer.rejectListen(d,l),s.L_.delete(d),s.U_.removeTarget(d))}(r,e)}catch(n){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await fh(r,n)}else if(e instanceof zc?r.U_.$e(e):e instanceof qw?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(ve.min()))try{const n=await EI(r.localStore);t.compareTo(n)>=0&&await function(a,l){const d=a.U_.it(l);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.L_.get(m);v&&a.L_.set(m,v.withResumeToken(f.resumeToken,l))}}),d.targetMismatches.forEach((f,m)=>{const v=a.L_.get(f);if(!v)return;a.L_.set(f,v.withResumeToken(dt.EMPTY_BYTE_STRING,v.snapshotVersion)),CI(a,f);const w=new Fr(v.target,f,m,v.sequenceNumber);rm(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(n){X("RemoteStore","Failed to raise snapshot:",n),await fh(r,n)}}async function fh(r,e,t){if(!zi(e))throw e;r.k_.add(1),await el(r),r.K_.set("Offline"),t||(t=()=>EI(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Lh(r)})}function xI(r,e){return e().catch(t=>fh(r,t,e))}async function fa(r){const e=pe(r),t=Fi(e);let n=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;W1(e);)try{const s=await b1(e.localStore,n);if(s===null){e.B_.length===0&&t.a_();break}n=s.batchId,Q1(e,s)}catch(s){await fh(e,s)}DI(e)&&NI(e)}function W1(r){return Us(r)&&r.B_.length<10}function Q1(r,e){r.B_.push(e);const t=Fi(r);t.s_()&&t.f_&&t.g_(e.mutations)}function DI(r){return Us(r)&&!Fi(r).i_()&&r.B_.length>0}function NI(r){Fi(r).start()}async function J1(r){Fi(r).w_()}async function Y1(r){const e=Fi(r);for(const t of r.B_)e.g_(t.mutations)}async function X1(r,e,t){const n=r.B_.shift(),s=Gp.from(n,e,t);await xI(r,()=>r.remoteSyncer.applySuccessfulWrite(s)),await fa(r)}async function Z1(r,e){e&&Fi(r).f_&&await async function(n,s){if(function(l){return Bk(l)&&l!==G.ABORTED}(s.code)){const a=n.B_.shift();Fi(n).__(),await xI(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await fa(n)}}(r,e),DI(r)&&NI(r)}async function Tv(r,e){const t=pe(r);t.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const n=Us(t);t.k_.add(3),await el(t),n&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Lh(t)}async function dp(r,e){const t=pe(r);e?(t.k_.delete(2),await Lh(t)):e||(t.k_.add(2),await el(t),t.K_.set("Unknown"))}function pa(r){return r.W_||(r.W_=function(t,n,s){const a=pe(t);return a.b_(),new U1(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{Ro:q1.bind(null,r),mo:K1.bind(null,r),po:G1.bind(null,r),R_:H1.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),sm(r)?im(r):r.K_.set("Unknown")):(await r.W_.stop(),kI(r))})),r.W_}function Fi(r){return r.G_||(r.G_=function(t,n,s){const a=pe(t);return a.b_(),new B1(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:J1.bind(null,r),po:Z1.bind(null,r),p_:Y1.bind(null,r),y_:X1.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await fa(r)):(await r.G_.stop(),r.B_.length>0&&(X("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t,n,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,a){const l=Date.now()+n,d=new om(e,t,l,s,a);return d.start(n),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(r,e){if(ht("AsyncQueue",`${e}: ${r}`),zi(r))return new ie(G.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||oe.comparator(t.key,n.key):(t,n)=>oe.comparator(t.key,n.key),this.keyedMap=_u(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ko;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.z_=new Qe(oe.comparator)}track(e){const t=e.doc.key,n=this.z_.get(t);n?e.type!==0&&n.type===3?this.z_=this.z_.insert(t,e):e.type===3&&n.type!==1?this.z_=this.z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.z_=this.z_.remove(t):e.type===1&&n.type===2?this.z_=this.z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):de():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class ra{constructor(e,t,n,s,a,l,d,f,m){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,n,s,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new ra(e,t,Ko.emptySet(t),l,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class tx{constructor(){this.queries=Rv(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,n){const s=pe(t),a=s.queries;s.queries=Rv(),a.forEach((l,d)=>{for(const f of d.J_)f.onError(n)})})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function Rv(){return new Kr(r=>kw(r),Ch)}async function nx(r,e){const t=pe(r);let n=3;const s=e.query;let a=t.queries.get(s);a?!a.Y_()&&e.Z_()&&(n=2):(a=new ex,n=e.Z_()?0:1);try{switch(n){case 0:a.H_=await t.onListen(s,!0);break;case 1:a.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const d=am(l,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&um(t)}async function rx(r,e){const t=pe(r),n=e.query;let s=3;const a=t.queries.get(n);if(a){const l=a.J_.indexOf(e);l>=0&&(a.J_.splice(l,1),a.J_.length===0?s=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function ix(r,e){const t=pe(r);let n=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const d of l.J_)d.ta(s)&&(n=!0);l.H_=s}}n&&um(t)}function sx(r,e,t){const n=pe(r),s=n.queries.get(e);if(s)for(const a of s.J_)a.onError(t);n.queries.delete(e)}function um(r){r.X_.forEach(e=>{e.next()})}var fp,Av;(Av=fp||(fp={})).na="default",Av.Cache="cache";class ox{constructor(e,t,n){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=n||{}}ta(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new ra(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const n=t!=="Offline";return(!this.options.ua||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.key=e}}class bI{constructor(e){this.key=e}}class ax{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pe(),this.mutatedKeys=Pe(),this.Va=Dw(e),this.ma=new Ko(this.Va)}get fa(){return this.Ea}ga(e,t){const n=t?t.pa:new Sv,s=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,w)=>{const T=s.get(v),C=Yu(this.query,w)?w:null,V=!!T&&this.mutatedKeys.has(T.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let b=!1;T&&C?T.data.isEqual(C.data)?V!==z&&(n.track({type:3,doc:C}),b=!0):this.ya(T,C)||(n.track({type:2,doc:C}),b=!0,(f&&this.Va(C,f)>0||m&&this.Va(C,m)<0)&&(d=!0)):!T&&C?(n.track({type:0,doc:C}),b=!0):T&&!C&&(n.track({type:1,doc:T}),b=!0,(f||m)&&(d=!0)),b&&(C?(l=l.add(C),a=z?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),n.track({type:1,doc:v})}return{ma:l,pa:n,ss:d,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const l=e.pa.j_();l.sort((v,w)=>function(C,V){const z=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return z(C)-z(V)}(v.type,w.type)||this.Va(v.doc,w.doc)),this.wa(n),s=s!=null&&s;const d=t&&!s?this.Sa():[],f=this.Ra.size===0&&this.current&&!s?1:0,m=f!==this.Aa;return this.Aa=f,l.length!==0||m?{snapshot:new ra(this.query,e.ma,a,l,e.mutatedKeys,f===0,m,!1,!!n&&n.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Sv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Pe(),this.ma.forEach(n=>{this.Da(n.key)&&(this.Ra=this.Ra.add(n.key))});const t=[];return e.forEach(n=>{this.Ra.has(n)||t.push(new bI(n))}),this.Ra.forEach(n=>{e.has(n)||t.push(new VI(n))}),t}va(e){this.Ea=e.Es,this.Ra=Pe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ra.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ux{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class lx{constructor(e){this.key=e,this.Fa=!1}}class cx{constructor(e,t,n,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ma={},this.xa=new Kr(d=>kw(d),Ch),this.Oa=new Map,this.Na=new Set,this.Ba=new Qe(oe.comparator),this.La=new Map,this.ka=new Xp,this.qa={},this.Qa=new Map,this.Ka=Ls.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function hx(r,e,t=!0){const n=Fh(r);let s;const a=n.xa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Ca()):s=await OI(n,e,t,!0),s}async function dx(r,e){const t=Fh(r);await OI(t,e,!0,!1)}async function OI(r,e,t,n){const s=await ch(r.localStore,_n(e)),a=s.targetId,l=r.sharedClientState.addLocalQueryTarget(a,t);let d;return n&&(d=await lm(r,e,a,l==="current",s.resumeToken)),r.isPrimaryClient&&t&&Mh(r.remoteStore,s),d}async function lm(r,e,t,n,s){r.Ua=(w,T,C)=>async function(z,b,K,H){let J=b.view.ga(K);J.ss&&(J=await cp(z.localStore,b.query,!1).then(({documents:k})=>b.view.ga(k,J)));const re=H&&H.targetChanges.get(b.targetId),me=H&&H.targetMismatches.get(b.targetId)!=null,ce=b.view.applyChanges(J,z.isPrimaryClient,re,me);return pp(z,b.targetId,ce.ba),ce.snapshot}(r,w,T,C);const a=await cp(r.localStore,e,!0),l=new ax(e,a.Es),d=l.ga(a.documents),f=Zu.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),m=l.applyChanges(d,r.isPrimaryClient,f);pp(r,t,m.ba);const v=new ux(e,t,l);return r.xa.set(e,v),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),m.snapshot}async function fx(r,e,t){const n=pe(r),s=n.xa.get(e),a=n.Oa.get(s.targetId);if(a.length>1)return n.Oa.set(s.targetId,a.filter(l=>!Ch(l,e))),void n.xa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await ta(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&na(n.remoteStore,s.targetId),ia(n,s.targetId)}).catch(Bi)):(ia(n,s.targetId),await ta(n.localStore,s.targetId,!0))}async function px(r,e){const t=pe(r),n=t.xa.get(e),s=t.Oa.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),na(t.remoteStore,n.targetId))}async function mx(r,e,t){const n=fm(r);try{const s=await function(l,d){const f=pe(l),m=st.now(),v=d.reduce((C,V)=>C.add(V.key),Pe());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",C=>{let V=yn(),z=Pe();return f.hs.getEntries(C,v).next(b=>{V=b,V.forEach((K,H)=>{H.isValidDocument()||(z=z.add(K))})}).next(()=>f.localDocuments.getOverlayedDocuments(C,V)).next(b=>{w=b;const K=[];for(const H of d){const J=Fk(H,w.get(H.key).overlayedDocument);J!=null&&K.push(new Gr(H.key,J,vw(J.value.mapValue),Jt.exists(!0)))}return f.mutationQueue.addMutationBatch(C,m,K,d)}).next(b=>{T=b;const K=b.applyToLocalDocumentSet(w,z);return f.documentOverlayCache.saveOverlays(C,b.batchId,K)})}).then(()=>({batchId:T.batchId,changes:Vw(w)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(l,d,f){let m=l.qa[l.currentUser.toKey()];m||(m=new Qe(Re)),m=m.insert(d,f),l.qa[l.currentUser.toKey()]=m}(n,s.batchId,t),await $i(n,s.changes),await fa(n.remoteStore)}catch(s){const a=am(s,"Failed to persist write");t.reject(a)}}async function LI(r,e){const t=pe(r);try{const n=await N1(t.localStore,e);e.targetChanges.forEach((s,a)=>{const l=t.La.get(a);l&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Fa=!0:s.modifiedDocuments.size>0?ye(l.Fa):s.removedDocuments.size>0&&(ye(l.Fa),l.Fa=!1))}),await $i(t,n,e)}catch(n){await Bi(n)}}function Pv(r,e,t){const n=pe(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.xa.forEach((a,l)=>{const d=l.view.ea(e);d.snapshot&&s.push(d.snapshot)}),function(l,d){const f=pe(l);f.onlineState=d;let m=!1;f.queries.forEach((v,w)=>{for(const T of w.J_)T.ea(d)&&(m=!0)}),m&&um(f)}(n.eventManager,e),s.length&&n.Ma.R_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function gx(r,e,t){const n=pe(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.La.get(e),a=s&&s.key;if(a){let l=new Qe(oe.comparator);l=l.insert(a,at.newNoDocument(a,ve.min()));const d=Pe().add(a),f=new Xu(ve.min(),new Map,new Qe(Re),l,d);await LI(n,f),n.Ba=n.Ba.remove(a),n.La.delete(e),dm(n)}else await ta(n.localStore,e,!1).then(()=>ia(n,e,t)).catch(Bi)}async function yx(r,e){const t=pe(r),n=e.batch.batchId;try{const s=await D1(t.localStore,e);hm(t,n,null),cm(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await $i(t,s)}catch(s){await Bi(s)}}async function _x(r,e,t){const n=pe(r);try{const s=await function(l,d){const f=pe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next(w=>(ye(w!==null),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(n.localStore,e);hm(n,e,t),cm(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await $i(n,s)}catch(s){await Bi(s)}}function cm(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function hm(r,e,t){const n=pe(r);let s=n.qa[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),n.qa[n.currentUser.toKey()]=s}}function ia(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Oa.get(e))r.xa.delete(n),t&&r.Ma.Wa(n,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(n=>{r.ka.containsKey(n)||MI(r,n)})}function MI(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&(na(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),dm(r))}function pp(r,e,t){for(const n of t)n instanceof VI?(r.ka.addReference(n.key,e),vx(r,n)):n instanceof bI?(X("SyncEngine","Document no longer in limbo: "+n.key),r.ka.removeReference(n.key,e),r.ka.containsKey(n.key)||MI(r,n.key)):de()}function vx(r,e){const t=e.key,n=t.path.canonicalString();r.Ba.get(t)||r.Na.has(n)||(X("SyncEngine","New document in limbo: "+t),r.Na.add(n),dm(r))}function dm(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new oe(Be.fromString(e)),n=r.Ka.next();r.La.set(n,new lx(t)),r.Ba=r.Ba.insert(t,n),Mh(r.remoteStore,new Fr(_n(Ph(t.path)),n,"TargetPurposeLimboResolution",an.oe))}}async function $i(r,e,t){const n=pe(r),s=[],a=[],l=[];n.xa.isEmpty()||(n.xa.forEach((d,f)=>{l.push(n.Ua(f,e,t).then(m=>{var v;if((m||t)&&n.isPrimaryClient){const w=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;n.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=tm.zi(f.targetId,m);a.push(w)}}))}),await Promise.all(l),n.Ma.R_(s),await async function(f,m){const v=pe(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>F.forEach(m,T=>F.forEach(T.Wi,C=>v.persistence.referenceDelegate.addReference(w,T.targetId,C)).next(()=>F.forEach(T.Gi,C=>v.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))}catch(w){if(!zi(w))throw w;X("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const C=v.us.get(T),V=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(V);v.us=v.us.insert(T,z)}}}(n.localStore,a))}async function Ex(r,e){const t=pe(r);if(!t.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const n=await vI(t.localStore,e);t.currentUser=e,function(a,l){a.Qa.forEach(d=>{d.forEach(f=>{f.reject(new ie(G.CANCELLED,l))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await $i(t,n.Ts)}}function wx(r,e){const t=pe(r),n=t.La.get(e);if(n&&n.Fa)return Pe().add(n.key);{let s=Pe();const a=t.Oa.get(e);if(!a)return s;for(const l of a){const d=t.xa.get(l);s=s.unionWith(d.view.fa)}return s}}async function Ix(r,e){const t=pe(r),n=await cp(t.localStore,e.query,!0),s=e.view.va(n);return t.isPrimaryClient&&pp(t,e.targetId,s.ba),s}async function Tx(r,e){const t=pe(r);return II(t.localStore,e).then(n=>$i(t,n))}async function Sx(r,e,t,n){const s=pe(r),a=await function(d,f){const m=pe(d),v=pe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",w=>v.On(w,f).next(T=>T?m.localDocuments.getDocuments(w,T):F.resolve(null)))}(s.localStore,e);a!==null?(t==="pending"?await fa(s.remoteStore):t==="acknowledged"||t==="rejected"?(hm(s,e,n||null),cm(s,e),function(d,f){pe(pe(d).mutationQueue).Bn(f)}(s.localStore,e)):de(),await $i(s,a)):X("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Rx(r,e){const t=pe(r);if(Fh(t),fm(t),e===!0&&t.$a!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),s=await Cv(t,n.toArray());t.$a=!0,await dp(t.remoteStore,!0);for(const a of s)Mh(t.remoteStore,a)}else if(e===!1&&t.$a!==!1){const n=[];let s=Promise.resolve();t.Oa.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?n.push(l):s=s.then(()=>(ia(t,l),ta(t.localStore,l,!0))),na(t.remoteStore,l)}),await s,await Cv(t,n),function(l){const d=pe(l);d.La.forEach((f,m)=>{na(d.remoteStore,m)}),d.ka.wr(),d.La=new Map,d.Ba=new Qe(oe.comparator)}(t),t.$a=!1,await dp(t.remoteStore,!1)}}async function Cv(r,e,t){const n=pe(r),s=[],a=[];for(const l of e){let d;const f=n.Oa.get(l);if(f&&f.length!==0){d=await ch(n.localStore,_n(f[0]));for(const m of f){const v=n.xa.get(m),w=await Ix(n,v);w.snapshot&&a.push(w.snapshot)}}else{const m=await wI(n.localStore,l);d=await ch(n.localStore,m),await lm(n,FI(m),l,!1,d.resumeToken)}s.push(d)}return n.Ma.R_(a),s}function FI(r){return Pw(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Ax(r){return function(t){return pe(pe(t).persistence).$i()}(pe(r).localStore)}async function Px(r,e,t,n){const s=pe(r);if(s.$a)return void X("SyncEngine","Ignoring unexpected query state notification.");const a=s.Oa.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await II(s.localStore,xw(a[0])),d=Xu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",dt.EMPTY_BYTE_STRING);await $i(s,l,d);break}case"rejected":await ta(s.localStore,e,!0),ia(s,e,n);break;default:de()}}async function Cx(r,e,t){const n=Fh(r);if(n.$a){for(const s of e){if(n.Oa.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){X("SyncEngine","Adding an already active target "+s);continue}const a=await wI(n.localStore,s),l=await ch(n.localStore,a);await lm(n,FI(a),l.targetId,!1,l.resumeToken),Mh(n.remoteStore,l)}for(const s of t)n.Oa.has(s)&&await ta(n.localStore,s,!1).then(()=>{na(n.remoteStore,s),ia(n,s)}).catch(Bi)}}function Fh(r){const e=pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=LI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gx.bind(null,e),e.Ma.R_=ix.bind(null,e.eventManager),e.Ma.Wa=sx.bind(null,e.eventManager),e}function fm(r){const e=pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_x.bind(null,e),e}class ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return _I(this.persistence,new yI,e.initialUser,this.serializer)}ja(e){return new Zp(bh.ei,this.serializer)}za(e){return new SI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ju.provider={build:()=>new ju};class kx extends ju{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ye(this.persistence.referenceDelegate instanceof lh);const n=this.persistence.referenceDelegate.garbageCollector;return new hI(n,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new Zp(n=>lh.ei(n,t),this.serializer)}}class xx extends ju{constructor(e,t,n){super(),this.Za=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await fm(this.Za.syncEngine),await fa(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return _I(this.persistence,new yI,e.initialUser,this.serializer)}Ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new hI(n,e.asyncQueue,t)}Ya(e,t){const n=new HC(t,this.persistence);return new GC(e.asyncQueue,n)}ja(e){const t=gI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new em(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,RI(),jc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new SI}}class Dx extends xx{constructor(e,t){super(e,t,!1),this.Za=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Za.syncEngine;this.sharedClientState instanceof Of&&(this.sharedClientState.syncEngine={io:Sx.bind(null,t),so:Px.bind(null,t),oo:Cx.bind(null,t),$i:Ax.bind(null,t),ro:Tx.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Si(async n=>{await Rx(this.Za.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}za(e){const t=RI();if(!Of.p(t))throw new ie(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=gI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Of(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ph{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Pv(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ex.bind(null,this.syncEngine),await dp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tx}()}createDatastore(e){const t=Oh(e.databaseInfo.databaseId),n=function(a){return new F1(a)}(e.databaseInfo);return function(a,l,d,f){return new z1(a,l,d,f)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,a,l,d){return new $1(n,s,a,l,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Pv(this.syncEngine,t,0),function(){return Iv.p()?new Iv:new O1}())}createSyncEngine(e,t){return function(s,a,l,d,f,m,v){const w=new cx(s,a,l,d,f,m);return v&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=pe(s);X("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await el(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ph.provider={build:()=>new ph};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ht("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t,n,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async l=>{X("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(X("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=am(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mf(r,e){r.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async s=>{n.isEqual(s)||(await vI(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function kv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await bx(r);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>Tv(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>Tv(e.remoteStore,s)),r._onlineComponents=e}async function bx(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Ho("Error using user provided cache. Falling back to memory cache: "+t),await Mf(r,new ju)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Mf(r,new kx(void 0));return r._offlineComponents}async function UI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await kv(r,r._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await kv(r,new ph))),r._onlineComponents}function Ox(r){return UI(r).then(e=>e.syncEngine)}async function xv(r){const e=await UI(r),t=e.eventManager;return t.onListen=hx.bind(null,e.syncEngine),t.onUnlisten=fx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=px.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(r,e,t){if(!t)throw new ie(G.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Lx(r,e,t,n){if(e===!0&&n===!0)throw new ie(G.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Nv(r){if(!oe.isDocumentKey(r))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Vv(r){if(oe.isDocumentKey(r))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Uh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":de()}function Ni(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uh(r);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BI((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pm{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bv(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new LC;switch(n.type){case"firstParty":return new UC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=Dv.get(t);n&&(X("ComponentProvider","Removing Datastore"),Dv.delete(t),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qi(this.firestore,e,this._query)}}class ln{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class Vi extends qi{constructor(e,t,n){super(e,t,Ph(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new oe(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function vD(r,e,...t){if(r=It(r),zI("collection","path",e),r instanceof pm){const n=Be.fromString(e,...t);return Vv(n),new Vi(r,null,n)}{if(!(r instanceof ln||r instanceof Vi))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Be.fromString(e,...t));return Vv(n),new Vi(r.firestore,null,n)}}function Mx(r,e,...t){if(r=It(r),arguments.length===1&&(e=rw.newId()),zI("doc","path",e),r instanceof pm){const n=Be.fromString(e,...t);return Nv(n),new ln(r,null,new oe(n))}{if(!(r instanceof ln||r instanceof Vi))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Be.fromString(e,...t));return Nv(n),new ln(r.firestore,r instanceof Vi?r.converter:null,new oe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new AI(this,"async_queue_retry"),this.fu=()=>{const n=jc();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.r_.Jo()},this.gu=e;const t=jc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=jc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new xi;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!zi(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(n=>{this.Au=n,this.Ru=!1;const s=function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d}(n);throw ht("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.Ru=!1,n))));return this.gu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=om.createAndSchedule(this,e,t,n,a=>this.Su(a));return this.Eu.push(s),s}pu(){this.Au&&de()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function Lv(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(r,["next","error","complete"])}class Ms extends pm{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new Ov,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ov(e),this._firestoreClient=void 0,await e}}}function Fx(r,e,t){t||(t="(default)");const n=vh(r,"firestore");if(n.isInitialized(t)){const s=n.getImmediate({identifier:t}),a=n.getOptions(t);if(xu(a,e))return s;throw new ie(G.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(G.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:t})}function jI(r){if(r._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$I(r),r._firestoreClient}function $I(r){var e,t,n;const s=r._freezeSettings(),a=function(d,f,m,v){return new pk(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,BI(v.experimentalLongPollingOptions),v.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new Vx(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(r._componentsProvider))}async function Ux(r){Ho("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();Bx(r,ph.provider,{build:t=>new Dx(t,e.cacheSizeBytes)})}function Bx(r,e,t){if((r=Ni(r,Ms))._firestoreClient||r._terminated)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ie(G.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},$I(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(dt.fromBase64String(e))}catch(t){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sa(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=/^__.*__$/;class jx{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new da(e,this.data,t,this.fieldTransforms)}}class qI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class _m{constructor(e,t,n,s,a,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new _m(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:n,Nu:!1});return s.Bu(e),s}Lu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:n,Nu:!1});return s.Fu(),s}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return mh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(KI(this.Mu)&&zx.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class $x{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Oh(e)}$u(e,t,n,s=!1){return new _m({Mu:e,methodName:t,Ku:n,path:it.emptyPath(),Nu:!1,Qu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vm(r){const e=r._freezeSettings(),t=Oh(r._databaseId);return new $x(r._databaseId,!!e.ignoreUndefinedProperties,t)}function qx(r,e,t,n,s,a={}){const l=r.$u(a.merge||a.mergeFields?2:0,e,t,s);Em("Data must be an object, but it was:",l,n);const d=GI(n,l);let f,m;if(a.merge)f=new un(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const T=mp(e,w,t);if(!l.contains(T))throw new ie(G.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);WI(v,T)||v.push(T)}f=new un(v),m=l.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=l.fieldTransforms;return new jx(new qt(d),f,m)}class zh extends mm{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}function Kx(r,e,t,n){const s=r.$u(1,e,t);Em("Data must be an object, but it was:",s,n);const a=[],l=qt.empty();ji(n,(f,m)=>{const v=wm(e,f,t);m=It(m);const w=s.Lu(v);if(m instanceof zh)a.push(v);else{const T=tl(m,w);T!=null&&(a.push(v),l.set(v,T))}});const d=new un(a);return new qI(l,d,s.fieldTransforms)}function Gx(r,e,t,n,s,a){const l=r.$u(1,e,t),d=[mp(e,n,t)],f=[s];if(a.length%2!=0)throw new ie(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(mp(e,a[T])),f.push(a[T+1]);const m=[],v=qt.empty();for(let T=d.length-1;T>=0;--T)if(!WI(m,d[T])){const C=d[T];let V=f[T];V=It(V);const z=l.Lu(C);if(V instanceof zh)m.push(C);else{const b=tl(V,z);b!=null&&(m.push(C),v.set(C,b))}}const w=new un(m);return new qI(v,w,l.fieldTransforms)}function Hx(r,e,t,n=!1){return tl(t,r.$u(n?4:3,e))}function tl(r,e){if(HI(r=It(r)))return Em("Unsupported field value:",e,r),GI(r,e);if(r instanceof mm)return function(n,s){if(!KI(s.Mu))throw s.qu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(n,s){const a=[];let l=0;for(const d of n){let f=tl(d,s.ku(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}}(r,e)}return function(n,s){if((n=It(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Dk(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=st.fromDate(n);return{timestampValue:ea(s.serializer,a)}}if(n instanceof st){const a=new st(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ea(s.serializer,a)}}if(n instanceof gm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof sa)return{bytesValue:Gw(s.serializer,n._byteString)};if(n instanceof ln){const a=s.databaseId,l=n.firestore._databaseId;if(!l.isEqual(a))throw s.qu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Qp(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ym)return function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw d.qu("VectorValues must only contain numeric values.");return qp(d.serializer,f)})}}}}}}(n,s);throw s.qu(`Unsupported field value: ${Uh(n)}`)}(r,e)}function GI(r,e){const t={};return mw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(r,(n,s)=>{const a=tl(s,e.Ou(n));a!=null&&(t[n]=a)}),{mapValue:{fields:t}}}function HI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof st||r instanceof gm||r instanceof sa||r instanceof ln||r instanceof mm||r instanceof ym)}function Em(r,e,t){if(!HI(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const n=Uh(t);throw n==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+n)}}function mp(r,e,t){if((e=It(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return wm(r,e);throw mh("Field path arguments must be of type string or ",r,!1,void 0,t)}const Wx=new RegExp("[~\\*/\\[\\]]");function wm(r,e,t){if(e.search(Wx)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Bh(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function mh(r,e,t,n,s){const a=n&&!n.isEmpty(),l=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${n}`),l&&(f+=` in document ${s}`),f+=")"),new ie(G.INVALID_ARGUMENT,d+r+f)}function WI(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,t,n,s,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Qx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Qx extends QI{data(){return super.data()}}function jh(r,e){return typeof e=="string"?wm(r,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Im{}class Tm extends Im{}function ED(r,e,...t){let n=[];e instanceof Im&&n.push(e),n=n.concat(t),function(a){const l=a.filter(f=>f instanceof Sm).length,d=a.filter(f=>f instanceof $h).length;if(l>1||l>0&&d>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)r=s._apply(r);return r}class $h extends Tm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new $h(e,t,n)}_apply(e){const t=this._parse(e);return JI(e._query,t),new qi(e.firestore,e.converter,np(e._query,t))}_parse(e){const t=vm(e.firestore);return function(a,l,d,f,m,v,w){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Fv(w,v);const C=[];for(const V of w)C.push(Mv(f,a,V));T={arrayValue:{values:C}}}else T=Mv(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Fv(w,v),T=Hx(d,l,w,v==="in"||v==="not-in");return De.create(m,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wD(r,e,t){const n=e,s=jh("where",r);return $h._create(s,n,t)}class Sm extends Im{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sm(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let l=s;const d=a.getFlattenedFilters();for(const f of d)JI(l,f),l=np(l,f)}(e._query,t),new qi(e.firestore,e.converter,np(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rm extends Tm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Rm(e,t)}_apply(e){const t=function(s,a,l){if(s.startAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uu(a,l)}(e._query,this._field,this._direction);return new qi(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new ha(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function ID(r,e="asc"){const t=e,n=jh("orderBy",r);return Rm._create(n,t)}class Am extends Tm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Am(e,t,n)}_apply(e){return new qi(e.firestore,e.converter,rh(e._query,this._limit,this._limitType))}}function TD(r){return Am._create("limit",r,"F")}function Mv(r,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cw(e)&&t.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Be.fromString(t));if(!oe.isDocumentKey(n))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Mu(r,new oe(n))}if(t instanceof ln)return Mu(r,t._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uh(t)}.`)}function Fv(r,e){if(!Array.isArray(r)||r.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JI(r,e){const t=function(s,a){for(const l of s)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Yx{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return ji(e,(s,a)=>{n[s]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,s;const a=(s=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(l=>et(l.doubleValue));return new ym(a)}convertGeoPoint(e){return new gm(et(e.latitude),et(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Rh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const t=$r(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Be.fromString(e);ye(nI(n));const s=new Ns(n.get(1),n.get(3)),a=new oe(n.popFirst(5));return s.isEqual(t)||ht(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(r,e,t){let n;return n=r?r.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YI extends QI{constructor(e,t,n,s,a,l){super(e,t,n,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(jh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class $c extends YI{data(e={}){return super.data(e)}}class Zx{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new wu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new $c(this._firestore,this._userDataWriter,n.key,n,new wu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(d=>{const f=new $c(s._firestore,s._userDataWriter,d.doc.key,d.doc,new wu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new $c(s._firestore,s._userDataWriter,d.doc.key,d.doc,new wu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return d.type!==0&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),v=l.indexOf(d.doc.key)),{type:eD(d.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function eD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}class XI extends Yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function SD(r,e,t,...n){r=Ni(r,ln);const s=Ni(r.firestore,Ms),a=vm(s);let l;return l=typeof(e=It(e))=="string"||e instanceof Bh?Gx(a,"updateDoc",r._key,e,t,n):Kx(a,"updateDoc",r._key,e),Pm(s,[l.toMutation(r._key,Jt.exists(!0))])}function RD(r){return Pm(Ni(r.firestore,Ms),[new Dh(r._key,Jt.none())])}function AD(r,e){const t=Ni(r.firestore,Ms),n=Mx(r),s=Xx(r.converter,e);return Pm(t,[qx(vm(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Jt.exists(!1))]).then(()=>n)}function PD(r,...e){var t,n,s;r=It(r);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Lv(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Lv(e[l])){const w=e[l];e[l]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[l+1]=(n=w.error)===null||n===void 0?void 0:n.bind(w),e[l+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let f,m,v;if(r instanceof ln)m=Ni(r.firestore,Ms),v=Ph(r._key.path),f={next:w=>{e[l]&&e[l](tD(m,r,w))},error:e[l+1],complete:e[l+2]};else{const w=Ni(r,qi);m=Ni(w.firestore,Ms),v=w._query;const T=new XI(m);f={next:C=>{e[l]&&e[l](new Zx(m,T,w,C))},error:e[l+1],complete:e[l+2]},Jx(r._query)}return function(T,C,V,z){const b=new Nx(z),K=new ox(C,b,V);return T.asyncQueue.enqueueAndForget(async()=>nx(await xv(T),K)),()=>{b.eu(),T.asyncQueue.enqueueAndForget(async()=>rx(await xv(T),K))}}(jI(m),v,d,f)}function Pm(r,e){return function(n,s){const a=new xi;return n.asyncQueue.enqueueAndForget(async()=>mx(await Ox(n),s,a)),a.promise}(jI(r),e)}function tD(r,e,t){const n=t.docs.get(e._key),s=new XI(r);return new YI(r,s,e._key,n,new wu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){ca=s})(Fs),ks(new Oi("firestore",(n,{instanceIdentifier:s,options:a})=>{const l=n.getProvider("app").getImmediate(),d=new Ms(new MC(n.getProvider("auth-internal")),new zC(n.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ns(m.options.projectId,v)}(l,s),l);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Br(x_,"4.7.6",e),Br(x_,"4.7.6","esm2017")})();const nD={apiKey:"AIzaSyCD_r-dJ1Vvz5NMLR0wwwIv4-rWb_wTN0I",authDomain:"task-management-app-9162b.firebaseapp.com",projectId:"task-management-app-9162b",storageBucket:"task-management-app-9162b.firebasestorage.app",messagingSenderId:"654355755906",appId:"1:654355755906:web:0ff43c179842f8918d559b",measurementId:"G-QZ4Z3G6HFN"},Cm=fE(nD),CD=iC(Cm);DC(Cm);const rD=Fx(Cm,{experimentalForceLongPolling:!0,cacheSizeBytes:5e7,ignoreUndefinedProperties:!0});Ux(rD).catch(r=>{r.code==="failed-precondition"?console.warn("Persistence failed to enable"):r.code==="unimplemented"&&console.warn("Persistence is not available in this browser")});const Uv=r=>{let e;const t=new Set,n=(m,v)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const T=e;e=v??(typeof w!="object"||w===null)?w:Object.assign({},e,w),t.forEach(C=>C(e,T))}},s=()=>e,d={setState:n,getState:s,getInitialState:()=>f,subscribe:m=>(t.add(m),()=>t.delete(m))},f=e=r(n,s,d);return d},iD=r=>r?Uv(r):Uv,sD=r=>r;function oD(r,e=sD){const t=Uy.useSyncExternalStore(r.subscribe,()=>e(r.getState()),()=>e(r.getInitialState()));return Uy.useDebugValue(t),t}const Bv=r=>{const e=iD(r),t=n=>oD(e,n);return Object.assign(t,e),t},aD=r=>r?Bv(r):Bv,kD=aD(r=>({user:null,loading:!0,setUser:e=>r({user:e}),setLoading:e=>r({loading:e})}));export{lD as A,dD as B,pr as F,Ii as G,cD as N,Uy as R,aS as a,vD as b,aD as c,rD as d,PD as e,AD as f,zv as g,Mx as h,SD as i,uD as j,RD as k,TD as l,CD as m,gp as n,ID as o,fD as p,ED as q,W as r,pD as s,hD as t,kD as u,XS as v,wD as w,lS as x,Qv as y,mD as z};
