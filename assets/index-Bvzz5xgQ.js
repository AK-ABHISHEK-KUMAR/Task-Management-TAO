var iE=n=>{throw TypeError(n)};var Mm=(n,e,t)=>e.has(n)||iE("Cannot "+t);var ne=(n,e,t)=>(Mm(n,e,"read from private field"),t?t.call(n):e.get(n)),Qe=(n,e,t)=>e.has(n)?iE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ke=(n,e,t,r)=>(Mm(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),nn=(n,e,t)=>(Mm(n,e,"access private method"),t);var sh=(n,e,t,r)=>({set _(i){ke(n,e,i,t)},get _(){return ne(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function wb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lm={exports:{}},Au={},Fm={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function oP(){if(sE)return Ve;sE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,R={};function S(U,ee,fe){this.props=U,this.context=ee,this.refs=R,this.updater=fe||I}S.prototype.isReactComponent={},S.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function M(){}M.prototype=S.prototype;function V(U,ee,fe){this.props=U,this.context=ee,this.refs=R,this.updater=fe||I}var $=V.prototype=new M;$.constructor=V,b($,S.prototype),$.isPureReactComponent=!0;var H=Array.isArray,X=Object.prototype.hasOwnProperty,J={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(U,ee,fe){var Ce,De={},Oe=null,Ue=null;if(ee!=null)for(Ce in ee.ref!==void 0&&(Ue=ee.ref),ee.key!==void 0&&(Oe=""+ee.key),ee)X.call(ee,Ce)&&!D.hasOwnProperty(Ce)&&(De[Ce]=ee[Ce]);var $e=arguments.length-2;if($e===1)De.children=fe;else if(1<$e){for(var Ke=Array($e),_t=0;_t<$e;_t++)Ke[_t]=arguments[_t+2];De.children=Ke}if(U&&U.defaultProps)for(Ce in $e=U.defaultProps,$e)De[Ce]===void 0&&(De[Ce]=$e[Ce]);return{$$typeof:n,type:U,key:Oe,ref:Ue,props:De,_owner:J.current}}function P(U,ee){return{$$typeof:n,type:U.type,key:ee,ref:U.ref,props:U.props,_owner:U._owner}}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function F(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(fe){return ee[fe]})}var z=/\/+/g;function k(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?F(""+U.key):ee.toString(36)}function Ze(U,ee,fe,Ce,De){var Oe=typeof U;(Oe==="undefined"||Oe==="boolean")&&(U=null);var Ue=!1;if(U===null)Ue=!0;else switch(Oe){case"string":case"number":Ue=!0;break;case"object":switch(U.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=U,De=De(Ue),U=Ce===""?"."+k(Ue,0):Ce,H(De)?(fe="",U!=null&&(fe=U.replace(z,"$&/")+"/"),Ze(De,ee,fe,"",function(_t){return _t})):De!=null&&(N(De)&&(De=P(De,fe+(!De.key||Ue&&Ue.key===De.key?"":(""+De.key).replace(z,"$&/")+"/")+U)),ee.push(De)),1;if(Ue=0,Ce=Ce===""?".":Ce+":",H(U))for(var $e=0;$e<U.length;$e++){Oe=U[$e];var Ke=Ce+k(Oe,$e);Ue+=Ze(Oe,ee,fe,Ke,De)}else if(Ke=_(U),typeof Ke=="function")for(U=Ke.call(U),$e=0;!(Oe=U.next()).done;)Oe=Oe.value,Ke=Ce+k(Oe,$e++),Ue+=Ze(Oe,ee,fe,Ke,De);else if(Oe==="object")throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ue}function He(U,ee,fe){if(U==null)return U;var Ce=[],De=0;return Ze(U,Ce,"","",function(Oe){return ee.call(fe,Oe,De++)}),Ce}function It(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(fe){(U._status===0||U._status===-1)&&(U._status=1,U._result=fe)},function(fe){(U._status===0||U._status===-1)&&(U._status=2,U._result=fe)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var Be={current:null},le={transition:null},Ie={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:le,ReactCurrentOwner:J};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:He,forEach:function(U,ee,fe){He(U,function(){ee.apply(this,arguments)},fe)},count:function(U){var ee=0;return He(U,function(){ee++}),ee},toArray:function(U){return He(U,function(ee){return ee})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ve.Component=S,Ve.Fragment=t,Ve.Profiler=i,Ve.PureComponent=V,Ve.StrictMode=r,Ve.Suspense=d,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,Ve.act=Z,Ve.cloneElement=function(U,ee,fe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ce=b({},U.props),De=U.key,Oe=U.ref,Ue=U._owner;if(ee!=null){if(ee.ref!==void 0&&(Oe=ee.ref,Ue=J.current),ee.key!==void 0&&(De=""+ee.key),U.type&&U.type.defaultProps)var $e=U.type.defaultProps;for(Ke in ee)X.call(ee,Ke)&&!D.hasOwnProperty(Ke)&&(Ce[Ke]=ee[Ke]===void 0&&$e!==void 0?$e[Ke]:ee[Ke])}var Ke=arguments.length-2;if(Ke===1)Ce.children=fe;else if(1<Ke){$e=Array(Ke);for(var _t=0;_t<Ke;_t++)$e[_t]=arguments[_t+2];Ce.children=$e}return{$$typeof:n,type:U.type,key:De,ref:Oe,props:Ce,_owner:Ue}},Ve.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},Ve.createElement=A,Ve.createFactory=function(U){var ee=A.bind(null,U);return ee.type=U,ee},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(U){return{$$typeof:c,render:U}},Ve.isValidElement=N,Ve.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:It}},Ve.memo=function(U,ee){return{$$typeof:p,type:U,compare:ee===void 0?null:ee}},Ve.startTransition=function(U){var ee=le.transition;le.transition={};try{U()}finally{le.transition=ee}},Ve.unstable_act=Z,Ve.useCallback=function(U,ee){return Be.current.useCallback(U,ee)},Ve.useContext=function(U){return Be.current.useContext(U)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(U){return Be.current.useDeferredValue(U)},Ve.useEffect=function(U,ee){return Be.current.useEffect(U,ee)},Ve.useId=function(){return Be.current.useId()},Ve.useImperativeHandle=function(U,ee,fe){return Be.current.useImperativeHandle(U,ee,fe)},Ve.useInsertionEffect=function(U,ee){return Be.current.useInsertionEffect(U,ee)},Ve.useLayoutEffect=function(U,ee){return Be.current.useLayoutEffect(U,ee)},Ve.useMemo=function(U,ee){return Be.current.useMemo(U,ee)},Ve.useReducer=function(U,ee,fe){return Be.current.useReducer(U,ee,fe)},Ve.useRef=function(U){return Be.current.useRef(U)},Ve.useState=function(U){return Be.current.useState(U)},Ve.useSyncExternalStore=function(U,ee,fe){return Be.current.useSyncExternalStore(U,ee,fe)},Ve.useTransition=function(){return Be.current.useTransition()},Ve.version="18.3.1",Ve}var oE;function Sf(){return oE||(oE=1,Fm.exports=oP()),Fm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function aP(){if(aE)return Au;aE=1;var n=Sf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,p){var m,y={},_=null,I=null;p!==void 0&&(_=""+p),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(I=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(y[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:c,key:_,ref:I,props:y,_owner:i.current}}return Au.Fragment=t,Au.jsx=l,Au.jsxs=l,Au}var lE;function lP(){return lE||(lE=1,Lm.exports=aP()),Lm.exports}var O=lP(),L=Sf();const Ye=wb(L);var oh={},Bm={exports:{}},An={},Um={exports:{}},jm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function uP(){return uE||(uE=1,function(n){function e(le,Ie){var Z=le.length;le.push(Ie);e:for(;0<Z;){var U=Z-1>>>1,ee=le[U];if(0<i(ee,Ie))le[U]=Ie,le[Z]=ee,Z=U;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var Ie=le[0],Z=le.pop();if(Z!==Ie){le[0]=Z;e:for(var U=0,ee=le.length,fe=ee>>>1;U<fe;){var Ce=2*(U+1)-1,De=le[Ce],Oe=Ce+1,Ue=le[Oe];if(0>i(De,Z))Oe<ee&&0>i(Ue,De)?(le[U]=Ue,le[Oe]=Z,U=Oe):(le[U]=De,le[Ce]=Z,U=Ce);else if(Oe<ee&&0>i(Ue,Z))le[U]=Ue,le[Oe]=Z,U=Oe;else break e}}return Ie}function i(le,Ie){var Z=le.sortIndex-Ie.sortIndex;return Z!==0?Z:le.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],p=[],m=1,y=null,_=3,I=!1,b=!1,R=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(le){for(var Ie=t(p);Ie!==null;){if(Ie.callback===null)r(p);else if(Ie.startTime<=le)r(p),Ie.sortIndex=Ie.expirationTime,e(d,Ie);else break;Ie=t(p)}}function H(le){if(R=!1,$(le),!b)if(t(d)!==null)b=!0,It(X);else{var Ie=t(p);Ie!==null&&Be(H,Ie.startTime-le)}}function X(le,Ie){b=!1,R&&(R=!1,M(A),A=-1),I=!0;var Z=_;try{for($(Ie),y=t(d);y!==null&&(!(y.expirationTime>Ie)||le&&!F());){var U=y.callback;if(typeof U=="function"){y.callback=null,_=y.priorityLevel;var ee=U(y.expirationTime<=Ie);Ie=n.unstable_now(),typeof ee=="function"?y.callback=ee:y===t(d)&&r(d),$(Ie)}else r(d);y=t(d)}if(y!==null)var fe=!0;else{var Ce=t(p);Ce!==null&&Be(H,Ce.startTime-Ie),fe=!1}return fe}finally{y=null,_=Z,I=!1}}var J=!1,D=null,A=-1,P=5,N=-1;function F(){return!(n.unstable_now()-N<P)}function z(){if(D!==null){var le=n.unstable_now();N=le;var Ie=!0;try{Ie=D(!0,le)}finally{Ie?k():(J=!1,D=null)}}else J=!1}var k;if(typeof V=="function")k=function(){V(z)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,He=Ze.port2;Ze.port1.onmessage=z,k=function(){He.postMessage(null)}}else k=function(){S(z,0)};function It(le){D=le,J||(J=!0,k())}function Be(le,Ie){A=S(function(){le(n.unstable_now())},Ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){b||I||(b=!0,It(X))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(le){switch(_){case 1:case 2:case 3:var Ie=3;break;default:Ie=_}var Z=_;_=Ie;try{return le()}finally{_=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,Ie){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Z=_;_=le;try{return Ie()}finally{_=Z}},n.unstable_scheduleCallback=function(le,Ie,Z){var U=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?U+Z:U):Z=U,le){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Z+ee,le={id:m++,callback:Ie,priorityLevel:le,startTime:Z,expirationTime:ee,sortIndex:-1},Z>U?(le.sortIndex=Z,e(p,le),t(d)===null&&le===t(p)&&(R?(M(A),A=-1):R=!0,Be(H,Z-U))):(le.sortIndex=ee,e(d,le),b||I||(b=!0,It(X))),le},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(le){var Ie=_;return function(){var Z=_;_=Ie;try{return le.apply(this,arguments)}finally{_=Z}}}}(jm)),jm}var cE;function cP(){return cE||(cE=1,Um.exports=uP()),Um.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function dP(){if(dE)return An;dE=1;var n=Sf(),e=cP();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function _(s){return d.call(y,s)?!0:d.call(m,s)?!1:p.test(s)?y[s]=!0:(m[s]=!0,!1)}function I(s,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,u,f){if(a===null||typeof a>"u"||I(s,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function R(s,a,u,f,g,w,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=w,this.removeEmptyString=T}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new R(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];S[a]=new R(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new R(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new R(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new R(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new R(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new R(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new R(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new R(s,5,!1,s.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function V(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(M,V);S[a]=new R(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(M,V);S[a]=new R(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(M,V);S[a]=new R(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new R(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new R(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,a,u,f){var g=S.hasOwnProperty(a)?S[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,u,g,f)&&(u=null),f||g===null?_(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,f=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?s.setAttributeNS(f,a,u):s.setAttribute(a,u))))}var H=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),J=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),F=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),le=Symbol.iterator;function Ie(s){return s===null||typeof s!="object"?null:(s=le&&s[le]||s["@@iterator"],typeof s=="function"?s:null)}var Z=Object.assign,U;function ee(s){if(U===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||""}return`
`+U+s}var fe=!1;function Ce(s,a){if(!s||fe)return"";fe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Q){var f=Q}Reflect.construct(s,[],a)}else{try{a.call()}catch(Q){f=Q}s.call(a.prototype)}else{try{throw Error()}catch(Q){f=Q}s()}}catch(Q){if(Q&&f&&typeof Q.stack=="string"){for(var g=Q.stack.split(`
`),w=f.stack.split(`
`),T=g.length-1,C=w.length-1;1<=T&&0<=C&&g[T]!==w[C];)C--;for(;1<=T&&0<=C;T--,C--)if(g[T]!==w[C]){if(T!==1||C!==1)do if(T--,C--,0>C||g[T]!==w[C]){var B=`
`+g[T].replace(" at new "," at ");return s.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",s.displayName)),B}while(1<=T&&0<=C);break}}}finally{fe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?ee(s):""}function De(s){switch(s.tag){case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return s=Ce(s.type,!1),s;case 11:return s=Ce(s.type.render,!1),s;case 1:return s=Ce(s.type,!0),s;default:return""}}function Oe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case J:return"Portal";case P:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case Ze:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case F:return(s.displayName||"Context")+".Consumer";case N:return(s._context.displayName||"Context")+".Provider";case z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case He:return a=s.displayName||null,a!==null?a:Oe(s.type)||"Memo";case It:a=s._payload,s=s._init;try{return Oe(s(a))}catch{}}return null}function Ue(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function $e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ke(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _t(s){var a=Ke(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,w.call(this,T)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Cr(s){s._valueTracker||(s._valueTracker=_t(s))}function Ct(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=Ke(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function wn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Us(s,a){var u=a.checked;return Z({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function qo(s,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=$e(a.value!=null?a.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ol(s,a){a=a.checked,a!=null&&$(s,"checked",a,!1)}function Vl(s,a){Ol(s,a);var u=$e(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Wo(s,a.type,u):a.hasOwnProperty("defaultValue")&&Wo(s,a.type,$e(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Gc(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Wo(s,a,u){(a!=="number"||wn(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var ei=Array.isArray;function ti(s,a,u,f){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&f&&(s[u].defaultSelected=!0)}else{for(u=""+$e(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Ml(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ho(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(ei(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:$e(u)}}function Ko(s,a){var u=$e(a.value),f=$e(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function Ll(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Dt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Dt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ni,Fl=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,f,g)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(ni=ni||document.createElement("div"),ni.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ni.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ni(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zs=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(s){zs.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),js[a]=js[s]})});function Bl(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||js.hasOwnProperty(s)&&js[s]?(""+a).trim():a+"px"}function Ul(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Bl(u,a[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,g):s[u]=g}}var jl=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zl(s,a){if(a){if(jl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function $l(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $s=null;function Qo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yo=null,qn=null,Dr=null;function Jo(s){if(s=fu(s)){if(typeof Yo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=wd(a),Yo(s.stateNode,s.type,a))}}function kr(s){qn?Dr?Dr.push(s):Dr=[s]:qn=s}function Gl(){if(qn){var s=qn,a=Dr;if(Dr=qn=null,Jo(s),a)for(s=0;s<a.length;s++)Jo(a[s])}}function Gs(s,a){return s(a)}function ql(){}var ri=!1;function Wl(s,a,u){if(ri)return s(a,u);ri=!0;try{return Gs(s,a,u)}finally{ri=!1,(qn!==null||Dr!==null)&&(ql(),Gl())}}function Tt(s,a){var u=s.stateNode;if(u===null)return null;var f=wd(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Xo=!1;if(c)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Xo=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Xo=!1}function qs(s,a,u,f,g,w,T,C,B){var Q=Array.prototype.slice.call(arguments,3);try{a.apply(u,Q)}catch(se){this.onError(se)}}var Ws=!1,Zo=null,or=!1,Hl=null,cp={onError:function(s){Ws=!0,Zo=s}};function ea(s,a,u,f,g,w,T,C,B){Ws=!1,Zo=null,qs.apply(cp,arguments)}function qc(s,a,u,f,g,w,T,C,B){if(ea.apply(this,arguments),Ws){if(Ws){var Q=Zo;Ws=!1,Zo=null}else throw Error(t(198));or||(or=!0,Hl=Q)}}function ar(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,a.flags&4098&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Hs(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function lr(s){if(ar(s)!==s)throw Error(t(188))}function Wc(s){var a=s.alternate;if(!a){if(a=ar(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,f=a;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return lr(g),s;if(w===f)return lr(g),a;w=w.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=w;else{for(var T=!1,C=g.child;C;){if(C===u){T=!0,u=g,f=w;break}if(C===f){T=!0,f=g,u=w;break}C=C.sibling}if(!T){for(C=w.child;C;){if(C===u){T=!0,u=w,f=g;break}if(C===f){T=!0,f=w,u=g;break}C=C.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function Kl(s){return s=Wc(s),s!==null?ta(s):null}function ta(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=ta(s);if(a!==null)return a;s=s.sibling}return null}var na=e.unstable_scheduleCallback,Ql=e.unstable_cancelCallback,Hc=e.unstable_shouldYield,dp=e.unstable_requestPaint,st=e.unstable_now,Kc=e.unstable_getCurrentPriorityLevel,Ks=e.unstable_ImmediatePriority,Oi=e.unstable_UserBlockingPriority,Wn=e.unstable_NormalPriority,Yl=e.unstable_LowPriority,Qc=e.unstable_IdlePriority,Qs=null,kn=null;function Yc(s){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Qs,s,void 0,(s.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:Xc,Jl=Math.log,Jc=Math.LN2;function Xc(s){return s>>>=0,s===0?32:31-(Jl(s)/Jc|0)|0}var ra=64,ia=4194304;function Vi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ys(s,a){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,w=s.pingedLanes,T=u&268435455;if(T!==0){var C=T&~g;C!==0?f=Vi(C):(w&=T,w!==0&&(f=Vi(w)))}else T=u&~g,T!==0?f=Vi(T):w!==0&&(f=Vi(w));if(f===0)return 0;if(a!==0&&a!==f&&!(a&g)&&(g=f&-f,w=a&-a,g>=w||g===16&&(w&4194240)!==0))return a;if(f&4&&(f|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=f;0<a;)u=31-cn(a),g=1<<u,f|=s[u],a&=~g;return f}function hp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,w=s.pendingLanes;0<w;){var T=31-cn(w),C=1<<T,B=g[T];B===-1?(!(C&u)||C&f)&&(g[T]=hp(C,a)):B<=a&&(s.expiredLanes|=C),w&=~C}}function Nn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Js(){var s=ra;return ra<<=1,!(ra&4194240)&&(ra=64),s}function Mi(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Li(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-cn(a),s[a]=u}function it(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-cn(u),w=1<<g;a[g]=0,f[g]=-1,s[g]=-1,u&=~w}}function Fi(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-cn(u),g=1<<f;g&a|s[f]&a&&(s[f]|=a),u&=~g}}var Fe=0;function Bi(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Zc,sa,ed,td,nd,Xl=!1,Nr=[],Wt=null,ur=null,cr=null,Ui=new Map,Hn=new Map,Or=[],fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rd(s,a){switch(s){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Ui.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(a.pointerId)}}function En(s,a,u,f,g,w){return s===null||s.nativeEvent!==w?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:w,targetContainers:[g]},a!==null&&(a=fu(a),a!==null&&sa(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function pp(s,a,u,f,g){switch(a){case"focusin":return Wt=En(Wt,s,a,u,f,g),!0;case"dragenter":return ur=En(ur,s,a,u,f,g),!0;case"mouseover":return cr=En(cr,s,a,u,f,g),!0;case"pointerover":var w=g.pointerId;return Ui.set(w,En(Ui.get(w)||null,s,a,u,f,g)),!0;case"gotpointercapture":return w=g.pointerId,Hn.set(w,En(Hn.get(w)||null,s,a,u,f,g)),!0}return!1}function id(s){var a=no(s.target);if(a!==null){var u=ar(a);if(u!==null){if(a=u.tag,a===13){if(a=Hs(u),a!==null){s.blockedOn=a,nd(s.priority,function(){ed(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function si(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=oa(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);$s=f,u.target.dispatchEvent(f),$s=null}else return a=fu(u),a!==null&&sa(a),s.blockedOn=u,!1;a.shift()}return!0}function Xs(s,a,u){si(s)&&u.delete(a)}function sd(){Xl=!1,Wt!==null&&si(Wt)&&(Wt=null),ur!==null&&si(ur)&&(ur=null),cr!==null&&si(cr)&&(cr=null),Ui.forEach(Xs),Hn.forEach(Xs)}function dr(s,a){s.blockedOn===a&&(s.blockedOn=null,Xl||(Xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sd)))}function hr(s){function a(g){return dr(g,s)}if(0<Nr.length){dr(Nr[0],s);for(var u=1;u<Nr.length;u++){var f=Nr[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Wt!==null&&dr(Wt,s),ur!==null&&dr(ur,s),cr!==null&&dr(cr,s),Ui.forEach(a),Hn.forEach(a),u=0;u<Or.length;u++)f=Or[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<Or.length&&(u=Or[0],u.blockedOn===null);)id(u),u.blockedOn===null&&Or.shift()}var oi=H.ReactCurrentBatchConfig,ji=!0;function ct(s,a,u,f){var g=Fe,w=oi.transition;oi.transition=null;try{Fe=1,Zl(s,a,u,f)}finally{Fe=g,oi.transition=w}}function mp(s,a,u,f){var g=Fe,w=oi.transition;oi.transition=null;try{Fe=4,Zl(s,a,u,f)}finally{Fe=g,oi.transition=w}}function Zl(s,a,u,f){if(ji){var g=oa(s,a,u,f);if(g===null)xp(s,a,f,Zs,u),rd(s,f);else if(pp(g,s,a,u,f))f.stopPropagation();else if(rd(s,f),a&4&&-1<fp.indexOf(s)){for(;g!==null;){var w=fu(g);if(w!==null&&Zc(w),w=oa(s,a,u,f),w===null&&xp(s,a,f,Zs,u),w===g)break;g=w}g!==null&&f.stopPropagation()}else xp(s,a,f,null,u)}}var Zs=null;function oa(s,a,u,f){if(Zs=null,s=Qo(f),s=no(s),s!==null)if(a=ar(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Hs(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Zs=s,null}function eu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kc()){case Ks:return 1;case Oi:return 4;case Wn:case Yl:return 16;case Qc:return 536870912;default:return 16}default:return 16}}var On=null,aa=null,In=null;function tu(){if(In)return In;var s,a=aa,u=a.length,f,g="value"in On?On.value:On.textContent,w=g.length;for(s=0;s<u&&a[s]===g[s];s++);var T=u-s;for(f=1;f<=T&&a[u-f]===g[w-f];f++);return In=g.slice(s,1<f?1-f:void 0)}function la(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Vr(){return!0}function nu(){return!1}function Ht(s){function a(u,f,g,w,T){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(u=s[C],this[C]=u?u(w):w[C]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Vr:nu,this.isPropagationStopped=nu,this}return Z(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),a}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Ht(fr),Mr=Z({},fr,{view:0,detail:0}),gp=Ht(Mr),ca,ai,zi,eo=Z({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==zi&&(zi&&s.type==="mousemove"?(ca=s.screenX-zi.screenX,ai=s.screenY-zi.screenY):ai=ca=0,zi=s),ca)},movementY:function(s){return"movementY"in s?s.movementY:ai}}),da=Ht(eo),ru=Z({},eo,{dataTransfer:0}),od=Ht(ru),ha=Z({},Mr,{relatedTarget:0}),fa=Ht(ha),ad=Z({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),li=Ht(ad),ld=Z({},fr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ud=Ht(ld),cd=Z({},fr,{data:0}),iu=Ht(cd),pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=dd[s])?!!a[s]:!1}function Lr(){return hd}var h=Z({},Mr,{key:function(s){if(s.key){var a=pa[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=la(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(s){return s.type==="keypress"?la(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?la(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v=Ht(h),E=Z({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x=Ht(E),q=Z({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),Y=Ht(q),ce=Z({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=Ht(ce),Nt=Z({},eo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),je=Ht(Nt),Bt=[9,13,27,32],Rt=c&&"CompositionEvent"in window,Kn=null;c&&"documentMode"in document&&(Kn=document.documentMode);var Vn=c&&"TextEvent"in window&&!Kn,to=c&&(!Rt||Kn&&8<Kn&&11>=Kn),ma=" ",X_=!1;function Z_(s,a){switch(s){case"keyup":return Bt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ev(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ga=!1;function iA(s,a){switch(s){case"compositionend":return ev(a);case"keypress":return a.which!==32?null:(X_=!0,ma);case"textInput":return s=a.data,s===ma&&X_?null:s;default:return null}}function sA(s,a){if(ga)return s==="compositionend"||!Rt&&Z_(s,a)?(s=tu(),In=aa=On=null,ga=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return to&&a.locale!=="ko"?null:a.data;default:return null}}var oA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!oA[s.type]:a==="textarea"}function nv(s,a,u,f){kr(f),a=yd(a,"onChange"),0<a.length&&(u=new ua("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var su=null,ou=null;function aA(s){wv(s,0)}function fd(s){var a=Ea(s);if(Ct(a))return s}function lA(s,a){if(s==="change")return a}var rv=!1;if(c){var yp;if(c){var _p="oninput"in document;if(!_p){var iv=document.createElement("div");iv.setAttribute("oninput","return;"),_p=typeof iv.oninput=="function"}yp=_p}else yp=!1;rv=yp&&(!document.documentMode||9<document.documentMode)}function sv(){su&&(su.detachEvent("onpropertychange",ov),ou=su=null)}function ov(s){if(s.propertyName==="value"&&fd(ou)){var a=[];nv(a,ou,s,Qo(s)),Wl(aA,a)}}function uA(s,a,u){s==="focusin"?(sv(),su=a,ou=u,su.attachEvent("onpropertychange",ov)):s==="focusout"&&sv()}function cA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fd(ou)}function dA(s,a){if(s==="click")return fd(a)}function hA(s,a){if(s==="input"||s==="change")return fd(a)}function fA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var pr=typeof Object.is=="function"?Object.is:fA;function au(s,a){if(pr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!d.call(a,g)||!pr(s[g],a[g]))return!1}return!0}function av(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function lv(s,a){var u=av(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=av(u)}}function uv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?uv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function cv(){for(var s=window,a=wn();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=wn(s.document)}return a}function vp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function pA(s){var a=cv(),u=s.focusedElem,f=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&uv(u.ownerDocument.documentElement,u)){if(f!==null&&vp(u)){if(a=f.start,s=f.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,w=Math.min(f.start,g);f=f.end===void 0?w:Math.min(f.end,g),!s.extend&&w>f&&(g=f,f=w,w=g),g=lv(u,w);var T=lv(u,f);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),w>f?(s.addRange(a),s.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var mA=c&&"documentMode"in document&&11>=document.documentMode,ya=null,wp=null,lu=null,Ep=!1;function dv(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ep||ya==null||ya!==wn(f)||(f=ya,"selectionStart"in f&&vp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),lu&&au(lu,f)||(lu=f,f=yd(wp,"onSelect"),0<f.length&&(a=new ua("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=ya)))}function pd(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var _a={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},Ip={},hv={};c&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function md(s){if(Ip[s])return Ip[s];if(!_a[s])return s;var a=_a[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in hv)return Ip[s]=a[u];return s}var fv=md("animationend"),pv=md("animationiteration"),mv=md("animationstart"),gv=md("transitionend"),yv=new Map,_v="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(s,a){yv.set(s,a),o(a,[s])}for(var Tp=0;Tp<_v.length;Tp++){var bp=_v[Tp],gA=bp.toLowerCase(),yA=bp[0].toUpperCase()+bp.slice(1);$i(gA,"on"+yA)}$i(fv,"onAnimationEnd"),$i(pv,"onAnimationIteration"),$i(mv,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(gv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_A=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function vv(s,a,u){var f=s.type||"unknown-event";s.currentTarget=u,qc(f,a,void 0,s),s.currentTarget=null}function wv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],g=f.event;f=f.listeners;e:{var w=void 0;if(a)for(var T=f.length-1;0<=T;T--){var C=f[T],B=C.instance,Q=C.currentTarget;if(C=C.listener,B!==w&&g.isPropagationStopped())break e;vv(g,C,Q),w=B}else for(T=0;T<f.length;T++){if(C=f[T],B=C.instance,Q=C.currentTarget,C=C.listener,B!==w&&g.isPropagationStopped())break e;vv(g,C,Q),w=B}}}if(or)throw s=Hl,or=!1,Hl=null,s}function lt(s,a){var u=a[kp];u===void 0&&(u=a[kp]=new Set);var f=s+"__bubble";u.has(f)||(Ev(a,s,2,!1),u.add(f))}function Sp(s,a,u){var f=0;a&&(f|=4),Ev(u,s,f,a)}var gd="_reactListening"+Math.random().toString(36).slice(2);function cu(s){if(!s[gd]){s[gd]=!0,r.forEach(function(u){u!=="selectionchange"&&(_A.has(u)||Sp(u,!1,s),Sp(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[gd]||(a[gd]=!0,Sp("selectionchange",!1,a))}}function Ev(s,a,u,f){switch(eu(a)){case 1:var g=ct;break;case 4:g=mp;break;default:g=Zl}u=g.bind(null,a,u,s),g=void 0,!Xo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function xp(s,a,u,f,g){var w=f;if(!(a&1)&&!(a&2)&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var C=f.stateNode.containerInfo;if(C===g||C.nodeType===8&&C.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var B=T.tag;if((B===3||B===4)&&(B=T.stateNode.containerInfo,B===g||B.nodeType===8&&B.parentNode===g))return;T=T.return}for(;C!==null;){if(T=no(C),T===null)return;if(B=T.tag,B===5||B===6){f=w=T;continue e}C=C.parentNode}}f=f.return}Wl(function(){var Q=w,se=Qo(u),oe=[];e:{var re=yv.get(s);if(re!==void 0){var pe=ua,ge=s;switch(s){case"keypress":if(la(u)===0)break e;case"keydown":case"keyup":pe=v;break;case"focusin":ge="focus",pe=fa;break;case"focusout":ge="blur",pe=fa;break;case"beforeblur":case"afterblur":pe=fa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Y;break;case fv:case pv:case mv:pe=li;break;case gv:pe=et;break;case"scroll":pe=gp;break;case"wheel":pe=je;break;case"copy":case"cut":case"paste":pe=ud;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=x}var _e=(a&4)!==0,bt=!_e&&s==="scroll",W=_e?re!==null?re+"Capture":null:re;_e=[];for(var j=Q,K;j!==null;){K=j;var ae=K.stateNode;if(K.tag===5&&ae!==null&&(K=ae,W!==null&&(ae=Tt(j,W),ae!=null&&_e.push(du(j,ae,K)))),bt)break;j=j.return}0<_e.length&&(re=new pe(re,ge,null,u,se),oe.push({event:re,listeners:_e}))}}if(!(a&7)){e:{if(re=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",re&&u!==$s&&(ge=u.relatedTarget||u.fromElement)&&(no(ge)||ge[ui]))break e;if((pe||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,pe?(ge=u.relatedTarget||u.toElement,pe=Q,ge=ge?no(ge):null,ge!==null&&(bt=ar(ge),ge!==bt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(pe=null,ge=Q),pe!==ge)){if(_e=da,ae="onMouseLeave",W="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(_e=x,ae="onPointerLeave",W="onPointerEnter",j="pointer"),bt=pe==null?re:Ea(pe),K=ge==null?re:Ea(ge),re=new _e(ae,j+"leave",pe,u,se),re.target=bt,re.relatedTarget=K,ae=null,no(se)===Q&&(_e=new _e(W,j+"enter",ge,u,se),_e.target=K,_e.relatedTarget=bt,ae=_e),bt=ae,pe&&ge)t:{for(_e=pe,W=ge,j=0,K=_e;K;K=va(K))j++;for(K=0,ae=W;ae;ae=va(ae))K++;for(;0<j-K;)_e=va(_e),j--;for(;0<K-j;)W=va(W),K--;for(;j--;){if(_e===W||W!==null&&_e===W.alternate)break t;_e=va(_e),W=va(W)}_e=null}else _e=null;pe!==null&&Iv(oe,re,pe,_e,!1),ge!==null&&bt!==null&&Iv(oe,bt,ge,_e,!0)}}e:{if(re=Q?Ea(Q):window,pe=re.nodeName&&re.nodeName.toLowerCase(),pe==="select"||pe==="input"&&re.type==="file")var we=lA;else if(tv(re))if(rv)we=hA;else{we=cA;var Se=uA}else(pe=re.nodeName)&&pe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(we=dA);if(we&&(we=we(s,Q))){nv(oe,we,u,se);break e}Se&&Se(s,re,Q),s==="focusout"&&(Se=re._wrapperState)&&Se.controlled&&re.type==="number"&&Wo(re,"number",re.value)}switch(Se=Q?Ea(Q):window,s){case"focusin":(tv(Se)||Se.contentEditable==="true")&&(ya=Se,wp=Q,lu=null);break;case"focusout":lu=wp=ya=null;break;case"mousedown":Ep=!0;break;case"contextmenu":case"mouseup":case"dragend":Ep=!1,dv(oe,u,se);break;case"selectionchange":if(mA)break;case"keydown":case"keyup":dv(oe,u,se)}var xe;if(Rt)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ga?Z_(s,u)&&(Re="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Re="onCompositionStart");Re&&(to&&u.locale!=="ko"&&(ga||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ga&&(xe=tu()):(On=se,aa="value"in On?On.value:On.textContent,ga=!0)),Se=yd(Q,Re),0<Se.length&&(Re=new iu(Re,s,null,u,se),oe.push({event:Re,listeners:Se}),xe?Re.data=xe:(xe=ev(u),xe!==null&&(Re.data=xe)))),(xe=Vn?iA(s,u):sA(s,u))&&(Q=yd(Q,"onBeforeInput"),0<Q.length&&(se=new iu("onBeforeInput","beforeinput",null,u,se),oe.push({event:se,listeners:Q}),se.data=xe))}wv(oe,a)})}function du(s,a,u){return{instance:s,listener:a,currentTarget:u}}function yd(s,a){for(var u=a+"Capture",f=[];s!==null;){var g=s,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=Tt(s,u),w!=null&&f.unshift(du(s,w,g)),w=Tt(s,a),w!=null&&f.push(du(s,w,g))),s=s.return}return f}function va(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Iv(s,a,u,f,g){for(var w=a._reactName,T=[];u!==null&&u!==f;){var C=u,B=C.alternate,Q=C.stateNode;if(B!==null&&B===f)break;C.tag===5&&Q!==null&&(C=Q,g?(B=Tt(u,w),B!=null&&T.unshift(du(u,B,C))):g||(B=Tt(u,w),B!=null&&T.push(du(u,B,C)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var vA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function Tv(s){return(typeof s=="string"?s:""+s).replace(vA,`
`).replace(wA,"")}function _d(s,a,u){if(a=Tv(a),Tv(s)!==a&&u)throw Error(t(425))}function vd(){}var Rp=null,Ap=null;function Pp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cp=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,bv=typeof Promise=="function"?Promise:void 0,IA=typeof queueMicrotask=="function"?queueMicrotask:typeof bv<"u"?function(s){return bv.resolve(null).then(s).catch(TA)}:Cp;function TA(s){setTimeout(function(){throw s})}function Dp(s,a){var u=a,f=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){s.removeChild(g),hr(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);hr(a)}function Gi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Sv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var wa=Math.random().toString(36).slice(2),Fr="__reactFiber$"+wa,hu="__reactProps$"+wa,ui="__reactContainer$"+wa,kp="__reactEvents$"+wa,bA="__reactListeners$"+wa,SA="__reactHandles$"+wa;function no(s){var a=s[Fr];if(a)return a;for(var u=s.parentNode;u;){if(a=u[ui]||u[Fr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Sv(s);s!==null;){if(u=s[Fr])return u;s=Sv(s)}return a}s=u,u=s.parentNode}return null}function fu(s){return s=s[Fr]||s[ui],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ea(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function wd(s){return s[hu]||null}var Np=[],Ia=-1;function qi(s){return{current:s}}function ut(s){0>Ia||(s.current=Np[Ia],Np[Ia]=null,Ia--)}function ot(s,a){Ia++,Np[Ia]=s.current,s.current=a}var Wi={},Xt=qi(Wi),Tn=qi(!1),ro=Wi;function Ta(s,a){var u=s.type.contextTypes;if(!u)return Wi;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=a[w];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function bn(s){return s=s.childContextTypes,s!=null}function Ed(){ut(Tn),ut(Xt)}function xv(s,a,u){if(Xt.current!==Wi)throw Error(t(168));ot(Xt,a),ot(Tn,u)}function Rv(s,a,u){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(t(108,Ue(s)||"Unknown",g));return Z({},u,f)}function Id(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Wi,ro=Xt.current,ot(Xt,s),ot(Tn,Tn.current),!0}function Av(s,a,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=Rv(s,a,ro),f.__reactInternalMemoizedMergedChildContext=s,ut(Tn),ut(Xt),ot(Xt,s)):ut(Tn),ot(Tn,u)}var ci=null,Td=!1,Op=!1;function Pv(s){ci===null?ci=[s]:ci.push(s)}function xA(s){Td=!0,Pv(s)}function Hi(){if(!Op&&ci!==null){Op=!0;var s=0,a=Fe;try{var u=ci;for(Fe=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}ci=null,Td=!1}catch(g){throw ci!==null&&(ci=ci.slice(s+1)),na(Ks,Hi),g}finally{Fe=a,Op=!1}}return null}var ba=[],Sa=0,bd=null,Sd=0,Qn=[],Yn=0,io=null,di=1,hi="";function so(s,a){ba[Sa++]=Sd,ba[Sa++]=bd,bd=s,Sd=a}function Cv(s,a,u){Qn[Yn++]=di,Qn[Yn++]=hi,Qn[Yn++]=io,io=s;var f=di;s=hi;var g=32-cn(f)-1;f&=~(1<<g),u+=1;var w=32-cn(a)+g;if(30<w){var T=g-g%5;w=(f&(1<<T)-1).toString(32),f>>=T,g-=T,di=1<<32-cn(a)+g|u<<g|f,hi=w+s}else di=1<<w|u<<g|f,hi=s}function Vp(s){s.return!==null&&(so(s,1),Cv(s,1,0))}function Mp(s){for(;s===bd;)bd=ba[--Sa],ba[Sa]=null,Sd=ba[--Sa],ba[Sa]=null;for(;s===io;)io=Qn[--Yn],Qn[Yn]=null,hi=Qn[--Yn],Qn[Yn]=null,di=Qn[--Yn],Qn[Yn]=null}var Mn=null,Ln=null,dt=!1,mr=null;function Dv(s,a){var u=er(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function kv(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Mn=s,Ln=Gi(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Mn=s,Ln=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=io!==null?{id:di,overflow:hi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=er(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,Mn=s,Ln=null,!0):!1;default:return!1}}function Lp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Fp(s){if(dt){var a=Ln;if(a){var u=a;if(!kv(s,a)){if(Lp(s))throw Error(t(418));a=Gi(u.nextSibling);var f=Mn;a&&kv(s,a)?Dv(f,u):(s.flags=s.flags&-4097|2,dt=!1,Mn=s)}}else{if(Lp(s))throw Error(t(418));s.flags=s.flags&-4097|2,dt=!1,Mn=s}}}function Nv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Mn=s}function xd(s){if(s!==Mn)return!1;if(!dt)return Nv(s),dt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Pp(s.type,s.memoizedProps)),a&&(a=Ln)){if(Lp(s))throw Ov(),Error(t(418));for(;a;)Dv(s,a),a=Gi(a.nextSibling)}if(Nv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Ln=Gi(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Ln=null}}else Ln=Mn?Gi(s.stateNode.nextSibling):null;return!0}function Ov(){for(var s=Ln;s;)s=Gi(s.nextSibling)}function xa(){Ln=Mn=null,dt=!1}function Bp(s){mr===null?mr=[s]:mr.push(s)}var RA=H.ReactCurrentBatchConfig;function pu(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var g=f,w=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(T){var C=g.refs;T===null?delete C[w]:C[w]=T},a._stringRef=w,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Rd(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Vv(s){var a=s._init;return a(s._payload)}function Mv(s){function a(W,j){if(s){var K=W.deletions;K===null?(W.deletions=[j],W.flags|=16):K.push(j)}}function u(W,j){if(!s)return null;for(;j!==null;)a(W,j),j=j.sibling;return null}function f(W,j){for(W=new Map;j!==null;)j.key!==null?W.set(j.key,j):W.set(j.index,j),j=j.sibling;return W}function g(W,j){return W=ts(W,j),W.index=0,W.sibling=null,W}function w(W,j,K){return W.index=K,s?(K=W.alternate,K!==null?(K=K.index,K<j?(W.flags|=2,j):K):(W.flags|=2,j)):(W.flags|=1048576,j)}function T(W){return s&&W.alternate===null&&(W.flags|=2),W}function C(W,j,K,ae){return j===null||j.tag!==6?(j=Cm(K,W.mode,ae),j.return=W,j):(j=g(j,K),j.return=W,j)}function B(W,j,K,ae){var we=K.type;return we===D?se(W,j,K.props.children,ae,K.key):j!==null&&(j.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===It&&Vv(we)===j.type)?(ae=g(j,K.props),ae.ref=pu(W,j,K),ae.return=W,ae):(ae=Jd(K.type,K.key,K.props,null,W.mode,ae),ae.ref=pu(W,j,K),ae.return=W,ae)}function Q(W,j,K,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==K.containerInfo||j.stateNode.implementation!==K.implementation?(j=Dm(K,W.mode,ae),j.return=W,j):(j=g(j,K.children||[]),j.return=W,j)}function se(W,j,K,ae,we){return j===null||j.tag!==7?(j=po(K,W.mode,ae,we),j.return=W,j):(j=g(j,K),j.return=W,j)}function oe(W,j,K){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Cm(""+j,W.mode,K),j.return=W,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case X:return K=Jd(j.type,j.key,j.props,null,W.mode,K),K.ref=pu(W,null,j),K.return=W,K;case J:return j=Dm(j,W.mode,K),j.return=W,j;case It:var ae=j._init;return oe(W,ae(j._payload),K)}if(ei(j)||Ie(j))return j=po(j,W.mode,K,null),j.return=W,j;Rd(W,j)}return null}function re(W,j,K,ae){var we=j!==null?j.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return we!==null?null:C(W,j,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return K.key===we?B(W,j,K,ae):null;case J:return K.key===we?Q(W,j,K,ae):null;case It:return we=K._init,re(W,j,we(K._payload),ae)}if(ei(K)||Ie(K))return we!==null?null:se(W,j,K,ae,null);Rd(W,K)}return null}function pe(W,j,K,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return W=W.get(K)||null,C(j,W,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case X:return W=W.get(ae.key===null?K:ae.key)||null,B(j,W,ae,we);case J:return W=W.get(ae.key===null?K:ae.key)||null,Q(j,W,ae,we);case It:var Se=ae._init;return pe(W,j,K,Se(ae._payload),we)}if(ei(ae)||Ie(ae))return W=W.get(K)||null,se(j,W,ae,we,null);Rd(j,ae)}return null}function ge(W,j,K,ae){for(var we=null,Se=null,xe=j,Re=j=0,zt=null;xe!==null&&Re<K.length;Re++){xe.index>Re?(zt=xe,xe=null):zt=xe.sibling;var We=re(W,xe,K[Re],ae);if(We===null){xe===null&&(xe=zt);break}s&&xe&&We.alternate===null&&a(W,xe),j=w(We,j,Re),Se===null?we=We:Se.sibling=We,Se=We,xe=zt}if(Re===K.length)return u(W,xe),dt&&so(W,Re),we;if(xe===null){for(;Re<K.length;Re++)xe=oe(W,K[Re],ae),xe!==null&&(j=w(xe,j,Re),Se===null?we=xe:Se.sibling=xe,Se=xe);return dt&&so(W,Re),we}for(xe=f(W,xe);Re<K.length;Re++)zt=pe(xe,W,Re,K[Re],ae),zt!==null&&(s&&zt.alternate!==null&&xe.delete(zt.key===null?Re:zt.key),j=w(zt,j,Re),Se===null?we=zt:Se.sibling=zt,Se=zt);return s&&xe.forEach(function(ns){return a(W,ns)}),dt&&so(W,Re),we}function _e(W,j,K,ae){var we=Ie(K);if(typeof we!="function")throw Error(t(150));if(K=we.call(K),K==null)throw Error(t(151));for(var Se=we=null,xe=j,Re=j=0,zt=null,We=K.next();xe!==null&&!We.done;Re++,We=K.next()){xe.index>Re?(zt=xe,xe=null):zt=xe.sibling;var ns=re(W,xe,We.value,ae);if(ns===null){xe===null&&(xe=zt);break}s&&xe&&ns.alternate===null&&a(W,xe),j=w(ns,j,Re),Se===null?we=ns:Se.sibling=ns,Se=ns,xe=zt}if(We.done)return u(W,xe),dt&&so(W,Re),we;if(xe===null){for(;!We.done;Re++,We=K.next())We=oe(W,We.value,ae),We!==null&&(j=w(We,j,Re),Se===null?we=We:Se.sibling=We,Se=We);return dt&&so(W,Re),we}for(xe=f(W,xe);!We.done;Re++,We=K.next())We=pe(xe,W,Re,We.value,ae),We!==null&&(s&&We.alternate!==null&&xe.delete(We.key===null?Re:We.key),j=w(We,j,Re),Se===null?we=We:Se.sibling=We,Se=We);return s&&xe.forEach(function(sP){return a(W,sP)}),dt&&so(W,Re),we}function bt(W,j,K,ae){if(typeof K=="object"&&K!==null&&K.type===D&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case X:e:{for(var we=K.key,Se=j;Se!==null;){if(Se.key===we){if(we=K.type,we===D){if(Se.tag===7){u(W,Se.sibling),j=g(Se,K.props.children),j.return=W,W=j;break e}}else if(Se.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===It&&Vv(we)===Se.type){u(W,Se.sibling),j=g(Se,K.props),j.ref=pu(W,Se,K),j.return=W,W=j;break e}u(W,Se);break}else a(W,Se);Se=Se.sibling}K.type===D?(j=po(K.props.children,W.mode,ae,K.key),j.return=W,W=j):(ae=Jd(K.type,K.key,K.props,null,W.mode,ae),ae.ref=pu(W,j,K),ae.return=W,W=ae)}return T(W);case J:e:{for(Se=K.key;j!==null;){if(j.key===Se)if(j.tag===4&&j.stateNode.containerInfo===K.containerInfo&&j.stateNode.implementation===K.implementation){u(W,j.sibling),j=g(j,K.children||[]),j.return=W,W=j;break e}else{u(W,j);break}else a(W,j);j=j.sibling}j=Dm(K,W.mode,ae),j.return=W,W=j}return T(W);case It:return Se=K._init,bt(W,j,Se(K._payload),ae)}if(ei(K))return ge(W,j,K,ae);if(Ie(K))return _e(W,j,K,ae);Rd(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,j!==null&&j.tag===6?(u(W,j.sibling),j=g(j,K),j.return=W,W=j):(u(W,j),j=Cm(K,W.mode,ae),j.return=W,W=j),T(W)):u(W,j)}return bt}var Ra=Mv(!0),Lv=Mv(!1),Ad=qi(null),Pd=null,Aa=null,Up=null;function jp(){Up=Aa=Pd=null}function zp(s){var a=Ad.current;ut(Ad),s._currentValue=a}function $p(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function Pa(s,a){Pd=s,Up=Aa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&a&&(Sn=!0),s.firstContext=null)}function Jn(s){var a=s._currentValue;if(Up!==s)if(s={context:s,memoizedValue:a,next:null},Aa===null){if(Pd===null)throw Error(t(308));Aa=s,Pd.dependencies={lanes:0,firstContext:s}}else Aa=Aa.next=s;return a}var oo=null;function Gp(s){oo===null?oo=[s]:oo.push(s)}function Fv(s,a,u,f){var g=a.interleaved;return g===null?(u.next=u,Gp(a)):(u.next=g.next,g.next=u),a.interleaved=u,fi(s,f)}function fi(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Ki=!1;function qp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bv(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function pi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Qi(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,Ge&2){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,fi(s,u)}return g=f.interleaved,g===null?(a.next=a,Gp(f)):(a.next=g.next,g.next=a),f.interleaved=a,fi(s,u)}function Cd(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,Fi(s,u)}}function Uv(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=T:w=w.next=T,u=u.next}while(u!==null);w===null?g=w=a:w=w.next=a}else g=w=a;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Dd(s,a,u,f){var g=s.updateQueue;Ki=!1;var w=g.firstBaseUpdate,T=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var B=C,Q=B.next;B.next=null,T===null?w=Q:T.next=Q,T=B;var se=s.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==T&&(C===null?se.firstBaseUpdate=Q:C.next=Q,se.lastBaseUpdate=B))}if(w!==null){var oe=g.baseState;T=0,se=Q=B=null,C=w;do{var re=C.lane,pe=C.eventTime;if((f&re)===re){se!==null&&(se=se.next={eventTime:pe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ge=s,_e=C;switch(re=a,pe=u,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){oe=ge.call(pe,oe,re);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,re=typeof ge=="function"?ge.call(pe,oe,re):ge,re==null)break e;oe=Z({},oe,re);break e;case 2:Ki=!0}}C.callback!==null&&C.lane!==0&&(s.flags|=64,re=g.effects,re===null?g.effects=[C]:re.push(C))}else pe={eventTime:pe,lane:re,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(Q=se=pe,B=oe):se=se.next=pe,T|=re;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;re=C,C=re.next,re.next=null,g.lastBaseUpdate=re,g.shared.pending=null}}while(!0);if(se===null&&(B=oe),g.baseState=B,g.firstBaseUpdate=Q,g.lastBaseUpdate=se,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else w===null&&(g.shared.lanes=0);uo|=T,s.lanes=T,s.memoizedState=oe}}function jv(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var mu={},Br=qi(mu),gu=qi(mu),yu=qi(mu);function ao(s){if(s===mu)throw Error(t(174));return s}function Wp(s,a){switch(ot(yu,a),ot(gu,s),ot(Br,mu),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:kt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=kt(a,s)}ut(Br),ot(Br,a)}function Ca(){ut(Br),ut(gu),ut(yu)}function zv(s){ao(yu.current);var a=ao(Br.current),u=kt(a,s.type);a!==u&&(ot(gu,s),ot(Br,u))}function Hp(s){gu.current===s&&(ut(Br),ut(gu))}var pt=qi(0);function kd(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Kp=[];function Qp(){for(var s=0;s<Kp.length;s++)Kp[s]._workInProgressVersionPrimary=null;Kp.length=0}var Nd=H.ReactCurrentDispatcher,Yp=H.ReactCurrentBatchConfig,lo=0,mt=null,Ot=null,Ut=null,Od=!1,_u=!1,vu=0,AA=0;function Zt(){throw Error(t(321))}function Jp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!pr(s[u],a[u]))return!1;return!0}function Xp(s,a,u,f,g,w){if(lo=w,mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Nd.current=s===null||s.memoizedState===null?kA:NA,s=u(f,g),_u){w=0;do{if(_u=!1,vu=0,25<=w)throw Error(t(301));w+=1,Ut=Ot=null,a.updateQueue=null,Nd.current=OA,s=u(f,g)}while(_u)}if(Nd.current=Ld,a=Ot!==null&&Ot.next!==null,lo=0,Ut=Ot=mt=null,Od=!1,a)throw Error(t(300));return s}function Zp(){var s=vu!==0;return vu=0,s}function Ur(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?mt.memoizedState=Ut=s:Ut=Ut.next=s,Ut}function Xn(){if(Ot===null){var s=mt.alternate;s=s!==null?s.memoizedState:null}else s=Ot.next;var a=Ut===null?mt.memoizedState:Ut.next;if(a!==null)Ut=a,Ot=s;else{if(s===null)throw Error(t(310));Ot=s,s={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ut===null?mt.memoizedState=Ut=s:Ut=Ut.next=s}return Ut}function wu(s,a){return typeof a=="function"?a(s):a}function em(s){var a=Xn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=Ot,g=f.baseQueue,w=u.pending;if(w!==null){if(g!==null){var T=g.next;g.next=w.next,w.next=T}f.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,f=f.baseState;var C=T=null,B=null,Q=w;do{var se=Q.lane;if((lo&se)===se)B!==null&&(B=B.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),f=Q.hasEagerState?Q.eagerState:s(f,Q.action);else{var oe={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};B===null?(C=B=oe,T=f):B=B.next=oe,mt.lanes|=se,uo|=se}Q=Q.next}while(Q!==null&&Q!==w);B===null?T=f:B.next=C,pr(f,a.memoizedState)||(Sn=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=B,u.lastRenderedState=f}if(s=u.interleaved,s!==null){g=s;do w=g.lane,mt.lanes|=w,uo|=w,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function tm(s){var a=Xn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,g=u.pending,w=a.memoizedState;if(g!==null){u.pending=null;var T=g=g.next;do w=s(w,T.action),T=T.next;while(T!==g);pr(w,a.memoizedState)||(Sn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,f]}function $v(){}function Gv(s,a){var u=mt,f=Xn(),g=a(),w=!pr(f.memoizedState,g);if(w&&(f.memoizedState=g,Sn=!0),f=f.queue,nm(Hv.bind(null,u,f,s),[s]),f.getSnapshot!==a||w||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,Eu(9,Wv.bind(null,u,f,g,a),void 0,null),jt===null)throw Error(t(349));lo&30||qv(u,a,g)}return g}function qv(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=mt.updateQueue,a===null?(a={lastEffect:null,stores:null},mt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Wv(s,a,u,f){a.value=u,a.getSnapshot=f,Kv(a)&&Qv(s)}function Hv(s,a,u){return u(function(){Kv(a)&&Qv(s)})}function Kv(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!pr(s,u)}catch{return!0}}function Qv(s){var a=fi(s,1);a!==null&&vr(a,s,1,-1)}function Yv(s){var a=Ur();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:s},a.queue=s,s=s.dispatch=DA.bind(null,mt,s),[a.memoizedState,s]}function Eu(s,a,u,f){return s={tag:s,create:a,destroy:u,deps:f,next:null},a=mt.updateQueue,a===null?(a={lastEffect:null,stores:null},mt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s)),s}function Jv(){return Xn().memoizedState}function Vd(s,a,u,f){var g=Ur();mt.flags|=s,g.memoizedState=Eu(1|a,u,void 0,f===void 0?null:f)}function Md(s,a,u,f){var g=Xn();f=f===void 0?null:f;var w=void 0;if(Ot!==null){var T=Ot.memoizedState;if(w=T.destroy,f!==null&&Jp(f,T.deps)){g.memoizedState=Eu(a,u,w,f);return}}mt.flags|=s,g.memoizedState=Eu(1|a,u,w,f)}function Xv(s,a){return Vd(8390656,8,s,a)}function nm(s,a){return Md(2048,8,s,a)}function Zv(s,a){return Md(4,2,s,a)}function ew(s,a){return Md(4,4,s,a)}function tw(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function nw(s,a,u){return u=u!=null?u.concat([s]):null,Md(4,4,tw.bind(null,a,s),u)}function rm(){}function rw(s,a){var u=Xn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&Jp(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function iw(s,a){var u=Xn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&Jp(a,f[1])?f[0]:(s=s(),u.memoizedState=[s,a],s)}function sw(s,a,u){return lo&21?(pr(u,a)||(u=Js(),mt.lanes|=u,uo|=u,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,Sn=!0),s.memoizedState=u)}function PA(s,a){var u=Fe;Fe=u!==0&&4>u?u:4,s(!0);var f=Yp.transition;Yp.transition={};try{s(!1),a()}finally{Fe=u,Yp.transition=f}}function ow(){return Xn().memoizedState}function CA(s,a,u){var f=Zi(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},aw(s))lw(a,u);else if(u=Fv(s,a,u,f),u!==null){var g=fn();vr(u,s,f,g),uw(u,a,f)}}function DA(s,a,u){var f=Zi(s),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(aw(s))lw(a,g);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var T=a.lastRenderedState,C=w(T,u);if(g.hasEagerState=!0,g.eagerState=C,pr(C,T)){var B=a.interleaved;B===null?(g.next=g,Gp(a)):(g.next=B.next,B.next=g),a.interleaved=g;return}}catch{}finally{}u=Fv(s,a,g,f),u!==null&&(g=fn(),vr(u,s,f,g),uw(u,a,f))}}function aw(s){var a=s.alternate;return s===mt||a!==null&&a===mt}function lw(s,a){_u=Od=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function uw(s,a,u){if(u&4194240){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,Fi(s,u)}}var Ld={readContext:Jn,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},kA={readContext:Jn,useCallback:function(s,a){return Ur().memoizedState=[s,a===void 0?null:a],s},useContext:Jn,useEffect:Xv,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Vd(4194308,4,tw.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Vd(4194308,4,s,a)},useInsertionEffect:function(s,a){return Vd(4,2,s,a)},useMemo:function(s,a){var u=Ur();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var f=Ur();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=CA.bind(null,mt,s),[f.memoizedState,s]},useRef:function(s){var a=Ur();return s={current:s},a.memoizedState=s},useState:Yv,useDebugValue:rm,useDeferredValue:function(s){return Ur().memoizedState=s},useTransition:function(){var s=Yv(!1),a=s[0];return s=PA.bind(null,s[1]),Ur().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var f=mt,g=Ur();if(dt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),jt===null)throw Error(t(349));lo&30||qv(f,a,u)}g.memoizedState=u;var w={value:u,getSnapshot:a};return g.queue=w,Xv(Hv.bind(null,f,w,s),[s]),f.flags|=2048,Eu(9,Wv.bind(null,f,w,u,a),void 0,null),u},useId:function(){var s=Ur(),a=jt.identifierPrefix;if(dt){var u=hi,f=di;u=(f&~(1<<32-cn(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=vu++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=AA++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},NA={readContext:Jn,useCallback:rw,useContext:Jn,useEffect:nm,useImperativeHandle:nw,useInsertionEffect:Zv,useLayoutEffect:ew,useMemo:iw,useReducer:em,useRef:Jv,useState:function(){return em(wu)},useDebugValue:rm,useDeferredValue:function(s){var a=Xn();return sw(a,Ot.memoizedState,s)},useTransition:function(){var s=em(wu)[0],a=Xn().memoizedState;return[s,a]},useMutableSource:$v,useSyncExternalStore:Gv,useId:ow,unstable_isNewReconciler:!1},OA={readContext:Jn,useCallback:rw,useContext:Jn,useEffect:nm,useImperativeHandle:nw,useInsertionEffect:Zv,useLayoutEffect:ew,useMemo:iw,useReducer:tm,useRef:Jv,useState:function(){return tm(wu)},useDebugValue:rm,useDeferredValue:function(s){var a=Xn();return Ot===null?a.memoizedState=s:sw(a,Ot.memoizedState,s)},useTransition:function(){var s=tm(wu)[0],a=Xn().memoizedState;return[s,a]},useMutableSource:$v,useSyncExternalStore:Gv,useId:ow,unstable_isNewReconciler:!1};function gr(s,a){if(s&&s.defaultProps){a=Z({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function im(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:Z({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Fd={isMounted:function(s){return(s=s._reactInternals)?ar(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var f=fn(),g=Zi(s),w=pi(f,g);w.payload=a,u!=null&&(w.callback=u),a=Qi(s,w,g),a!==null&&(vr(a,s,g,f),Cd(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=fn(),g=Zi(s),w=pi(f,g);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=Qi(s,w,g),a!==null&&(vr(a,s,g,f),Cd(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=fn(),f=Zi(s),g=pi(u,f);g.tag=2,a!=null&&(g.callback=a),a=Qi(s,g,f),a!==null&&(vr(a,s,f,u),Cd(a,s,f))}};function cw(s,a,u,f,g,w,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,w,T):a.prototype&&a.prototype.isPureReactComponent?!au(u,f)||!au(g,w):!0}function dw(s,a,u){var f=!1,g=Wi,w=a.contextType;return typeof w=="object"&&w!==null?w=Jn(w):(g=bn(a)?ro:Xt.current,f=a.contextTypes,w=(f=f!=null)?Ta(s,g):Wi),a=new a(u,w),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Fd,s.stateNode=a,a._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=w),a}function hw(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&Fd.enqueueReplaceState(a,a.state,null)}function sm(s,a,u,f){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},qp(s);var w=a.contextType;typeof w=="object"&&w!==null?g.context=Jn(w):(w=bn(a)?ro:Xt.current,g.context=Ta(s,w)),g.state=s.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(im(s,a,w,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Fd.enqueueReplaceState(g,g.state,null),Dd(s,u,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Da(s,a){try{var u="",f=a;do u+=De(f),f=f.return;while(f);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:a,stack:g,digest:null}}function om(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function am(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var VA=typeof WeakMap=="function"?WeakMap:Map;function fw(s,a,u){u=pi(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){qd||(qd=!0,Im=f),am(s,a)},u}function pw(s,a,u){u=pi(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;u.payload=function(){return f(g)},u.callback=function(){am(s,a)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){am(s,a),typeof f!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function mw(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new VA;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(u)||(g.add(u),s=QA.bind(null,s,a,u),a.then(s,s))}function gw(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function yw(s,a,u,f,g){return s.mode&1?(s.flags|=65536,s.lanes=g,s):(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=pi(-1,1),a.tag=2,Qi(u,a,1))),u.lanes|=1),s)}var MA=H.ReactCurrentOwner,Sn=!1;function hn(s,a,u,f){a.child=s===null?Lv(a,null,u,f):Ra(a,s.child,u,f)}function _w(s,a,u,f,g){u=u.render;var w=a.ref;return Pa(a,g),f=Xp(s,a,u,f,w,g),u=Zp(),s!==null&&!Sn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,mi(s,a,g)):(dt&&u&&Vp(a),a.flags|=1,hn(s,a,f,g),a.child)}function vw(s,a,u,f,g){if(s===null){var w=u.type;return typeof w=="function"&&!Pm(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,ww(s,a,w,f,g)):(s=Jd(u.type,null,f,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(w=s.child,!(s.lanes&g)){var T=w.memoizedProps;if(u=u.compare,u=u!==null?u:au,u(T,f)&&s.ref===a.ref)return mi(s,a,g)}return a.flags|=1,s=ts(w,f),s.ref=a.ref,s.return=a,a.child=s}function ww(s,a,u,f,g){if(s!==null){var w=s.memoizedProps;if(au(w,f)&&s.ref===a.ref)if(Sn=!1,a.pendingProps=f=w,(s.lanes&g)!==0)s.flags&131072&&(Sn=!0);else return a.lanes=s.lanes,mi(s,a,g)}return lm(s,a,u,f,g)}function Ew(s,a,u){var f=a.pendingProps,g=f.children,w=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Na,Fn),Fn|=u;else{if(!(u&1073741824))return s=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,ot(Na,Fn),Fn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:u,ot(Na,Fn),Fn|=f}else w!==null?(f=w.baseLanes|u,a.memoizedState=null):f=u,ot(Na,Fn),Fn|=f;return hn(s,a,g,u),a.child}function Iw(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function lm(s,a,u,f,g){var w=bn(u)?ro:Xt.current;return w=Ta(a,w),Pa(a,g),u=Xp(s,a,u,f,w,g),f=Zp(),s!==null&&!Sn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,mi(s,a,g)):(dt&&f&&Vp(a),a.flags|=1,hn(s,a,u,g),a.child)}function Tw(s,a,u,f,g){if(bn(u)){var w=!0;Id(a)}else w=!1;if(Pa(a,g),a.stateNode===null)Ud(s,a),dw(a,u,f),sm(a,u,f,g),f=!0;else if(s===null){var T=a.stateNode,C=a.memoizedProps;T.props=C;var B=T.context,Q=u.contextType;typeof Q=="object"&&Q!==null?Q=Jn(Q):(Q=bn(u)?ro:Xt.current,Q=Ta(a,Q));var se=u.getDerivedStateFromProps,oe=typeof se=="function"||typeof T.getSnapshotBeforeUpdate=="function";oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==f||B!==Q)&&hw(a,T,f,Q),Ki=!1;var re=a.memoizedState;T.state=re,Dd(a,f,T,g),B=a.memoizedState,C!==f||re!==B||Tn.current||Ki?(typeof se=="function"&&(im(a,u,se,f),B=a.memoizedState),(C=Ki||cw(a,u,C,f,re,B,Q))?(oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=B),T.props=f,T.state=B,T.context=Q,f=C):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,Bv(s,a),C=a.memoizedProps,Q=a.type===a.elementType?C:gr(a.type,C),T.props=Q,oe=a.pendingProps,re=T.context,B=u.contextType,typeof B=="object"&&B!==null?B=Jn(B):(B=bn(u)?ro:Xt.current,B=Ta(a,B));var pe=u.getDerivedStateFromProps;(se=typeof pe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==oe||re!==B)&&hw(a,T,f,B),Ki=!1,re=a.memoizedState,T.state=re,Dd(a,f,T,g);var ge=a.memoizedState;C!==oe||re!==ge||Tn.current||Ki?(typeof pe=="function"&&(im(a,u,pe,f),ge=a.memoizedState),(Q=Ki||cw(a,u,Q,f,re,ge,B)||!1)?(se||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,ge,B),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,ge,B)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=ge),T.props=f,T.state=ge,T.context=B,f=Q):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(a.flags|=1024),f=!1)}return um(s,a,u,f,w,g)}function um(s,a,u,f,g,w){Iw(s,a);var T=(a.flags&128)!==0;if(!f&&!T)return g&&Av(a,u,!1),mi(s,a,w);f=a.stateNode,MA.current=a;var C=T&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&T?(a.child=Ra(a,s.child,null,w),a.child=Ra(a,null,C,w)):hn(s,a,C,w),a.memoizedState=f.state,g&&Av(a,u,!0),a.child}function bw(s){var a=s.stateNode;a.pendingContext?xv(s,a.pendingContext,a.pendingContext!==a.context):a.context&&xv(s,a.context,!1),Wp(s,a.containerInfo)}function Sw(s,a,u,f,g){return xa(),Bp(g),a.flags|=256,hn(s,a,u,f),a.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function dm(s){return{baseLanes:s,cachePool:null,transitions:null}}function xw(s,a,u){var f=a.pendingProps,g=pt.current,w=!1,T=(a.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(g&2)!==0),C?(w=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),ot(pt,g&1),s===null)return Fp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(a.mode&1?s.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(T=f.children,s=f.fallback,w?(f=a.mode,w=a.child,T={mode:"hidden",children:T},!(f&1)&&w!==null?(w.childLanes=0,w.pendingProps=T):w=Xd(T,f,0,null),s=po(s,f,u,null),w.return=a,s.return=a,w.sibling=s,a.child=w,a.child.memoizedState=dm(u),a.memoizedState=cm,s):hm(a,T));if(g=s.memoizedState,g!==null&&(C=g.dehydrated,C!==null))return LA(s,a,T,f,C,g,u);if(w){w=f.fallback,T=a.mode,g=s.child,C=g.sibling;var B={mode:"hidden",children:f.children};return!(T&1)&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=B,a.deletions=null):(f=ts(g,B),f.subtreeFlags=g.subtreeFlags&14680064),C!==null?w=ts(C,w):(w=po(w,T,u,null),w.flags|=2),w.return=a,f.return=a,f.sibling=w,a.child=f,f=w,w=a.child,T=s.child.memoizedState,T=T===null?dm(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=s.childLanes&~u,a.memoizedState=cm,f}return w=s.child,s=w.sibling,f=ts(w,{mode:"visible",children:f.children}),!(a.mode&1)&&(f.lanes=u),f.return=a,f.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=f,a.memoizedState=null,f}function hm(s,a){return a=Xd({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Bd(s,a,u,f){return f!==null&&Bp(f),Ra(a,s.child,null,u),s=hm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function LA(s,a,u,f,g,w,T){if(u)return a.flags&256?(a.flags&=-257,f=om(Error(t(422))),Bd(s,a,T,f)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(w=f.fallback,g=a.mode,f=Xd({mode:"visible",children:f.children},g,0,null),w=po(w,g,T,null),w.flags|=2,f.return=a,w.return=a,f.sibling=w,a.child=f,a.mode&1&&Ra(a,s.child,null,T),a.child.memoizedState=dm(T),a.memoizedState=cm,w);if(!(a.mode&1))return Bd(s,a,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var C=f.dgst;return f=C,w=Error(t(419)),f=om(w,f,void 0),Bd(s,a,T,f)}if(C=(T&s.childLanes)!==0,Sn||C){if(f=jt,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(f.suspendedLanes|T)?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,fi(s,g),vr(f,s,g,-1))}return Am(),f=om(Error(t(421))),Bd(s,a,T,f)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=YA.bind(null,s),g._reactRetry=a,null):(s=w.treeContext,Ln=Gi(g.nextSibling),Mn=a,dt=!0,mr=null,s!==null&&(Qn[Yn++]=di,Qn[Yn++]=hi,Qn[Yn++]=io,di=s.id,hi=s.overflow,io=a),a=hm(a,f.children),a.flags|=4096,a)}function Rw(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),$p(s.return,a,u)}function fm(s,a,u,f,g){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=g)}function Aw(s,a,u){var f=a.pendingProps,g=f.revealOrder,w=f.tail;if(hn(s,a,f.children,u),f=pt.current,f&2)f=f&1|2,a.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Rw(s,u,a);else if(s.tag===19)Rw(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(ot(pt,f),!(a.mode&1))a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&kd(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),fm(a,!1,g,u,w);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&kd(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}fm(a,!0,u,null,w);break;case"together":fm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ud(s,a){!(a.mode&1)&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function mi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),uo|=a.lanes,!(u&a.childLanes))return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=ts(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ts(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function FA(s,a,u){switch(a.tag){case 3:bw(a),xa();break;case 5:zv(a);break;case 1:bn(a.type)&&Id(a);break;case 4:Wp(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;ot(Ad,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(ot(pt,pt.current&1),a.flags|=128,null):u&a.child.childLanes?xw(s,a,u):(ot(pt,pt.current&1),s=mi(s,a,u),s!==null?s.sibling:null);ot(pt,pt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,s.flags&128){if(f)return Aw(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ot(pt,pt.current),f)break;return null;case 22:case 23:return a.lanes=0,Ew(s,a,u)}return mi(s,a,u)}var Pw,pm,Cw,Dw;Pw=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},pm=function(){},Cw=function(s,a,u,f){var g=s.memoizedProps;if(g!==f){s=a.stateNode,ao(Br.current);var w=null;switch(u){case"input":g=Us(s,g),f=Us(s,f),w=[];break;case"select":g=Z({},g,{value:void 0}),f=Z({},f,{value:void 0}),w=[];break;case"textarea":g=Ml(s,g),f=Ml(s,f),w=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=vd)}zl(u,f);var T;u=null;for(Q in g)if(!f.hasOwnProperty(Q)&&g.hasOwnProperty(Q)&&g[Q]!=null)if(Q==="style"){var C=g[Q];for(T in C)C.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?w||(w=[]):(w=w||[]).push(Q,null));for(Q in f){var B=f[Q];if(C=g!=null?g[Q]:void 0,f.hasOwnProperty(Q)&&B!==C&&(B!=null||C!=null))if(Q==="style")if(C){for(T in C)!C.hasOwnProperty(T)||B&&B.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in B)B.hasOwnProperty(T)&&C[T]!==B[T]&&(u||(u={}),u[T]=B[T])}else u||(w||(w=[]),w.push(Q,u)),u=B;else Q==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,C=C?C.__html:void 0,B!=null&&C!==B&&(w=w||[]).push(Q,B)):Q==="children"?typeof B!="string"&&typeof B!="number"||(w=w||[]).push(Q,""+B):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(B!=null&&Q==="onScroll"&&lt("scroll",s),w||C===B||(w=[])):(w=w||[]).push(Q,B))}u&&(w=w||[]).push("style",u);var Q=w;(a.updateQueue=Q)&&(a.flags|=4)}},Dw=function(s,a,u,f){u!==f&&(a.flags|=4)};function Iu(s,a){if(!dt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function en(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function BA(s,a,u){var f=a.pendingProps;switch(Mp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(a),null;case 1:return bn(a.type)&&Ed(),en(a),null;case 3:return f=a.stateNode,Ca(),ut(Tn),ut(Xt),Qp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(xd(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,mr!==null&&(Sm(mr),mr=null))),pm(s,a),en(a),null;case 5:Hp(a);var g=ao(yu.current);if(u=a.type,s!==null&&a.stateNode!=null)Cw(s,a,u,f,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return en(a),null}if(s=ao(Br.current),xd(a)){f=a.stateNode,u=a.type;var w=a.memoizedProps;switch(f[Fr]=a,f[hu]=w,s=(a.mode&1)!==0,u){case"dialog":lt("cancel",f),lt("close",f);break;case"iframe":case"object":case"embed":lt("load",f);break;case"video":case"audio":for(g=0;g<uu.length;g++)lt(uu[g],f);break;case"source":lt("error",f);break;case"img":case"image":case"link":lt("error",f),lt("load",f);break;case"details":lt("toggle",f);break;case"input":qo(f,w),lt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},lt("invalid",f);break;case"textarea":Ho(f,w),lt("invalid",f)}zl(u,w),g=null;for(var T in w)if(w.hasOwnProperty(T)){var C=w[T];T==="children"?typeof C=="string"?f.textContent!==C&&(w.suppressHydrationWarning!==!0&&_d(f.textContent,C,s),g=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(w.suppressHydrationWarning!==!0&&_d(f.textContent,C,s),g=["children",""+C]):i.hasOwnProperty(T)&&C!=null&&T==="onScroll"&&lt("scroll",f)}switch(u){case"input":Cr(f),Gc(f,w,!0);break;case"textarea":Cr(f),Ll(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=vd)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Dt(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(u,{is:f.is}):(s=T.createElement(u),u==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,u),s[Fr]=a,s[hu]=f,Pw(s,a,!1,!1),a.stateNode=s;e:{switch(T=$l(u,f),u){case"dialog":lt("cancel",s),lt("close",s),g=f;break;case"iframe":case"object":case"embed":lt("load",s),g=f;break;case"video":case"audio":for(g=0;g<uu.length;g++)lt(uu[g],s);g=f;break;case"source":lt("error",s),g=f;break;case"img":case"image":case"link":lt("error",s),lt("load",s),g=f;break;case"details":lt("toggle",s),g=f;break;case"input":qo(s,f),g=Us(s,f),lt("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=Z({},f,{value:void 0}),lt("invalid",s);break;case"textarea":Ho(s,f),g=Ml(s,f),lt("invalid",s);break;default:g=f}zl(u,g),C=g;for(w in C)if(C.hasOwnProperty(w)){var B=C[w];w==="style"?Ul(s,B):w==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Fl(s,B)):w==="children"?typeof B=="string"?(u!=="textarea"||B!=="")&&Ni(s,B):typeof B=="number"&&Ni(s,""+B):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?B!=null&&w==="onScroll"&&lt("scroll",s):B!=null&&$(s,w,B,T))}switch(u){case"input":Cr(s),Gc(s,f,!1);break;case"textarea":Cr(s),Ll(s);break;case"option":f.value!=null&&s.setAttribute("value",""+$e(f.value));break;case"select":s.multiple=!!f.multiple,w=f.value,w!=null?ti(s,!!f.multiple,w,!1):f.defaultValue!=null&&ti(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=vd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return en(a),null;case 6:if(s&&a.stateNode!=null)Dw(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=ao(yu.current),ao(Br.current),xd(a)){if(f=a.stateNode,u=a.memoizedProps,f[Fr]=a,(w=f.nodeValue!==u)&&(s=Mn,s!==null))switch(s.tag){case 3:_d(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&_d(f.nodeValue,u,(s.mode&1)!==0)}w&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Fr]=a,a.stateNode=f}return en(a),null;case 13:if(ut(pt),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(dt&&Ln!==null&&a.mode&1&&!(a.flags&128))Ov(),xa(),a.flags|=98560,w=!1;else if(w=xd(a),f!==null&&f.dehydrated!==null){if(s===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Fr]=a}else xa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;en(a),w=!1}else mr!==null&&(Sm(mr),mr=null),w=!0;if(!w)return a.flags&65536?a:null}return a.flags&128?(a.lanes=u,a):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,a.mode&1&&(s===null||pt.current&1?Vt===0&&(Vt=3):Am())),a.updateQueue!==null&&(a.flags|=4),en(a),null);case 4:return Ca(),pm(s,a),s===null&&cu(a.stateNode.containerInfo),en(a),null;case 10:return zp(a.type._context),en(a),null;case 17:return bn(a.type)&&Ed(),en(a),null;case 19:if(ut(pt),w=a.memoizedState,w===null)return en(a),null;if(f=(a.flags&128)!==0,T=w.rendering,T===null)if(f)Iu(w,!1);else{if(Vt!==0||s!==null&&s.flags&128)for(s=a.child;s!==null;){if(T=kd(s),T!==null){for(a.flags|=128,Iu(w,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)w=u,s=f,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,s=T.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return ot(pt,pt.current&1|2),a.child}s=s.sibling}w.tail!==null&&st()>Oa&&(a.flags|=128,f=!0,Iu(w,!1),a.lanes=4194304)}else{if(!f)if(s=kd(T),s!==null){if(a.flags|=128,f=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Iu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!dt)return en(a),null}else 2*st()-w.renderingStartTime>Oa&&u!==1073741824&&(a.flags|=128,f=!0,Iu(w,!1),a.lanes=4194304);w.isBackwards?(T.sibling=a.child,a.child=T):(u=w.last,u!==null?u.sibling=T:a.child=T,w.last=T)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=st(),a.sibling=null,u=pt.current,ot(pt,f?u&1|2:u&1),a):(en(a),null);case 22:case 23:return Rm(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&a.mode&1?Fn&1073741824&&(en(a),a.subtreeFlags&6&&(a.flags|=8192)):en(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function UA(s,a){switch(Mp(a),a.tag){case 1:return bn(a.type)&&Ed(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ca(),ut(Tn),ut(Xt),Qp(),s=a.flags,s&65536&&!(s&128)?(a.flags=s&-65537|128,a):null;case 5:return Hp(a),null;case 13:if(ut(pt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));xa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ut(pt),null;case 4:return Ca(),null;case 10:return zp(a.type._context),null;case 22:case 23:return Rm(),null;case 24:return null;default:return null}}var jd=!1,tn=!1,jA=typeof WeakSet=="function"?WeakSet:Set,me=null;function ka(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){vt(s,a,f)}else u.current=null}function mm(s,a,u){try{u()}catch(f){vt(s,a,f)}}var kw=!1;function zA(s,a){if(Rp=ji,s=cv(),vp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var T=0,C=-1,B=-1,Q=0,se=0,oe=s,re=null;t:for(;;){for(var pe;oe!==u||g!==0&&oe.nodeType!==3||(C=T+g),oe!==w||f!==0&&oe.nodeType!==3||(B=T+f),oe.nodeType===3&&(T+=oe.nodeValue.length),(pe=oe.firstChild)!==null;)re=oe,oe=pe;for(;;){if(oe===s)break t;if(re===u&&++Q===g&&(C=T),re===w&&++se===f&&(B=T),(pe=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=pe}u=C===-1||B===-1?null:{start:C,end:B}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ap={focusedElem:s,selectionRange:u},ji=!1,me=a;me!==null;)if(a=me,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,me=s;else for(;me!==null;){a=me;try{var ge=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,bt=ge.memoizedState,W=a.stateNode,j=W.getSnapshotBeforeUpdate(a.elementType===a.type?_e:gr(a.type,_e),bt);W.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var K=a.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){vt(a,a.return,ae)}if(s=a.sibling,s!==null){s.return=a.return,me=s;break}me=a.return}return ge=kw,kw=!1,ge}function Tu(s,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var w=g.destroy;g.destroy=void 0,w!==void 0&&mm(a,u,w)}g=g.next}while(g!==f)}}function zd(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function gm(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function Nw(s){var a=s.alternate;a!==null&&(s.alternate=null,Nw(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Fr],delete a[hu],delete a[kp],delete a[bA],delete a[SA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ow(s){return s.tag===5||s.tag===3||s.tag===4}function Vw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ow(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ym(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=vd));else if(f!==4&&(s=s.child,s!==null))for(ym(s,a,u),s=s.sibling;s!==null;)ym(s,a,u),s=s.sibling}function _m(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(_m(s,a,u),s=s.sibling;s!==null;)_m(s,a,u),s=s.sibling}var Kt=null,yr=!1;function Yi(s,a,u){for(u=u.child;u!==null;)Mw(s,a,u),u=u.sibling}function Mw(s,a,u){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Qs,u)}catch{}switch(u.tag){case 5:tn||ka(u,a);case 6:var f=Kt,g=yr;Kt=null,Yi(s,a,u),Kt=f,yr=g,Kt!==null&&(yr?(s=Kt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Kt.removeChild(u.stateNode));break;case 18:Kt!==null&&(yr?(s=Kt,u=u.stateNode,s.nodeType===8?Dp(s.parentNode,u):s.nodeType===1&&Dp(s,u),hr(s)):Dp(Kt,u.stateNode));break;case 4:f=Kt,g=yr,Kt=u.stateNode.containerInfo,yr=!0,Yi(s,a,u),Kt=f,yr=g;break;case 0:case 11:case 14:case 15:if(!tn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var w=g,T=w.destroy;w=w.tag,T!==void 0&&(w&2||w&4)&&mm(u,a,T),g=g.next}while(g!==f)}Yi(s,a,u);break;case 1:if(!tn&&(ka(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(C){vt(u,a,C)}Yi(s,a,u);break;case 21:Yi(s,a,u);break;case 22:u.mode&1?(tn=(f=tn)||u.memoizedState!==null,Yi(s,a,u),tn=f):Yi(s,a,u);break;default:Yi(s,a,u)}}function Lw(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new jA),a.forEach(function(f){var g=JA.bind(null,s,f);u.has(f)||(u.add(f),f.then(g,g))})}}function _r(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var w=s,T=a,C=T;e:for(;C!==null;){switch(C.tag){case 5:Kt=C.stateNode,yr=!1;break e;case 3:Kt=C.stateNode.containerInfo,yr=!0;break e;case 4:Kt=C.stateNode.containerInfo,yr=!0;break e}C=C.return}if(Kt===null)throw Error(t(160));Mw(w,T,g),Kt=null,yr=!1;var B=g.alternate;B!==null&&(B.return=null),g.return=null}catch(Q){vt(g,a,Q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Fw(a,s),a=a.sibling}function Fw(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(_r(a,s),jr(s),f&4){try{Tu(3,s,s.return),zd(3,s)}catch(_e){vt(s,s.return,_e)}try{Tu(5,s,s.return)}catch(_e){vt(s,s.return,_e)}}break;case 1:_r(a,s),jr(s),f&512&&u!==null&&ka(u,u.return);break;case 5:if(_r(a,s),jr(s),f&512&&u!==null&&ka(u,u.return),s.flags&32){var g=s.stateNode;try{Ni(g,"")}catch(_e){vt(s,s.return,_e)}}if(f&4&&(g=s.stateNode,g!=null)){var w=s.memoizedProps,T=u!==null?u.memoizedProps:w,C=s.type,B=s.updateQueue;if(s.updateQueue=null,B!==null)try{C==="input"&&w.type==="radio"&&w.name!=null&&Ol(g,w),$l(C,T);var Q=$l(C,w);for(T=0;T<B.length;T+=2){var se=B[T],oe=B[T+1];se==="style"?Ul(g,oe):se==="dangerouslySetInnerHTML"?Fl(g,oe):se==="children"?Ni(g,oe):$(g,se,oe,Q)}switch(C){case"input":Vl(g,w);break;case"textarea":Ko(g,w);break;case"select":var re=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var pe=w.value;pe!=null?ti(g,!!w.multiple,pe,!1):re!==!!w.multiple&&(w.defaultValue!=null?ti(g,!!w.multiple,w.defaultValue,!0):ti(g,!!w.multiple,w.multiple?[]:"",!1))}g[hu]=w}catch(_e){vt(s,s.return,_e)}}break;case 6:if(_r(a,s),jr(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,w=s.memoizedProps;try{g.nodeValue=w}catch(_e){vt(s,s.return,_e)}}break;case 3:if(_r(a,s),jr(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{hr(a.containerInfo)}catch(_e){vt(s,s.return,_e)}break;case 4:_r(a,s),jr(s);break;case 13:_r(a,s),jr(s),g=s.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(Em=st())),f&4&&Lw(s);break;case 22:if(se=u!==null&&u.memoizedState!==null,s.mode&1?(tn=(Q=tn)||se,_r(a,s),tn=Q):_r(a,s),jr(s),f&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!se&&s.mode&1)for(me=s,se=s.child;se!==null;){for(oe=me=se;me!==null;){switch(re=me,pe=re.child,re.tag){case 0:case 11:case 14:case 15:Tu(4,re,re.return);break;case 1:ka(re,re.return);var ge=re.stateNode;if(typeof ge.componentWillUnmount=="function"){f=re,u=re.return;try{a=f,ge.props=a.memoizedProps,ge.state=a.memoizedState,ge.componentWillUnmount()}catch(_e){vt(f,u,_e)}}break;case 5:ka(re,re.return);break;case 22:if(re.memoizedState!==null){jw(oe);continue}}pe!==null?(pe.return=re,me=pe):jw(oe)}se=se.sibling}e:for(se=null,oe=s;;){if(oe.tag===5){if(se===null){se=oe;try{g=oe.stateNode,Q?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(C=oe.stateNode,B=oe.memoizedProps.style,T=B!=null&&B.hasOwnProperty("display")?B.display:null,C.style.display=Bl("display",T))}catch(_e){vt(s,s.return,_e)}}}else if(oe.tag===6){if(se===null)try{oe.stateNode.nodeValue=Q?"":oe.memoizedProps}catch(_e){vt(s,s.return,_e)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===s)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===s)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===s)break e;se===oe&&(se=null),oe=oe.return}se===oe&&(se=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:_r(a,s),jr(s),f&4&&Lw(s);break;case 21:break;default:_r(a,s),jr(s)}}function jr(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(Ow(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Ni(g,""),f.flags&=-33);var w=Vw(s);_m(s,w,g);break;case 3:case 4:var T=f.stateNode.containerInfo,C=Vw(s);ym(s,C,T);break;default:throw Error(t(161))}}catch(B){vt(s,s.return,B)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function $A(s,a,u){me=s,Bw(s)}function Bw(s,a,u){for(var f=(s.mode&1)!==0;me!==null;){var g=me,w=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||jd;if(!T){var C=g.alternate,B=C!==null&&C.memoizedState!==null||tn;C=jd;var Q=tn;if(jd=T,(tn=B)&&!Q)for(me=g;me!==null;)T=me,B=T.child,T.tag===22&&T.memoizedState!==null?zw(g):B!==null?(B.return=T,me=B):zw(g);for(;w!==null;)me=w,Bw(w),w=w.sibling;me=g,jd=C,tn=Q}Uw(s)}else g.subtreeFlags&8772&&w!==null?(w.return=g,me=w):Uw(s)}}function Uw(s){for(;me!==null;){var a=me;if(a.flags&8772){var u=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:tn||zd(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!tn)if(u===null)f.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:gr(a.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&jv(a,w,f);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}jv(a,T,u)}break;case 5:var C=a.stateNode;if(u===null&&a.flags&4){u=C;var B=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&u.focus();break;case"img":B.src&&(u.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Q=a.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var oe=se.dehydrated;oe!==null&&hr(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}tn||a.flags&512&&gm(a)}catch(re){vt(a,a.return,re)}}if(a===s){me=null;break}if(u=a.sibling,u!==null){u.return=a.return,me=u;break}me=a.return}}function jw(s){for(;me!==null;){var a=me;if(a===s){me=null;break}var u=a.sibling;if(u!==null){u.return=a.return,me=u;break}me=a.return}}function zw(s){for(;me!==null;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{zd(4,a)}catch(B){vt(a,u,B)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(B){vt(a,g,B)}}var w=a.return;try{gm(a)}catch(B){vt(a,w,B)}break;case 5:var T=a.return;try{gm(a)}catch(B){vt(a,T,B)}}}catch(B){vt(a,a.return,B)}if(a===s){me=null;break}var C=a.sibling;if(C!==null){C.return=a.return,me=C;break}me=a.return}}var GA=Math.ceil,$d=H.ReactCurrentDispatcher,vm=H.ReactCurrentOwner,Zn=H.ReactCurrentBatchConfig,Ge=0,jt=null,At=null,Qt=0,Fn=0,Na=qi(0),Vt=0,bu=null,uo=0,Gd=0,wm=0,Su=null,xn=null,Em=0,Oa=1/0,gi=null,qd=!1,Im=null,Ji=null,Wd=!1,Xi=null,Hd=0,xu=0,Tm=null,Kd=-1,Qd=0;function fn(){return Ge&6?st():Kd!==-1?Kd:Kd=st()}function Zi(s){return s.mode&1?Ge&2&&Qt!==0?Qt&-Qt:RA.transition!==null?(Qd===0&&(Qd=Js()),Qd):(s=Fe,s!==0||(s=window.event,s=s===void 0?16:eu(s.type)),s):1}function vr(s,a,u,f){if(50<xu)throw xu=0,Tm=null,Error(t(185));Li(s,u,f),(!(Ge&2)||s!==jt)&&(s===jt&&(!(Ge&2)&&(Gd|=u),Vt===4&&es(s,Qt)),Rn(s,f),u===1&&Ge===0&&!(a.mode&1)&&(Oa=st()+500,Td&&Hi()))}function Rn(s,a){var u=s.callbackNode;ii(s,a);var f=Ys(s,s===jt?Qt:0);if(f===0)u!==null&&Ql(u),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(u!=null&&Ql(u),a===1)s.tag===0?xA(Gw.bind(null,s)):Pv(Gw.bind(null,s)),IA(function(){!(Ge&6)&&Hi()}),u=null;else{switch(Bi(f)){case 1:u=Ks;break;case 4:u=Oi;break;case 16:u=Wn;break;case 536870912:u=Qc;break;default:u=Wn}u=Xw(u,$w.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function $w(s,a){if(Kd=-1,Qd=0,Ge&6)throw Error(t(327));var u=s.callbackNode;if(Va()&&s.callbackNode!==u)return null;var f=Ys(s,s===jt?Qt:0);if(f===0)return null;if(f&30||f&s.expiredLanes||a)a=Yd(s,f);else{a=f;var g=Ge;Ge|=2;var w=Ww();(jt!==s||Qt!==a)&&(gi=null,Oa=st()+500,ho(s,a));do try{HA();break}catch(C){qw(s,C)}while(!0);jp(),$d.current=w,Ge=g,At!==null?a=0:(jt=null,Qt=0,a=Vt)}if(a!==0){if(a===2&&(g=Nn(s),g!==0&&(f=g,a=bm(s,g))),a===1)throw u=bu,ho(s,0),es(s,f),Rn(s,st()),u;if(a===6)es(s,f);else{if(g=s.current.alternate,!(f&30)&&!qA(g)&&(a=Yd(s,f),a===2&&(w=Nn(s),w!==0&&(f=w,a=bm(s,w))),a===1))throw u=bu,ho(s,0),es(s,f),Rn(s,st()),u;switch(s.finishedWork=g,s.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:fo(s,xn,gi);break;case 3:if(es(s,f),(f&130023424)===f&&(a=Em+500-st(),10<a)){if(Ys(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){fn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Cp(fo.bind(null,s,xn,gi),a);break}fo(s,xn,gi);break;case 4:if(es(s,f),(f&4194240)===f)break;for(a=s.eventTimes,g=-1;0<f;){var T=31-cn(f);w=1<<T,T=a[T],T>g&&(g=T),f&=~w}if(f=g,f=st()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*GA(f/1960))-f,10<f){s.timeoutHandle=Cp(fo.bind(null,s,xn,gi),f);break}fo(s,xn,gi);break;case 5:fo(s,xn,gi);break;default:throw Error(t(329))}}}return Rn(s,st()),s.callbackNode===u?$w.bind(null,s):null}function bm(s,a){var u=Su;return s.current.memoizedState.isDehydrated&&(ho(s,a).flags|=256),s=Yd(s,a),s!==2&&(a=xn,xn=u,a!==null&&Sm(a)),s}function Sm(s){xn===null?xn=s:xn.push.apply(xn,s)}function qA(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],w=g.getSnapshot;g=g.value;try{if(!pr(w(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function es(s,a){for(a&=~wm,a&=~Gd,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-cn(a),f=1<<u;s[u]=-1,a&=~f}}function Gw(s){if(Ge&6)throw Error(t(327));Va();var a=Ys(s,0);if(!(a&1))return Rn(s,st()),null;var u=Yd(s,a);if(s.tag!==0&&u===2){var f=Nn(s);f!==0&&(a=f,u=bm(s,f))}if(u===1)throw u=bu,ho(s,0),es(s,a),Rn(s,st()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,fo(s,xn,gi),Rn(s,st()),null}function xm(s,a){var u=Ge;Ge|=1;try{return s(a)}finally{Ge=u,Ge===0&&(Oa=st()+500,Td&&Hi())}}function co(s){Xi!==null&&Xi.tag===0&&!(Ge&6)&&Va();var a=Ge;Ge|=1;var u=Zn.transition,f=Fe;try{if(Zn.transition=null,Fe=1,s)return s()}finally{Fe=f,Zn.transition=u,Ge=a,!(Ge&6)&&Hi()}}function Rm(){Fn=Na.current,ut(Na)}function ho(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,EA(u)),At!==null)for(u=At.return;u!==null;){var f=u;switch(Mp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Ed();break;case 3:Ca(),ut(Tn),ut(Xt),Qp();break;case 5:Hp(f);break;case 4:Ca();break;case 13:ut(pt);break;case 19:ut(pt);break;case 10:zp(f.type._context);break;case 22:case 23:Rm()}u=u.return}if(jt=s,At=s=ts(s.current,null),Qt=Fn=a,Vt=0,bu=null,wm=Gd=uo=0,xn=Su=null,oo!==null){for(a=0;a<oo.length;a++)if(u=oo[a],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,w=u.pending;if(w!==null){var T=w.next;w.next=g,f.next=T}u.pending=f}oo=null}return s}function qw(s,a){do{var u=At;try{if(jp(),Nd.current=Ld,Od){for(var f=mt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Od=!1}if(lo=0,Ut=Ot=mt=null,_u=!1,vu=0,vm.current=null,u===null||u.return===null){Vt=1,bu=a,At=null;break}e:{var w=s,T=u.return,C=u,B=a;if(a=Qt,C.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Q=B,se=C,oe=se.tag;if(!(se.mode&1)&&(oe===0||oe===11||oe===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var pe=gw(T);if(pe!==null){pe.flags&=-257,yw(pe,T,C,w,a),pe.mode&1&&mw(w,Q,a),a=pe,B=Q;var ge=a.updateQueue;if(ge===null){var _e=new Set;_e.add(B),a.updateQueue=_e}else ge.add(B);break e}else{if(!(a&1)){mw(w,Q,a),Am();break e}B=Error(t(426))}}else if(dt&&C.mode&1){var bt=gw(T);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),yw(bt,T,C,w,a),Bp(Da(B,C));break e}}w=B=Da(B,C),Vt!==4&&(Vt=2),Su===null?Su=[w]:Su.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var W=fw(w,B,a);Uv(w,W);break e;case 1:C=B;var j=w.type,K=w.stateNode;if(!(w.flags&128)&&(typeof j.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Ji===null||!Ji.has(K)))){w.flags|=65536,a&=-a,w.lanes|=a;var ae=pw(w,C,a);Uv(w,ae);break e}}w=w.return}while(w!==null)}Kw(u)}catch(we){a=we,At===u&&u!==null&&(At=u=u.return);continue}break}while(!0)}function Ww(){var s=$d.current;return $d.current=Ld,s===null?Ld:s}function Am(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),jt===null||!(uo&268435455)&&!(Gd&268435455)||es(jt,Qt)}function Yd(s,a){var u=Ge;Ge|=2;var f=Ww();(jt!==s||Qt!==a)&&(gi=null,ho(s,a));do try{WA();break}catch(g){qw(s,g)}while(!0);if(jp(),Ge=u,$d.current=f,At!==null)throw Error(t(261));return jt=null,Qt=0,Vt}function WA(){for(;At!==null;)Hw(At)}function HA(){for(;At!==null&&!Hc();)Hw(At)}function Hw(s){var a=Jw(s.alternate,s,Fn);s.memoizedProps=s.pendingProps,a===null?Kw(s):At=a,vm.current=null}function Kw(s){var a=s;do{var u=a.alternate;if(s=a.return,a.flags&32768){if(u=UA(u,a),u!==null){u.flags&=32767,At=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Vt=6,At=null;return}}else if(u=BA(u,a,Fn),u!==null){At=u;return}if(a=a.sibling,a!==null){At=a;return}At=a=s}while(a!==null);Vt===0&&(Vt=5)}function fo(s,a,u){var f=Fe,g=Zn.transition;try{Zn.transition=null,Fe=1,KA(s,a,u,f)}finally{Zn.transition=g,Fe=f}return null}function KA(s,a,u,f){do Va();while(Xi!==null);if(Ge&6)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var w=u.lanes|u.childLanes;if(it(s,w),s===jt&&(At=jt=null,Qt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Wd||(Wd=!0,Xw(Wn,function(){return Va(),null})),w=(u.flags&15990)!==0,u.subtreeFlags&15990||w){w=Zn.transition,Zn.transition=null;var T=Fe;Fe=1;var C=Ge;Ge|=4,vm.current=null,zA(s,u),Fw(u,s),pA(Ap),ji=!!Rp,Ap=Rp=null,s.current=u,$A(u),dp(),Ge=C,Fe=T,Zn.transition=w}else s.current=u;if(Wd&&(Wd=!1,Xi=s,Hd=g),w=s.pendingLanes,w===0&&(Ji=null),Yc(u.stateNode),Rn(s,st()),a!==null)for(f=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(qd)throw qd=!1,s=Im,Im=null,s;return Hd&1&&s.tag!==0&&Va(),w=s.pendingLanes,w&1?s===Tm?xu++:(xu=0,Tm=s):xu=0,Hi(),null}function Va(){if(Xi!==null){var s=Bi(Hd),a=Zn.transition,u=Fe;try{if(Zn.transition=null,Fe=16>s?16:s,Xi===null)var f=!1;else{if(s=Xi,Xi=null,Hd=0,Ge&6)throw Error(t(331));var g=Ge;for(Ge|=4,me=s.current;me!==null;){var w=me,T=w.child;if(me.flags&16){var C=w.deletions;if(C!==null){for(var B=0;B<C.length;B++){var Q=C[B];for(me=Q;me!==null;){var se=me;switch(se.tag){case 0:case 11:case 15:Tu(8,se,w)}var oe=se.child;if(oe!==null)oe.return=se,me=oe;else for(;me!==null;){se=me;var re=se.sibling,pe=se.return;if(Nw(se),se===Q){me=null;break}if(re!==null){re.return=pe,me=re;break}me=pe}}}var ge=w.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var bt=_e.sibling;_e.sibling=null,_e=bt}while(_e!==null)}}me=w}}if(w.subtreeFlags&2064&&T!==null)T.return=w,me=T;else e:for(;me!==null;){if(w=me,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Tu(9,w,w.return)}var W=w.sibling;if(W!==null){W.return=w.return,me=W;break e}me=w.return}}var j=s.current;for(me=j;me!==null;){T=me;var K=T.child;if(T.subtreeFlags&2064&&K!==null)K.return=T,me=K;else e:for(T=j;me!==null;){if(C=me,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:zd(9,C)}}catch(we){vt(C,C.return,we)}if(C===T){me=null;break e}var ae=C.sibling;if(ae!==null){ae.return=C.return,me=ae;break e}me=C.return}}if(Ge=g,Hi(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Qs,s)}catch{}f=!0}return f}finally{Fe=u,Zn.transition=a}}return!1}function Qw(s,a,u){a=Da(u,a),a=fw(s,a,1),s=Qi(s,a,1),a=fn(),s!==null&&(Li(s,1,a),Rn(s,a))}function vt(s,a,u){if(s.tag===3)Qw(s,s,u);else for(;a!==null;){if(a.tag===3){Qw(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ji===null||!Ji.has(f))){s=Da(u,s),s=pw(a,s,1),a=Qi(a,s,1),s=fn(),a!==null&&(Li(a,1,s),Rn(a,s));break}}a=a.return}}function QA(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),a=fn(),s.pingedLanes|=s.suspendedLanes&u,jt===s&&(Qt&u)===u&&(Vt===4||Vt===3&&(Qt&130023424)===Qt&&500>st()-Em?ho(s,0):wm|=u),Rn(s,a)}function Yw(s,a){a===0&&(s.mode&1?(a=ia,ia<<=1,!(ia&130023424)&&(ia=4194304)):a=1);var u=fn();s=fi(s,a),s!==null&&(Li(s,a,u),Rn(s,u))}function YA(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Yw(s,u)}function JA(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),Yw(s,u)}var Jw;Jw=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||Tn.current)Sn=!0;else{if(!(s.lanes&u)&&!(a.flags&128))return Sn=!1,FA(s,a,u);Sn=!!(s.flags&131072)}else Sn=!1,dt&&a.flags&1048576&&Cv(a,Sd,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Ud(s,a),s=a.pendingProps;var g=Ta(a,Xt.current);Pa(a,u),g=Xp(null,a,f,s,g,u);var w=Zp();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,bn(f)?(w=!0,Id(a)):w=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,qp(a),g.updater=Fd,a.stateNode=g,g._reactInternals=a,sm(a,f,s,u),a=um(null,a,f,!0,w,u)):(a.tag=0,dt&&w&&Vp(a),hn(null,a,g,u),a=a.child),a;case 16:f=a.elementType;e:{switch(Ud(s,a),s=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=ZA(f),s=gr(f,s),g){case 0:a=lm(null,a,f,s,u);break e;case 1:a=Tw(null,a,f,s,u);break e;case 11:a=_w(null,a,f,s,u);break e;case 14:a=vw(null,a,f,gr(f.type,s),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:gr(f,g),lm(s,a,f,g,u);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:gr(f,g),Tw(s,a,f,g,u);case 3:e:{if(bw(a),s===null)throw Error(t(387));f=a.pendingProps,w=a.memoizedState,g=w.element,Bv(s,a),Dd(a,f,null,u);var T=a.memoizedState;if(f=T.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){g=Da(Error(t(423)),a),a=Sw(s,a,f,u,g);break e}else if(f!==g){g=Da(Error(t(424)),a),a=Sw(s,a,f,u,g);break e}else for(Ln=Gi(a.stateNode.containerInfo.firstChild),Mn=a,dt=!0,mr=null,u=Lv(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(xa(),f===g){a=mi(s,a,u);break e}hn(s,a,f,u)}a=a.child}return a;case 5:return zv(a),s===null&&Fp(a),f=a.type,g=a.pendingProps,w=s!==null?s.memoizedProps:null,T=g.children,Pp(f,g)?T=null:w!==null&&Pp(f,w)&&(a.flags|=32),Iw(s,a),hn(s,a,T,u),a.child;case 6:return s===null&&Fp(a),null;case 13:return xw(s,a,u);case 4:return Wp(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=Ra(a,null,f,u):hn(s,a,f,u),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:gr(f,g),_w(s,a,f,g,u);case 7:return hn(s,a,a.pendingProps,u),a.child;case 8:return hn(s,a,a.pendingProps.children,u),a.child;case 12:return hn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,w=a.memoizedProps,T=g.value,ot(Ad,f._currentValue),f._currentValue=T,w!==null)if(pr(w.value,T)){if(w.children===g.children&&!Tn.current){a=mi(s,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var C=w.dependencies;if(C!==null){T=w.child;for(var B=C.firstContext;B!==null;){if(B.context===f){if(w.tag===1){B=pi(-1,u&-u),B.tag=2;var Q=w.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?B.next=B:(B.next=se.next,se.next=B),Q.pending=B}}w.lanes|=u,B=w.alternate,B!==null&&(B.lanes|=u),$p(w.return,u,a),C.lanes|=u;break}B=B.next}}else if(w.tag===10)T=w.type===a.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=u,C=T.alternate,C!==null&&(C.lanes|=u),$p(T,u,a),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===a){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}hn(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,Pa(a,u),g=Jn(g),f=f(g),a.flags|=1,hn(s,a,f,u),a.child;case 14:return f=a.type,g=gr(f,a.pendingProps),g=gr(f.type,g),vw(s,a,f,g,u);case 15:return ww(s,a,a.type,a.pendingProps,u);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:gr(f,g),Ud(s,a),a.tag=1,bn(f)?(s=!0,Id(a)):s=!1,Pa(a,u),dw(a,f,g),sm(a,f,g,u),um(null,a,f,!0,s,u);case 19:return Aw(s,a,u);case 22:return Ew(s,a,u)}throw Error(t(156,a.tag))};function Xw(s,a){return na(s,a)}function XA(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(s,a,u,f){return new XA(s,a,u,f)}function Pm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ZA(s){if(typeof s=="function")return Pm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===z)return 11;if(s===He)return 14}return 2}function ts(s,a){var u=s.alternate;return u===null?(u=er(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Jd(s,a,u,f,g,w){var T=2;if(f=s,typeof s=="function")Pm(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case D:return po(u.children,g,w,a);case A:T=8,g|=8;break;case P:return s=er(12,u,a,g|2),s.elementType=P,s.lanes=w,s;case k:return s=er(13,u,a,g),s.elementType=k,s.lanes=w,s;case Ze:return s=er(19,u,a,g),s.elementType=Ze,s.lanes=w,s;case Be:return Xd(u,g,w,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:T=10;break e;case F:T=9;break e;case z:T=11;break e;case He:T=14;break e;case It:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=er(T,u,a,g),a.elementType=s,a.type=f,a.lanes=w,a}function po(s,a,u,f){return s=er(7,s,f,a),s.lanes=u,s}function Xd(s,a,u,f){return s=er(22,s,f,a),s.elementType=Be,s.lanes=u,s.stateNode={isHidden:!1},s}function Cm(s,a,u){return s=er(6,s,null,a),s.lanes=u,s}function Dm(s,a,u){return a=er(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function eP(s,a,u,f,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function km(s,a,u,f,g,w,T,C,B){return s=new eP(s,a,u,C,B),a===1?(a=1,w===!0&&(a|=8)):a=0,w=er(3,null,null,a),s.current=w,w.stateNode=s,w.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},qp(w),s}function tP(s,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:f==null?null:""+f,children:s,containerInfo:a,implementation:u}}function Zw(s){if(!s)return Wi;s=s._reactInternals;e:{if(ar(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(bn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(bn(u))return Rv(s,u,a)}return a}function eE(s,a,u,f,g,w,T,C,B){return s=km(u,f,!0,s,g,w,T,C,B),s.context=Zw(null),u=s.current,f=fn(),g=Zi(u),w=pi(f,g),w.callback=a??null,Qi(u,w,g),s.current.lanes=g,Li(s,g,f),Rn(s,f),s}function Zd(s,a,u,f){var g=a.current,w=fn(),T=Zi(g);return u=Zw(u),a.context===null?a.context=u:a.pendingContext=u,a=pi(w,T),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=Qi(g,a,T),s!==null&&(vr(s,g,T,w),Cd(s,g,T)),T}function eh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function tE(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Nm(s,a){tE(s,a),(s=s.alternate)&&tE(s,a)}var nE=typeof reportError=="function"?reportError:function(s){console.error(s)};function Om(s){this._internalRoot=s}th.prototype.render=Om.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Zd(s,a,null,null)},th.prototype.unmount=Om.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;co(function(){Zd(null,s,null,null)}),a[ui]=null}};function th(s){this._internalRoot=s}th.prototype.unstable_scheduleHydration=function(s){if(s){var a=td();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Or.length&&a!==0&&a<Or[u].priority;u++);Or.splice(u,0,s),u===0&&id(s)}};function Vm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function nh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function rE(){}function nP(s,a,u,f,g){if(g){if(typeof f=="function"){var w=f;f=function(){var Q=eh(T);w.call(Q)}}var T=eE(a,f,s,0,null,!1,!1,"",rE);return s._reactRootContainer=T,s[ui]=T.current,cu(s.nodeType===8?s.parentNode:s),co(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var C=f;f=function(){var Q=eh(B);C.call(Q)}}var B=km(s,0,!1,null,null,!1,!1,"",rE);return s._reactRootContainer=B,s[ui]=B.current,cu(s.nodeType===8?s.parentNode:s),co(function(){Zd(a,B,u,f)}),B}function rh(s,a,u,f,g){var w=u._reactRootContainer;if(w){var T=w;if(typeof g=="function"){var C=g;g=function(){var B=eh(T);C.call(B)}}Zd(a,T,s,g)}else T=nP(u,a,s,g,f);return eh(T)}Zc=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Vi(a.pendingLanes);u!==0&&(Fi(a,u|1),Rn(a,st()),!(Ge&6)&&(Oa=st()+500,Hi()))}break;case 13:co(function(){var f=fi(s,1);if(f!==null){var g=fn();vr(f,s,1,g)}}),Nm(s,1)}},sa=function(s){if(s.tag===13){var a=fi(s,134217728);if(a!==null){var u=fn();vr(a,s,134217728,u)}Nm(s,134217728)}},ed=function(s){if(s.tag===13){var a=Zi(s),u=fi(s,a);if(u!==null){var f=fn();vr(u,s,a,f)}Nm(s,a)}},td=function(){return Fe},nd=function(s,a){var u=Fe;try{return Fe=s,a()}finally{Fe=u}},Yo=function(s,a,u){switch(a){case"input":if(Vl(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var g=wd(f);if(!g)throw Error(t(90));Ct(f),Vl(f,g)}}}break;case"textarea":Ko(s,u);break;case"select":a=u.value,a!=null&&ti(s,!!u.multiple,a,!1)}},Gs=xm,ql=co;var rP={usingClientEntryPoint:!1,Events:[fu,Ea,wd,kr,Gl,xm]},Ru={findFiberByHostInstance:no,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iP={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Kl(s),s===null?null:s.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{Qs=ih.inject(iP),kn=ih}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rP,An.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(a))throw Error(t(200));return tP(s,a,null,u)},An.createRoot=function(s,a){if(!Vm(s))throw Error(t(299));var u=!1,f="",g=nE;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=km(s,1,!1,null,null,u,!1,f,g),s[ui]=a.current,cu(s.nodeType===8?s.parentNode:s),new Om(a)},An.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Kl(a),s=s===null?null:s.stateNode,s},An.flushSync=function(s){return co(s)},An.hydrate=function(s,a,u){if(!nh(a))throw Error(t(200));return rh(null,s,a,!0,u)},An.hydrateRoot=function(s,a,u){if(!Vm(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,w="",T=nE;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=eE(a,null,s,1,u??null,g,!1,w,T),s[ui]=a.current,cu(s),f)for(s=0;s<f.length;s++)u=f[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new th(a)},An.render=function(s,a,u){if(!nh(a))throw Error(t(200));return rh(null,s,a,!1,u)},An.unmountComponentAtNode=function(s){if(!nh(s))throw Error(t(40));return s._reactRootContainer?(co(function(){rh(null,null,s,!1,function(){s._reactRootContainer=null,s[ui]=null})}),!0):!1},An.unstable_batchedUpdates=xm,An.unstable_renderSubtreeIntoContainer=function(s,a,u,f){if(!nh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return rh(s,a,u,!1,f)},An.version="18.3.1-next-f1338f8080-20240426",An}var hE;function Eb(){if(hE)return Bm.exports;hE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bm.exports=dP(),Bm.exports}var fE;function hP(){if(fE)return oh;fE=1;var n=Eb();return oh.createRoot=n.createRoot,oh.hydrateRoot=n.hydrateRoot,oh}var fP=hP(),xf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rf=typeof window>"u"||"Deno"in globalThis;function wr(){}function pP(n,e){return typeof n=="function"?n(e):n}function mP(n){return typeof n=="number"&&n>=0&&n!==1/0}function gP(n,e){return Math.max(n+(e||0)-Date.now(),0)}function pE(n,e){return typeof n=="function"?n(e):n}function yP(n,e){return typeof n=="function"?n(e):n}function mE(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:o,queryKey:l,stale:c}=n;if(l){if(r){if(e.queryHash!==hy(l,e.options))return!1}else if(!rc(e.queryKey,l))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||o&&!o(e))}function gE(n,e){const{exact:t,status:r,predicate:i,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(nc(e.options.mutationKey)!==nc(o))return!1}else if(!rc(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function hy(n,e){return((e==null?void 0:e.queryKeyHashFn)||nc)(n)}function nc(n){return JSON.stringify(n,(e,t)=>bg(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function rc(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!rc(n[t],e[t])):!1}function Ib(n,e){if(n===e)return n;const t=yE(n)&&yE(e);if(t||bg(n)&&bg(e)){const r=t?n:Object.keys(n),i=r.length,o=t?e:Object.keys(e),l=o.length,c=t?[]:{};let d=0;for(let p=0;p<l;p++){const m=t?p:o[p];(!t&&r.includes(m)||t)&&n[m]===void 0&&e[m]===void 0?(c[m]=void 0,d++):(c[m]=Ib(n[m],e[m]),c[m]===n[m]&&n[m]!==void 0&&d++)}return i===l&&d===i?n:c}return e}function yE(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function bg(n){if(!_E(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!_E(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function _E(n){return Object.prototype.toString.call(n)==="[object Object]"}function _P(n){return new Promise(e=>{setTimeout(e,n)})}function vP(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Ib(n,e):e}function wP(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function EP(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var fy=Symbol();function Tb(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===fy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var xo,hs,Ya,hb,IP=(hb=class extends xf{constructor(){super();Qe(this,xo);Qe(this,hs);Qe(this,Ya);ke(this,Ya,e=>{if(!Rf&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ne(this,hs)||this.setEventListener(ne(this,Ya))}onUnsubscribe(){var e;this.hasListeners()||((e=ne(this,hs))==null||e.call(this),ke(this,hs,void 0))}setEventListener(e){var t;ke(this,Ya,e),(t=ne(this,hs))==null||t.call(this),ke(this,hs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ne(this,xo)!==e&&(ke(this,xo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ne(this,xo)=="boolean"?ne(this,xo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xo=new WeakMap,hs=new WeakMap,Ya=new WeakMap,hb),bb=new IP,Ja,fs,Xa,fb,TP=(fb=class extends xf{constructor(){super();Qe(this,Ja,!0);Qe(this,fs);Qe(this,Xa);ke(this,Xa,e=>{if(!Rf&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ne(this,fs)||this.setEventListener(ne(this,Xa))}onUnsubscribe(){var e;this.hasListeners()||((e=ne(this,fs))==null||e.call(this),ke(this,fs,void 0))}setEventListener(e){var t;ke(this,Xa,e),(t=ne(this,fs))==null||t.call(this),ke(this,fs,e(this.setOnline.bind(this)))}setOnline(e){ne(this,Ja)!==e&&(ke(this,Ja,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ne(this,Ja)}},Ja=new WeakMap,fs=new WeakMap,Xa=new WeakMap,fb),Bh=new TP;function bP(){let n,e;const t=new Promise((i,o)=>{n=i,e=o});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function SP(n){return Math.min(1e3*2**n,3e4)}function Sb(n){return(n??"online")==="online"?Bh.isOnline():!0}var xb=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function zm(n){return n instanceof xb}function Rb(n){let e=!1,t=0,r=!1,i;const o=bP(),l=R=>{var S;r||(_(new xb(R)),(S=n.abort)==null||S.call(n))},c=()=>{e=!0},d=()=>{e=!1},p=()=>bb.isFocused()&&(n.networkMode==="always"||Bh.isOnline())&&n.canRun(),m=()=>Sb(n.networkMode)&&n.canRun(),y=R=>{var S;r||(r=!0,(S=n.onSuccess)==null||S.call(n,R),i==null||i(),o.resolve(R))},_=R=>{var S;r||(r=!0,(S=n.onError)==null||S.call(n,R),i==null||i(),o.reject(R))},I=()=>new Promise(R=>{var S;i=M=>{(r||p())&&R(M)},(S=n.onPause)==null||S.call(n)}).then(()=>{var R;i=void 0,r||(R=n.onContinue)==null||R.call(n)}),b=()=>{if(r)return;let R;const S=t===0?n.initialPromise:void 0;try{R=S??n.fn()}catch(M){R=Promise.reject(M)}Promise.resolve(R).then(y).catch(M=>{var J;if(r)return;const V=n.retry??(Rf?0:3),$=n.retryDelay??SP,H=typeof $=="function"?$(t,M):$,X=V===!0||typeof V=="number"&&t<V||typeof V=="function"&&V(t,M);if(e||!X){_(M);return}t++,(J=n.onFail)==null||J.call(n,t,M),_P(H).then(()=>p()?void 0:I()).then(()=>{e?_(M):b()})})};return{promise:o,cancel:l,continue:()=>(i==null||i(),o),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?b():I().then(b),o)}}function xP(){let n=[],e=0,t=c=>{c()},r=c=>{c()},i=c=>setTimeout(c,0);const o=c=>{e?n.push(c):i(()=>{t(c)})},l=()=>{const c=n;n=[],c.length&&i(()=>{r(()=>{c.forEach(d=>{t(d)})})})};return{batch:c=>{let d;e++;try{d=c()}finally{e--,e||l()}return d},batchCalls:c=>(...d)=>{o(()=>{c(...d)})},schedule:o,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var yn=xP(),Ro,pb,Ab=(pb=class{constructor(){Qe(this,Ro)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mP(this.gcTime)&&ke(this,Ro,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Rf?1/0:5*60*1e3))}clearGcTimeout(){ne(this,Ro)&&(clearTimeout(ne(this,Ro)),ke(this,Ro,void 0))}},Ro=new WeakMap,pb),Za,el,nr,sn,xc,Ao,Er,yi,mb,RP=(mb=class extends Ab{constructor(t){super();Qe(this,Er);Qe(this,Za);Qe(this,el);Qe(this,nr);Qe(this,sn);Qe(this,xc);Qe(this,Ao);ke(this,Ao,!1),ke(this,xc,t.defaultOptions),this.setOptions(t.options),this.observers=[],ke(this,nr,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ke(this,Za,PP(this.options)),this.state=t.state??ne(this,Za),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ne(this,sn))==null?void 0:t.promise}setOptions(t){this.options={...ne(this,xc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ne(this,nr).remove(this)}setData(t,r){const i=vP(this.state.data,t,this.options);return nn(this,Er,yi).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){nn(this,Er,yi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,o;const r=(i=ne(this,sn))==null?void 0:i.promise;return(o=ne(this,sn))==null||o.cancel(t),r?r.then(wr).catch(wr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ne(this,Za))}isActive(){return this.observers.some(t=>yP(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!gP(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ne(this,sn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ne(this,sn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ne(this,nr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ne(this,sn)&&(ne(this,Ao)?ne(this,sn).cancel({revert:!0}):ne(this,sn).cancelRetry()),this.scheduleGc()),ne(this,nr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||nn(this,Er,yi).call(this,{type:"invalidate"})}fetch(t,r){var p,m,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ne(this,sn))return ne(this,sn).continueRetry(),ne(this,sn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(I=>I.options.queryFn);_&&this.setOptions(_.options)}const i=new AbortController,o=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(ke(this,Ao,!0),i.signal)})},l=()=>{const _=Tb(this.options,r),I={queryKey:this.queryKey,meta:this.meta};return o(I),ke(this,Ao,!1),this.options.persister?this.options.persister(_,I,this):_(I)},c={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:l};o(c),(p=this.options.behavior)==null||p.onFetch(c,this),ke(this,el,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&nn(this,Er,yi).call(this,{type:"fetch",meta:(y=c.fetchOptions)==null?void 0:y.meta});const d=_=>{var I,b,R,S;zm(_)&&_.silent||nn(this,Er,yi).call(this,{type:"error",error:_}),zm(_)||((b=(I=ne(this,nr).config).onError)==null||b.call(I,_,this),(S=(R=ne(this,nr).config).onSettled)==null||S.call(R,this.state.data,_,this)),this.scheduleGc()};return ke(this,sn,Rb({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:i.abort.bind(i),onSuccess:_=>{var I,b,R,S;if(_===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(_)}catch(M){d(M);return}(b=(I=ne(this,nr).config).onSuccess)==null||b.call(I,_,this),(S=(R=ne(this,nr).config).onSettled)==null||S.call(R,_,this.state.error,this),this.scheduleGc()},onError:d,onFail:(_,I)=>{nn(this,Er,yi).call(this,{type:"failed",failureCount:_,error:I})},onPause:()=>{nn(this,Er,yi).call(this,{type:"pause"})},onContinue:()=>{nn(this,Er,yi).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),ne(this,sn).start()}},Za=new WeakMap,el=new WeakMap,nr=new WeakMap,sn=new WeakMap,xc=new WeakMap,Ao=new WeakMap,Er=new WeakSet,yi=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...AP(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return zm(o)&&o.revert&&ne(this,el)?{...ne(this,el),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),yn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),ne(this,nr).notify({query:this,type:"updated",action:t})})},mb);function AP(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Sb(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function PP(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var $r,gb,CP=(gb=class extends xf{constructor(e={}){super();Qe(this,$r);this.config=e,ke(this,$r,new Map)}build(e,t,r){const i=t.queryKey,o=t.queryHash??hy(i,t);let l=this.get(o);return l||(l=new RP({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){ne(this,$r).has(e.queryHash)||(ne(this,$r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ne(this,$r).get(e.queryHash);t&&(e.destroy(),t===e&&ne(this,$r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ne(this,$r).get(e)}getAll(){return[...ne(this,$r).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>mE(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>mE(e,r)):t}notify(e){yn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){yn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$r=new WeakMap,gb),Gr,gn,Po,qr,as,yb,DP=(yb=class extends Ab{constructor(t){super();Qe(this,qr);Qe(this,Gr);Qe(this,gn);Qe(this,Po);this.mutationId=t.mutationId,ke(this,gn,t.mutationCache),ke(this,Gr,[]),this.state=t.state||kP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ne(this,Gr).includes(t)||(ne(this,Gr).push(t),this.clearGcTimeout(),ne(this,gn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ke(this,Gr,ne(this,Gr).filter(r=>r!==t)),this.scheduleGc(),ne(this,gn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ne(this,Gr).length||(this.state.status==="pending"?this.scheduleGc():ne(this,gn).remove(this))}continue(){var t;return((t=ne(this,Po))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,p,m,y,_,I,b,R,S,M,V,$,H,X,J,D,A;ke(this,Po,Rb({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,N)=>{nn(this,qr,as).call(this,{type:"failed",failureCount:P,error:N})},onPause:()=>{nn(this,qr,as).call(this,{type:"pause"})},onContinue:()=>{nn(this,qr,as).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ne(this,gn).canRun(this)}));const r=this.state.status==="pending",i=!ne(this,Po).canStart();try{if(!r){nn(this,qr,as).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=ne(this,gn).config).onMutate)==null?void 0:l.call(o,t,this));const N=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t));N!==this.state.context&&nn(this,qr,as).call(this,{type:"pending",context:N,variables:t,isPaused:i})}const P=await ne(this,Po).start();return await((m=(p=ne(this,gn).config).onSuccess)==null?void 0:m.call(p,P,t,this.state.context,this)),await((_=(y=this.options).onSuccess)==null?void 0:_.call(y,P,t,this.state.context)),await((b=(I=ne(this,gn).config).onSettled)==null?void 0:b.call(I,P,null,this.state.variables,this.state.context,this)),await((S=(R=this.options).onSettled)==null?void 0:S.call(R,P,null,t,this.state.context)),nn(this,qr,as).call(this,{type:"success",data:P}),P}catch(P){try{throw await((V=(M=ne(this,gn).config).onError)==null?void 0:V.call(M,P,t,this.state.context,this)),await((H=($=this.options).onError)==null?void 0:H.call($,P,t,this.state.context)),await((J=(X=ne(this,gn).config).onSettled)==null?void 0:J.call(X,void 0,P,this.state.variables,this.state.context,this)),await((A=(D=this.options).onSettled)==null?void 0:A.call(D,void 0,P,t,this.state.context)),P}finally{nn(this,qr,as).call(this,{type:"error",error:P})}}finally{ne(this,gn).runNext(this)}}},Gr=new WeakMap,gn=new WeakMap,Po=new WeakMap,qr=new WeakSet,as=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),yn.batch(()=>{ne(this,Gr).forEach(i=>{i.onMutationUpdate(t)}),ne(this,gn).notify({mutation:this,type:"updated",action:t})})},yb);function kP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _i,Ir,Rc,_b,NP=(_b=class extends xf{constructor(e={}){super();Qe(this,_i);Qe(this,Ir);Qe(this,Rc);this.config=e,ke(this,_i,new Set),ke(this,Ir,new Map),ke(this,Rc,0)}build(e,t,r){const i=new DP({mutationCache:this,mutationId:++sh(this,Rc)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ne(this,_i).add(e);const t=ah(e);if(typeof t=="string"){const r=ne(this,Ir).get(t);r?r.push(e):ne(this,Ir).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ne(this,_i).delete(e)){const t=ah(e);if(typeof t=="string"){const r=ne(this,Ir).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ne(this,Ir).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ah(e);if(typeof t=="string"){const r=ne(this,Ir).get(t),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=ah(e);if(typeof t=="string"){const i=(r=ne(this,Ir).get(t))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yn.batch(()=>{ne(this,_i).forEach(e=>{this.notify({type:"removed",mutation:e})}),ne(this,_i).clear(),ne(this,Ir).clear()})}getAll(){return Array.from(ne(this,_i))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>gE(t,r))}findAll(e={}){return this.getAll().filter(t=>gE(e,t))}notify(e){yn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return yn.batch(()=>Promise.all(e.map(t=>t.continue().catch(wr))))}},_i=new WeakMap,Ir=new WeakMap,Rc=new WeakMap,_b);function ah(n){var e;return(e=n.options.scope)==null?void 0:e.id}function vE(n){return{onFetch:(e,t)=>{var m,y,_,I,b;const r=e.options,i=(_=(y=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:y.fetchMore)==null?void 0:_.direction,o=((I=e.state.data)==null?void 0:I.pages)||[],l=((b=e.state.data)==null?void 0:b.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const p=async()=>{let R=!1;const S=$=>{Object.defineProperty($,"signal",{enumerable:!0,get:()=>(e.signal.aborted?R=!0:e.signal.addEventListener("abort",()=>{R=!0}),e.signal)})},M=Tb(e.options,e.fetchOptions),V=async($,H,X)=>{if(R)return Promise.reject();if(H==null&&$.pages.length)return Promise.resolve($);const J={queryKey:e.queryKey,pageParam:H,direction:X?"backward":"forward",meta:e.options.meta};S(J);const D=await M(J),{maxPages:A}=e.options,P=X?EP:wP;return{pages:P($.pages,D,A),pageParams:P($.pageParams,H,A)}};if(i&&o.length){const $=i==="backward",H=$?OP:wE,X={pages:o,pageParams:l},J=H(r,X);c=await V(X,J,$)}else{const $=n??o.length;do{const H=d===0?l[0]??r.initialPageParam:wE(r,c);if(d>0&&H==null)break;c=await V(c,H),d++}while(d<$)}return c};e.options.persister?e.fetchFn=()=>{var R,S;return(S=(R=e.options).persister)==null?void 0:S.call(R,p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function wE(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function OP(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var wt,ps,ms,tl,nl,gs,rl,il,vb,VP=(vb=class{constructor(n={}){Qe(this,wt);Qe(this,ps);Qe(this,ms);Qe(this,tl);Qe(this,nl);Qe(this,gs);Qe(this,rl);Qe(this,il);ke(this,wt,n.queryCache||new CP),ke(this,ps,n.mutationCache||new NP),ke(this,ms,n.defaultOptions||{}),ke(this,tl,new Map),ke(this,nl,new Map),ke(this,gs,0)}mount(){sh(this,gs)._++,ne(this,gs)===1&&(ke(this,rl,bb.subscribe(async n=>{n&&(await this.resumePausedMutations(),ne(this,wt).onFocus())})),ke(this,il,Bh.subscribe(async n=>{n&&(await this.resumePausedMutations(),ne(this,wt).onOnline())})))}unmount(){var n,e;sh(this,gs)._--,ne(this,gs)===0&&((n=ne(this,rl))==null||n.call(this),ke(this,rl,void 0),(e=ne(this,il))==null||e.call(this),ke(this,il,void 0))}isFetching(n){return ne(this,wt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ne(this,ps).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ne(this,wt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ne(this,wt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(pE(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ne(this,wt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ne(this,wt).get(r.queryHash),o=i==null?void 0:i.state.data,l=pP(e,o);if(l!==void 0)return ne(this,wt).build(this,r).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return yn.batch(()=>ne(this,wt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ne(this,wt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ne(this,wt);yn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ne(this,wt),r={type:"active",...n};return yn.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=yn.batch(()=>ne(this,wt).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(wr).catch(wr)}invalidateQueries(n,e={}){return yn.batch(()=>{if(ne(this,wt).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none")return Promise.resolve();const t={...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"};return this.refetchQueries(t,e)})}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=yn.batch(()=>ne(this,wt).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,t);return t.throwOnError||(o=o.catch(wr)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(wr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ne(this,wt).build(this,e);return t.isStaleByTime(pE(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(wr).catch(wr)}fetchInfiniteQuery(n){return n.behavior=vE(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(wr).catch(wr)}ensureInfiniteQueryData(n){return n.behavior=vE(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Bh.isOnline()?ne(this,ps).resumePausedMutations():Promise.resolve()}getQueryCache(){return ne(this,wt)}getMutationCache(){return ne(this,ps)}getDefaultOptions(){return ne(this,ms)}setDefaultOptions(n){ke(this,ms,n)}setQueryDefaults(n,e){ne(this,tl).set(nc(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ne(this,tl).values()],t={};return e.forEach(r=>{rc(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ne(this,nl).set(nc(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ne(this,nl).values()];let t={};return e.forEach(r=>{rc(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ne(this,ms).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=hy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===fy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ne(this,ms).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ne(this,wt).clear(),ne(this,ps).clear()}},wt=new WeakMap,ps=new WeakMap,ms=new WeakMap,tl=new WeakMap,nl=new WeakMap,gs=new WeakMap,rl=new WeakMap,il=new WeakMap,vb),MP=L.createContext(void 0),LP=({client:n,children:e})=>(L.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),O.jsx(MP.Provider,{value:n,children:e})),Pu={},EE;function FP(){if(EE)return Pu;EE=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.parse=l,Pu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function l(_,I){const b=new o,R=_.length;if(R<2)return b;const S=(I==null?void 0:I.decode)||m;let M=0;do{const V=_.indexOf("=",M);if(V===-1)break;const $=_.indexOf(";",M),H=$===-1?R:$;if(V>H){M=_.lastIndexOf(";",V-1)+1;continue}const X=c(_,M,V),J=d(_,V,X),D=_.slice(X,J);if(b[D]===void 0){let A=c(_,V+1,H),P=d(_,H,A);const N=S(_.slice(A,P));b[D]=N}M=H+1}while(M<R);return b}function c(_,I,b){do{const R=_.charCodeAt(I);if(R!==32&&R!==9)return I}while(++I<b);return b}function d(_,I,b){for(;I>b;){const R=_.charCodeAt(--I);if(R!==32&&R!==9)return I+1}return b}function p(_,I,b){const R=(b==null?void 0:b.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const S=R(I);if(!e.test(S))throw new TypeError(`argument val is invalid: ${I}`);let M=_+"="+S;if(!b)return M;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);M+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);M+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);M+="; Path="+b.path}if(b.expires){if(!y(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);M+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(M+="; HttpOnly"),b.secure&&(M+="; Secure"),b.partitioned&&(M+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return M}function m(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function y(_){return i.call(_)==="[object Date]"}return Pu}FP();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var IE="popstate";function BP(n={}){function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Sg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ic(i)}return jP(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UP(){return Math.random().toString(36).substring(2,10)}function TE(n,e){return{usr:n.state,key:n.key,idx:e}}function Sg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Il(e):e,state:t,key:e&&e.key||r||UP()}}function ic({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Il(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function jP(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c="POP",d=null,p=m();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function m(){return(l.state||{idx:null}).idx}function y(){c="POP";let S=m(),M=S==null?null:S-p;p=S,d&&d({action:c,location:R.location,delta:M})}function _(S,M){c="PUSH";let V=Sg(R.location,S,M);p=m()+1;let $=TE(V,p),H=R.createHref(V);try{l.pushState($,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(H)}o&&d&&d({action:c,location:R.location,delta:1})}function I(S,M){c="REPLACE";let V=Sg(R.location,S,M);p=m();let $=TE(V,p),H=R.createHref(V);l.replaceState($,"",H),o&&d&&d({action:c,location:R.location,delta:0})}function b(S){let M=i.location.origin!=="null"?i.location.origin:i.location.href,V=typeof S=="string"?S:ic(S);return V=V.replace(/ $/,"%20"),ft(M,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,M)}let R={get action(){return c},get location(){return n(i,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(IE,y),d=S,()=>{i.removeEventListener(IE,y),d=null}},createHref(S){return e(i,S)},createURL:b,encodeLocation(S){let M=b(S);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:_,replace:I,go(S){return l.go(S)}};return R}function Pb(n,e,t="/"){return zP(n,e,t,!1)}function zP(n,e,t,r){let i=typeof e=="string"?Il(e):e,o=Rs(i.pathname||"/",t);if(o==null)return null;let l=Cb(n);$P(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let p=eC(o);c=XP(l[d],p,r)}return c}function Cb(n,e=[],t=[],r=""){let i=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ft(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let p=Si([r,d.relativePath]),m=t.concat(d);o.children&&o.children.length>0&&(ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Cb(o.children,e,m,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:YP(p,o.index),routesMeta:m})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of Db(o.path))i(o,l,d)}),e}function Db(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=Db(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&c.push(...l),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function $P(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:JP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var GP=/^:[\w-]+$/,qP=3,WP=2,HP=1,KP=10,QP=-2,bE=n=>n==="*";function YP(n,e){let t=n.split("/"),r=t.length;return t.some(bE)&&(r+=QP),e&&(r+=WP),t.filter(i=>!bE(i)).reduce((i,o)=>i+(GP.test(o)?qP:o===""?HP:KP),r)}function JP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function XP(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],p=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=Uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},m),_=d.route;if(!y&&p&&t&&!r[r.length-1].route.index&&(y=Uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Si([o,y.pathname]),pathnameBase:iC(Si([o,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(o=Si([o,y.pathnameBase]))}return l}function Uh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ZP(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:y},_)=>{if(m==="*"){let b=c[_]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const I=c[_];return y&&!I?p[m]=void 0:p[m]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function ZP(n,e=!1,t=!0){xr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function eC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Rs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function tC(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Il(n):n;return{pathname:t?t.startsWith("/")?t:nC(t,e):e,search:sC(r),hash:oC(i)}}function nC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function $m(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function py(n){let e=rC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function my(n,e,t,r=!1){let i;typeof n=="string"?i=Il(n):(i={...n},ft(!i.pathname||!i.pathname.includes("?"),$m("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),$m("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),$m("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),y-=1;i.pathname=_.join("/")}c=y>=0?e[y]:"/"}let d=tC(i,c),p=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||m)&&(d.pathname+="/"),d}var Si=n=>n.join("/").replace(/\/\/+/g,"/"),iC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),sC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,oC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function aC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var kb=["POST","PUT","PATCH","DELETE"];new Set(kb);var lC=["GET",...kb];new Set(lC);var Tl=L.createContext(null);Tl.displayName="DataRouter";var Af=L.createContext(null);Af.displayName="DataRouterState";var Nb=L.createContext({isTransitioning:!1});Nb.displayName="ViewTransition";var uC=L.createContext(new Map);uC.displayName="Fetchers";var cC=L.createContext(null);cC.displayName="Await";var Rr=L.createContext(null);Rr.displayName="Navigation";var Ac=L.createContext(null);Ac.displayName="Location";var Xr=L.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var gy=L.createContext(null);gy.displayName="RouteError";function dC(n,{relative:e}={}){ft(bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=L.useContext(Rr),{hash:i,pathname:o,search:l}=Pc(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Si([t,o])),r.createHref({pathname:c,search:l,hash:i})}function bl(){return L.useContext(Ac)!=null}function Os(){return ft(bl(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Ac).location}var Ob="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vb(n){L.useContext(Rr).static||L.useLayoutEffect(n)}function yy(){let{isDataRoute:n}=L.useContext(Xr);return n?bC():hC()}function hC(){ft(bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=L.useContext(Tl),{basename:e,navigator:t}=L.useContext(Rr),{matches:r}=L.useContext(Xr),{pathname:i}=Os(),o=JSON.stringify(py(r)),l=L.useRef(!1);return Vb(()=>{l.current=!0}),L.useCallback((d,p={})=>{if(xr(l.current,Ob),!l.current)return;if(typeof d=="number"){t.go(d);return}let m=my(d,JSON.parse(o),i,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Si([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,o,i,n])}L.createContext(null);function Pc(n,{relative:e}={}){let{matches:t}=L.useContext(Xr),{pathname:r}=Os(),i=JSON.stringify(py(t));return L.useMemo(()=>my(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function fC(n,e){return Mb(n,e)}function Mb(n,e,t,r){var M;ft(bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=L.useContext(Rr),{matches:o}=L.useContext(Xr),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",m=l&&l.route;{let V=m&&m.path||"";Lb(d,!m||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let y=Os(),_;if(e){let V=typeof e=="string"?Il(e):e;ft(p==="/"||((M=V.pathname)==null?void 0:M.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${V.pathname}" was given in the \`location\` prop.`),_=V}else _=y;let I=_.pathname||"/",b=I;if(p!=="/"){let V=p.replace(/^\//,"").split("/");b="/"+I.replace(/^\//,"").split("/").slice(V.length).join("/")}let R=Pb(n,{pathname:b});xr(m||R!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),xr(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=_C(R&&R.map(V=>Object.assign({},V,{params:Object.assign({},c,V.params),pathname:Si([p,i.encodeLocation?i.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?p:Si([p,i.encodeLocation?i.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,t,r);return e&&S?L.createElement(Ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},S):S}function pC(){let n=TC(),e=aC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:i},t):null,l)}var mC=L.createElement(pC,null),gC=class extends L.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?L.createElement(Xr.Provider,{value:this.props.routeContext},L.createElement(gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yC({routeContext:n,match:e,children:t}){let r=L.useContext(Tl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Xr.Provider,{value:n},t)}function _C(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let d=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);ft(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(t)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:m,errors:y}=t,_=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,p,m)=>{let y,_=!1,I=null,b=null;t&&(y=o&&p.route.id?o[p.route.id]:void 0,I=p.route.errorElement||mC,l&&(c<0&&m===0?(Lb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,b=null):c===m&&(_=!0,b=p.route.hydrateFallbackElement||null)));let R=e.concat(i.slice(0,m+1)),S=()=>{let M;return y?M=I:_?M=b:p.route.Component?M=L.createElement(p.route.Component,null):p.route.element?M=p.route.element:M=d,L.createElement(yC,{match:p,routeContext:{outlet:d,matches:R,isDataRoute:t!=null},children:M})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?L.createElement(gC,{location:t.location,revalidation:t.revalidation,component:I,error:y,children:S(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):S()},null)}function _y(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(n){let e=L.useContext(Tl);return ft(e,_y(n)),e}function wC(n){let e=L.useContext(Af);return ft(e,_y(n)),e}function EC(n){let e=L.useContext(Xr);return ft(e,_y(n)),e}function vy(n){let e=EC(n),t=e.matches[e.matches.length-1];return ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function IC(){return vy("useRouteId")}function TC(){var r;let n=L.useContext(gy),e=wC("useRouteError"),t=vy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function bC(){let{router:n}=vC("useNavigate"),e=vy("useNavigate"),t=L.useRef(!1);return Vb(()=>{t.current=!0}),L.useCallback(async(i,o={})=>{xr(t.current,Ob),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var SE={};function Lb(n,e,t){!e&&!SE[n]&&(SE[n]=!0,xr(!1,t))}L.memo(SC);function SC({routes:n,future:e,state:t}){return Mb(n,void 0,t,e)}function Fb({to:n,replace:e,state:t,relative:r}){ft(bl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=L.useContext(Rr);xr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=L.useContext(Xr),{pathname:l}=Os(),c=yy(),d=my(n,py(o),l,r==="path"),p=JSON.stringify(d);return L.useEffect(()=>{c(JSON.parse(p),{replace:e,state:t,relative:r})},[c,p,r,e,t]),null}function Eh(n){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){ft(!bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof t=="string"&&(t=Il(t));let{pathname:d="/",search:p="",hash:m="",state:y=null,key:_="default"}=t,I=L.useMemo(()=>{let b=Rs(d,l);return b==null?null:{location:{pathname:b,search:p,hash:m,state:y,key:_},navigationType:r}},[l,d,p,m,y,_,r]);return xr(I!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:L.createElement(Rr.Provider,{value:c},L.createElement(Ac.Provider,{children:e,value:I}))}function RC({children:n,location:e}){return fC(xg(n),e)}function xg(n,e=[]){let t=[];return L.Children.forEach(n,(r,i)=>{if(!L.isValidElement(r))return;let o=[...e,i];if(r.type===L.Fragment){t.push.apply(t,xg(r.props.children,o));return}ft(r.type===Eh,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=xg(r.props.children,o)),t.push(l)}),t}var Ih="get",Th="application/x-www-form-urlencoded";function Pf(n){return n!=null&&typeof n.tagName=="string"}function AC(n){return Pf(n)&&n.tagName.toLowerCase()==="button"}function PC(n){return Pf(n)&&n.tagName.toLowerCase()==="form"}function CC(n){return Pf(n)&&n.tagName.toLowerCase()==="input"}function DC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function kC(n,e){return n.button===0&&(!e||e==="_self")&&!DC(n)}var lh=null;function NC(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var OC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gm(n){return n!=null&&!OC.has(n)?(xr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Th}"`),null):n}function VC(n,e){let t,r,i,o,l;if(PC(n)){let c=n.getAttribute("action");r=c?Rs(c,e):null,t=n.getAttribute("method")||Ih,i=Gm(n.getAttribute("enctype"))||Th,o=new FormData(n)}else if(AC(n)||CC(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||c.getAttribute("action");if(r=d?Rs(d,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Ih,i=Gm(n.getAttribute("formenctype"))||Gm(c.getAttribute("enctype"))||Th,o=new FormData(c,n),!NC()){let{name:p,type:m,value:y}=n;if(m==="image"){let _=p?`${p}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else p&&o.append(p,y)}}else{if(Pf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ih,r=null,i=Th,l=n}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:l}}function wy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function MC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function FC(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await MC(o,t);return l.links?l.links():[]}return[]}));return zC(r.flat(1).filter(LC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function xE(n,e,t,r,i,o){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,c=(d,p)=>{var m;return t[p].pathname!==d.pathname||((m=t[p].route.path)==null?void 0:m.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,p)=>l(d,p)||c(d,p)):o==="data"?e.filter((d,p)=>{var y;let m=r.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,p)||c(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function BC(n,e){return UC(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function UC(n){return[...new Set(n)]}function jC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function zC(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(jC(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function $C(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function GC(){let n=L.useContext(Tl);return wy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function qC(){let n=L.useContext(Af);return wy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ey=L.createContext(void 0);Ey.displayName="FrameworkContext";function Bb(){let n=L.useContext(Ey);return wy(n,"You must render this element inside a <HydratedRouter> element"),n}function WC(n,e){let t=L.useContext(Ey),[r,i]=L.useState(!1),[o,l]=L.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:p,onMouseLeave:m,onTouchStart:y}=e,_=L.useRef(null);L.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let R=M=>{M.forEach(V=>{l(V.isIntersecting)})},S=new IntersectionObserver(R,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[n]),L.useEffect(()=>{if(r){let R=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(R)}}},[r]);let I=()=>{i(!0)},b=()=>{i(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:Cu(c,I),onBlur:Cu(d,b),onMouseEnter:Cu(p,I),onMouseLeave:Cu(m,b),onTouchStart:Cu(y,I)}]:[!1,_,{}]}function Cu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function HC({page:n,...e}){let{router:t}=GC(),r=L.useMemo(()=>Pb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?L.createElement(QC,{page:n,matches:r,...e}):null}function KC(n){let{manifest:e,routeModules:t}=Bb(),[r,i]=L.useState([]);return L.useEffect(()=>{let o=!1;return FC(n,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[n,e,t]),r}function QC({page:n,matches:e,...t}){let r=Os(),{manifest:i,routeModules:o}=Bb(),{loaderData:l,matches:c}=qC(),d=L.useMemo(()=>xE(n,e,c,i,r,"data"),[n,e,c,i,r]),p=L.useMemo(()=>xE(n,e,c,i,r,"assets"),[n,e,c,i,r]),m=L.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,b=!1;if(e.forEach(S=>{var V;let M=i.routes[S.route.id];!M||!M.hasLoader||(!d.some($=>$.route.id===S.route.id)&&S.route.id in l&&((V=o[S.route.id])!=null&&V.shouldRevalidate)||M.hasClientLoader?b=!0:I.add(S.route.id))}),I.size===0)return[];let R=$C(n);return b&&I.size>0&&R.searchParams.set("_routes",e.filter(S=>I.has(S.route.id)).map(S=>S.route.id).join(",")),[R.pathname+R.search]},[l,r,i,d,e,n,o]),y=L.useMemo(()=>BC(p,i),[p,i]),_=KC(p);return L.createElement(L.Fragment,null,m.map(I=>L.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),y.map(I=>L.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),_.map(({key:I,link:b})=>L.createElement("link",{key:I,...b})))}function YC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ub=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ub&&(window.__reactRouterVersion="7.1.3")}catch{}function JC({basename:n,children:e,window:t}){let r=L.useRef();r.current==null&&(r.current=BP({window:t,v5Compat:!0}));let i=r.current,[o,l]=L.useState({action:i.action,location:i.location}),c=L.useCallback(d=>{L.startTransition(()=>l(d))},[l]);return L.useLayoutEffect(()=>i.listen(c),[i,c]),L.createElement(xC,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zb=L.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:c,target:d,to:p,preventScrollReset:m,viewTransition:y,..._},I){let{basename:b}=L.useContext(Rr),R=typeof p=="string"&&jb.test(p),S,M=!1;if(typeof p=="string"&&R&&(S=p,Ub))try{let P=new URL(window.location.href),N=p.startsWith("//")?new URL(P.protocol+p):new URL(p),F=Rs(N.pathname,b);N.origin===P.origin&&F!=null?p=F+N.search+N.hash:M=!0}catch{xr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=dC(p,{relative:i}),[$,H,X]=WC(r,_),J=tD(p,{replace:l,state:c,target:d,preventScrollReset:m,relative:i,viewTransition:y});function D(P){e&&e(P),P.defaultPrevented||J(P)}let A=L.createElement("a",{..._,...X,href:S||V,onClick:M||o?e:D,ref:YC(I,H),target:d,"data-discover":!R&&t==="render"?"true":void 0});return $&&!R?L.createElement(L.Fragment,null,A,L.createElement(HC,{page:V})):A});zb.displayName="Link";var XC=L.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:c,children:d,...p},m){let y=Pc(l,{relative:p.relative}),_=Os(),I=L.useContext(Af),{navigator:b,basename:R}=L.useContext(Rr),S=I!=null&&oD(y)&&c===!0,M=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,V=_.pathname,$=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(V=V.toLowerCase(),$=$?$.toLowerCase():null,M=M.toLowerCase()),$&&R&&($=Rs($,R)||$);const H=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let X=V===M||!i&&V.startsWith(M)&&V.charAt(H)==="/",J=$!=null&&($===M||!i&&$.startsWith(M)&&$.charAt(M.length)==="/"),D={isActive:X,isPending:J,isTransitioning:S},A=X?e:void 0,P;typeof r=="function"?P=r(D):P=[r,X?"active":null,J?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(D):o;return L.createElement(zb,{...p,"aria-current":A,className:P,ref:m,style:N,to:l,viewTransition:c},typeof d=="function"?d(D):d)});XC.displayName="NavLink";var ZC=L.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:l=Ih,action:c,onSubmit:d,relative:p,preventScrollReset:m,viewTransition:y,..._},I)=>{let b=iD(),R=sD(c,{relative:p}),S=l.toLowerCase()==="get"?"get":"post",M=typeof c=="string"&&jb.test(c),V=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let H=$.nativeEvent.submitter,X=(H==null?void 0:H.getAttribute("formmethod"))||l;b(H||$.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:i,state:o,relative:p,preventScrollReset:m,viewTransition:y})};return L.createElement("form",{ref:I,method:S,action:R,onSubmit:r?d:V,..._,"data-discover":!M&&n==="render"?"true":void 0})});ZC.displayName="Form";function eD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $b(n){let e=L.useContext(Tl);return ft(e,eD(n)),e}function tD(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:l}={}){let c=yy(),d=Os(),p=Pc(n,{relative:o});return L.useCallback(m=>{if(kC(m,e)){m.preventDefault();let y=t!==void 0?t:ic(d)===ic(p);c(n,{replace:y,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,p,t,r,e,n,i,o,l])}var nD=0,rD=()=>`__${String(++nD)}__`;function iD(){let{router:n}=$b("useSubmit"),{basename:e}=L.useContext(Rr),t=IC();return L.useCallback(async(r,i={})=>{let{action:o,method:l,encType:c,formData:d,body:p}=VC(r,e);if(i.navigate===!1){let m=i.fetcherKey||rD();await n.fetch(m,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function sD(n,{relative:e}={}){let{basename:t}=L.useContext(Rr),r=L.useContext(Xr);ft(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Pc(n||".",{relative:e})},l=Os();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(m=>m==="")){c.delete("index"),d.filter(y=>y).forEach(y=>c.append("index",y));let m=c.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Si([t,o.pathname])),ic(o)}function oD(n,e={}){let t=L.useContext(Nb);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$b("useViewTransitionState"),i=Pc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Rs(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Rs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Uh(i.pathname,l)!=null||Uh(i.pathname,o)!=null}new TextEncoder;var Iy=Eb();const aD=wb(Iy);var RE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},lD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],d=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},qb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,d=i+2<n.length,p=d?n[i+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let _=(c&15)<<2|p>>6,I=p&63;d||(I=64,l||(_=64)),r.push(t[m],t[y],t[_],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Gb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||p==null||y==null)throw new uD;const _=o<<2|c>>4;if(r.push(_),p!==64){const I=c<<4&240|p>>2;if(r.push(I),y!==64){const b=p<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cD=function(n){const e=Gb(n);return qb.encodeByteArray(e,!0)},jh=function(n){return cD(n).replace(/\./g,"")},Wb=function(n){try{return qb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=()=>dD().__FIREBASE_DEFAULTS__,fD=()=>{if(typeof process>"u"||typeof RE>"u")return;const n=RE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Wb(n[1]);return e&&JSON.parse(e)},Cf=()=>{try{return hD()||fD()||pD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Hb=n=>{var e,t;return(t=(e=Cf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mD=n=>{const e=Hb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Kb=()=>{var n;return(n=Cf())===null||n===void 0?void 0:n.config},Qb=n=>{var e;return(e=Cf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jh(JSON.stringify(t)),jh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _D(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function vD(){var n;const e=(n=Cf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ED(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ID(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TD(){const n=Mt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Yb(){return!vD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jb(){try{return typeof indexedDB=="object"}catch{return!1}}function bD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="FirebaseError";class Ar extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=SD,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cc.prototype.create)}}class Cc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?xD(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Ar(i,c,r)}}function xD(n,e){return n.replace(RD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const RD=/\{\$([^}]+)}/g;function AD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(AE(o)&&AE(l)){if(!sc(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function AE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function PD(n,e){const t=new CD(n,e);return t.subscribe.bind(t)}class CD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=qm),i.error===void 0&&(i.error=qm),i.complete===void 0&&(i.complete=qm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class As{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kD=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new gD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OD(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ND(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ND(n){return n===yo?void 0:n}function OD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const MD={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},LD=Me.INFO,FD={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},BD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=FD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ty{constructor(e){this.name=e,this._logLevel=LD,this._logHandler=BD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const UD=(n,e)=>e.some(t=>n instanceof t);let PE,CE;function jD(){return PE||(PE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zD(){return CE||(CE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xb=new WeakMap,Rg=new WeakMap,Zb=new WeakMap,Wm=new WeakMap,by=new WeakMap;function $D(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(_s(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Xb.set(t,n)}).catch(()=>{}),by.set(e,n),e}function GD(n){if(Rg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Rg.set(n,e)}let Ag={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qD(n){Ag=n(Ag)}function WD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Hm(this),e,...t);return Zb.set(r,e.sort?e.sort():[e]),_s(r)}:zD().includes(n)?function(...e){return n.apply(Hm(this),e),_s(Xb.get(this))}:function(...e){return _s(n.apply(Hm(this),e))}}function HD(n){return typeof n=="function"?WD(n):(n instanceof IDBTransaction&&GD(n),UD(n,jD())?new Proxy(n,Ag):n)}function _s(n){if(n instanceof IDBRequest)return $D(n);if(Wm.has(n))return Wm.get(n);const e=HD(n);return e!==n&&(Wm.set(n,e),by.set(e,n)),e}const Hm=n=>by.get(n);function KD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=_s(l);return r&&l.addEventListener("upgradeneeded",d=>{r(_s(l.result),d.oldVersion,d.newVersion,_s(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const QD=["get","getKey","getAll","getAllKeys","count"],YD=["put","add","delete","clear"],Km=new Map;function DE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Km.get(e))return Km.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=YD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||QD.includes(t)))return;const o=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&d.done]))[0]};return Km.set(e,o),o}qD(n=>({...n,get:(e,t,r)=>DE(e,t)||n.get(e,t,r),has:(e,t)=>!!DE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function XD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pg="@firebase/app",kE="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Ty("@firebase/app"),ZD="@firebase/app-compat",ek="@firebase/analytics-compat",tk="@firebase/analytics",nk="@firebase/app-check-compat",rk="@firebase/app-check",ik="@firebase/auth",sk="@firebase/auth-compat",ok="@firebase/database",ak="@firebase/data-connect",lk="@firebase/database-compat",uk="@firebase/functions",ck="@firebase/functions-compat",dk="@firebase/installations",hk="@firebase/installations-compat",fk="@firebase/messaging",pk="@firebase/messaging-compat",mk="@firebase/performance",gk="@firebase/performance-compat",yk="@firebase/remote-config",_k="@firebase/remote-config-compat",vk="@firebase/storage",wk="@firebase/storage-compat",Ek="@firebase/firestore",Ik="@firebase/vertexai",Tk="@firebase/firestore-compat",bk="firebase",Sk="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="[DEFAULT]",xk={[Pg]:"fire-core",[ZD]:"fire-core-compat",[tk]:"fire-analytics",[ek]:"fire-analytics-compat",[rk]:"fire-app-check",[nk]:"fire-app-check-compat",[ik]:"fire-auth",[sk]:"fire-auth-compat",[ok]:"fire-rtdb",[ak]:"fire-data-connect",[lk]:"fire-rtdb-compat",[uk]:"fire-fn",[ck]:"fire-fn-compat",[dk]:"fire-iid",[hk]:"fire-iid-compat",[fk]:"fire-fcm",[pk]:"fire-fcm-compat",[mk]:"fire-perf",[gk]:"fire-perf-compat",[yk]:"fire-rc",[_k]:"fire-rc-compat",[vk]:"fire-gcs",[wk]:"fire-gcs-compat",[Ek]:"fire-fst",[Tk]:"fire-fst-compat",[Ik]:"fire-vertex","fire-js":"fire-js",[bk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,Rk=new Map,Dg=new Map;function NE(n,e){try{n.container.addComponent(e)}catch(t){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function No(n){const e=n.name;if(Dg.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,n);for(const t of zh.values())NE(t,n);for(const t of Rk.values())NE(t,n);return!0}function Df(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new Cc("app","Firebase",Ak);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=Sk;function eS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vs.create("bad-app-name",{appName:String(i)});if(t||(t=Kb()),!t)throw vs.create("no-options");const o=zh.get(i);if(o){if(sc(t,o.options)&&sc(r,o.config))return o;throw vs.create("duplicate-app",{appName:i})}const l=new VD(i);for(const d of Dg.values())l.addComponent(d);const c=new Pk(t,r,l);return zh.set(i,c),c}function tS(n=Cg){const e=zh.get(n);if(!e&&n===Cg&&Kb())return eS();if(!e)throw vs.create("no-app",{appName:n});return e}function xi(n,e,t){var r;let i=(r=xk[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(c.join(" "));return}No(new As(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="firebase-heartbeat-database",Dk=1,oc="firebase-heartbeat-store";let Qm=null;function nS(){return Qm||(Qm=KD(Ck,Dk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oc)}catch(t){console.warn(t)}}}}).catch(n=>{throw vs.create("idb-open",{originalErrorMessage:n.message})})),Qm}async function kk(n){try{const t=(await nS()).transaction(oc),r=await t.objectStore(oc).get(rS(n));return await t.done,r}catch(e){if(e instanceof Ar)Ri.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(t.message)}}}async function OE(n,e){try{const r=(await nS()).transaction(oc,"readwrite");await r.objectStore(oc).put(e,rS(n)),await r.done}catch(t){if(t instanceof Ar)Ri.warn(t.message);else{const r=vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ri.warn(r.message)}}}function rS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=1024,Ok=30*24*60*60*1e3;class Vk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Lk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=VE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=Ok}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ri.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=VE(),{heartbeatsToSend:r,unsentEntries:i}=Mk(this._heartbeatsCache.heartbeats),o=jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ri.warn(t),""}}}function VE(){return new Date().toISOString().substring(0,10)}function Mk(n,e=Nk){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),ME(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ME(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Lk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jb()?bD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ME(n){return jh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){No(new As("platform-logger",e=>new JD(e),"PRIVATE")),No(new As("heartbeat",e=>new Vk(e),"PRIVATE")),xi(Pg,kE,n),xi(Pg,kE,"esm2017"),xi("fire-js","")}Fk("");function Sy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function iS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bk=iS,sS=new Cc("auth","Firebase",iS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Ty("@firebase/auth");function Uk(n,...e){$h.logLevel<=Me.WARN&&$h.warn(`Auth (${$o}): ${n}`,...e)}function bh(n,...e){$h.logLevel<=Me.ERROR&&$h.error(`Auth (${$o}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(n,...e){throw Ry(n,...e)}function Sr(n,...e){return Ry(n,...e)}function xy(n,e,t){const r=Object.assign(Object.assign({},Bk()),{[e]:t});return new Cc("auth","Firebase",r).create(e,{appName:n.name})}function Co(n){return xy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jk(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qr(n,"argument-error"),xy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ry(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return sS.create(n,...e)}function Ae(n,e,...t){if(!n)throw Ry(e,...t)}function Ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bh(e),new Error(e)}function Ai(n,e){n||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function zk(){return LE()==="http:"||LE()==="https:"}function LE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zk()||ED()||"connection"in navigator)?navigator.onLine:!0}function Gk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=_D()||ID()}get(){return $k()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n,e){Ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new kc(3e4,6e4);function Py(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Sl(n,e,t,r,i={}){return aS(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Dc(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:d},o);return wD()||(p.referrerPolicy="no-referrer"),oS.fetch()(lS(n,n.config.apiHost,t,c),p)})}async function aS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},qk),e);try{const i=new Kk(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw uh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,p]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw uh(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw uh(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw xy(n,m,p);Qr(n,m)}}catch(i){if(i instanceof Ar)throw i;Qr(n,"network-request-failed",{message:String(i)})}}async function Hk(n,e,t,r,i={}){const o=await Sl(n,e,t,r,i);return"mfaPendingCredential"in o&&Qr(n,"multi-factor-auth-required",{_serverResponse:o}),o}function lS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Ay(n.config,i):`${n.config.apiScheme}://${i}`}class Kk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),Wk.get())})}}function uh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Sr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(n,e){return Sl(n,"POST","/v1/accounts:delete",e)}async function uS(n,e){return Sl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Yk(n,e=!1){const t=Lt(n),r=await t.getIdToken(e),i=Cy(r);Ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Hu(Ym(i.auth_time)),issuedAtTime:Hu(Ym(i.iat)),expirationTime:Hu(Ym(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ym(n){return Number(n)*1e3}function Cy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Wb(t);return i?JSON.parse(i):(bh("Failed to decode base64 JWT payload"),null)}catch(i){return bh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function FE(n){const e=Cy(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ar&&Jk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Jk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gh(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ac(n,uS(t,{idToken:r}));Ae(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?cS(o.providerUserInfo):[],c=eN(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=d?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ng(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function Zk(n){const e=Lt(n);await Gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eN(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cS(n){return n.map(e=>{var{providerId:t}=e,r=Sy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(n,e){const t=await aS(n,{},async()=>{const r=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=lS(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",oS.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nN(n,e){return Sl(n,"POST","/v2/accounts:revokeToken",Py(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=FE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await tN(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Wa;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ae(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ae(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ii{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Sy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ng(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ac(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Yk(this,e)}reload(){return Zk(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Gh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await ac(this,Qk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,c,d,p,m;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,b=(l=t.photoURL)!==null&&l!==void 0?l:void 0,R=(c=t.tenantId)!==null&&c!==void 0?c:void 0,S=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,M=(p=t.createdAt)!==null&&p!==void 0?p:void 0,V=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:$,emailVerified:H,isAnonymous:X,providerData:J,stsTokenManager:D}=t;Ae($&&D,e,"internal-error");const A=Wa.fromJSON(this.name,D);Ae(typeof $=="string",e,"internal-error"),rs(y,e.name),rs(_,e.name),Ae(typeof H=="boolean",e,"internal-error"),Ae(typeof X=="boolean",e,"internal-error"),rs(I,e.name),rs(b,e.name),rs(R,e.name),rs(S,e.name),rs(M,e.name),rs(V,e.name);const P=new Ii({uid:$,auth:e,email:_,emailVerified:H,displayName:y,isAnonymous:X,photoURL:b,phoneNumber:I,tenantId:R,stsTokenManager:A,createdAt:M,lastLoginAt:V});return J&&Array.isArray(J)&&(P.providerData=J.map(N=>Object.assign({},N))),S&&(P._redirectEventId=S),P}static async _fromIdTokenResponse(e,t,r=!1){const i=new Wa;i.updateFromServerResponse(t);const o=new Ii({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ae(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?cS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new Wa;c.updateFromIdToken(r);const d=new Ii({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ng(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;function Ti(n){Ai(n instanceof Function,"Expected a class definition");let e=BE.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,BE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dS.type="NONE";const UE=dS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(n,e,t){return`firebase:${n}:${e}:${t}`}class Ha{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Sh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Sh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ii._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ha(Ti(UE),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Ti(UE);const l=Sh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const m=await p._get(l);if(m){const y=Ii._fromJSON(e,m);p!==o&&(c=y),o=p;break}}catch{}const d=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ha(o,e,r):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Ha(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yS(e))return"Blackberry";if(_S(e))return"Webos";if(fS(e))return"Safari";if((e.includes("chrome/")||pS(e))&&!e.includes("edge/"))return"Chrome";if(gS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hS(n=Mt()){return/firefox\//i.test(n)}function fS(n=Mt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pS(n=Mt()){return/crios\//i.test(n)}function mS(n=Mt()){return/iemobile/i.test(n)}function gS(n=Mt()){return/android/i.test(n)}function yS(n=Mt()){return/blackberry/i.test(n)}function _S(n=Mt()){return/webos/i.test(n)}function Dy(n=Mt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rN(n=Mt()){var e;return Dy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iN(){return TD()&&document.documentMode===10}function vS(n=Mt()){return Dy(n)||gS(n)||_S(n)||yS(n)||/windows phone/i.test(n)||mS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(n,e=[]){let t;switch(n){case"Browser":t=jE(Mt());break;case"Worker":t=`${jE(Mt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n,e={}){return Sl(n,"GET","/v2/passwordPolicy",Py(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=6;class lN{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:aN,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zE(this),this.idTokenSubscription=new zE(this),this.beforeStateQueue=new sN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ti(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uS(this,{idToken:e}),r=await Ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(wi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(Co(this));const t=e?Lt(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oN(this),t=new lN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ti(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[Ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Uk(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function kf(n){return Lt(n)}class zE{constructor(e){this.auth=e,this.observer=null,this.addObserver=PD(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ky={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cN(n){ky=n}function dN(n){return ky.loadJS(n)}function hN(){return ky.gapiScript}function fN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(n,e){const t=Df(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(sc(o,e??{}))return i;Qr(i,"already-initialized")}return t.initialize({options:e})}function mN(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ti);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gN(n,e,t){const r=kf(n);Ae(r._canInitEmulator,r,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=ES(e),{host:l,port:c}=yN(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),_N()}function ES(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yN(n){const e=ES(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:$E(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:$E(l)}}}function $E(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function _N(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,t){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n,e){return Hk(n,"POST","/v1/accounts:signInWithIdp",Py(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="http://localhost";class Oo extends IS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Sy(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Oo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ka(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ka(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ka(e,t)}buildRequest(){const e={requestUri:vN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Dc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends Ny{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Nc{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vi.credential(t,r)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Nc{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Nc{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return cs.credential(t,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Ii._fromIdTokenResponse(e,r,i),l=GE(r);return new sl({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=GE(r);return new sl({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function GE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends Ar{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new qh(e,t,r,i)}}function TS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(n,o,e,r):o})}async function wN(n,e,t=!1){const r=await ac(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return sl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(n,e,t=!1){const{auth:r}=n;if(wi(r.app))return Promise.reject(Co(r));const i="reauthenticate";try{const o=await ac(n,TS(r,i,e,n),t);Ae(o.idToken,r,"internal-error");const l=Cy(o.idToken);Ae(l,r,"internal-error");const{sub:c}=l;return Ae(n.uid===c,r,"user-mismatch"),sl._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Qr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(n,e,t=!1){if(wi(n.app))return Promise.reject(Co(n));const r="signIn",i=await TS(n,r,e),o=await sl._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function TN(n,e,t,r){return Lt(n).onIdTokenChanged(e,t,r)}function bN(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function SN(n,e,t,r){return Lt(n).onAuthStateChanged(e,t,r)}function xN(n){return Lt(n).signOut()}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=1e3,AN=10;class SS extends bS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);iN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},RN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SS.type="LOCAL";const PN=SS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends bS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xS.type="SESSION";const RS=xS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Nf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),d=await CN(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const p=Oy("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const _=y;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(_.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return window}function kN(n){Kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return typeof Kr().WorkerGlobalScope<"u"&&typeof Kr().importScripts=="function"}async function NN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ON(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function VN(){return AS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="firebaseLocalStorageDb",MN=1,Hh="firebaseLocalStorage",CS="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Of(n,e){return n.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function LN(){const n=indexedDB.deleteDatabase(PS);return new Oc(n).toPromise()}function Og(){const n=indexedDB.open(PS,MN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Hh,{keyPath:CS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Hh)?e(r):(r.close(),await LN(),e(await Og()))})})}async function qE(n,e,t){const r=Of(n,!0).put({[CS]:e,value:t});return new Oc(r).toPromise()}async function FN(n,e){const t=Of(n,!1).get(e),r=await new Oc(t).toPromise();return r===void 0?null:r.value}function WE(n,e){const t=Of(n,!0).delete(e);return new Oc(t).toPromise()}const BN=800,UN=3;class DS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>UN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nf._getInstance(VN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await NN(),!this.activeServiceWorker)return;this.sender=new DN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ON()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await qE(e,Wh,"1"),await WE(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>FN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>WE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Of(i,!1).getAll();return new Oc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DS.type="LOCAL";const jN=DS;new kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(n,e){return e?Ti(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends IS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zN(n){return IN(n.auth,new Vy(n),n.bypassAuthState)}function $N(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),EN(t,new Vy(n),n.bypassAuthState)}async function GN(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),wN(t,new Vy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zN;case"linkViaPopup":case"linkViaRedirect":return GN;case"reauthViaPopup":case"reauthViaRedirect":return $N;default:Qr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new kc(2e3,1e4);async function WN(n,e,t){if(wi(n.app))return Promise.reject(Sr(n,"operation-not-supported-in-this-environment"));const r=kf(n);jk(n,e,Ny);const i=kS(r,t);return new So(r,"signInViaPopup",e,i).executeNotNull()}class So extends NS{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=Oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qN.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="pendingRedirect",xh=new Map;class KN extends NS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xh.get(this.auth._key());if(!e){try{const r=await QN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xh.set(this.auth._key(),e)}return this.bypassAuthState||xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QN(n,e){const t=XN(e),r=JN(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function YN(n,e){xh.set(n._key(),e)}function JN(n){return Ti(n._redirectPersistence)}function XN(n){return Sh(HN,n.config.apiKey,n.name)}async function ZN(n,e,t=!1){if(wi(n.app))return Promise.reject(Co(n));const r=kf(n),i=kS(r,e),l=await new KN(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=10*60*1e3;class t1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!OS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Sr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e1&&this.cachedEventUids.clear(),this.cachedEventUids.has(HE(e))}saveEventToCache(e){this.cachedEventUids.add(HE(e)),this.lastProcessedEventTime=Date.now()}}function HE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function OS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function n1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(n,e={}){return Sl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s1=/^https?/;async function o1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await r1(n);for(const t of e)try{if(a1(t))return}catch{}Qr(n,"unauthorized-domain")}function a1(n){const e=kg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!s1.test(t))return!1;if(i1.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new kc(3e4,6e4);function KE(){const n=Kr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function u1(n){return new Promise((e,t)=>{var r,i,o;function l(){KE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KE(),t(Sr(n,"network-request-failed"))},timeout:l1.get()})}if(!((i=(r=Kr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Kr().gapi)===null||o===void 0)&&o.load)l();else{const c=fN("iframefcb");return Kr()[c]=()=>{gapi.load?l():t(Sr(n,"network-request-failed"))},dN(`${hN()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function c1(n){return Rh=Rh||u1(n),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new kc(5e3,15e3),h1="__/auth/iframe",f1="emulator/auth/iframe",p1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g1(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ay(e,f1):`https://${n.config.authDomain}/${h1}`,r={apiKey:e.apiKey,appName:n.name,v:$o},i=m1.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Dc(r).slice(1)}`}async function y1(n){const e=await c1(n),t=Kr().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:g1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p1,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Sr(n,"network-request-failed"),c=Kr().setTimeout(()=>{o(l)},d1.get());function d(){Kr().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v1=500,w1=600,E1="_blank",I1="http://localhost";class QE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T1(n,e,t,r=v1,i=w1){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},_1),{width:r.toString(),height:i.toString(),top:o,left:l}),p=Mt().toLowerCase();t&&(c=pS(p)?E1:t),hS(p)&&(e=e||I1,d.scrollbars="yes");const m=Object.entries(d).reduce((_,[I,b])=>`${_}${I}=${b},`,"");if(rN(p)&&c!=="_self")return b1(e||"",c),new QE(null);const y=window.open(e||"",c,m);Ae(y,n,"popup-blocked");try{y.focus()}catch{}return new QE(y)}function b1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="__/auth/handler",x1="emulator/auth/handler",R1=encodeURIComponent("fac");async function YE(n,e,t,r,i,o){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$o,eventId:i};if(e instanceof Ny){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",AD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof Nc){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await n._getAppCheckToken(),p=d?`#${R1}=${encodeURIComponent(d)}`:"";return`${A1(n)}?${Dc(c).slice(1)}${p}`}function A1({config:n}){return n.emulator?Ay(n,x1):`https://${n.authDomain}/${S1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="webStorageSupport";class P1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RS,this._completeRedirectFn=ZN,this._overrideRedirectResult=YN}async _openPopup(e,t,r,i){var o;Ai((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await YE(e,t,r,kg(),i);return T1(e,l,Oy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await YE(e,t,r,kg(),i);return kN(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ai(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await y1(e),r=new t1(e);return t.register("authEvent",i=>(Ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jm,{type:Jm},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Jm];l!==void 0&&t(!!l),Qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=o1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vS()||fS()||Dy()}}const C1=P1;var JE="@firebase/auth",XE="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N1(n){No(new As("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ae(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wS(n)},p=new uN(r,i,o,d);return mN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),No(new As("auth-internal",e=>{const t=kf(e.getProvider("auth").getImmediate());return(r=>new D1(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(JE,XE,k1(n)),xi(JE,XE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=5*60,V1=Qb("authIdTokenMaxAge")||O1;let ZE=null;const M1=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>V1)return;const i=t==null?void 0:t.token;ZE!==i&&(ZE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function L1(n=tS()){const e=Df(n,"auth");if(e.isInitialized())return e.getImmediate();const t=pN(n,{popupRedirectResolver:C1,persistence:[jN,PN,RS]}),r=Qb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=M1(o.toString());bN(t,l,()=>l(t.currentUser)),TN(t,c=>l(c))}}const i=Hb("auth");return i&&gN(t,`http://${i}`),t}function F1(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}cN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Sr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",F1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N1("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="firebasestorage.googleapis.com",B1="storageBucket",U1=2*60*1e3,j1=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Ar{constructor(e,t,r=0){super(Xm(e),`Firebase Storage: ${t} (${Xm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yr||(Yr={}));function Xm(n){return"storage/"+n}function z1(){const n="An unknown error occurred, please check the error payload for server response.";return new Zr(Yr.UNKNOWN,n)}function $1(){return new Zr(Yr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G1(){return new Zr(Yr.CANCELED,"User canceled the upload/download.")}function q1(n){return new Zr(Yr.INVALID_URL,"Invalid URL '"+n+"'.")}function W1(n){return new Zr(Yr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function eI(n){return new Zr(Yr.INVALID_ARGUMENT,n)}function MS(){return new Zr(Yr.APP_DELETED,"The Firebase app was deleted.")}function H1(n){return new Zr(Yr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Tr.makeFromUrl(e,t)}catch{return new Tr(e,"")}if(r.path==="")return r;throw W1(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),d={bucket:1,path:3};function p(H){H.path_=decodeURIComponent(H.path)}const m="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",I=new RegExp(`^https?://${y}/${m}/b/${i}/o${_}`,"i"),b={bucket:1,path:3},R=t===VS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",M=new RegExp(`^https?://${R}/${i}/${S}`,"i"),$=[{regex:c,indices:d,postModify:o},{regex:I,indices:b,postModify:p},{regex:M,indices:{bucket:1,path:2},postModify:p}];for(let H=0;H<$.length;H++){const X=$[H],J=X.regex.exec(e);if(J){const D=J[X.indices.bucket];let A=J[X.indices.path];A||(A=""),r=new Tr(D,A),X.postModify(r);break}}if(r==null)throw q1(e);return r}}class K1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function d(){return c===2}let p=!1;function m(...S){p||(p=!0,e.apply(null,S))}function y(S){i=setTimeout(()=>{i=null,n(I,d())},S)}function _(){o&&clearTimeout(o)}function I(S,...M){if(p){_();return}if(S){_(),m.call(null,S,...M);return}if(d()||l){_(),m.call(null,S,...M);return}r<64&&(r*=2);let $;c===1?(c=2,$=0):$=(r+Math.random())*1e3,y($)}let b=!1;function R(S){b||(b=!0,_(),!p&&(i!==null?(S||(c=2),clearTimeout(i),y(0)):S||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,R(!0)},t),R}function Y1(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(n){return n!==void 0}function tI(n,e,t,r){if(r<e)throw eI(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw eI(`Invalid value for '${n}'. Expected ${t} or less.`)}function X1(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Kh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Kh||(Kh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t,r,i,o,l,c,d,p,m,y,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=m,this.connectionFactory_=y,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,b)=>{this.resolve_=I,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ch(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Kh.NO_ERROR,d=o.getStatus();if(!c||Z1(d,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Kh.ABORT;r(!1,new ch(!1,null,m));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new ch(p,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());J1(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=z1();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(i.canceled){const d=this.appDelete_?MS():G1();l(d)}else{const d=$1();l(d)}};this.canceled_?t(!1,new ch(!1,null,!0)):this.backoffId_=Q1(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Y1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ch{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function tO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function nO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function iO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function sO(n,e,t,r,i,o,l=!0){const c=X1(n.urlParams),d=n.url+c,p=Object.assign({},n.headers);return rO(p,e),tO(p,t),nO(p,o),iO(p,r),new eO(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function aO(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this._service=e,t instanceof Tr?this._location=t:this._location=Tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qh(e,t)}get root(){const e=new Tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aO(this._location.path)}get storage(){return this._service}get parent(){const e=oO(this._location.path);if(e===null)return null;const t=new Tr(this._location.bucket,e);return new Qh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw H1(e)}}function nI(n,e){const t=e==null?void 0:e[B1];return t==null?null:Tr.makeFromBucketSpec(t,n)}function lO(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:yD(i,n.app.options.projectId))}class uO{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=VS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=U1,this._maxUploadRetryTime=j1,this._requests=new Set,i!=null?this._bucket=Tr.makeFromBucketSpec(i,this._host):this._bucket=nI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tr.makeFromBucketSpec(this._url,e):this._bucket=nI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qh(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new K1(MS());{const l=sO(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const rI="@firebase/storage",iI="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="storage";function cO(n=tS(),e){n=Lt(n);const r=Df(n,LS).getImmediate({identifier:e}),i=mD("storage");return i&&dO(r,...i),r}function dO(n,e,t,r={}){lO(n,e,t,r)}function hO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new uO(t,r,i,e,$o)}function fO(){No(new As(LS,hO,"PUBLIC").setMultipleInstances(!0)),xi(rI,iI,""),xi(rI,iI,"esm2017")}fO();var sI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ws,FS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function P(){}P.prototype=A.prototype,D.D=A.prototype,D.prototype=new P,D.prototype.constructor=D,D.C=function(N,F,z){for(var k=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)k[Ze-2]=arguments[Ze];return A.prototype[F].apply(N,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,A,P){P||(P=0);var N=Array(16);if(typeof A=="string")for(var F=0;16>F;++F)N[F]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(F=0;16>F;++F)N[F]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=D.g[0],P=D.g[1],F=D.g[2];var z=D.g[3],k=A+(z^P&(F^z))+N[0]+3614090360&4294967295;A=P+(k<<7&4294967295|k>>>25),k=z+(F^A&(P^F))+N[1]+3905402710&4294967295,z=A+(k<<12&4294967295|k>>>20),k=F+(P^z&(A^P))+N[2]+606105819&4294967295,F=z+(k<<17&4294967295|k>>>15),k=P+(A^F&(z^A))+N[3]+3250441966&4294967295,P=F+(k<<22&4294967295|k>>>10),k=A+(z^P&(F^z))+N[4]+4118548399&4294967295,A=P+(k<<7&4294967295|k>>>25),k=z+(F^A&(P^F))+N[5]+1200080426&4294967295,z=A+(k<<12&4294967295|k>>>20),k=F+(P^z&(A^P))+N[6]+2821735955&4294967295,F=z+(k<<17&4294967295|k>>>15),k=P+(A^F&(z^A))+N[7]+4249261313&4294967295,P=F+(k<<22&4294967295|k>>>10),k=A+(z^P&(F^z))+N[8]+1770035416&4294967295,A=P+(k<<7&4294967295|k>>>25),k=z+(F^A&(P^F))+N[9]+2336552879&4294967295,z=A+(k<<12&4294967295|k>>>20),k=F+(P^z&(A^P))+N[10]+4294925233&4294967295,F=z+(k<<17&4294967295|k>>>15),k=P+(A^F&(z^A))+N[11]+2304563134&4294967295,P=F+(k<<22&4294967295|k>>>10),k=A+(z^P&(F^z))+N[12]+1804603682&4294967295,A=P+(k<<7&4294967295|k>>>25),k=z+(F^A&(P^F))+N[13]+4254626195&4294967295,z=A+(k<<12&4294967295|k>>>20),k=F+(P^z&(A^P))+N[14]+2792965006&4294967295,F=z+(k<<17&4294967295|k>>>15),k=P+(A^F&(z^A))+N[15]+1236535329&4294967295,P=F+(k<<22&4294967295|k>>>10),k=A+(F^z&(P^F))+N[1]+4129170786&4294967295,A=P+(k<<5&4294967295|k>>>27),k=z+(P^F&(A^P))+N[6]+3225465664&4294967295,z=A+(k<<9&4294967295|k>>>23),k=F+(A^P&(z^A))+N[11]+643717713&4294967295,F=z+(k<<14&4294967295|k>>>18),k=P+(z^A&(F^z))+N[0]+3921069994&4294967295,P=F+(k<<20&4294967295|k>>>12),k=A+(F^z&(P^F))+N[5]+3593408605&4294967295,A=P+(k<<5&4294967295|k>>>27),k=z+(P^F&(A^P))+N[10]+38016083&4294967295,z=A+(k<<9&4294967295|k>>>23),k=F+(A^P&(z^A))+N[15]+3634488961&4294967295,F=z+(k<<14&4294967295|k>>>18),k=P+(z^A&(F^z))+N[4]+3889429448&4294967295,P=F+(k<<20&4294967295|k>>>12),k=A+(F^z&(P^F))+N[9]+568446438&4294967295,A=P+(k<<5&4294967295|k>>>27),k=z+(P^F&(A^P))+N[14]+3275163606&4294967295,z=A+(k<<9&4294967295|k>>>23),k=F+(A^P&(z^A))+N[3]+4107603335&4294967295,F=z+(k<<14&4294967295|k>>>18),k=P+(z^A&(F^z))+N[8]+1163531501&4294967295,P=F+(k<<20&4294967295|k>>>12),k=A+(F^z&(P^F))+N[13]+2850285829&4294967295,A=P+(k<<5&4294967295|k>>>27),k=z+(P^F&(A^P))+N[2]+4243563512&4294967295,z=A+(k<<9&4294967295|k>>>23),k=F+(A^P&(z^A))+N[7]+1735328473&4294967295,F=z+(k<<14&4294967295|k>>>18),k=P+(z^A&(F^z))+N[12]+2368359562&4294967295,P=F+(k<<20&4294967295|k>>>12),k=A+(P^F^z)+N[5]+4294588738&4294967295,A=P+(k<<4&4294967295|k>>>28),k=z+(A^P^F)+N[8]+2272392833&4294967295,z=A+(k<<11&4294967295|k>>>21),k=F+(z^A^P)+N[11]+1839030562&4294967295,F=z+(k<<16&4294967295|k>>>16),k=P+(F^z^A)+N[14]+4259657740&4294967295,P=F+(k<<23&4294967295|k>>>9),k=A+(P^F^z)+N[1]+2763975236&4294967295,A=P+(k<<4&4294967295|k>>>28),k=z+(A^P^F)+N[4]+1272893353&4294967295,z=A+(k<<11&4294967295|k>>>21),k=F+(z^A^P)+N[7]+4139469664&4294967295,F=z+(k<<16&4294967295|k>>>16),k=P+(F^z^A)+N[10]+3200236656&4294967295,P=F+(k<<23&4294967295|k>>>9),k=A+(P^F^z)+N[13]+681279174&4294967295,A=P+(k<<4&4294967295|k>>>28),k=z+(A^P^F)+N[0]+3936430074&4294967295,z=A+(k<<11&4294967295|k>>>21),k=F+(z^A^P)+N[3]+3572445317&4294967295,F=z+(k<<16&4294967295|k>>>16),k=P+(F^z^A)+N[6]+76029189&4294967295,P=F+(k<<23&4294967295|k>>>9),k=A+(P^F^z)+N[9]+3654602809&4294967295,A=P+(k<<4&4294967295|k>>>28),k=z+(A^P^F)+N[12]+3873151461&4294967295,z=A+(k<<11&4294967295|k>>>21),k=F+(z^A^P)+N[15]+530742520&4294967295,F=z+(k<<16&4294967295|k>>>16),k=P+(F^z^A)+N[2]+3299628645&4294967295,P=F+(k<<23&4294967295|k>>>9),k=A+(F^(P|~z))+N[0]+4096336452&4294967295,A=P+(k<<6&4294967295|k>>>26),k=z+(P^(A|~F))+N[7]+1126891415&4294967295,z=A+(k<<10&4294967295|k>>>22),k=F+(A^(z|~P))+N[14]+2878612391&4294967295,F=z+(k<<15&4294967295|k>>>17),k=P+(z^(F|~A))+N[5]+4237533241&4294967295,P=F+(k<<21&4294967295|k>>>11),k=A+(F^(P|~z))+N[12]+1700485571&4294967295,A=P+(k<<6&4294967295|k>>>26),k=z+(P^(A|~F))+N[3]+2399980690&4294967295,z=A+(k<<10&4294967295|k>>>22),k=F+(A^(z|~P))+N[10]+4293915773&4294967295,F=z+(k<<15&4294967295|k>>>17),k=P+(z^(F|~A))+N[1]+2240044497&4294967295,P=F+(k<<21&4294967295|k>>>11),k=A+(F^(P|~z))+N[8]+1873313359&4294967295,A=P+(k<<6&4294967295|k>>>26),k=z+(P^(A|~F))+N[15]+4264355552&4294967295,z=A+(k<<10&4294967295|k>>>22),k=F+(A^(z|~P))+N[6]+2734768916&4294967295,F=z+(k<<15&4294967295|k>>>17),k=P+(z^(F|~A))+N[13]+1309151649&4294967295,P=F+(k<<21&4294967295|k>>>11),k=A+(F^(P|~z))+N[4]+4149444226&4294967295,A=P+(k<<6&4294967295|k>>>26),k=z+(P^(A|~F))+N[11]+3174756917&4294967295,z=A+(k<<10&4294967295|k>>>22),k=F+(A^(z|~P))+N[2]+718787259&4294967295,F=z+(k<<15&4294967295|k>>>17),k=P+(z^(F|~A))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(F+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+F&4294967295,D.g[3]=D.g[3]+z&4294967295}r.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var P=A-this.blockSize,N=this.B,F=this.h,z=0;z<A;){if(F==0)for(;z<=P;)i(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<A;)if(N[F++]=D.charCodeAt(z++),F==this.blockSize){i(this,N),F=0;break}}else for(;z<A;)if(N[F++]=D[z++],F==this.blockSize){i(this,N),F=0;break}}this.h=F,this.o+=A},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var P=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=P&255,P/=256;for(this.u(D),D=Array(16),A=P=0;4>A;++A)for(var N=0;32>N;N+=8)D[P++]=this.g[A]>>>N&255;return D};function o(D,A){var P=c;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=A(D)}function l(D,A){this.h=A;for(var P=[],N=!0,F=D.length-1;0<=F;F--){var z=D[F]|0;N&&z==A||(P[F]=z,N=!1)}this.g=P}var c={};function d(D){return-128<=D&&128>D?o(D,function(A){return new l([A|0],0>A?-1:0)}):new l([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return S(p(-D));for(var A=[],P=1,N=0;D>=P;N++)A[N]=D/P|0,P*=4294967296;return new l(A,0)}function m(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return S(m(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=p(Math.pow(A,8)),N=y,F=0;F<D.length;F+=8){var z=Math.min(8,D.length-F),k=parseInt(D.substring(F,F+z),A);8>z?(z=p(Math.pow(A,z)),N=N.j(z).add(p(k))):(N=N.j(P),N=N.add(p(k)))}return N}var y=d(0),_=d(1),I=d(16777216);n=l.prototype,n.m=function(){if(R(this))return-S(this).m();for(var D=0,A=1,P=0;P<this.g.length;P++){var N=this.i(P);D+=(0<=N?N:4294967296+N)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(b(this))return"0";if(R(this))return"-"+S(this).toString(D);for(var A=p(Math.pow(D,6)),P=this,N="";;){var F=H(P,A).g;P=M(P,F.j(A));var z=((0<P.g.length?P.g[0]:P.h)>>>0).toString(D);if(P=F,b(P))return z+N;for(;6>z.length;)z="0"+z;N=z+N}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function b(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function R(D){return D.h==-1}n.l=function(D){return D=M(this,D),R(D)?-1:b(D)?0:1};function S(D){for(var A=D.g.length,P=[],N=0;N<A;N++)P[N]=~D.g[N];return new l(P,~D.h).add(_)}n.abs=function(){return R(this)?S(this):this},n.add=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],N=0,F=0;F<=A;F++){var z=N+(this.i(F)&65535)+(D.i(F)&65535),k=(z>>>16)+(this.i(F)>>>16)+(D.i(F)>>>16);N=k>>>16,z&=65535,k&=65535,P[F]=k<<16|z}return new l(P,P[P.length-1]&-2147483648?-1:0)};function M(D,A){return D.add(S(A))}n.j=function(D){if(b(this)||b(D))return y;if(R(this))return R(D)?S(this).j(S(D)):S(S(this).j(D));if(R(D))return S(this.j(S(D)));if(0>this.l(I)&&0>D.l(I))return p(this.m()*D.m());for(var A=this.g.length+D.g.length,P=[],N=0;N<2*A;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(var F=0;F<D.g.length;F++){var z=this.i(N)>>>16,k=this.i(N)&65535,Ze=D.i(F)>>>16,He=D.i(F)&65535;P[2*N+2*F]+=k*He,V(P,2*N+2*F),P[2*N+2*F+1]+=z*He,V(P,2*N+2*F+1),P[2*N+2*F+1]+=k*Ze,V(P,2*N+2*F+1),P[2*N+2*F+2]+=z*Ze,V(P,2*N+2*F+2)}for(N=0;N<A;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=A;N<2*A;N++)P[N]=0;return new l(P,0)};function V(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function $(D,A){this.g=D,this.h=A}function H(D,A){if(b(A))throw Error("division by zero");if(b(D))return new $(y,y);if(R(D))return A=H(S(D),A),new $(S(A.g),S(A.h));if(R(A))return A=H(D,S(A)),new $(S(A.g),A.h);if(30<D.g.length){if(R(D)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var P=_,N=A;0>=N.l(D);)P=X(P),N=X(N);var F=J(P,1),z=J(N,1);for(N=J(N,2),P=J(P,2);!b(N);){var k=z.add(N);0>=k.l(D)&&(F=F.add(P),z=k),N=J(N,1),P=J(P,1)}return A=M(D,F.j(A)),new $(F,A)}for(F=y;0<=D.l(A);){for(P=Math.max(1,Math.floor(D.m()/A.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),z=p(P),k=z.j(A);R(k)||0<k.l(D);)P-=N,z=p(P),k=z.j(A);b(z)&&(z=_),F=F.add(z),D=M(D,k)}return new $(F,D)}n.A=function(D){return H(this,D).h},n.and=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],N=0;N<A;N++)P[N]=this.i(N)&D.i(N);return new l(P,this.h&D.h)},n.or=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],N=0;N<A;N++)P[N]=this.i(N)|D.i(N);return new l(P,this.h|D.h)},n.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],N=0;N<A;N++)P[N]=this.i(N)^D.i(N);return new l(P,this.h^D.h)};function X(D){for(var A=D.g.length+1,P=[],N=0;N<A;N++)P[N]=D.i(N)<<1|D.i(N-1)>>>31;return new l(P,D.h)}function J(D,A){var P=A>>5;A%=32;for(var N=D.g.length-P,F=[],z=0;z<N;z++)F[z]=0<A?D.i(z+P)>>>A|D.i(z+P+1)<<32-A:D.i(z+P);return new l(F,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=m,ws=l}).apply(typeof sI<"u"?sI:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BS,ju,US,Ah,Vg,jS,zS,$S;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(h,v){if(v)e:{var E=r;h=h.split(".");for(var x=0;x<h.length-1;x++){var q=h[x];if(!(q in E))break e;E=E[q]}h=h[h.length-1],x=E[h],v=v(x),v!=x&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var E=0,x=!1,q={next:function(){if(!x&&E<h.length){var Y=E++;return{value:v(Y,h[Y]),done:!1}}return x=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(h){return h||function(){return o(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function m(h,v,E){return h.call.apply(h.bind,arguments)}function y(h,v,E){if(!h)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,x),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function _(h,v,E){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,_.apply(null,arguments)}function I(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var x=E.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function b(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(x,q,Y){for(var ce=Array(arguments.length-2),et=2;et<arguments.length;et++)ce[et-2]=arguments[et];return v.prototype[q].apply(x,ce)}}function R(h){const v=h.length;if(0<v){const E=Array(v);for(let x=0;x<v;x++)E[x]=h[x];return E}return[]}function S(h,v){for(let E=1;E<arguments.length;E++){const x=arguments[E];if(d(x)){const q=h.length||0,Y=x.length||0;h.length=q+Y;for(let ce=0;ce<Y;ce++)h[q+ce]=x[ce]}else h.push(x)}}class M{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(h){return/^[\s\xa0]*$/.test(h)}function $(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function H(h){return H[" "](h),h}H[" "]=function(){};var X=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function J(h,v,E){for(const x in h)v.call(E,h[x],x,h)}function D(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function A(h){const v={};for(const E in h)v[E]=h[E];return v}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,v){let E,x;for(let q=1;q<arguments.length;q++){x=arguments[q];for(E in x)h[E]=x[E];for(let Y=0;Y<P.length;Y++)E=P[Y],Object.prototype.hasOwnProperty.call(x,E)&&(h[E]=x[E])}}function F(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function z(h){c.setTimeout(()=>{throw h},0)}function k(){var h=Ie;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ze{constructor(){this.h=this.g=null}add(v,E){const x=He.get();x.set(v,E),this.h?this.h.next=x:this.g=x,this.h=x}}var He=new M(()=>new It,h=>h.reset());class It{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,le=!1,Ie=new Ze,Z=()=>{const h=c.Promise.resolve(void 0);Be=()=>{h.then(U)}};var U=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(E){z(E)}var v=He;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}le=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,v),c.removeEventListener("test",E,v)}catch{}return h}();function De(h,v){if(fe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(X){e:{try{H(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Oe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&De.aa.h.call(this)}}b(De,fe);var Oe={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ke(h,v,E,x,q){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!x,this.ha=q,this.key=++$e,this.da=this.fa=!1}function _t(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Cr(h){this.src=h,this.g={},this.h=0}Cr.prototype.add=function(h,v,E,x,q){var Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);var ce=wn(h,v,x,q);return-1<ce?(v=h[ce],E||(v.fa=!1)):(v=new Ke(v,this.src,Y,!!x,q),v.fa=E,h.push(v)),v};function Ct(h,v){var E=v.type;if(E in h.g){var x=h.g[E],q=Array.prototype.indexOf.call(x,v,void 0),Y;(Y=0<=q)&&Array.prototype.splice.call(x,q,1),Y&&(_t(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function wn(h,v,E,x){for(var q=0;q<h.length;++q){var Y=h[q];if(!Y.da&&Y.listener==v&&Y.capture==!!E&&Y.ha==x)return q}return-1}var Us="closure_lm_"+(1e6*Math.random()|0),qo={};function Ol(h,v,E,x,q){if(Array.isArray(v)){for(var Y=0;Y<v.length;Y++)Ol(h,v[Y],E,x,q);return null}return E=Ll(E),h&&h[Ue]?h.K(v,E,p(x)?!!x.capture:!1,q):Vl(h,v,E,!1,x,q)}function Vl(h,v,E,x,q,Y){if(!v)throw Error("Invalid event type");var ce=p(q)?!!q.capture:!!q,et=Ho(h);if(et||(h[Us]=et=new Cr(h)),E=et.add(v,E,x,ce,Y),E.proxy)return E;if(x=Gc(),E.proxy=x,x.src=h,x.listener=E,h.addEventListener)Ce||(q=ce),q===void 0&&(q=!1),h.addEventListener(v.toString(),x,q);else if(h.attachEvent)h.attachEvent(ti(v.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Gc(){function h(E){return v.call(h.src,h.listener,E)}const v=Ml;return h}function Wo(h,v,E,x,q){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)Wo(h,v[Y],E,x,q);else x=p(x)?!!x.capture:!!x,E=Ll(E),h&&h[Ue]?(h=h.i,v=String(v).toString(),v in h.g&&(Y=h.g[v],E=wn(Y,E,x,q),-1<E&&(_t(Y[E]),Array.prototype.splice.call(Y,E,1),Y.length==0&&(delete h.g[v],h.h--)))):h&&(h=Ho(h))&&(v=h.g[v.toString()],h=-1,v&&(h=wn(v,E,x,q)),(E=-1<h?v[h]:null)&&ei(E))}function ei(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ue])Ct(v.i,h);else{var E=h.type,x=h.proxy;v.removeEventListener?v.removeEventListener(E,x,h.capture):v.detachEvent?v.detachEvent(ti(E),x):v.addListener&&v.removeListener&&v.removeListener(x),(E=Ho(v))?(Ct(E,h),E.h==0&&(E.src=null,v[Us]=null)):_t(h)}}}function ti(h){return h in qo?qo[h]:qo[h]="on"+h}function Ml(h,v){if(h.da)h=!0;else{v=new De(v,this);var E=h.listener,x=h.ha||h.src;h.fa&&ei(h),h=E.call(x,v)}return h}function Ho(h){return h=h[Us],h instanceof Cr?h:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ll(h){return typeof h=="function"?h:(h[Ko]||(h[Ko]=function(v){return h.handleEvent(v)}),h[Ko])}function Dt(){ee.call(this),this.i=new Cr(this),this.M=this,this.F=null}b(Dt,ee),Dt.prototype[Ue]=!0,Dt.prototype.removeEventListener=function(h,v,E,x){Wo(this,h,v,E,x)};function kt(h,v){var E,x=h.F;if(x)for(E=[];x;x=x.F)E.push(x);if(h=h.M,x=v.type||v,typeof v=="string")v=new fe(v,h);else if(v instanceof fe)v.target=v.target||h;else{var q=v;v=new fe(x,h),N(v,q)}if(q=!0,E)for(var Y=E.length-1;0<=Y;Y--){var ce=v.g=E[Y];q=ni(ce,x,!0,v)&&q}if(ce=v.g=h,q=ni(ce,x,!0,v)&&q,q=ni(ce,x,!1,v)&&q,E)for(Y=0;Y<E.length;Y++)ce=v.g=E[Y],q=ni(ce,x,!1,v)&&q}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],x=0;x<E.length;x++)_t(E[x]);delete h.g[v],h.h--}}this.F=null},Dt.prototype.K=function(h,v,E,x){return this.i.add(String(h),v,!1,E,x)},Dt.prototype.L=function(h,v,E,x){return this.i.add(String(h),v,!0,E,x)};function ni(h,v,E,x){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,Y=0;Y<v.length;++Y){var ce=v[Y];if(ce&&!ce.da&&ce.capture==E){var et=ce.listener,Nt=ce.ha||ce.src;ce.fa&&Ct(h.i,ce),q=et.call(Nt,x)!==!1&&q}}return q&&!x.defaultPrevented}function Fl(h,v,E){if(typeof h=="function")E&&(h=_(h,E));else if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(h,v||0)}function Ni(h){h.g=Fl(()=>{h.g=null,h.i&&(h.i=!1,Ni(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class js extends ee{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ni(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(h){ee.call(this),this.h=h,this.g={}}b(zs,ee);var Bl=[];function Ul(h){J(h.g,function(v,E){this.g.hasOwnProperty(E)&&ei(v)},h),h.g={}}zs.prototype.N=function(){zs.aa.N.call(this),Ul(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jl=c.JSON.stringify,zl=c.JSON.parse,$l=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function $s(){}$s.prototype.h=null;function Qo(h){return h.h||(h.h=h.i())}function Yo(){}var qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dr(){fe.call(this,"d")}b(Dr,fe);function Jo(){fe.call(this,"c")}b(Jo,fe);var kr={},Gl=null;function Gs(){return Gl=Gl||new Dt}kr.La="serverreachability";function ql(h){fe.call(this,kr.La,h)}b(ql,fe);function ri(h){const v=Gs();kt(v,new ql(v))}kr.STAT_EVENT="statevent";function Wl(h,v){fe.call(this,kr.STAT_EVENT,h),this.stat=v}b(Wl,fe);function Tt(h){const v=Gs();kt(v,new Wl(v,h))}kr.Ma="timingevent";function Xo(h,v){fe.call(this,kr.Ma,h),this.size=v}b(Xo,fe);function sr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function qs(){this.g=!0}qs.prototype.xa=function(){this.g=!1};function Ws(h,v,E,x,q,Y){h.info(function(){if(h.g)if(Y)for(var ce="",et=Y.split("&"),Nt=0;Nt<et.length;Nt++){var je=et[Nt].split("=");if(1<je.length){var Bt=je[0];je=je[1];var Rt=Bt.split("_");ce=2<=Rt.length&&Rt[1]=="type"?ce+(Bt+"="+je+"&"):ce+(Bt+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+x+") [attempt "+q+"]: "+v+`
`+E+`
`+ce})}function Zo(h,v,E,x,q,Y,ce){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+q+"]: "+v+`
`+E+`
`+Y+" "+ce})}function or(h,v,E,x){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+cp(h,E)+(x?" "+x:"")})}function Hl(h,v){h.info(function(){return"TIMEOUT: "+v})}qs.prototype.info=function(){};function cp(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var x=E[h];if(!(2>x.length)){var q=x[1];if(Array.isArray(q)&&!(1>q.length)){var Y=q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return jl(E)}catch{return v}}var ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ar;function Hs(){}b(Hs,$s),Hs.prototype.g=function(){return new XMLHttpRequest},Hs.prototype.i=function(){return{}},ar=new Hs;function lr(h,v,E,x){this.j=h,this.i=v,this.l=E,this.R=x||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wc}function Wc(){this.i=null,this.g="",this.h=!1}var Kl={},ta={};function na(h,v,E){h.L=1,h.v=Fi(Nn(v)),h.m=E,h.P=!0,Ql(h,null)}function Ql(h,v){h.F=Date.now(),st(h),h.A=Nn(h.v);var E=h.A,x=h.R;Array.isArray(x)||(x=[String(x)]),Ui(E.i,"t",x),h.C=0,E=h.j.J,h.h=new Wc,h.g=cd(h.j,E?v:null,!h.m),0<h.O&&(h.M=new js(_(h.Y,h,h.g),h.O)),v=h.U,E=h.g,x=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Bl[0]=q.toString()),q=Bl);for(var Y=0;Y<q.length;Y++){var ce=Ol(E,q[Y],x||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),ri(),Ws(h.i,h.u,h.A,h.l,h.R,h.m)}lr.prototype.ca=function(h){h=h.target;const v=this.M;v&&In(h)==3?v.j():this.Y(h)},lr.prototype.Y=function(h){try{if(h==this.g)e:{const Rt=In(this.g);var v=this.g.Ba();const Kn=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||Rt!=4||v==7||(v==8||0>=Kn?ri(3):ri(2)),Ks(this);var E=this.g.Z();this.X=E;t:if(Hc(this)){var x=tu(this.g);h="";var q=x.length,Y=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),Oi(this);var ce="";break t}this.h.i=new c.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(x[v],{stream:!(Y&&v==q-1)});x.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=E==200,Zo(this.i,this.u,this.A,this.l,this.R,Rt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Nt=this.g;if((et=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(et)){var je=et;break t}}je=null}if(E=je)or(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yl(this,E);else{this.o=!1,this.s=3,Tt(12),Wn(this),Oi(this);break e}}if(this.P){E=!0;let Vn;for(;!this.J&&this.C<ce.length;)if(Vn=dp(this,ce),Vn==ta){Rt==4&&(this.s=4,Tt(14),E=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Kl){this.s=4,Tt(15),or(this.i,this.l,ce,"[Invalid Chunk]"),E=!1;break}else or(this.i,this.l,Vn,null),Yl(this,Vn);if(Hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||ce.length!=0||this.h.h||(this.s=1,Tt(16),E=!1),this.o=this.o&&E,!E)or(this.i,this.l,ce,"[Invalid Chunked Response]"),Wn(this),Oi(this);else if(0<ce.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),ru(Bt),Bt.M=!0,Tt(11))}}else or(this.i,this.l,ce,null),Yl(this,ce);Rt==4&&Wn(this),this.o&&!this.J&&(Rt==4?fa(this.j,this):(this.o=!1,st(this)))}else la(this.g),E==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Wn(this),Oi(this)}}}catch{}finally{}};function Hc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function dp(h,v){var E=h.C,x=v.indexOf(`
`,E);return x==-1?ta:(E=Number(v.substring(E,x)),isNaN(E)?Kl:(x+=1,x+E>v.length?ta:(v=v.slice(x,x+E),h.C=x+E,v)))}lr.prototype.cancel=function(){this.J=!0,Wn(this)};function st(h){h.S=Date.now()+h.I,Kc(h,h.I)}function Kc(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=sr(_(h.ba,h),v)}function Ks(h){h.B&&(c.clearTimeout(h.B),h.B=null)}lr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Hl(this.i,this.A),this.L!=2&&(ri(),Tt(17)),Wn(this),this.s=2,Oi(this)):Kc(this,this.S-h)};function Oi(h){h.j.G==0||h.J||fa(h.j,h)}function Wn(h){Ks(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Ul(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Yl(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||cn(E.h,h))){if(!h.K&&cn(E.h,h)&&E.G==3){try{var x=E.Da.g.parse(v)}catch{x=null}if(Array.isArray(x)&&x.length==3){var q=x;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)ha(E),fr(E);else break e;da(E),Tt(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=sr(_(E.Za,E),6e3));if(1>=Yc(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else li(E,11)}else if((h.K||E.g==h)&&ha(E),!V(v))for(q=E.Da.g.parse(v),v=0;v<q.length;v++){let je=q[v];if(E.T=je[0],je=je[1],E.G==2)if(je[0]=="c"){E.K=je[1],E.ia=je[2];const Bt=je[3];Bt!=null&&(E.la=Bt,E.j.info("VER="+E.la));const Rt=je[4];Rt!=null&&(E.Aa=Rt,E.j.info("SVER="+E.Aa));const Kn=je[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(x=1.5*Kn,E.L=x,E.j.info("backChannelRequestTimeoutMs_="+x)),x=E;const Vn=h.g;if(Vn){const to=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var Y=x.h;Y.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Jl(Y,Y.h),Y.h=null))}if(x.D){const ma=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;ma&&(x.ya=ma,it(x.I,x.D,ma))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),x=E;var ce=h;if(x.qa=ud(x,x.J?x.ia:null,x.W),ce.K){Jc(x.h,ce);var et=ce,Nt=x.L;Nt&&(et.I=Nt),et.B&&(Ks(et),st(et)),x.g=ce}else eo(x);0<E.i.length&&Mr(E)}else je[0]!="stop"&&je[0]!="close"||li(E,7);else E.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?li(E,7):Ht(E):je[0]!="noop"&&E.l&&E.l.ta(je),E.v=0)}}ri(4)}catch{}}var Qc=class{constructor(h,v){this.g=h,this.map=v}};function Qs(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Yc(h){return h.h?1:h.g?h.g.size:0}function cn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Jl(h,v){h.g?h.g.add(v):h.h=v}function Jc(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Qs.prototype.cancel=function(){if(this.i=Xc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Xc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return R(h.i)}function ra(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],E=h.length,x=0;x<E;x++)v.push(h[x]);return v}v=[],E=0;for(x in h)v[E++]=h[x];return v}function ia(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const x in h)v[E++]=x;return v}}}function Vi(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=ia(h),x=ra(h),q=x.length,Y=0;Y<q;Y++)v.call(void 0,x[Y],E&&E[Y],h)}var Ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hp(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var x=h[E].indexOf("="),q=null;if(0<=x){var Y=h[E].substring(0,x);q=h[E].substring(x+1)}else Y=h[E];v(Y,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function ii(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ii){this.h=h.h,Js(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.s),this.l=h.l;var v=h.i,E=new Nr;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Li(this,E),this.m=h.m}else h&&(v=String(h).match(Ys))?(this.h=!1,Js(this,v[1]||"",!0),this.o=Fe(v[2]||""),this.g=Fe(v[3]||"",!0),Mi(this,v[4]),this.l=Fe(v[5]||"",!0),Li(this,v[6]||"",!0),this.m=Fe(v[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}ii.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Bi(v,sa,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Bi(v,sa,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Bi(E,E.charAt(0)=="/"?td:ed,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Bi(E,Xl)),h.join("")};function Nn(h){return new ii(h)}function Js(h,v,E){h.j=E?Fe(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Li(h,v,E){v instanceof Nr?(h.i=v,Or(h.i,h.h)):(E||(v=Bi(v,nd)),h.i=new Nr(v,h.h))}function it(h,v,E){h.i.set(v,E)}function Fi(h){return it(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Fe(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bi(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Zc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var sa=/[#\/\?@]/g,ed=/[#\?:]/g,td=/[#\?]/g,nd=/[#\?@]/g,Xl=/#/g;function Nr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Wt(h){h.g||(h.g=new Map,h.h=0,h.i&&hp(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=Nr.prototype,n.add=function(h,v){Wt(this),this.i=null,h=Hn(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function ur(h,v){Wt(h),v=Hn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function cr(h,v){return Wt(h),v=Hn(h,v),h.g.has(v)}n.forEach=function(h,v){Wt(this),this.g.forEach(function(E,x){E.forEach(function(q){h.call(v,q,x,this)},this)},this)},n.na=function(){Wt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let x=0;x<v.length;x++){const q=h[x];for(let Y=0;Y<q.length;Y++)E.push(v[x])}return E},n.V=function(h){Wt(this);let v=[];if(typeof h=="string")cr(this,h)&&(v=v.concat(this.g.get(Hn(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},n.set=function(h,v){return Wt(this),this.i=null,h=Hn(this,h),cr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Ui(h,v,E){ur(h,v),0<E.length&&(h.i=null,h.g.set(Hn(h,v),R(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var x=v[E];const Y=encodeURIComponent(String(x)),ce=this.V(x);for(x=0;x<ce.length;x++){var q=Y;ce[x]!==""&&(q+="="+encodeURIComponent(String(ce[x]))),h.push(q)}}return this.i=h.join("&")};function Hn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Or(h,v){v&&!h.j&&(Wt(h),h.i=null,h.g.forEach(function(E,x){var q=x.toLowerCase();x!=q&&(ur(this,x),Ui(this,q,E))},h)),h.j=v}function fp(h,v){const E=new qs;if(c.Image){const x=new Image;x.onload=I(En,E,"TestLoadImage: loaded",!0,v,x),x.onerror=I(En,E,"TestLoadImage: error",!1,v,x),x.onabort=I(En,E,"TestLoadImage: abort",!1,v,x),x.ontimeout=I(En,E,"TestLoadImage: timeout",!1,v,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else v(!1)}function rd(h,v){const E=new qs,x=new AbortController,q=setTimeout(()=>{x.abort(),En(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:x.signal}).then(Y=>{clearTimeout(q),Y.ok?En(E,"TestPingServer: ok",!0,v):En(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),En(E,"TestPingServer: error",!1,v)})}function En(h,v,E,x,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),x(E)}catch{}}function pp(){this.g=new $l}function id(h,v,E){const x=E||"";try{Vi(h,function(q,Y){let ce=q;p(q)&&(ce=jl(q)),v.push(x+Y+"="+encodeURIComponent(ce))})}catch(q){throw v.push(x+"type="+encodeURIComponent("_badmap")),q}}function si(h){this.l=h.Ub||null,this.j=h.eb||!1}b(si,$s),si.prototype.g=function(){return new Xs(this.l,this.j)},si.prototype.i=function(h){return function(){return h}}({});function Xs(h,v){Dt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Xs,Dt),n=Xs.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,hr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,hr(this)),this.g&&(this.readyState=3,hr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sd(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function sd(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?dr(this):hr(this),this.readyState==3&&sd(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,dr(this))},n.Qa=function(h){this.g&&(this.response=h,dr(this))},n.ga=function(){this.g&&dr(this)};function dr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,hr(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function hr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function oi(h){let v="";return J(h,function(E,x){v+=x,v+=":",v+=E,v+=`\r
`}),v}function ji(h,v,E){e:{for(x in E){var x=!1;break e}x=!0}x||(E=oi(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):it(h,v,E))}function ct(h){Dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ct,Dt);var mp=/^https?$/i,Zl=["POST","PUT"];n=ct.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,E,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ar.g(),this.v=this.o?Qo(this.o):Qo(ar),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Y){Zs(this,Y);return}if(h=E||"",E=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var q in x)E.set(q,x[q]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const Y of x.keys())E.set(Y,x.get(Y));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Zl,v,void 0))||x||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of E)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aa(this),this.u=!0,this.g.send(h),this.u=!1}catch(Y){Zs(this,Y)}};function Zs(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,oa(h),On(h)}function oa(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,kt(this,"complete"),kt(this,"abort"),On(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),On(this,!0)),ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eu(this):this.bb())},n.bb=function(){eu(this)};function eu(h){if(h.h&&typeof l<"u"&&(!h.v[1]||In(h)!=4||h.Z()!=2)){if(h.u&&In(h)==4)Fl(h.Ea,0,h);else if(kt(h,"readystatechange"),In(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var x;if(x=ce===0){var q=String(h.D).match(Ys)[1]||null;!q&&c.self&&c.self.location&&(q=c.self.location.protocol.slice(0,-1)),x=!mp.test(q?q.toLowerCase():"")}E=x}if(E)kt(h,"complete"),kt(h,"success");else{h.m=6;try{var Y=2<In(h)?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.Z()+"]",oa(h)}}finally{On(h)}}}}function On(h,v){if(h.g){aa(h);const E=h.g,x=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||kt(h,"ready");try{E.onreadystatechange=x}catch{}}}function aa(h){h.I&&(c.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function In(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),zl(v)}};function tu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function la(h){const v={};h=(h.g&&2<=In(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(V(h[x]))continue;var E=F(h[x]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=v[q]||[];v[q]=Y,Y.push(E)}D(v,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function nu(h){this.Aa=0,this.i=[],this.j=new qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,h),this.cb=Vr("retryDelaySeedMs",1e4,h),this.Wa=Vr("forwardChannelMaxRetries",2,h),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Qs(h&&h.concurrentRequestLimit),this.Da=new pp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nu.prototype,n.la=8,n.G=1,n.connect=function(h,v,E,x){Tt(0),this.W=h,this.H=v||{},E&&x!==void 0&&(this.H.OSID=E,this.H.OAID=x),this.F=this.X,this.I=ud(this,null,this.W),Mr(this)};function Ht(h){if(ua(h),h.G==3){var v=h.U++,E=Nn(h.I);if(it(E,"SID",h.K),it(E,"RID",v),it(E,"TYPE","terminate"),ai(h,E),v=new lr(h,h.j,v),v.L=2,v.v=Fi(Nn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=v.v,E=!0),E||(v.g=cd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),st(v)}ld(h)}function fr(h){h.g&&(ru(h),h.g.cancel(),h.g=null)}function ua(h){fr(h),h.u&&(c.clearTimeout(h.u),h.u=null),ha(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function Mr(h){if(!kn(h.h)&&!h.s){h.s=!0;var v=h.Ga;Be||Z(),le||(Be(),le=!0),Ie.add(v,h),h.B=0}}function gp(h,v){return Yc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=sr(_(h.Ga,h,v),ad(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new lr(this,this.j,h);let Y=this.o;if(this.S&&(Y?(Y=A(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(q.H=Y,Y=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var x=this.i[E];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(v+=x,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=zi(this,q,v),E=Nn(this.I),it(E,"RID",h),it(E,"CVER",22),this.D&&it(E,"X-HTTP-Session-Id",this.D),ai(this,E),Y&&(this.O?v="headers="+encodeURIComponent(String(oi(Y)))+"&"+v:this.m&&ji(E,this.m,Y)),Jl(this.h,q),this.Ua&&it(E,"TYPE","init"),this.P?(it(E,"$req",v),it(E,"SID","null"),q.T=!0,na(q,E,null)):na(q,E,v),this.G=2}}else this.G==3&&(h?ca(this,h):this.i.length==0||kn(this.h)||ca(this))};function ca(h,v){var E;v?E=v.l:E=h.U++;const x=Nn(h.I);it(x,"SID",h.K),it(x,"RID",E),it(x,"AID",h.T),ai(h,x),h.m&&h.o&&ji(x,h.m,h.o),E=new lr(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=zi(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Jl(h.h,E),na(E,x,v)}function ai(h,v){h.H&&J(h.H,function(E,x){it(v,x,E)}),h.l&&Vi({},function(E,x){it(v,x,E)})}function zi(h,v,E){E=Math.min(h.i.length,E);var x=h.l?_(h.l.Na,h.l,h):null;e:{var q=h.i;let Y=-1;for(;;){const ce=["count="+E];Y==-1?0<E?(Y=q[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let et=!0;for(let Nt=0;Nt<E;Nt++){let je=q[Nt].g;const Bt=q[Nt].map;if(je-=Y,0>je)Y=Math.max(0,q[Nt].g-100),et=!1;else try{id(Bt,ce,"req"+je+"_")}catch{x&&x(Bt)}}if(et){x=ce.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,x}function eo(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;Be||Z(),le||(Be(),le=!0),Ie.add(v,h),h.v=0}}function da(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=sr(_(h.Fa,h),ad(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,od(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=sr(_(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),fr(this),od(this))};function ru(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function od(h){h.g=new lr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Nn(h.qa);it(v,"RID","rpc"),it(v,"SID",h.K),it(v,"AID",h.T),it(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&it(v,"TO",h.ja),it(v,"TYPE","xmlhttp"),ai(h,v),h.m&&h.o&&ji(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Fi(Nn(v)),E.m=null,E.P=!0,Ql(E,h)}n.Za=function(){this.C!=null&&(this.C=null,fr(this),da(this),Tt(19))};function ha(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function fa(h,v){var E=null;if(h.g==v){ha(h),ru(h),h.g=null;var x=2}else if(cn(h.h,v))E=v.D,Jc(h.h,v),x=1;else return;if(h.G!=0){if(v.o)if(x==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;x=Gs(),kt(x,new Xo(x,E)),Mr(h)}else eo(h);else if(q=v.s,q==3||q==0&&0<v.X||!(x==1&&gp(h,v)||x==2&&da(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),q){case 1:li(h,5);break;case 4:li(h,10);break;case 3:li(h,6);break;default:li(h,2)}}}function ad(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function li(h,v){if(h.j.info("Error code "+v),v==2){var E=_(h.fb,h),x=h.Xa;const q=!x;x=new ii(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Js(x,"https"),Fi(x),q?fp(x.toString(),E):rd(x.toString(),E)}else Tt(2);h.G=0,h.l&&h.l.sa(v),ld(h),ua(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function ld(h){if(h.G=0,h.ka=[],h.l){const v=Xc(h.h);(v.length!=0||h.i.length!=0)&&(S(h.ka,v),S(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function ud(h,v,E){var x=E instanceof ii?Nn(E):new ii(E);if(x.g!="")v&&(x.g=v+"."+x.g),Mi(x,x.s);else{var q=c.location;x=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var Y=new ii(null);x&&Js(Y,x),v&&(Y.g=v),q&&Mi(Y,q),E&&(Y.l=E),x=Y}return E=h.D,v=h.ya,E&&v&&it(x,E,v),it(x,"VER",h.la),ai(h,x),x}function cd(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new ct(new si({eb:E})):new ct(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}n=iu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pa(){}pa.prototype.g=function(h,v){return new dn(h,v)};function dn(h,v){Dt.call(this),this.g=new nu(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!V(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Lr(this)}b(dn,Dt),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Ht(this.g)},dn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=jl(h),h=E);v.i.push(new Qc(v.Ya++,h)),v.G==3&&Mr(v)},dn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,dn.aa.N.call(this)};function dd(h){Dr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(dd,Dr);function hd(){Jo.call(this),this.status=1}b(hd,Jo);function Lr(h){this.g=h}b(Lr,iu),Lr.prototype.ua=function(){kt(this.g,"a")},Lr.prototype.ta=function(h){kt(this.g,new dd(h))},Lr.prototype.sa=function(h){kt(this.g,new hd)},Lr.prototype.ra=function(){kt(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,$S=function(){return new pa},zS=function(){return Gs()},jS=kr,Vg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,Ah=ea,qc.COMPLETE="complete",US=qc,Yo.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,ju=Yo,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,BS=ct}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const oI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Ty("@firebase/firestore");function ja(){return Vo.logLevel}function ie(n,...e){if(Vo.logLevel<=Me.DEBUG){const t=e.map(My);Vo.debug(`Firestore (${xl}): ${n}`,...t)}}function St(n,...e){if(Vo.logLevel<=Me.ERROR){const t=e.map(My);Vo.error(`Firestore (${xl}): ${n}`,...t)}}function ol(n,...e){if(Vo.logLevel<=Me.WARN){const t=e.map(My);Vo.warn(`Firestore (${xl}): ${n}`,...t)}}function My(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n="Unexpected state"){const e=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: `+n;throw St(e),new Error(e)}function Ee(n,e){n||ye()}function ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class gO{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Es,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Es)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new pO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new on(e)}}class yO{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class _O{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new yO(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ee(this.o===void 0);const r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new vO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=EO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Pe(n,e){return n<e?-1:n>e?1:0}function al(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new yt(0,0))}static max(){return new be(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=zr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=zr.isNumericId(e),i=zr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?zr.extractNumericId(e).compare(zr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}}class Je extends zr{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const IO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends zr{construct(e,t,r){return new gt(e,t,r)}static isValidIdentifier(e){return IO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new de(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new de(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new de(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(t)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Je.fromString(e))}static fromName(e){return new he(Je.fromString(e).popFirst(5))}static empty(){return new he(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Mg(n){return n.fields.find(e=>e.kind===2)}function _o(n){return n.fields.filter(e=>e.kind!==2)}Yh.UNKNOWN_ID=-1;class Ph{constructor(e,t){this.fieldPath=e,this.kind=t}}class lc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lc(0,Gn.min())}}function WS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=be.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new Gn(i,he.empty(),e)}function HS(n){return new Gn(n.readTime,n.key,-1)}class Gn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gn(be.min(),he.empty(),-1)}static max(){return new Gn(be.max(),he.empty(),-1)}}function Ly(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==KS)throw n;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},d=>r(d))}),l=!0,o===i&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(i=>i?G.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new G((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next(m=>{l[p]=m,++c,c===o&&r(l)},m=>i(m))}})}static doWhile(e,t){return new G((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{static open(e,t,r,i){try{return new Vf(t,e.transaction(i,r))}catch(o){throw new Ku(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Es,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ku(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Fy(r.target.error);this.V.reject(new Ku(e,i))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bO(t)}}class Is{static delete(e){return ie("SimpleDb","Removing database:",e),Eo(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!Jb())return!1;if(Is.S())return!0;const e=Mt(),t=Is.D(e),r=0<t&&t<10,i=YS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.F=r,Is.D(Mt())===12.2&&St("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(ie("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{r(new Ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new de(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new de(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new Ku(e,l))},i.onupgradeneeded=o=>{ie("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.F.O(l,i.transaction,o.oldVersion,this.version).next(()=>{ie("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}B(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const c=Vf.open(this.db,e,o?"readonly":"readwrite",r),d=i(c).next(p=>(c.g(),p)).catch(p=>(c.abort(p),G.reject(p))).toPromise();return d.catch(()=>{}),await c.m,d}catch(c){const d=c,p=d.name!=="FirebaseError"&&l<3;if(ie("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function YS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class TO{constructor(e){this.L=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.L=e}done(){this.k=!0}$(e){this.q=e}delete(){return Eo(this.L.delete())}}class Ku extends de{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ms(n){return n.name==="IndexedDbTransactionError"}class bO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ie("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Eo(r)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),Eo(this.store.add(e))}get(e){return Eo(this.store.get(e)).next(t=>(t===void 0&&(t=null),ie("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),Eo(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),Eo(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new G((l,c)=>{o.onerror=d=>{c(d.target.error)},o.onsuccess=d=>{l(d.target.result)}})}{const o=this.cursor(r),l=[];return this.W(o,(c,d)=>{l.push(d)}).next(()=>l)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}j(e,t){ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,l,c)=>c.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new G((r,i)=>{t.onerror=o=>{const l=Fy(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(c=>{c?l.continue():r()}):r()}})}W(e,t){const r=[];return new G((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const d=new TO(c),p=t(c.primaryKey,c.value,d);if(p instanceof G){const m=p.catch(y=>(d.done(),G.reject(y)));r.push(m)}d.isDone?i():d.K===null?c.continue():c.continue(d.K)}}).next(()=>G.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Eo(n){return new G((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Fy(r.target.error);t(i)}})}let aI=!1;function Fy(n){const e=Is.D(Mt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aI||(aI=!0,setTimeout(()=>{throw r},0)),r}}return n}class SO{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ie("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Ms(t)?ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Vs(t)}await this.X(6e4)})}}class xO{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,o=!0;return G.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return ie("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,i).next(c=>{i-=c,r.add(l)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.re(i,o)).next(c=>(ie("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>l.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=HS(o);Ly(l,r)>0&&(r=l)}),new Gn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pn.oe=-1;function Mf(n){return n==null}function uc(n){return n===0&&1/n==-1/0}function JS(n){return typeof n=="number"&&Number.isInteger(n)&&!uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lI(e)),e=RO(n.get(t),e);return lI(e)}function RO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function lI(n){return n+""}function Wr(n){const e=n.length;if(Ee(e>=2),e===2)return Ee(n.charAt(0)===""&&n.charAt(1)===""),Je.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("",o);switch((l<0||l>t)&&ye(),n.charAt(l+1)){case"":const c=n.substring(o,l);let d;i.length===0?d=c:(i+=c,d=i,i=""),r.push(d);break;case"":i+=n.substring(o,l),i+="\0";break;case"":i+=n.substring(o,l+1);break;default:ye()}o=l+2}return new Je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(n,e){return[n,un(e)]}function XS(n,e,t){return[n,un(e),t]}const AO={},PO=["prefixPath","collectionGroup","readTime","documentId"],CO=["prefixPath","collectionGroup","documentId"],DO=["collectionGroup","readTime","prefixPath","documentId"],kO=["canonicalId","targetId"],NO=["targetId","path"],OO=["path","targetId"],VO=["collectionId","parent"],MO=["indexId","uid"],LO=["uid","sequenceNumber"],FO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BO=["indexId","uid","orderedDocumentKey"],UO=["userId","collectionPath","documentId"],jO=["userId","collectionPath","largestBatchId"],zO=["userId","collectionGroup","largestBatchId"],ZS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$O=[...ZS,"documentOverlays"],e0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],t0=e0,By=[...t0,"indexConfiguration","indexState","indexEntries"],GO=By,qO=[...By,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends QS{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ft(n,e){const t=ve(n);return Is.C(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ls(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function n0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Yt.RED,this.left=i??Yt.EMPTY,this.right=o??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Yt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Yt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dI(this.data.getIterator())}getIteratorFrom(e){return new dI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class dI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ma(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new rt(gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new r0("Invalid base64 string: "+o):o}}(e);return new xt(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const WO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(n){if(Ee(!!n),typeof n=="string"){let e=0;const t=WO.exec(n);if(Ee(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ci(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Lf(n){const e=n.mapValue.fields.__previous_value__;return Uy(e)?Lf(e):e}function cc(n){const e=Pi(n.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,t,r,i,o,l,c,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=p}}class Mo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dh={nullValue:"NULL_VALUE"};function Ps(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uy(n)?4:i0(n)?9007199254740991:Ff(n)?10:11:ye()}function Jr(n,e){if(n===e)return!0;const t=Ps(n);if(t!==Ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cc(n).isEqual(cc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Pi(i.timestampValue),c=Pi(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ci(i.bytesValue).isEqual(Ci(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=ht(i.doubleValue),c=ht(o.doubleValue);return l===c?uc(l)===uc(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return al(n.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(cI(l)!==cI(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!Jr(l[d],c[d])))return!1;return!0}(n,e);default:return ye()}}function dc(n,e){return(n.values||[]).find(t=>Jr(t,e))!==void 0}function Cs(n,e){if(n===e)return 0;const t=Ps(n),r=Ps(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=ht(o.integerValue||o.doubleValue),d=ht(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return hI(n.timestampValue,e.timestampValue);case 4:return hI(cc(n),cc(e));case 5:return Pe(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Ci(o),d=Ci(l);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),d=l.split("/");for(let p=0;p<c.length&&p<d.length;p++){const m=Pe(c[p],d[p]);if(m!==0)return m}return Pe(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Pe(ht(o.latitude),ht(l.latitude));return c!==0?c:Pe(ht(o.longitude),ht(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return fI(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,d,p,m;const y=o.fields||{},_=l.fields||{},I=(c=y.value)===null||c===void 0?void 0:c.arrayValue,b=(d=_.value)===null||d===void 0?void 0:d.arrayValue,R=Pe(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0);return R!==0?R:fI(I,b)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===ys.mapValue&&l===ys.mapValue)return 0;if(o===ys.mapValue)return 1;if(l===ys.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),p=l.fields||{},m=Object.keys(p);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const _=Pe(d[y],m[y]);if(_!==0)return _;const I=Cs(c[d[y]],p[m[y]]);if(I!==0)return I}return Pe(d.length,m.length)}(n.mapValue,e.mapValue);default:throw ye()}}function hI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=Pi(n),r=Pi(e),i=Pe(t.seconds,r.seconds);return i!==0?i:Pe(t.nanos,r.nanos)}function fI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Cs(t[i],r[i]);if(o)return o}return Pe(t.length,r.length)}function ll(n){return Fg(n)}function Fg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Pi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ci(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Fg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Fg(t.fields[l])}`;return i+"}"}(n.mapValue):ye()}function kh(n){switch(Ps(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(n);return e?16+kh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ci(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+kh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ls(r.fields,(o,l)=>{i+=o.length+kh(l)}),i}(n.mapValue);default:throw ye()}}function hc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function fc(n){return!!n&&"arrayValue"in n}function pI(n){return!!n&&"nullValue"in n}function mI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nh(n){return!!n&&"mapValue"in n}function Ff(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Qu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ls(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function i0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const s0={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function KO(n){return"nullValue"in n?Dh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hc(Mo.empty(),he.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ff(n)?s0:{mapValue:{}}:ye()}function QO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hc(Mo.empty(),he.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?s0:"mapValue"in n?Ff(n)?{mapValue:{}}:ys:ye()}function gI(n,e){const t=Cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yI(n,e){const t=Cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=gt.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=Qu(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Nh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ls(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ln(Qu(this.value))}}function o0(n){const e=[];return Ls(n.fields,(t,r)=>{const i=new gt([t]);if(Nh(r)){const o=o0(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Et(e,0,be.min(),be.min(),be.min(),ln.empty(),0)}static newFoundDocument(e,t,r,i){return new Et(e,1,t,be.min(),r,i,0)}static newNoDocument(e,t){return new Et(e,2,t,be.min(),be.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new Et(e,3,t,be.min(),be.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.position=e,this.inclusive=t}}function _I(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=he.comparator(he.fromName(l.referenceValue),t.key):r=Cs(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function vI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t="asc"){this.field=e,this.dir=t}}function YO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{}class Le extends a0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new JO(e,t,r):t==="array-contains"?new eV(e,r):t==="in"?new f0(e,r):t==="not-in"?new tV(e,r):t==="array-contains-any"?new nV(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new XO(e,r):new ZO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Cs(t,this.value)):t!==null&&Ps(this.value)===Ps(t)&&this.matchesComparison(Cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends a0{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new nt(e,t)}matches(e){return cl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cl(n){return n.op==="and"}function Ug(n){return n.op==="or"}function jy(n){return l0(n)&&cl(n)}function l0(n){for(const e of n.filters)if(e instanceof nt)return!1;return!0}function jg(n){if(n instanceof Le)return n.field.canonicalString()+n.op.toString()+ll(n.value);if(jy(n))return n.filters.map(e=>jg(e)).join(",");{const e=n.filters.map(t=>jg(t)).join(",");return`${n.op}(${e})`}}function u0(n,e){return n instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&Jr(r.value,i.value)}(n,e):n instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&u0(l,i.filters[c]),!0):!1}(n,e):void ye()}function c0(n,e){const t=n.filters.concat(e);return nt.create(t,n.op)}function d0(n){return n instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`}(n):n instanceof nt?function(t){return t.op.toString()+" {"+t.getFilters().map(d0).join(" ,")+"}"}(n):"Filter"}class JO extends Le{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class XO extends Le{constructor(e,t){super(e,"in",t),this.keys=h0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ZO extends Le{constructor(e,t){super(e,"not-in",t),this.keys=h0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function h0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class eV extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fc(t)&&dc(t.arrayValue,this.value)}}class f0 extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dc(this.value.arrayValue,t)}}class tV extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!dc(this.value.arrayValue,t)}}class nV extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.ue=null}}function zg(n,e=null,t=[],r=[],i=null,o=null,l=null){return new rV(n,e,t,r,i,o,l)}function Lo(n){const e=ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Mf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ll(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ll(r)).join(",")),e.ue=t}return e.ue}function Vc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!u0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vI(n.startAt,e.startAt)&&vI(n.endAt,e.endAt)}function Jh(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Xh(n,e){return n.filters.filter(t=>t instanceof Le&&t.field.isEqual(e))}function wI(n,e,t){let r=Dh,i=!0;for(const o of Xh(n,e)){let l=Dh,c=!0;switch(o.op){case"<":case"<=":l=KO(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=Dh}gI({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];gI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function EI(n,e,t){let r=ys,i=!0;for(const o of Xh(n,e)){let l=ys,c=!0;switch(o.op){case">=":case">":l=QO(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=ys}yI({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];yI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function p0(n,e,t,r,i,o,l,c){return new Rl(n,e,t,r,i,o,l,c)}function Bf(n){return new Rl(n)}function II(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function m0(n){return n.collectionGroup!==null}function Yu(n){const e=ve(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new rt(gt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new pc(o,r))}),t.has(gt.keyField().canonicalString())||e.ce.push(new pc(gt.keyField(),r))}return e.ce}function jn(n){const e=ve(n);return e.le||(e.le=iV(e,Yu(n))),e.le}function iV(n,e){if(n.limitType==="F")return zg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new pc(i.field,o)});const t=n.endAt?new ul(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ul(n.startAt.position,n.startAt.inclusive):null;return zg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $g(n,e){const t=n.filters.concat([e]);return new Rl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zh(n,e,t){return new Rl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return Vc(jn(n),jn(e))&&n.limitType===e.limitType}function g0(n){return`${Lo(jn(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>d0(i)).join(", ")}]`),Mf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ll(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ll(i)).join(",")),`Target(${r})`}(jn(n))}; limitType=${n.limitType})`}function Mc(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):he.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Yu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,d){const p=_I(l,c,d);return l.inclusive?p<=0:p<0}(r.startAt,Yu(r),i)||r.endAt&&!function(l,c,d){const p=_I(l,c,d);return l.inclusive?p>=0:p>0}(r.endAt,Yu(r),i))}(n,e)}function y0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _0(n){return(e,t)=>{let r=!1;for(const i of Yu(n)){const o=sV(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function sV(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(o,l,c){const d=l.data.field(o),p=c.data.field(o);return d!==null&&p!==null?Cs(d,p):ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return n0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new at(he.comparator);function Bn(){return oV}const v0=new at(he.comparator);function zu(...n){let e=v0;for(const t of n)e=e.insert(t.key,t);return e}function w0(n){let e=v0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hr(){return Ju()}function E0(){return Ju()}function Ju(){return new Di(n=>n.toString(),(n,e)=>n.isEqual(e))}const aV=new at(he.comparator),lV=new rt(he.comparator);function Ne(...n){let e=lV;for(const t of n)e=e.add(t);return e}const uV=new rt(Pe);function zy(){return uV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function I0(n){return{integerValue:""+n}}function cV(n,e){return JS(e)?I0(e):$y(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function dV(n,e,t){return n instanceof mc?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Uy(o)&&(o=Lf(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof dl?b0(n,e):n instanceof hl?S0(n,e):function(i,o){const l=T0(i,o),c=TI(l)+TI(i.Pe);return Bg(l)&&Bg(i.Pe)?I0(c):$y(i.serializer,c)}(n,e)}function hV(n,e,t){return n instanceof dl?b0(n,e):n instanceof hl?S0(n,e):t}function T0(n,e){return n instanceof gc?function(r){return Bg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class mc extends jf{}class dl extends jf{constructor(e){super(),this.elements=e}}function b0(n,e){const t=x0(e);for(const r of n.elements)t.some(i=>Jr(i,r))||t.push(r);return{arrayValue:{values:t}}}class hl extends jf{constructor(e){super(),this.elements=e}}function S0(n,e){let t=x0(e);for(const r of n.elements)t=t.filter(i=>!Jr(i,r));return{arrayValue:{values:t}}}class gc extends jf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function TI(n){return ht(n.integerValue||n.doubleValue)}function x0(n){return fc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t){this.field=e,this.transform=t}}function pV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof dl&&i instanceof dl||r instanceof hl&&i instanceof hl?al(r.elements,i.elements,Jr):r instanceof gc&&i instanceof gc?Jr(r.Pe,i.Pe):r instanceof mc&&i instanceof mc}(n.transform,e.transform)}class mV{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zf{}function R0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $f(n.key,_n.none()):new Al(n.key,n.data,_n.none());{const t=n.data,r=ln.empty();let i=new rt(gt.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new ki(n.key,r,new Cn(i.toArray()),_n.none())}}function gV(n,e,t){n instanceof Al?function(i,o,l){const c=i.value.clone(),d=SI(i.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ki?function(i,o,l){if(!Oh(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=SI(i.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(A0(i)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Xu(n,e,t,r){return n instanceof Al?function(o,l,c,d){if(!Oh(o.precondition,l))return c;const p=o.value.clone(),m=xI(o.fieldTransforms,d,l);return p.setAll(m),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ki?function(o,l,c,d){if(!Oh(o.precondition,l))return c;const p=xI(o.fieldTransforms,d,l),m=l.data;return m.setAll(A0(o)),m.setAll(p),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,l,c){return Oh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function yV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=T0(r.transform,i||null);o!=null&&(t===null&&(t=ln.empty()),t.set(r.field,o))}return t||null}function bI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&al(r,i,(o,l)=>pV(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Al extends zf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ki extends zf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function A0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function SI(n,e,t){const r=new Map;Ee(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,hV(l,c,t[i]))}return r}function xI(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,dV(o,l,e))}return r}class $f extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P0 extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&gV(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=E0();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const d=R0(l,c);d!==null&&r.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,(t,r)=>bI(t,r))&&al(this.baseMutations,e.baseMutations,(t,r)=>bI(t,r))}}class qy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ee(e.mutations.length===r.length);let i=function(){return aV}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new qy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,ze;function vV(n){switch(n){default:return ye();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function C0(n){if(n===void 0)return St("GRPC error has no .code"),te.UNKNOWN;switch(n){case Pt.OK:return te.OK;case Pt.CANCELLED:return te.CANCELLED;case Pt.UNKNOWN:return te.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return te.INTERNAL;case Pt.UNAVAILABLE:return te.UNAVAILABLE;case Pt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Pt.NOT_FOUND:return te.NOT_FOUND;case Pt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Pt.ABORTED:return te.ABORTED;case Pt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Pt.DATA_LOSS:return te.DATA_LOSS;default:return ye()}}(ze=Pt||(Pt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new ws([4294967295,4294967295],0);function RI(n){const e=wV().encode(n),t=new FS;return t.update(e),new Uint8Array(t.digest())}function AI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ws([t,r],0),new ws([i,o],0)]}class Hy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $u(`Invalid padding: ${t}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $u(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ws.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(ws.fromNumber(r)));return i.compare(EV)===1&&(i=new ws([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=RI(e),[r,i]=AI(t);for(let o=0;o<this.hashCount;o++){const l=this.de(r,i,o);if(!this.Ee(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Hy(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Te===0)return;const t=RI(e),[r,i]=AI(t);for(let o=0;o<this.hashCount;o++){const l=this.de(r,i,o);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Fc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lc(be.min(),i,new at(Pe),Bn(),Ne())}}class Fc{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fc(r,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class D0{constructor(e,t){this.targetId=e,this.me=t}}class k0{constructor(e,t,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class PI{constructor(){this.fe=0,this.ge=CI(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ne(),t=Ne(),r=Ne();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new Fc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=CI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class IV{constructor(e){this.Be=e,this.Le=new Map,this.ke=Bn(),this.qe=fh(),this.Qe=fh(),this.Ke=new at(Pe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const o=i.target;if(Jh(o))if(r===0){const l=new he(o.path);this.We(t,l,Et.newNoDocument(l,be.min()))}else Ee(r===1);else{const l=this.Ze(t);if(l!==r){const c=this.Xe(e),d=c?this.et(c,e,l):1;if(d!==0){this.He(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=Ci(r).toUint8Array()}catch(d){if(d instanceof r0)return ol("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Hy(l,i,o)}catch(d){return ol(d instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Te===0?null:c}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Be.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Be.nt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.We(t,o,null),i++)}),i}it(e){const t=new Map;this.Le.forEach((o,l)=>{const c=this.Ye(l);if(c){if(o.current&&Jh(c.target)){const d=new he(c.target.path);this.st(d).has(l)||this.ot(l,d)||this.We(l,d,Et.newNoDocument(d,e))}o.be&&(t.set(l,o.ve()),o.Ce())}});let r=Ne();this.Qe.forEach((o,l)=>{let c=!0;l.forEachWhile(d=>{const p=this.Ye(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const i=new Lc(e,t,this.Ke,this.ke,r);return this.ke=Bn(),this.qe=fh(),this.Qe=fh(),this.Ke=new at(Pe),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new PI,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new rt(Pe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new rt(Pe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new PI),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function fh(){return new at(he.comparator)}function CI(){return new at(he.comparator)}const TV={asc:"ASCENDING",desc:"DESCENDING"},bV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SV={and:"AND",or:"OR"};class xV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gg(n,e){return n.useProto3Json||Mf(e)?e:{value:e}}function fl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RV(n,e){return fl(n,e.toTimestamp())}function vn(n){return Ee(!!n),be.fromTimestamp(function(t){const r=Pi(t);return new yt(r.seconds,r.nanos)}(n))}function Ky(n,e){return qg(n,e).canonicalString()}function qg(n,e){const t=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function O0(n){const e=Je.fromString(n);return Ee($0(e)),e}function ef(n,e){return Ky(n.databaseId,e.path)}function Do(n,e){const t=O0(e);if(t.get(1)!==n.databaseId.projectId)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(L0(t))}function V0(n,e){return Ky(n.databaseId,e)}function M0(n){const e=O0(n);return e.length===4?Je.emptyPath():L0(e)}function Wg(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L0(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function DI(n,e,t){return{name:ef(n,e),fields:t.value.mapValue.fields}}function AV(n,e,t){const r=Do(n,e.name),i=vn(e.updateTime),o=e.createTime?vn(e.createTime):be.min(),l=new ln({mapValue:{fields:e.fields}}),c=Et.newFoundDocument(r,i,o,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function PV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,m){return p.useProto3Json?(Ee(m===void 0||typeof m=="string"),xt.fromBase64String(m||"")):(Ee(m===void 0||m instanceof Buffer||m instanceof Uint8Array),xt.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const m=p.code===void 0?te.UNKNOWN:C0(p.code);return new de(m,p.message||"")}(l);t=new k0(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Do(n,r.document.name),o=vn(r.document.updateTime),l=r.document.createTime?vn(r.document.createTime):be.min(),c=new ln({mapValue:{fields:r.document.fields}}),d=Et.newFoundDocument(i,o,l,c),p=r.targetIds||[],m=r.removedTargetIds||[];t=new Vh(p,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Do(n,r.document),o=r.readTime?vn(r.readTime):be.min(),l=Et.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Vh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Do(n,r.document),o=r.removedTargetIds||[];t=new Vh([],o,i,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new _V(i,o),c=r.targetId;t=new D0(c,l)}}return t}function tf(n,e){let t;if(e instanceof Al)t={update:DI(n,e.key,e.value)};else if(e instanceof $f)t={delete:ef(n,e.key)};else if(e instanceof ki)t={update:DI(n,e.key,e.data),updateMask:VV(e.fieldMask)};else{if(!(e instanceof P0))return ye();t={verify:ef(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof mc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof dl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof hl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gc)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:RV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye()}(n,e.precondition)),t}function Hg(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?_n.updateTime(vn(o.updateTime)):o.exists!==void 0?_n.exists(o.exists):_n.none()}(e.currentDocument):_n.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,c){let d=null;if("setToServerValue"in c)Ee(c.setToServerValue==="REQUEST_TIME"),d=new mc;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];d=new dl(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];d=new hl(m)}else"increment"in c?d=new gc(l,c.increment):ye();const p=gt.fromServerFormat(c.fieldPath);return new fV(p,d)}(n,i)):[];if(e.update){e.update.name;const i=Do(n,e.update.name),o=new ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(d){const p=d.fieldPaths||[];return new Cn(p.map(m=>gt.fromServerFormat(m)))}(e.updateMask);return new ki(i,o,l,t,r)}return new Al(i,o,t,r)}if(e.delete){const i=Do(n,e.delete);return new $f(i,t)}if(e.verify){const i=Do(n,e.verify);return new P0(i,t)}return ye()}function CV(n,e){return n&&n.length>0?(Ee(e!==void 0),n.map(t=>function(i,o){let l=i.updateTime?vn(i.updateTime):vn(o);return l.isEqual(be.min())&&(l=vn(o)),new mV(l,i.transformResults||[])}(t,e))):[]}function F0(n,e){return{documents:[V0(n,e.path)]}}function B0(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=V0(n,i);const o=function(p){if(p.length!==0)return z0(nt.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(m=>function(_){return{field:$a(_.field),direction:kV(_.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Gg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ct:t,parent:i}}function U0(n){let e=M0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ee(r===1);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(y){const _=j0(y);return _ instanceof nt&&jy(_)?_.getFilters():[_]}(t.where));let l=[];t.orderBy&&(l=function(y){return y.map(_=>function(b){return new pc(Ga(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(y){let _;return _=typeof y=="object"?y.value:y,Mf(_)?null:_}(t.limit));let d=null;t.startAt&&(d=function(y){const _=!!y.before,I=y.values||[];return new ul(I,_)}(t.startAt));let p=null;return t.endAt&&(p=function(y){const _=!y.before,I=y.values||[];return new ul(I,_)}(t.endAt)),p0(e,i,l,o,c,"F",d,p)}function DV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function j0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ga(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ga(t.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ga(t.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ga(t.unaryFilter.field);return Le.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(n):n.fieldFilter!==void 0?function(t){return Le.create(Ga(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return nt.create(t.compositeFilter.filters.map(r=>j0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(n):ye()}function kV(n){return TV[n]}function NV(n){return bV[n]}function OV(n){return SV[n]}function $a(n){return{fieldPath:n.canonicalString()}}function Ga(n){return gt.fromServerFormat(n.fieldPath)}function z0(n){return n instanceof Le?function(t){if(t.op==="=="){if(mI(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NAN"}};if(pI(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mI(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NAN"}};if(pI(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(t.field),op:NV(t.op),value:t.value}}}(n):n instanceof nt?function(t){const r=t.getFilters().map(i=>z0(i));return r.length===1?r[0]:{compositeFilter:{op:OV(t.op),filters:r}}}(n):ye()}function VV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t,r,i,o=be.min(),l=be.min(),c=xt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.ht=e}}function MV(n,e){let t;if(e.document)t=AV(n.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),i=Bo(e.noDocument.readTime);t=Et.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=he.fromSegments(e.unknownDocument.path),i=Bo(e.unknownDocument.version);t=Et.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new yt(i[0],i[1]);return be.fromTimestamp(o)}(e.readTime)),t}function kI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,l){return{name:ef(o,l.key),fields:l.data.value.mapValue.fields,updateTime:fl(o,l.version.toTimestamp()),createTime:fl(o,l.createTime.toTimestamp())}}(n.ht,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fo(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:t.path.toArray(),version:Fo(e.version)}}return r}function nf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bo(n){const e=new yt(n.seconds,n.nanoseconds);return be.fromTimestamp(e)}function Io(n,e){const t=(e.baseMutations||[]).map(o=>Hg(n.ht,o));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const c=e.mutations[o+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>Hg(n.ht,o)),i=yt.fromMillis(e.localWriteTimeMs);return new Gy(e.batchId,i,t,r)}function Gu(n){const e=Bo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bo(n.lastLimboFreeSnapshotVersion):be.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Ee(o.documents.length===1),jn(Bf(M0(o.documents[0])))}(n.query):function(o){return jn(U0(o))}(n.query),new bi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,xt.fromBase64String(n.resumeToken))}function q0(n,e){const t=Fo(e.snapshotVersion),r=Fo(e.lastLimboFreeSnapshotVersion);let i;i=Jh(e.target)?F0(n.ht,e.target):B0(n.ht,e.target).ct;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function W0(n){const e=U0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zh(e,e.limit,"L"):e}function Zm(n,e){return new Wy(e.largestBatchId,Hg(n.ht,e.overlayMutation))}function NI(n,e){const t=e.path.lastSegment();return[n,un(e.path.popLast()),t]}function OI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Fo(r.readTime),documentKey:un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{getBundleMetadata(e,t){return VI(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Bo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return VI(e).put(function(i){return{bundleId:i.id,createTime:Fo(vn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return MI(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:W0(o.bundledQuery),readTime:Bo(o.readTime)}}(r)})}saveNamedQuery(e,t){return MI(e).put(function(i){return{name:i.name,readTime:Fo(vn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function VI(n){return Ft(n,"bundles")}function MI(n){return Ft(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){const r=t.uid||"";return new Gf(e,r)}getOverlay(e,t){return Du(e).get(NI(this.userId,t)).next(r=>r?Zm(this.serializer,r):null)}getOverlays(e,t){const r=Hr();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const c=new Wy(t,l);i.push(this.Tt(e,c))}),G.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(un(l.getCollectionPath())));const o=[];return i.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(Du(e).j("collectionPathOverlayIndex",c))}),G.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Hr(),o=un(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Du(e).U("collectionPathOverlayIndex",l).next(c=>{for(const d of c){const p=Zm(this.serializer,d);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Hr();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Du(e).J({index:"collectionGroupOverlayIndex",range:c},(d,p,m)=>{const y=Zm(this.serializer,p);o.size()<i||y.largestBatchId===l?(o.set(y.getKey(),y),l=y.largestBatchId):m.done()}).next(()=>o)}Tt(e,t){return Du(e).put(function(i,o,l){const[c,d,p]=NI(o,l.mutation.key);return{userId:o,collectionPath:d,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:tf(i.ht,l.mutation)}}(this.serializer,this.userId,t))}}function Du(n){return Ft(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{It(e){return Ft(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?xt.fromUint8Array(r):xt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.It(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(ht(e.integerValue));else if("doubleValue"in e){const r=ht(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),uc(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=Pi(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Ci(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?i0(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Ff(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):ye()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const r=e.fields||{};this.Rt(t,55);for(const i of Object.keys(r))this.gt(i,t),this.Et(r[i],t)}bt(e,t){var r,i;const o=e.fields||{};this.Rt(t,53);const l="value",c=((i=(r=o[l].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(ht(c)),this.gt(l,t),this.Et(o[l],t)}vt(e,t){const r=e.values||[];this.Rt(t,50);for(const i of r)this.Et(i,t)}St(e,t){this.Rt(t,37),he.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}To.Ft=new To;function BV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function LI(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const l=BV(255&r[o]);if(i+=l,l!==8)break}return i}(n);return Math.ceil(e/8)}class UV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xt(r.value),r=t.next();this.Ot()}Nt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Bt(r.value),r=t.next();this.Lt()}kt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=t.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Bt(r);else if(r<2048)this.Bt(960|r>>>6),this.Bt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Bt(480|r>>>12),this.Bt(128|63&r>>>6),this.Bt(128|63&r);else{const i=t.codePointAt(0);this.Bt(240|i>>>18),this.Bt(128|63&i>>>12),this.Bt(128|63&i>>>6),this.Bt(128|63&i)}}this.Lt()}Qt(e){const t=this.Kt(e),r=LI(t);this.$t(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ut(e){const t=this.Kt(e),r=LI(t);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}xt(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Bt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Lt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jV{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class zV{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class ku{constructor(){this.Jt=new UV,this.Yt=new jV(this.Jt),this.Zt=new zV(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}en(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bo(this.indexId,this.documentKey,this.arrayValue,r)}}function is(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=FI(n.arrayValue,e.arrayValue),t!==0?t:(t=FI(n.directionalValue,e.directionalValue),t!==0?t:he.comparator(n.documentKey,e.documentKey)))}function FI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.tn=new rt((t,r)=>gt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const t of e.filters){const r=t;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(Ee(e.collectionGroup===this.collectionId),this.sn)return!1;const t=Mg(e);if(t!==void 0&&!this._n(t))return!1;const r=_o(e);let i=new Set,o=0,l=0;for(;o<r.length&&this._n(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.tn.size>0){const c=this.tn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=r[o];if(!this.an(c,d)||!this.un(this.nn[l++],d))return!1}++o}for(;o<r.length;++o){const c=r[o];if(l>=this.nn.length||!this.un(this.nn[l++],c))return!1}return!0}cn(){if(this.sn)return null;let e=new rt(gt.comparator);const t=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ph(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ph(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ph(r.field,r.dir==="asc"?0:1)));return new Yh(Yh.UNKNOWN_ID,this.collectionId,t,lc.empty())}_n(e){for(const t of this.rn)if(this.an(t,e))return!0;return!1}an(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}un(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(n){var e,t;if(Ee(n instanceof Le||n instanceof nt),n instanceof Le){if(n instanceof f0){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Le.create(n.field,"==",o)))||[];return nt.create(i,"or")}return n}const r=n.filters.map(i=>H0(i));return nt.create(r,n.op)}function $V(n){if(n.getFilters().length===0)return[];const e=Yg(H0(n));return Ee(K0(e)),Kg(e)||Qg(e)?[e]:e.getFilters()}function Kg(n){return n instanceof Le}function Qg(n){return n instanceof nt&&jy(n)}function K0(n){return Kg(n)||Qg(n)||function(t){if(t instanceof nt&&Ug(t)){for(const r of t.getFilters())if(!Kg(r)&&!Qg(r))return!1;return!0}return!1}(n)}function Yg(n){if(Ee(n instanceof Le||n instanceof nt),n instanceof Le)return n;if(n.filters.length===1)return Yg(n.filters[0]);const e=n.filters.map(r=>Yg(r));let t=nt.create(e,n.op);return t=rf(t),K0(t)?t:(Ee(t instanceof nt),Ee(cl(t)),Ee(t.filters.length>1),t.filters.reduce((r,i)=>Qy(r,i)))}function Qy(n,e){let t;return Ee(n instanceof Le||n instanceof nt),Ee(e instanceof Le||e instanceof nt),t=n instanceof Le?e instanceof Le?function(i,o){return nt.create([i,o],"and")}(n,e):UI(n,e):e instanceof Le?UI(e,n):function(i,o){if(Ee(i.filters.length>0&&o.filters.length>0),cl(i)&&cl(o))return c0(i,o.getFilters());const l=Ug(i)?i:o,c=Ug(i)?o:i,d=l.filters.map(p=>Qy(p,c));return nt.create(d,"or")}(n,e),rf(t)}function UI(n,e){if(cl(e))return c0(e,n.getFilters());{const t=e.filters.map(r=>Qy(n,r));return nt.create(t,"or")}}function rf(n){if(Ee(n instanceof Le||n instanceof nt),n instanceof Le)return n;const e=n.getFilters();if(e.length===1)return rf(e[0]);if(l0(n))return n;const t=e.map(i=>rf(i)),r=[];return t.forEach(i=>{i instanceof Le?r.push(i):i instanceof nt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:nt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(){this.ln=new Yy}addToCollectionParentIndex(e,t){return this.ln.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Gn.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class Yy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rt(Je.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new Uint8Array(0);class qV{constructor(e,t){this.databaseId=t,this.hn=new Yy,this.Pn=new Di(r=>Lo(r),(r,i)=>Vc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.hn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.hn.add(t)});const o={collectionId:r,parent:un(i)};return jI(e).put(o)}return G.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[qS(t),""],!1,!0);return jI(e).U(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Wr(l.parent))}return r})}addFieldIndex(e,t){const r=Nu(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete i.indexId;const o=r.add(i);if(t.indexState){const l=Fa(e);return o.next(c=>{l.put(OI(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Nu(e),i=Fa(e),o=La(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Nu(e),r=La(e),i=Fa(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return G.forEach(this.Tn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new BI(r).cn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=La(e);let i=!0;const o=new Map;return G.forEach(this.Tn(t),l=>this.In(e,l).next(c=>{i&&(i=!!c),o.set(l,c)})).next(()=>{if(i){let l=Ne();const c=[];return G.forEach(o,(d,p)=>{ie("IndexedDbIndexManager",`Using index ${function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(d)} to execute ${Lo(t)}`);const m=function($,H){const X=Mg(H);if(X===void 0)return null;for(const J of Xh($,X.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(p,d),y=function($,H){const X=new Map;for(const J of _o(H))for(const D of Xh($,J.fieldPath))switch(D.op){case"==":case"in":X.set(J.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return X.set(J.fieldPath.canonicalString(),D.value),Array.from(X.values())}return null}(p,d),_=function($,H){const X=[];let J=!0;for(const D of _o(H)){const A=D.kind===0?wI($,D.fieldPath,$.startAt):EI($,D.fieldPath,$.startAt);X.push(A.value),J&&(J=A.inclusive)}return new ul(X,J)}(p,d),I=function($,H){const X=[];let J=!0;for(const D of _o(H)){const A=D.kind===0?EI($,D.fieldPath,$.endAt):wI($,D.fieldPath,$.endAt);X.push(A.value),J&&(J=A.inclusive)}return new ul(X,J)}(p,d),b=this.dn(d,p,_),R=this.dn(d,p,I),S=this.En(d,p,y),M=this.An(d.indexId,m,b,_.inclusive,R,I.inclusive,S);return G.forEach(M,V=>r.G(V,t.limit).next($=>{$.forEach(H=>{const X=he.fromSegments(H.documentKey);l.has(X)||(l=l.add(X),c.push(X))})}))}).next(()=>c)}return G.resolve(null)})}Tn(e){let t=this.Pn.get(e);return t||(e.filters.length===0?t=[e]:t=$V(nt.create(e.filters,"and")).map(r=>zg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,t),t)}An(e,t,r,i,o,l,c){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),p=d/(t!=null?t.length:1),m=[];for(let y=0;y<d;++y){const _=t?this.Rn(t[y/p]):ph,I=this.Vn(e,_,r[y%p],i),b=this.mn(e,_,o[y%p],l),R=c.map(S=>this.Vn(e,_,S,!0));m.push(...this.createRange(I,b,R))}return m}Vn(e,t,r,i){const o=new bo(e,he.empty(),t,r);return i?o:o.en()}mn(e,t,r,i){const o=new bo(e,he.empty(),t,r);return i?o.en():o}In(e,t){const r=new BI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const c of o)r.on(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(e,t){let r=2;const i=this.Tn(t);return G.forEach(i,o=>this.In(e,o).next(l=>{l?r!==0&&l.fields.length<function(d){let p=new rt(gt.comparator),m=!1;for(const y of d.filters)for(const _ of y.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?m=!0:p=p.add(_.field));for(const y of d.orderBy)y.field.isKeyField()||(p=p.add(y.field));return p.size+(m?1:0)}(o)&&(r=1):r=0})).next(()=>function(l){return l.limit!==null}(t)&&i.length>1&&r===2?1:r)}fn(e,t){const r=new ku;for(const i of _o(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=r.Xt(i.kind);To.Ft.dt(o,l)}return r.Ht()}Rn(e){const t=new ku;return To.Ft.dt(e,t.Xt(0)),t.Ht()}gn(e,t){const r=new ku;return To.Ft.dt(hc(this.databaseId,t),r.Xt(function(o){const l=_o(o);return l.length===0?0:l[l.length-1].kind}(e))),r.Ht()}En(e,t,r){if(r===null)return[];let i=[];i.push(new ku);let o=0;for(const l of _o(e)){const c=r[o++];for(const d of i)if(this.pn(t,l.fieldPath)&&fc(c))i=this.yn(i,l,c);else{const p=d.Xt(l.kind);To.Ft.dt(c,p)}}return this.wn(i)}dn(e,t,r){return this.En(e,t,r.position)}wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ht();return t}yn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const c of i){const d=new ku;d.seed(c.Ht()),To.Ft.dt(l,d.Xt(t.kind)),o.push(d)}return o}pn(e,t){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Nu(e),i=Fa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const l=[];return G.forEach(o,c=>i.get([c.indexId,this.uid]).next(d=>{l.push(function(m,y){const _=y?new lc(y.sequenceNumber,new Gn(Bo(y.readTime),new he(Wr(y.documentKey)),y.largestBatchId)):lc.empty(),I=m.fields.map(([b,R])=>new Ph(gt.fromServerFormat(b),R));return new Yh(m.indexId,m.collectionGroup,I,_)}(c,d))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Pe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Nu(e),o=Fa(e);return this.Sn(e).next(l=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>G.forEach(c,d=>o.put(OI(d.indexId,this.uid,l,r)))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?G.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),G.forEach(c,d=>this.bn(e,i,d).next(p=>{const m=this.Dn(o,d);return p.isEqual(m)?G.resolve():this.vn(e,o,d,p,m)}))))})}Cn(e,t,r,i){return La(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Fn(e,t,r,i){return La(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}bn(e,t,r){const i=La(e);let o=new rt(is);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,c)=>{o=o.add(new bo(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>o)}Dn(e,t){let r=new rt(is);const i=this.fn(t,e);if(i==null)return r;const o=Mg(t);if(o!=null){const l=e.data.field(o.fieldPath);if(fc(l))for(const c of l.arrayValue.values||[])r=r.add(new bo(t.indexId,e.key,this.Rn(c),i))}else r=r.add(new bo(t.indexId,e.key,ph,i));return r}vn(e,t,r,i,o){ie("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,m,y,_){const I=d.getIterator(),b=p.getIterator();let R=Ma(I),S=Ma(b);for(;R||S;){let M=!1,V=!1;if(R&&S){const $=m(R,S);$<0?V=!0:$>0&&(M=!0)}else R!=null?V=!0:M=!0;M?(y(S),S=Ma(b)):V?(_(R),R=Ma(I)):(R=Ma(I),S=Ma(b))}}(i,o,is,c=>{l.push(this.Cn(e,t,r,c))},c=>{l.push(this.Fn(e,t,r,c))}),G.waitFor(l)}Sn(e){let t=1;return Fa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,c)=>is(l,c)).filter((l,c,d)=>!c||is(l,d[c-1])!==0);const i=[];i.push(e);for(const l of r){const c=is(l,e),d=is(l,t);if(c===0)i[0]=e.en();else if(c>0&&d<0)i.push(l),i.push(l.en());else if(d>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Mn(i[l],i[l+1]))return[];const c=[i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,ph,[]],d=[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,ph,[]];o.push(IDBKeyRange.bound(c,d))}return o}Mn(e,t){return is(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zI)}getMinOffset(e,t){return G.mapArray(this.Tn(t),r=>this.In(e,r).next(i=>i||ye())).next(zI)}}function jI(n){return Ft(n,"collectionParents")}function La(n){return Ft(n,"indexEntries")}function Nu(n){return Ft(n,"indexConfiguration")}function Fa(n){return Ft(n,"indexState")}function zI(n){Ee(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ly(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Gn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let c=0;const d=r.J({range:l},(m,y,_)=>(c++,_.delete()));o.push(d.next(()=>{Ee(c===1)}));const p=[];for(const m of t.mutations){const y=XS(e,m.key.path,t.batchId);o.push(i.delete(y)),p.push(m.key)}return G.waitFor(o).next(()=>p)}function sf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(41943040,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);class qf{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.xn={}}static Pt(e,t,r,i){Ee(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new qf(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).J({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=qa(e),l=ss(e);return l.add({}).next(c=>{Ee(typeof c=="number");const d=new Gy(c,t,r,i),p=function(I,b,R){const S=R.baseMutations.map(V=>tf(I.ht,V)),M=R.mutations.map(V=>tf(I.ht,V));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:S,mutations:M}}(this.serializer,this.userId,d),m=[];let y=new rt((_,I)=>Pe(_.canonicalString(),I.canonicalString()));for(const _ of i){const I=XS(this.userId,_.key.path,c);y=y.add(_.key.path.popLast()),m.push(l.put(p)),m.push(o.put(I,AO))}return y.forEach(_=>{m.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.xn[c]=d.keys()}),G.waitFor(m).next(()=>d)})}lookupMutationBatch(e,t){return ss(e).get(t).next(r=>r?(Ee(r.userId===this.userId),Io(this.serializer,r)):null)}On(e,t){return this.xn[t]?G.resolve(this.xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ss(e).J({index:"userMutationsIndex",range:i},(l,c,d)=>{c.userId===this.userId&&(Ee(c.batchId>=r),o=Io(this.serializer,c)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ss(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).U("userMutationsIndex",t).next(r=>r.map(i=>Io(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ch(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return qa(e).J({range:i},(l,c,d)=>{const[p,m,y]=l,_=Wr(m);if(p===this.userId&&t.path.isEqual(_))return ss(e).get(y).next(I=>{if(!I)throw ye();Ee(I.userId===this.userId),o.push(Io(this.serializer,I))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Pe);const i=[];return t.forEach(o=>{const l=Ch(this.userId,o.path),c=IDBKeyRange.lowerBound(l),d=qa(e).J({range:c},(p,m,y)=>{const[_,I,b]=p,R=Wr(I);_===this.userId&&o.path.isEqual(R)?r=r.add(b):y.done()});i.push(d)}),G.waitFor(i).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Ch(this.userId,r),l=IDBKeyRange.lowerBound(o);let c=new rt(Pe);return qa(e).J({range:l},(d,p,m)=>{const[y,_,I]=d,b=Wr(_);y===this.userId&&r.isPrefixOf(b)?b.length===i&&(c=c.add(I)):m.done()}).next(()=>this.Nn(e,c))}Nn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(ss(e).get(o).next(l=>{if(l===null)throw ye();Ee(l.userId===this.userId),r.push(Io(this.serializer,l))}))}),G.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Q0(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Bn(t.batchId)}),G.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Bn(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),i=[];return qa(e).J({range:r},(o,l,c)=>{if(o[0]===this.userId){const d=Wr(o[1]);i.push(d)}else c.done()}).next(()=>{Ee(i.length===0)})})}containsKey(e,t){return Y0(e,this.userId,t)}Ln(e){return J0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Y0(n,e,t){const r=Ch(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return qa(n).J({range:o,H:!0},(c,d,p)=>{const[m,y,_]=c;m===e&&y===i&&(l=!0),p.done()}).next(()=>l)}function ss(n){return Ft(n,"mutations")}function qa(n){return Ft(n,"documentMutations")}function J0(n){return Ft(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Uo(0)}static Qn(){return new Uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Kn(e).next(t=>{const r=new Uo(t.highestTargetId);return t.highestTargetId=r.next(),this.$n(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(t=>be.fromTimestamp(new yt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Kn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.$n(e,i)))}addTargetData(e,t){return this.Un(e,t).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(t,r),this.$n(e,r))))}updateTargetData(e,t){return this.Un(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ba(e).delete(t.targetId)).next(()=>this.Kn(e)).next(r=>(Ee(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ba(e).J((l,c)=>{const d=Gu(c);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,o.push(this.removeTargetData(e,d)))}).next(()=>G.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ba(e).J((r,i)=>{const o=Gu(i);t(o)})}Kn(e){return GI(e).get("targetGlobalKey").next(t=>(Ee(t!==null),t))}$n(e,t){return GI(e).put("targetGlobalKey",t)}Un(e,t){return Ba(e).put(q0(this.serializer,t))}Wn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ba(e).J({range:i,index:"queryTargetsIndex"},(l,c,d)=>{const p=Gu(c);Vc(t,p.target)&&(o=p,d.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=ds(e);return t.forEach(l=>{const c=un(l.path);i.push(o.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))}),G.waitFor(i)}removeMatchingKeys(e,t,r){const i=ds(e);return G.forEach(t,o=>{const l=un(o.path);return G.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=ds(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ds(e);let o=Ne();return i.J({range:r,H:!0},(l,c,d)=>{const p=Wr(l[1]),m=new he(p);o=o.add(m)}).next(()=>o)}containsKey(e,t){const r=un(t.path),i=IDBKeyRange.bound([r],[qS(r)],!1,!0);let o=0;return ds(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,c],d,p)=>{l!==0&&(o++,p.done())}).next(()=>o>0)}ut(e,t){return Ba(e).get(t).next(r=>r?Gu(r):null)}}function Ba(n){return Ft(n,"targets")}function GI(n){return Ft(n,"targetGlobal")}function ds(n){return Ft(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI([n,e],[t,r]){const i=Pe(n,t);return i===0?Pe(e,r):i}class HV{constructor(e){this.Gn=e,this.buffer=new rt(qI),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class X0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ms(t)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Vs(t)}await this.Yn(3e5)})}}class KV{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Pn.oe);const r=new HV(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve($I)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$I):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,l,c,d,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(p=Date.now(),ja()<=Me.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(p-d)+`ms
Total Duration: ${p-m}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function Z0(n,e){return new KV(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,t){this.db=e,this.garbageCollector=Z0(this,t)}Xn(e){const t=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}er(e,t){return this.rr(e,(r,i)=>t(i))}addReference(e,t,r){return mh(e,r)}removeReference(e,t,r){return mh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return mh(e,t)}ir(e,t){return function(i,o){let l=!1;return J0(i).Y(c=>Y0(i,c,o).next(d=>(d&&(l=!0),G.resolve(!d)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.rr(e,(l,c)=>{if(c<=t){const d=this.ir(e,l).next(p=>{if(!p)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,be.min()),ds(e).delete(function(y){return[0,un(y.path)]}(l))))});i.push(d)}}).next(()=>G.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return mh(e,t)}rr(e,t){const r=ds(e);let i,o=Pn.oe;return r.J({index:"documentTargetsIndex"},([l,c],{path:d,sequenceNumber:p})=>{l===0?(o!==Pn.oe&&t(new he(Wr(i)),o),o=p,i=d):o=Pn.oe}).next(()=>{o!==Pn.oe&&t(new he(Wr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mh(n,e){return ds(n).put(function(r,i){return{targetId:0,path:un(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.changes=new Di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mo(e).put(r)}removeEntry(e,t,r){return mo(e).delete(function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],nf(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.sr(e,r)))}getEntry(e,t){let r=Et.newInvalidDocument(t);return mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ou(t))},(i,o)=>{r=this._r(t,o)}).next(()=>r)}ar(e,t){let r={size:0,document:Et.newInvalidDocument(t)};return mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ou(t))},(i,o)=>{r={document:this._r(t,o),size:sf(o)}}).next(()=>r)}getEntries(e,t){let r=Bn();return this.ur(e,t,(i,o)=>{const l=this._r(i,o);r=r.insert(i,l)}).next(()=>r)}cr(e,t){let r=Bn(),i=new at(he.comparator);return this.ur(e,t,(o,l)=>{const c=this._r(o,l);r=r.insert(o,c),i=i.insert(o,sf(l))}).next(()=>({documents:r,lr:i}))}ur(e,t,r){if(t.isEmpty())return G.resolve();let i=new rt(KI);t.forEach(d=>i=i.add(d));const o=IDBKeyRange.bound(Ou(i.first()),Ou(i.last())),l=i.getIterator();let c=l.getNext();return mo(e).J({index:"documentKeyIndex",range:o},(d,p,m)=>{const y=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&KI(c,y)<0;)r(c,null),c=l.getNext();c&&c.isEqual(y)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?m.$(Ou(c)):m.done()}).next(()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),nf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mo(e).U(IDBKeyRange.bound(c,d,!0)).next(p=>{o==null||o.incrementDocumentReadCount(p.length);let m=Bn();for(const y of p){const _=this._r(he.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);_.isFoundDocument()&&(Mc(t,_)||i.has(_.key))&&(m=m.insert(_.key,_))}return m})}getAllFromCollectionGroup(e,t,r,i){let o=Bn();const l=HI(t,r),c=HI(t,Gn.max());return mo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,c,!0)},(d,p,m)=>{const y=this._r(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(y.key,y),o.size===i&&m.done()}).next(()=>o)}newChangeBuffer(e){return new JV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return WI(e).get("remoteDocumentGlobalKey").next(t=>(Ee(!!t),t))}sr(e,t){return WI(e).put("remoteDocumentGlobalKey",t)}_r(e,t){if(t){const r=MV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return Et.newInvalidDocument(e)}}function tx(n){return new YV(n)}class JV extends ex{constructor(e,t){super(),this.hr=e,this.trackRemovals=t,this.Pr=new Di(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new rt((o,l)=>Pe(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const c=this.Pr.get(o);if(t.push(this.hr.removeEntry(e,o,c.readTime)),l.isValidDocument()){const d=kI(this.hr.serializer,l);i=i.add(o.path.popLast());const p=sf(d);r+=p-c.size,t.push(this.hr.addEntry(e,o,d))}else if(r-=c.size,this.trackRemovals){const d=kI(this.hr.serializer,l.convertToNoDocument(be.min()));t.push(this.hr.addEntry(e,o,d))}}),i.forEach(o=>{t.push(this.hr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.hr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.hr.ar(e,t).next(r=>(this.Pr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.hr.cr(e,t).next(({documents:r,lr:i})=>(i.forEach((o,l)=>{this.Pr.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function WI(n){return Ft(n,"remoteDocumentGlobal")}function mo(n){return Ft(n,"remoteDocumentsV14")}function Ou(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HI(n,e){const t=e.documentKey.path.toArray();return[n,nf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function KI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Pe(t[o],r[o]),i)return i;return i=Pe(t.length,r.length),i||(i=Pe(t[t.length-2],r[r.length-2]),i||Pe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xu(r.mutation,i,Cn.empty(),yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){const i=Hr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=zu();return o.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Hr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Bn();const l=Ju(),c=function(){return Ju()}();return t.forEach((d,p)=>{const m=r.get(p.key);i.has(p.key)&&(m===void 0||m.mutation instanceof ki)?o=o.insert(p.key,p):m!==void 0?(l.set(p.key,m.mutation.getFieldMask()),Xu(m.mutation,p,m.mutation.getFieldMask(),yt.now())):l.set(p.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,m)=>l.set(p,m)),t.forEach((p,m)=>{var y;return c.set(p,new XV(m,(y=l.get(p))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Ju();let i=new at((l,c)=>l-c),o=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let m=r.get(d)||Cn.empty();m=c.applyToLocalView(p,m),r.set(d,m);const y=(i.get(c.batchId)||Ne()).add(d);i=i.insert(c.batchId,y)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),p=d.key,m=d.value,y=E0();m.forEach(_=>{if(!o.has(_)){const I=R0(t.get(_),r.get(_));I!==null&&y.set(_,I),o=o.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return G.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return he.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):m0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):G.resolve(Hr());let c=-1,d=o;return l.next(p=>G.forEach(p,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?G.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{d=d.insert(m,_)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Ne())).next(m=>({batchId:c,changes:w0(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=zu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=zu();return this.indexManager.getCollectionParents(e,o).next(c=>G.forEach(c,d=>{const p=function(y,_){return new Rl(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(m=>{m.forEach((y,_)=>{l=l.insert(y,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((d,p)=>{const m=p.getKey();l.get(m)===null&&(l=l.insert(m,Et.newInvalidDocument(m)))});let c=zu();return l.forEach((d,p)=>{const m=o.get(d);m!==void 0&&Xu(m.mutation,p,Cn.empty(),yt.now()),Mc(t,p)&&(c=c.insert(d,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return G.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:vn(i.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:W0(i.bundledQuery),readTime:vn(i.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this.overlays=new at(he.comparator),this.dr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hr();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const i=Hr(),o=t.length+1,l=new he(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new at((p,m)=>p-m);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=Hr(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const c=Hr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,m)=>c.set(p,m)),!(c.size()>=i)););return G.resolve(c)}Tt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Wy(t,r));let o=this.dr.get(t);o===void 0&&(o=Ne(),this.dr.set(t,o)),this.dr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.Er=new rt($t.Ar),this.Rr=new rt($t.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const r=new $t(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new $t(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new he(new Je([])),r=new $t(t,e),i=new $t(t,e+1),o=[];return this.Rr.forEachInRange([r,i],l=>{this.gr(l),o.push(l.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new he(new Je([])),r=new $t(t,e),i=new $t(t,e+1);let o=Ne();return this.Rr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new $t(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return he.comparator(e.key,t.key)||Pe(e.br,t.br)}static Vr(e,t){return Pe(e.br,t.br)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new rt($t.Ar)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Gy(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.vr=this.vr.add(new $t(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,t){return G.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Fr(r),o=i<0?0:i;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $t(t,0),i=new $t(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],l=>{const c=this.Cr(l.br);o.push(c)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Pe);return t.forEach(i=>{const o=new $t(i,0),l=new $t(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,l],c=>{r=r.add(c.br)})}),G.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;he.isDocumentKey(o)||(o=o.child(""));const l=new $t(new he(o),0);let c=new rt(Pe);return this.vr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(d.br)),!0)},l),G.resolve(this.Mr(c))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ee(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return G.forEach(t.mutations,i=>{const o=new $t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){const r=new $t(t,0),i=this.vr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.Nr=e,this.docs=function(){return new at(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let r=Bn();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Et.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Bn();const l=t.path,c=new he(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:p,value:{document:m}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||Ly(HS(m),r)<=0||(i.has(m.key)||Mc(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ye()}Br(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iM(this)}getSize(e){return G.resolve(this.size)}}class iM extends ex{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.persistence=e,this.Lr=new Di(t=>Lo(t),Vc),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.kr=0,this.qr=new Jy,this.targetCount=0,this.Qr=Uo.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),G.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Un(t),G.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Lr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Lr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),G.waitFor(o).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Lr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Pn(0),this.Ur=!1,this.Ur=!0,this.Wr=new tM,this.referenceDelegate=e(this),this.Gr=new sM(this),this.indexManager=new GV,this.remoteDocumentCache=function(i){return new rM(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new G0(t),this.jr=new ZV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new nM(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);const i=new oM(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return G.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class oM extends QS{constructor(e){super(),this.currentSequenceNumber=e}}class Wf{constructor(e){this.persistence=e,this.Zr=new Jy,this.Xr=null}static ei(e){return new Wf(e)}get ti(){if(this.Xr)return this.Xr;throw ye()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),G.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ti,r=>{const i=he.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,be.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return G.or([()=>G.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class of{constructor(e,t){this.persistence=e,this.ri=new Di(r=>un(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Z0(this,t)}static ei(e,t){return new of(e,t)}Hr(){}Jr(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return G.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,l=>this.ir(e,l,t).next(c=>{c||(r++,o.removeEntry(l,be.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),G.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kh(e.data.value)),t}ir(e,t,r){return G.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.serializer=e}O(e,t,r,i){const o=new Vf("createOrUpgrade",t);r<1&&i>=1&&(function(d){d.createObjectStore("owner")}(e),function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uI,{unique:!0}),d.createObjectStore("documentMutations")}(e),QI(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=G.resolve();return r<3&&i>=3&&(r!==0&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),QI(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",m)}(o))),r<4&&i>=4&&(r!==0&&(l=l.next(()=>function(d,p){return p.store("mutations").U().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uI,{unique:!0});const y=p.store("mutations"),_=m.map(I=>y.put(I));return G.waitFor(_)})}(e,o))),l=l.next(()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(l=l.next(()=>this.ii(o))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.si(o)))),r<7&&i>=7&&(l=l.next(()=>this.oi(o))),r<8&&i>=8&&(l=l.next(()=>this._i(e,o))),r<9&&i>=9&&(l=l.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(l=l.next(()=>this.ai(o))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{(function(d){const p=d.createObjectStore("documentOverlays",{keyPath:UO});p.createIndex("collectionPathOverlayIndex",jO,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",zO,{unique:!1})})(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:PO});p.createIndex("documentKeyIndex",CO),p.createIndex("collectionGroupIndex",DO)}(e)).next(()=>this.ui(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.ci(e,o))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:MO}).createIndex("sequenceNumberIndex",LO,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:FO}).createIndex("documentKeyIndex",BO,{unique:!1})}(e))),r<16&&i>=16&&(l=l.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(l=l.next(()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)})),l}si(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=sf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>G.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",l).next(c=>G.forEach(c,d=>{Ee(d.userId===o.userId);const p=Io(this.serializer,d);return Q0(e,o.userId,p).next(()=>{})}))}))}oi(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((l,c)=>{const d=new Je(l),p=function(y){return[0,un(y)]}(d);o.push(t.get(p).next(m=>m?G.resolve():(y=>t.put({targetId:0,path:un(y),sequenceNumber:i.highestListenSequenceNumber}))(d)))}).next(()=>G.waitFor(o))})}_i(e,t){e.createObjectStore("collectionParents",{keyPath:VO});const r=t.store("collectionParents"),i=new Yy,o=l=>{if(i.add(l)){const c=l.lastSegment(),d=l.popLast();return r.put({collectionId:c,parent:un(d)})}};return t.store("remoteDocuments").J({H:!0},(l,c)=>{const d=new Je(l);return o(d.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,c,d],p)=>{const m=Wr(c);return o(m.popLast())}))}ai(e){const t=e.store("targets");return t.J((r,i)=>{const o=Gu(i),l=q0(this.serializer,o);return t.put(l)})}ui(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,l)=>{const c=t.store("remoteDocumentsV14"),d=function(y){return y.document?new he(Je.fromString(y.document.name).popFirst(5)):y.noDocument?he.fromSegments(y.noDocument.path):y.unknownDocument?he.fromSegments(y.unknownDocument.path):ye()}(l).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(p))}).next(()=>G.waitFor(i))}ci(e,t){const r=t.store("mutations"),i=tx(this.serializer),o=new Xy(Wf.ei,this.serializer.ht);return r.U().next(l=>{const c=new Map;return l.forEach(d=>{var p;let m=(p=c.get(d.userId))!==null&&p!==void 0?p:Ne();Io(this.serializer,d).keys().forEach(y=>m=m.add(y)),c.set(d.userId,m)}),G.forEach(c,(d,p)=>{const m=new on(p),y=Gf.Pt(this.serializer,m),_=o.getIndexManager(m),I=qf.Pt(m,this.serializer,_,o.referenceDelegate);return new nx(i,I,y,_).recalculateAndSaveOverlaysForDocumentKeys(new Lg(t,Pn.oe),d).next()})})}}function QI(n){n.createObjectStore("targetDocuments",{keyPath:NO}).createIndex("documentTargetsIndex",OO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kO,{unique:!0}),n.createObjectStore("targetGlobal")}const eg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zy{constructor(e,t,r,i,o,l,c,d,p,m,y=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.li=o,this.window=l,this.document=c,this.hi=p,this.Pi=m,this.Ti=y,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.di=null,this.Ei=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=_=>Promise.resolve(),!Zy.p())throw new de(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QV(this,i),this.Vi=t+"main",this.serializer=new G0(d),this.mi=new Is(this.Vi,this.Ti,new aM(this.serializer)),this.Wr=new FV,this.Gr=new WV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tx(this.serializer),this.jr=new LV,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,m===!1&&St("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(te.FAILED_PRECONDITION,eg);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new Pn(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.B(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(t=>{t||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(t=>this.isPrimary&&!t?this.vi(e).next(()=>!1):!!t&&this.Ci(e).next(()=>!0))).catch(e=>{if(Ms(e))return ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return Vu(e).get("owner").next(t=>G.resolve(this.Fi(t)))}Mi(e){return gh(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Ft(t,"clientMetadata");return r.U().next(i=>{const o=this.Ni(i,18e5),l=i.filter(c=>o.indexOf(c)===-1);return G.forEach(l,c=>r.delete(c.clientId)).next(()=>l)})}).catch(()=>[]);if(this.fi)for(const t of e)this.fi.removeItem(this.Bi(t.clientId))}}wi(){this.Ei=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?G.resolve(!0):Vu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Li(t.ownerId)){if(this.Fi(t)&&this.networkEnabled)return!0;if(!this.Fi(t)){if(!t.allowTabSynchronization)throw new de(te.FAILED_PRECONDITION,eg);return!1}}return!(!this.networkEnabled||!this.inForeground)||gh(e).U().next(r=>this.Ni(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(o||l&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ie("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Ur=!1,this.ki(),this.Ei&&(this.Ei.cancel(),this.Ei=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Lg(e,Pn.oe);return this.vi(t).next(()=>this.Mi(t))}),this.mi.close(),this.Ki()}Ni(e,t){return e.filter(r=>this.Oi(r.updateTimeMs,t)&&!this.Li(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>gh(e).U().next(t=>this.Ni(t,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,t){return qf.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qV(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return Gf.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,t,r){ie("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=function(d){return d===17?qO:d===16?GO:d===15?By:d===14?t0:d===13?e0:d===12?$O:d===11?ZS:void ye()}(this.Ti);let l;return this.mi.runTransaction(e,i,o,c=>(l=new Lg(c,this.$r?this.$r.next():Pn.oe),t==="readwrite-primary"?this.bi(l).next(d=>!!d||this.Di(l)).next(d=>{if(!d)throw St(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new de(te.FAILED_PRECONDITION,KS);return r(l)}).next(d=>this.Ci(l).next(()=>d)):this.Ui(l).next(()=>r(l)))).then(c=>(l.raiseOnCommittedEvent(),c))}Ui(e){return Vu(e).get("owner").next(t=>{if(t!==null&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Li(t.ownerId)&&!this.Fi(t)&&!(this.Pi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(te.FAILED_PRECONDITION,eg)})}Ci(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(e).put("owner",t)}static p(){return Is.p()}vi(e){const t=Vu(e);return t.get("owner").next(r=>this.Fi(r)?(ie("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Oi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(St(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.di=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.di),this.inForeground=this.document.visibilityState==="visible")}qi(){this.di&&(this.document.removeEventListener("visibilitychange",this.di),this.di=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const t=/(?:Version|Mobile)\/1[456]/;Yb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Li(e){var t;try{const r=((t=this.fi)===null||t===void 0?void 0:t.getItem(this.Bi(e)))!==null;return ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return St("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Bi(this.clientId),String(Date.now()))}catch(e){St("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Bi(this.clientId))}catch{}}Bi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vu(n){return Ft(n,"owner")}function gh(n){return Ft(n,"clientMetadata")}function rx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Ne(),i=Ne();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new e_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Yb()?8:YS(Mt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Xi(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new lM;return this.ts(e,t,l).next(c=>{if(o.result=c,this.Hi)return this.ns(e,t,l,c.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(ja()<=Me.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),G.resolve()):(ja()<=Me.DEBUG&&ie("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(ja()<=Me.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(t))):G.resolve())}Xi(e,t){if(II(t))return G.resolve(null);let r=jn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Zh(t,null,"F"),r=jn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ne(...o);return this.Zi.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.rs(t,c);return this.ss(t,p,l,d.readTime)?this.Xi(e,Zh(t,null,"F")):this.os(e,p,t,d)}))})))}es(e,t,r,i){return II(t)||i.isEqual(be.min())?G.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const l=this.rs(t,o);return this.ss(t,l,r,i)?G.resolve(null):(ja()<=Me.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),za(t)),this.os(e,l,t,WS(i,-1)).next(c=>c))})}rs(e,t){let r=new rt(_0(e));return t.forEach((i,o)=>{Mc(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return ja()<=Me.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",za(t)),this.Zi.getDocumentsMatchingQuery(e,t,Gn.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new at(Pe),this.cs=new Di(o=>Lo(o),Vc),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nx(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function sx(n,e,t,r){return new uM(n,e,t,r)}async function ox(n,e){const t=ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let d=Ne();for(const p of i){l.push(p.batchId);for(const m of p.mutations)d=d.add(m.key)}for(const p of o){c.push(p.batchId);for(const m of p.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next(p=>({Ts:p,removedBatchIds:l,addedBatchIds:c}))})})}function cM(n,e){const t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(c,d,p,m){const y=p.batch,_=y.keys();let I=G.resolve();return _.forEach(b=>{I=I.next(()=>m.getEntry(d,b)).next(R=>{const S=p.docVersions.get(b);Ee(S!==null),R.version.compareTo(S)<0&&(y.applyToRemoteDocument(R,p),R.isValidDocument()&&(R.setReadTime(p.commitVersion),m.addEntry(R)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Ne();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ax(n){const e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function dM(n,e){const t=ve(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const c=[];e.targetChanges.forEach((m,y)=>{const _=i.get(y);if(!_)return;c.push(t.Gr.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.Gr.addMatchingKeys(o,m.addedDocuments,y)));let I=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(xt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),i=i.insert(y,I),function(R,S,M){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(_,I,m)&&c.push(t.Gr.updateTargetData(o,I))});let d=Bn(),p=Ne();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(hM(o,l,e.documentUpdates).next(m=>{d=m.Is,p=m.ds})),!r.isEqual(be.min())){const m=t.Gr.getLastRemoteSnapshotVersion(o).next(y=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return G.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(t.us=i,o))}function hM(n,e,t){let r=Ne(),i=Ne();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Bn();return t.forEach((c,d)=>{const p=o.get(c);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(be.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):ie("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),{Is:l,ds:i}})}function fM(n,e){const t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function af(n,e){const t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,G.resolve(i)):t.Gr.allocateTargetId(r).next(l=>(i=new bi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function pl(n,e,t){const r=ve(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Ms(l))throw l;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function Jg(n,e,t){const r=ve(n);let i=be.min(),o=Ne();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,m){const y=ve(d),_=y.cs.get(m);return _!==void 0?G.resolve(y.us.get(_)):y.Gr.getTargetData(p,m)}(r,l,jn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(l,c.targetId).next(d=>{o=d})}).next(()=>r._s.getDocumentsMatchingQuery(l,e,t?i:be.min(),t?o:Ne())).next(c=>(cx(r,y0(e),c),{documents:c,Es:o})))}function lx(n,e){const t=ve(n),r=ve(t.Gr),i=t.us.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ut(o,e).next(l=>l?l.target:null))}function ux(n,e){const t=ve(n),r=t.ls.get(e)||be.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hs.getAllFromCollectionGroup(i,e,WS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(cx(t,e,i),i))}function cx(n,e,t){let r=n.ls.get(e)||be.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}function YI(n,e){return`firestore_clients_${n}_${e}`}function JI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tg(n,e){return`firestore_targets_${n}_${e}`}class lf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static fs(e,t,r){const i=JSON.parse(r);let o,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(o=new de(i.error.code,i.error.message))),l?new lf(e,t,i.state,o):(St("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fs(e,t){const r=JSON.parse(t);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new de(r.error.code,r.error.message))),o?new Zu(e,r.state,i):(St("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=zy();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=JS(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new uf(e,o):(St("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class t_{constructor(e,t){this.clientId=e,this.onlineState=t}static fs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new t_(t.clientId,t.onlineState):(St("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xg{constructor(){this.activeTargetIds=zy()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ng{constructor(e,t,r,i,o){this.window=e,this.li=t,this.persistenceKey=r,this.ws=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new at(Pe),this.started=!1,this.vs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Cs=YI(this.persistenceKey,this.ws),this.Fs=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new Xg),this.Ms=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.xs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Os=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ns=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.Bs=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.ws)continue;const i=this.getItem(YI(this.persistenceKey,r));if(i){const o=uf.fs(r,i);o&&(this.Ds=this.Ds.insert(o.clientId,o))}}this.Ls();const t=this.storage.getItem(this.Ns);if(t){const r=this.ks(t);r&&this.qs(r)}for(const r of this.vs)this.bs(r);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let t=!1;return this.Ds.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,t,r){this.Ks(e,t,r),this.$s(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(tg(this.persistenceKey,e));if(i){const o=Zu.fs(e,i);o&&(r=o.state)}}return t&&this.Us.ps(e),this.Ls(),r}removeLocalQueryTarget(e){this.Us.ys(e),this.Ls()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ws(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.$s(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ie("SharedClientState","READ",e,t),t}setItem(e,t){ie("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const t=e;if(t.storageArea===this.storage){if(ie("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Cs)return void St("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ms.test(t.key)){if(t.newValue==null){const r=this.js(t.key);return this.Hs(r,null)}{const r=this.Js(t.key,t.newValue);if(r)return this.Hs(r.clientId,r)}}else if(this.xs.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(this.Os.test(t.key)){if(t.newValue!==null){const r=this.Xs(t.key,t.newValue);if(r)return this.eo(r)}}else if(t.key===this.Ns){if(t.newValue!==null){const r=this.ks(t.newValue);if(r)return this.qs(r)}}else if(t.key===this.Fs){const r=function(o){let l=Pn.oe;if(o!=null)try{const c=JSON.parse(o);Ee(typeof c=="number"),l=c}catch(c){St("SharedClientState","Failed to read sequence number from WebStorage",c)}return l}(t.newValue);r!==Pn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Bs){const r=this.no(t.newValue);await Promise.all(r.map(i=>this.syncEngine.ro(i)))}}}else this.vs.push(t)})}}get Us(){return this.Ds.get(this.ws)}Ls(){this.setItem(this.Cs,this.Us.gs())}Ks(e,t,r){const i=new lf(this.currentUser,e,t,r),o=JI(this.persistenceKey,this.currentUser,e);this.setItem(o,i.gs())}$s(e){const t=JI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Gs(e){const t={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(t))}Ws(e,t,r){const i=tg(this.persistenceKey,e),o=new Zu(e,t,r);this.setItem(i,o.gs())}zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Bs,t)}js(e){const t=this.Ms.exec(e);return t?t[1]:null}Js(e,t){const r=this.js(e);return uf.fs(r,t)}Ys(e,t){const r=this.xs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return lf.fs(new on(o),i,t)}Xs(e,t){const r=this.Os.exec(e),i=Number(r[1]);return Zu.fs(i,t)}ks(e){return t_.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,t){const r=t?this.Ds.insert(e,t):this.Ds.remove(e),i=this.Qs(this.Ds),o=this.Qs(r),l=[],c=[];return o.forEach(d=>{i.has(d)||l.push(d)}),i.forEach(d=>{o.has(d)||c.push(d)}),this.syncEngine.oo(l,c).then(()=>{this.Ds=r})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let t=zy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class dx{constructor(){this._o=new Xg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Xg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function rg(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class yM extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,l){const c=rg(),d=this.No(t,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(p,o,l),this.Lo(t,d,p,i).then(m=>(ie("RestConnection",`Received RPC '${t}' ${c}: `,m),m),m=>{throw ol("RestConnection",`RPC '${t}' ${c} failed with error: `,m,"url: ",d,"request:",i),m})}ko(t,r,i,o,l,c){return this.Oo(t,r,i,o,l)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>t[l]=o),i&&i.headers.forEach((o,l)=>t[l]=o)}No(t,r){const i=mM[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){const o=rg();return new Promise((l,c)=>{const d=new BS;d.setWithCredentials(!0),d.listenOnce(US.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ah.NO_ERROR:const m=d.getResponseJson();ie(rn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Ah.TIMEOUT:ie(rn,`RPC '${e}' ${o} timed out`),c(new de(te.DEADLINE_EXCEEDED,"Request time out"));break;case Ah.HTTP_ERROR:const y=d.getStatus();if(ie(rn,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const b=function(S){const M=S.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(M)>=0?M:te.UNKNOWN}(I.status);c(new de(b,I.message))}else c(new de(te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new de(te.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ie(rn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);ie(rn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",p,r,15)})}qo(e,t,r){const i=rg(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=$S(),c=zS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Bo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");ie(rn,`Creating RPC '${e}' stream ${i}: ${m}`,d);const y=l.createWebChannel(m,d);let _=!1,I=!1;const b=new gM({Eo:S=>{I?ie(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(ie(rn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),ie(rn,`RPC '${e}' stream ${i} sending:`,S),y.send(S))},Ao:()=>y.close()}),R=(S,M,V)=>{S.listen(M,$=>{try{V($)}catch(H){setTimeout(()=>{throw H},0)}})};return R(y,ju.EventType.OPEN,()=>{I||(ie(rn,`RPC '${e}' stream ${i} transport opened.`),b.So())}),R(y,ju.EventType.CLOSE,()=>{I||(I=!0,ie(rn,`RPC '${e}' stream ${i} transport closed`),b.Do())}),R(y,ju.EventType.ERROR,S=>{I||(I=!0,ol(rn,`RPC '${e}' stream ${i} transport errored:`,S),b.Do(new de(te.UNAVAILABLE,"The operation could not be completed")))}),R(y,ju.EventType.MESSAGE,S=>{var M;if(!I){const V=S.data[0];Ee(!!V);const $=V,H=($==null?void 0:$.error)||((M=$[0])===null||M===void 0?void 0:M.error);if(H){ie(rn,`RPC '${e}' stream ${i} received error:`,H);const X=H.status;let J=function(P){const N=Pt[P];if(N!==void 0)return C0(N)}(X),D=H.message;J===void 0&&(J=te.INTERNAL,D="Unknown error status: "+X+" with message "+H.message),I=!0,b.Do(new de(J,D)),y.close()}else ie(rn,`RPC '${e}' stream ${i} received:`,V),b.vo(V)}}),R(c,jS.STAT_EVENT,S=>{S.stat===Vg.PROXY?ie(rn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Vg.NOPROXY&&ie(rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.bo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(){return typeof window<"u"?window:null}function Mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n){return new xV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t,r,i,o,l,c,d){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new fx(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(St(t.toString()),St("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new de(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _M extends px{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=PV(this.serializer,e),r=function(o){if(!("targetChange"in o))return be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?be.min():l.readTime?vn(l.readTime):be.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=Wg(this.serializer),t.addTarget=function(o,l){let c;const d=l.target;if(c=Jh(d)?{documents:F0(o,d)}:{query:B0(o,d).ct},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=N0(o,l.resumeToken);const p=Gg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(be.min())>0){c.readTime=fl(o,l.snapshotVersion.toTimestamp());const p=Gg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=DV(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.c_(t)}}class vM extends px{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=CV(e.writeResults,e.commitTime),r=vn(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=Wg(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tf(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Oo(e,qg(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(te.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.ko(e,qg(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(te.UNKNOWN,l.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class EM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(St(t),this.C_=!1):ie("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(l=>{r.enqueueAndForget(async()=>{Go(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=ve(d);p.k_.add(4),await Bc(p),p.K_.set("Unknown"),p.k_.delete(4),await Kf(p)}(this))})}),this.K_=new EM(r,i)}}async function Kf(n){if(Go(n))for(const e of n.q_)await e(!0)}async function Bc(n){for(const e of n.q_)await e(!1)}function Qf(n,e){const t=ve(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),i_(t)?r_(t):Cl(t).s_()&&n_(t,e))}function ml(n,e){const t=ve(n),r=Cl(t);t.L_.delete(e),r.s_()&&mx(t,e),t.L_.size===0&&(r.s_()?r.a_():Go(t)&&t.K_.set("Unknown"))}function n_(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cl(n).V_(e)}function mx(n,e){n.U_.xe(e),Cl(n).m_(e)}function r_(n){n.U_=new IV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Cl(n).start(),n.K_.F_()}function i_(n){return Go(n)&&!Cl(n).i_()&&n.L_.size>0}function Go(n){return ve(n).k_.size===0}function gx(n){n.U_=void 0}async function TM(n){n.K_.set("Online")}async function bM(n){n.L_.forEach((e,t)=>{n_(n,e)})}async function SM(n,e){gx(n),i_(n)?(n.K_.O_(e),r_(n)):n.K_.set("Unknown")}async function xM(n,e,t){if(n.K_.set("Online"),e instanceof k0&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.L_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.L_.delete(c),i.U_.removeTarget(c))}(n,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cf(n,r)}else if(e instanceof Vh?n.U_.$e(e):e instanceof D0?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(be.min()))try{const r=await ax(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.U_.it(l);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.L_.get(p);m&&o.L_.set(p,m.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,p)=>{const m=o.L_.get(d);if(!m)return;o.L_.set(d,m.withResumeToken(xt.EMPTY_BYTE_STRING,m.snapshotVersion)),mx(o,d);const y=new bi(m.target,d,p,m.sequenceNumber);n_(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),await cf(n,r)}}async function cf(n,e,t){if(!Ms(e))throw e;n.k_.add(1),await Bc(n),n.K_.set("Offline"),t||(t=()=>ax(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Kf(n)})}function yx(n,e){return e().catch(t=>cf(n,t,e))}async function Pl(n){const e=ve(n),t=Ds(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;RM(e);)try{const i=await fM(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,AM(e,i)}catch(i){await cf(e,i)}_x(e)&&vx(e)}function RM(n){return Go(n)&&n.B_.length<10}function AM(n,e){n.B_.push(e);const t=Ds(n);t.s_()&&t.f_&&t.g_(e.mutations)}function _x(n){return Go(n)&&!Ds(n).i_()&&n.B_.length>0}function vx(n){Ds(n).start()}async function PM(n){Ds(n).w_()}async function CM(n){const e=Ds(n);for(const t of n.B_)e.g_(t.mutations)}async function DM(n,e,t){const r=n.B_.shift(),i=qy.from(r,e,t);await yx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Pl(n)}async function kM(n,e){e&&Ds(n).f_&&await async function(r,i){if(function(l){return vV(l)&&l!==te.ABORTED}(i.code)){const o=r.B_.shift();Ds(r).__(),await yx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Pl(r)}}(n,e),_x(n)&&vx(n)}async function ZI(n,e){const t=ve(n);t.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=Go(t);t.k_.add(3),await Bc(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Kf(t)}async function Zg(n,e){const t=ve(n);e?(t.k_.delete(2),await Kf(t)):e||(t.k_.add(2),await Bc(t),t.K_.set("Unknown"))}function Cl(n){return n.W_||(n.W_=function(t,r,i){const o=ve(t);return o.b_(),new _M(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:TM.bind(null,n),mo:bM.bind(null,n),po:SM.bind(null,n),R_:xM.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),i_(n)?r_(n):n.K_.set("Unknown")):(await n.W_.stop(),gx(n))})),n.W_}function Ds(n){return n.G_||(n.G_=function(t,r,i){const o=ve(t);return o.b_(),new vM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:PM.bind(null,n),po:kM.bind(null,n),p_:CM.bind(null,n),y_:DM.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Pl(n)):(await n.G_.stop(),n.B_.length>0&&(ie("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new s_(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o_(n,e){if(St("AsyncQueue",`${e}: ${n}`),Ms(n))return new de(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=zu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.z_=new at(he.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ye():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class gl{constructor(e,t,r,i,o,l,c,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new gl(e,t,Qa.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class OM{constructor(){this.queries=tT(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const i=ve(t),o=i.queries;i.queries=tT(),o.forEach((l,c)=>{for(const d of c.J_)d.onError(r)})})(this,new de(te.ABORTED,"Firestore shutting down"))}}function tT(){return new Di(n=>g0(n),Uf)}async function VM(n,e){const t=ve(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new NM,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await t.onListen(i,!0);break;case 1:o.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=o_(l,`Initialization of query '${za(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&a_(t)}async function MM(n,e){const t=ve(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.J_.indexOf(e);l>=0&&(o.J_.splice(l,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function LM(n,e){const t=ve(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.J_)c.ta(i)&&(r=!0);l.H_=i}}r&&a_(t)}function FM(n,e,t){const r=ve(n),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(t);r.queries.delete(e)}function a_(n){n.X_.forEach(e=>{e.next()})}var ey,nT;(nT=ey||(ey={})).na="default",nT.Cache="cache";class BM{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.key=e}}class Ex{constructor(e){this.key=e}}class UM{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ne(),this.mutatedKeys=Ne(),this.Va=_0(e),this.ma=new Qa(this.Va)}get fa(){return this.Ea}ga(e,t){const r=t?t.pa:new eT,i=t?t.ma:this.ma;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const _=i.get(m),I=Mc(this.query,y)?y:null,b=!!_&&this.mutatedKeys.has(_.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let S=!1;_&&I?_.data.isEqual(I.data)?b!==R&&(r.track({type:3,doc:I}),S=!0):this.ya(_,I)||(r.track({type:2,doc:I}),S=!0,(d&&this.Va(I,d)>0||p&&this.Va(I,p)<0)&&(c=!0)):!_&&I?(r.track({type:0,doc:I}),S=!0):_&&!I&&(r.track({type:1,doc:_}),S=!0,(d||p)&&(c=!0)),S&&(I?(l=l.add(I),o=R?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{ma:l,pa:r,ss:c,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const l=e.pa.j_();l.sort((m,y)=>function(I,b){const R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return R(I)-R(b)}(m.type,y.type)||this.Va(m.doc,y.doc)),this.wa(r),i=i!=null&&i;const c=t&&!i?this.Sa():[],d=this.Ra.size===0&&this.current&&!i?1:0,p=d!==this.Aa;return this.Aa=d,l.length!==0||p?{snapshot:new gl(this.query,e.ma,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new eT,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ne(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new Ex(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new wx(r))}),t}va(e){this.Ea=e.Es,this.Ra=Ne();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return gl.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class jM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class zM{constructor(e){this.key=e,this.Fa=!1}}class $M{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ma={},this.xa=new Di(c=>g0(c),Uf),this.Oa=new Map,this.Na=new Set,this.Ba=new at(he.comparator),this.La=new Map,this.ka=new Jy,this.qa={},this.Qa=new Map,this.Ka=Uo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function GM(n,e,t=!0){const r=Yf(n);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await Ix(r,e,t,!0),i}async function qM(n,e){const t=Yf(n);await Ix(t,e,!0,!1)}async function Ix(n,e,t,r){const i=await af(n.localStore,jn(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await l_(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&Qf(n.remoteStore,i),c}async function l_(n,e,t,r,i){n.Ua=(y,_,I)=>async function(R,S,M,V){let $=S.view.ga(M);$.ss&&($=await Jg(R.localStore,S.query,!1).then(({documents:D})=>S.view.ga(D,$)));const H=V&&V.targetChanges.get(S.targetId),X=V&&V.targetMismatches.get(S.targetId)!=null,J=S.view.applyChanges($,R.isPrimaryClient,H,X);return ty(R,S.targetId,J.ba),J.snapshot}(n,y,_,I);const o=await Jg(n.localStore,e,!0),l=new UM(e,o.Es),c=l.ga(o.documents),d=Fc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,d);ty(n,t,p.ba);const m=new jM(e,t,l);return n.xa.set(e,m),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),p.snapshot}async function WM(n,e,t){const r=ve(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(l=>!Uf(l,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ml(r.remoteStore,i.targetId),yl(r,i.targetId)}).catch(Vs)):(yl(r,i.targetId),await pl(r.localStore,i.targetId,!0))}async function HM(n,e){const t=ve(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ml(t.remoteStore,r.targetId))}async function KM(n,e,t){const r=h_(n);try{const i=await function(l,c){const d=ve(l),p=yt.now(),m=c.reduce((I,b)=>I.add(b.key),Ne());let y,_;return d.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=Bn(),R=Ne();return d.hs.getEntries(I,m).next(S=>{b=S,b.forEach((M,V)=>{V.isValidDocument()||(R=R.add(M))})}).next(()=>d.localDocuments.getOverlayedDocuments(I,b)).next(S=>{y=S;const M=[];for(const V of c){const $=yV(V,y.get(V.key).overlayedDocument);$!=null&&M.push(new ki(V.key,$,o0($.value.mapValue),_n.exists(!0)))}return d.mutationQueue.addMutationBatch(I,p,M,c)}).next(S=>{_=S;const M=S.applyToLocalDocumentSet(y,R);return d.documentOverlayCache.saveOverlays(I,S.batchId,M)})}).then(()=>({batchId:_.batchId,changes:w0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,d){let p=l.qa[l.currentUser.toKey()];p||(p=new at(Pe)),p=p.insert(c,d),l.qa[l.currentUser.toKey()]=p}(r,i.batchId,t),await Fs(r,i.changes),await Pl(r.remoteStore)}catch(i){const o=o_(i,"Failed to persist write");t.reject(o)}}async function Tx(n,e){const t=ve(n);try{const r=await dM(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.La.get(o);l&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Fa=!0:i.modifiedDocuments.size>0?Ee(l.Fa):i.removedDocuments.size>0&&(Ee(l.Fa),l.Fa=!1))}),await Fs(t,r,e)}catch(r){await Vs(r)}}function rT(n,e,t){const r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.xa.forEach((o,l)=>{const c=l.view.ea(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const d=ve(l);d.onlineState=c;let p=!1;d.queries.forEach((m,y)=>{for(const _ of y.J_)_.ea(c)&&(p=!0)}),p&&a_(d)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QM(n,e,t){const r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.La.get(e),o=i&&i.key;if(o){let l=new at(he.comparator);l=l.insert(o,Et.newNoDocument(o,be.min()));const c=Ne().add(o),d=new Lc(be.min(),new Map,new at(Pe),l,c);await Tx(r,d),r.Ba=r.Ba.remove(o),r.La.delete(e),d_(r)}else await pl(r.localStore,e,!1).then(()=>yl(r,e,t)).catch(Vs)}async function YM(n,e){const t=ve(n),r=e.batch.batchId;try{const i=await cM(t.localStore,e);c_(t,r,null),u_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Fs(t,i)}catch(i){await Vs(i)}}async function JM(n,e,t){const r=ve(n);try{const i=await function(l,c){const d=ve(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let m;return d.mutationQueue.lookupMutationBatch(p,c).next(y=>(Ee(y!==null),m=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m)).next(()=>d.localDocuments.getDocuments(p,m))})}(r.localStore,e);c_(r,e,t),u_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Fs(r,i)}catch(i){await Vs(i)}}function u_(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function c_(n,e,t){const r=ve(n);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function yl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||bx(n,r)})}function bx(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(ml(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),d_(n))}function ty(n,e,t){for(const r of t)r instanceof wx?(n.ka.addReference(r.key,e),XM(n,r)):r instanceof Ex?(ie("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||bx(n,r.key)):ye()}function XM(n,e){const t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(ie("SyncEngine","New document in limbo: "+t),n.Na.add(r),d_(n))}function d_(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new he(Je.fromString(e)),r=n.Ka.next();n.La.set(r,new zM(t)),n.Ba=n.Ba.insert(t,r),Qf(n.remoteStore,new bi(jn(Bf(t.path)),r,"TargetPurposeLimboResolution",Pn.oe))}}async function Fs(n,e,t){const r=ve(n),i=[],o=[],l=[];r.xa.isEmpty()||(r.xa.forEach((c,d)=>{l.push(r.Ua(d,e,t).then(p=>{var m;if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:(m=t==null?void 0:t.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){i.push(p);const y=e_.zi(d.targetId,p);o.push(y)}}))}),await Promise.all(l),r.Ma.R_(i),await async function(d,p){const m=ve(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>G.forEach(p,_=>G.forEach(_.Wi,I=>m.persistence.referenceDelegate.addReference(y,_.targetId,I)).next(()=>G.forEach(_.Gi,I=>m.persistence.referenceDelegate.removeReference(y,_.targetId,I)))))}catch(y){if(!Ms(y))throw y;ie("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const _=y.targetId;if(!y.fromCache){const I=m.us.get(_),b=I.snapshotVersion,R=I.withLastLimboFreeSnapshotVersion(b);m.us=m.us.insert(_,R)}}}(r.localStore,o))}async function ZM(n,e){const t=ve(n);if(!t.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=await ox(t.localStore,e);t.currentUser=e,function(o,l){o.Qa.forEach(c=>{c.forEach(d=>{d.reject(new de(te.CANCELLED,l))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fs(t,r.Ts)}}function e2(n,e){const t=ve(n),r=t.La.get(e);if(r&&r.Fa)return Ne().add(r.key);{let i=Ne();const o=t.Oa.get(e);if(!o)return i;for(const l of o){const c=t.xa.get(l);i=i.unionWith(c.view.fa)}return i}}async function t2(n,e){const t=ve(n),r=await Jg(t.localStore,e.query,!0),i=e.view.va(r);return t.isPrimaryClient&&ty(t,e.targetId,i.ba),i}async function n2(n,e){const t=ve(n);return ux(t.localStore,e).then(r=>Fs(t,r))}async function r2(n,e,t,r){const i=ve(n),o=await function(c,d){const p=ve(c),m=ve(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",y=>m.On(y,d).next(_=>_?p.localDocuments.getDocuments(y,_):G.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?await Pl(i.remoteStore):t==="acknowledged"||t==="rejected"?(c_(i,e,r||null),u_(i,e),function(c,d){ve(ve(c).mutationQueue).Bn(d)}(i.localStore,e)):ye(),await Fs(i,o)):ie("SyncEngine","Cannot apply mutation batch with id: "+e)}async function i2(n,e){const t=ve(n);if(Yf(t),h_(t),e===!0&&t.$a!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await iT(t,r.toArray());t.$a=!0,await Zg(t.remoteStore,!0);for(const o of i)Qf(t.remoteStore,o)}else if(e===!1&&t.$a!==!1){const r=[];let i=Promise.resolve();t.Oa.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(yl(t,l),pl(t.localStore,l,!0))),ml(t.remoteStore,l)}),await i,await iT(t,r),function(l){const c=ve(l);c.La.forEach((d,p)=>{ml(c.remoteStore,p)}),c.ka.wr(),c.La=new Map,c.Ba=new at(he.comparator)}(t),t.$a=!1,await Zg(t.remoteStore,!1)}}async function iT(n,e,t){const r=ve(n),i=[],o=[];for(const l of e){let c;const d=r.Oa.get(l);if(d&&d.length!==0){c=await af(r.localStore,jn(d[0]));for(const p of d){const m=r.xa.get(p),y=await t2(r,m);y.snapshot&&o.push(y.snapshot)}}else{const p=await lx(r.localStore,l);c=await af(r.localStore,p),await l_(r,Sx(p),l,!1,c.resumeToken)}i.push(c)}return r.Ma.R_(o),i}function Sx(n){return p0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function s2(n){return function(t){return ve(ve(t).persistence).$i()}(ve(n).localStore)}async function o2(n,e,t,r){const i=ve(n);if(i.$a)return void ie("SyncEngine","Ignoring unexpected query state notification.");const o=i.Oa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await ux(i.localStore,y0(o[0])),c=Lc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",xt.EMPTY_BYTE_STRING);await Fs(i,l,c);break}case"rejected":await pl(i.localStore,e,!0),yl(i,e,r);break;default:ye()}}async function a2(n,e,t){const r=Yf(n);if(r.$a){for(const i of e){if(r.Oa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ie("SyncEngine","Adding an already active target "+i);continue}const o=await lx(r.localStore,i),l=await af(r.localStore,o);await l_(r,Sx(o),l.targetId,!1,l.resumeToken),Qf(r.remoteStore,l)}for(const i of t)r.Oa.has(i)&&await pl(r.localStore,i,!1).then(()=>{ml(r.remoteStore,i),yl(r,i)}).catch(Vs)}}function Yf(n){const e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QM.bind(null,e),e.Ma.R_=LM.bind(null,e.eventManager),e.Ma.Wa=FM.bind(null,e.eventManager),e}function h_(n){const e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JM.bind(null,e),e}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return sx(this.persistence,new ix,e.initialUser,this.serializer)}ja(e){return new Xy(Wf.ei,this.serializer)}za(e){return new dx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class l2 extends yc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ee(this.persistence.referenceDelegate instanceof of);const r=this.persistence.referenceDelegate.garbageCollector;return new X0(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Xy(r=>of.ei(r,t),this.serializer)}}class u2 extends yc{constructor(e,t,r){super(),this.Za=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await h_(this.Za.syncEngine),await Pl(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return sx(this.persistence,new ix,e.initialUser,this.serializer)}Ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new X0(r,e.asyncQueue,t)}Ya(e,t){const r=new xO(t,this.persistence);return new SO(e.asyncQueue,r)}ja(e){const t=rx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Zy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hx(),Mh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new dx}}class c2 extends u2{constructor(e,t){super(e,t,!1),this.Za=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Za.syncEngine;this.sharedClientState instanceof ng&&(this.sharedClientState.syncEngine={io:r2.bind(null,t),so:o2.bind(null,t),oo:a2.bind(null,t),$i:s2.bind(null,t),ro:n2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Si(async r=>{await i2(this.Za.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}za(e){const t=hx();if(!ng.p(t))throw new de(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ng(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZM.bind(null,this.syncEngine),await Zg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OM}()}createDatastore(e){const t=Hf(e.databaseInfo.databaseId),r=function(o){return new yM(o)}(e.databaseInfo);return function(o,l,c,d){return new wM(o,l,c,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new IM(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>rT(this.syncEngine,t,0),function(){return XI.p()?new XI:new pM}())}createSyncEngine(e,t){return function(i,o,l,c,d,p,m){const y=new $M(i,o,l,c,d,p);return m&&(y.$a=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=ve(i);ie("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Bc(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}df.provider={build:()=>new df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):St("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=GS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ie("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ie("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=o_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ig(n,e){n.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ox(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function sT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await f2(n);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ZI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ZI(e.remoteStore,i)),n._onlineComponents=e}async function f2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await ig(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ol("Error using user provided cache. Falling back to memory cache: "+t),await ig(n,new yc)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await ig(n,new l2(void 0));return n._offlineComponents}async function xx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await sT(n,n._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await sT(n,new df))),n._onlineComponents}function p2(n){return xx(n).then(e=>e.syncEngine)}async function oT(n){const e=await xx(n),t=e.eventManager;return t.onListen=GM.bind(null,e.syncEngine),t.onUnlisten=WM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HM.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(n,e,t){if(!t)throw new de(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function m2(n,e,t,r){if(e===!0&&r===!0)throw new de(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lT(n){if(!he.isDocumentKey(n))throw new de(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uT(n){if(he.isDocumentKey(n))throw new de(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye()}function Ts(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(n);throw new de(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class f_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mO;switch(r.type){case"firstParty":return new _O(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=aT.get(t);r&&(ie("ComponentProvider","Removing Datastore"),aT.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class Dn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class bs extends Bs{constructor(e,t,r){super(e,t,Bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new he(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function dT(n,e,...t){if(n=Lt(n),Ax("collection","path",e),n instanceof f_){const r=Je.fromString(e,...t);return uT(r),new bs(n,null,r)}{if(!(n instanceof Dn||n instanceof bs))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return uT(r),new bs(n.firestore,null,r)}}function ny(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=GS.newId()),Ax("doc","path",e),n instanceof f_){const r=Je.fromString(e,...t);return lT(r),new Dn(n,null,new he(r))}{if(!(n instanceof Dn||n instanceof bs))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return lT(r),new Dn(n.firestore,n instanceof bs?n.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new fx(this,"async_queue_retry"),this.fu=()=>{const r=Mh();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Mh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=Mh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new Es;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ms(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw St("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=s_.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&ye()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function fT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class jo extends f_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hT(e),this._firestoreClient=void 0,await e}}}function g2(n,e,t){t||(t="(default)");const r=Df(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(sc(o,e))return i;throw new de(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new de(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function Px(n){if(n._terminated)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cx(n),n._firestoreClient}function Cx(n){var e,t,r;const i=n._freezeSettings(),o=function(c,d,p,m){return new HO(c,d,p,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Rx(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new h2(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(n._componentsProvider))}async function y2(n){ol("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();_2(n,df.provider,{build:t=>new c2(t,e.cacheSizeBytes)})}function _2(n,e,t){if((n=Ts(n,jo))._firestoreClient||n._terminated)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(te.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Cx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(xt.fromBase64String(e))}catch(t){throw new de(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _l(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^__.*__$/;class w2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new Al(e,this.data,t,this.fieldTransforms)}}class Dx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class y_{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new y_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return hf(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(kx(this.Mu)&&v2.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class E2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hf(e)}$u(e,t,r,i=!1){return new y_({Mu:e,methodName:t,Ku:r,path:gt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __(n){const e=n._freezeSettings(),t=Hf(n._databaseId);return new E2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function I2(n,e,t,r,i,o={}){const l=n.$u(o.merge||o.mergeFields?2:0,e,t,i);v_("Data must be an object, but it was:",l,r);const c=Nx(r,l);let d,p;if(o.merge)d=new Cn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const _=ry(e,y,t);if(!l.contains(_))throw new de(te.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Vx(m,_)||m.push(_)}d=new Cn(m),p=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,p=l.fieldTransforms;return new w2(new ln(c),d,p)}class Zf extends p_{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zf}}function T2(n,e,t,r){const i=n.$u(1,e,t);v_("Data must be an object, but it was:",i,r);const o=[],l=ln.empty();Ls(r,(d,p)=>{const m=w_(e,d,t);p=Lt(p);const y=i.Lu(m);if(p instanceof Zf)o.push(m);else{const _=Uc(p,y);_!=null&&(o.push(m),l.set(m,_))}});const c=new Cn(o);return new Dx(l,c,i.fieldTransforms)}function b2(n,e,t,r,i,o){const l=n.$u(1,e,t),c=[ry(e,r,t)],d=[i];if(o.length%2!=0)throw new de(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)c.push(ry(e,o[_])),d.push(o[_+1]);const p=[],m=ln.empty();for(let _=c.length-1;_>=0;--_)if(!Vx(p,c[_])){const I=c[_];let b=d[_];b=Lt(b);const R=l.Lu(I);if(b instanceof Zf)p.push(I);else{const S=Uc(b,R);S!=null&&(p.push(I),m.set(I,S))}}const y=new Cn(p);return new Dx(m,y,l.fieldTransforms)}function S2(n,e,t,r=!1){return Uc(t,n.$u(r?4:3,e))}function Uc(n,e){if(Ox(n=Lt(n)))return v_("Unsupported field value:",e,n),Nx(n,e);if(n instanceof p_)return function(r,i){if(!kx(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let d=Uc(c,i.ku(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=yt.fromDate(r);return{timestampValue:fl(i.serializer,o)}}if(r instanceof yt){const o=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fl(i.serializer,o)}}if(r instanceof m_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:N0(i.serializer,r._byteString)};if(r instanceof Dn){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.qu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ky(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof g_)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.qu("VectorValues must only contain numeric values.");return $y(c.serializer,d)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Jf(r)}`)}(n,e)}function Nx(n,e){const t={};return n0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(n,(r,i)=>{const o=Uc(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Ox(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof m_||n instanceof _l||n instanceof Dn||n instanceof p_||n instanceof g_)}function v_(n,e,t){if(!Ox(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Jf(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function ry(n,e,t){if((e=Lt(e))instanceof Xf)return e._internalPath;if(typeof e=="string")return w_(n,e);throw hf("Field path arguments must be of type string or ",n,!1,void 0,t)}const x2=new RegExp("[~\\*/\\[\\]]");function w_(n,e,t){if(e.search(x2)>=0)throw hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xf(...e.split("."))._internalPath}catch{throw hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hf(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${i}`),d+=")"),new de(te.INVALID_ARGUMENT,c+n+d)}function Vx(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new R2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class R2 extends Mx{data(){return super.data()}}function ep(n,e){return typeof e=="string"?w_(n,e):e instanceof Xf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E_{}class I_ extends E_{}function P2(n,e,...t){let r=[];e instanceof E_&&r.push(e),r=r.concat(t),function(o){const l=o.filter(d=>d instanceof T_).length,c=o.filter(d=>d instanceof tp).length;if(l>1||l>0&&c>0)throw new de(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class tp extends I_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tp(e,t,r)}_apply(e){const t=this._parse(e);return Lx(e._query,t),new Bs(e.firestore,e.converter,$g(e._query,t))}_parse(e){const t=__(e.firestore);return function(o,l,c,d,p,m,y){let _;if(p.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new de(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){mT(y,m);const I=[];for(const b of y)I.push(pT(d,o,b));_={arrayValue:{values:I}}}else _=pT(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||mT(y,m),_=S2(c,l,y,m==="in"||m==="not-in");return Le.create(p,m,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function C2(n,e,t){const r=e,i=ep("where",n);return tp._create(i,r,t)}class T_ extends E_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new T_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:nt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const d of c)Lx(l,d),l=$g(l,d)}(e._query,t),new Bs(e.firestore,e.converter,$g(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class b_ extends I_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new b_(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(o,l)}(e._query,this._field,this._direction);return new Bs(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new Rl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function D2(n,e="asc"){const t=e,r=ep("orderBy",n);return b_._create(r,t)}class S_ extends I_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new S_(e,t,r)}_apply(e){return new Bs(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}}function k2(n){return S_._create("limit",n,"F")}function pT(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new de(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m0(e)&&t.indexOf("/")!==-1)throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Je.fromString(t));if(!he.isDocumentKey(r))throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hc(n,new he(r))}if(t instanceof Dn)return hc(n,t._key);throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function mT(n,e){if(!Array.isArray(n)||n.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lx(n,e){const t=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class N2{convertValue(e,t="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ls(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>ht(l.doubleValue));return new g_(o)}convertGeoPoint(e){return new m_(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);Ee($0(r));const i=new Mo(r.get(1),r.get(3)),o=new he(r.popFirst(5));return i.isEqual(t)||St(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fx extends Mx{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ep("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Lh extends Fx{data(e={}){return super.data(e)}}class V2{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lh(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const d=new Lh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new Lh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,m=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:M2(c.type),doc:d,oldIndex:p,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function M2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}class Bx extends N2{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}function L2(n,e,t,...r){n=Ts(n,Dn);const i=Ts(n.firestore,jo),o=__(i);let l;return l=typeof(e=Lt(e))=="string"||e instanceof Xf?b2(o,"updateDoc",n._key,e,t,r):T2(o,"updateDoc",n._key,e),x_(i,[l.toMutation(n._key,_n.exists(!0))])}function F2(n){return x_(Ts(n.firestore,jo),[new $f(n._key,_n.none())])}function B2(n,e){const t=Ts(n.firestore,jo),r=ny(n),i=O2(n.converter,e);return x_(t,[I2(__(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}function U2(n,...e){var t,r,i;n=Lt(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||fT(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(fT(e[l])){const y=e[l];e[l]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[l+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[l+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let d,p,m;if(n instanceof Dn)p=Ts(n.firestore,jo),m=Bf(n._key.path),d={next:y=>{e[l]&&e[l](j2(p,n,y))},error:e[l+1],complete:e[l+2]};else{const y=Ts(n,Bs);p=Ts(y.firestore,jo),m=y._query;const _=new Bx(p);d={next:I=>{e[l]&&e[l](new V2(p,_,y,I))},error:e[l+1],complete:e[l+2]},A2(n._query)}return function(_,I,b,R){const S=new d2(R),M=new BM(I,S,b);return _.asyncQueue.enqueueAndForget(async()=>VM(await oT(_),M)),()=>{S.eu(),_.asyncQueue.enqueueAndForget(async()=>MM(await oT(_),M))}}(Px(p),m,c,d)}function x_(n,e){return function(r,i){const o=new Es;return r.asyncQueue.enqueueAndForget(async()=>KM(await p2(r),i,o)),o.promise}(Px(n),e)}function j2(n,e,t){const r=t.docs.get(e._key),i=new Bx(n);return new Fx(n,i,e._key,r,new qu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){xl=i})($o),No(new As("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new jo(new gO(r.getProvider("auth-internal")),new wO(r.getProvider("app-check-internal")),function(p,m){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new de(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(p.options.projectId,m)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),xi(oI,"4.7.6",e),xi(oI,"4.7.6","esm2017")})();const z2={apiKey:"AIzaSyCD_r-dJ1Vvz5NMLR0wwwIv4-rWb_wTN0I",authDomain:"task-management-app-9162b.firebaseapp.com",projectId:"task-management-app-9162b",storageBucket:"task-management-app-9162b.firebasestorage.app",messagingSenderId:"654355755906",appId:"1:654355755906:web:0ff43c179842f8918d559b",measurementId:"G-QZ4Z3G6HFN"},R_=eS(z2),A_=L1(R_);cO(R_);const Wu=g2(R_,{experimentalForceLongPolling:!0,cacheSizeBytes:5e7,ignoreUndefinedProperties:!0});y2(Wu).catch(n=>{n.code==="failed-precondition"?console.warn("Persistence failed to enable"):n.code==="unimplemented"&&console.warn("Persistence is not available in this browser")});const gT=n=>{let e;const t=new Set,r=(p,m)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const _=e;e=m??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(I=>I(e,_))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=n(r,i,c);return c},$2=n=>n?gT(n):gT,G2=n=>n;function q2(n,e=G2){const t=Ye.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Ye.useDebugValue(t),t}const yT=n=>{const e=$2(n),t=r=>q2(e,r);return Object.assign(t,e),t},Ux=n=>n?yT(n):yT,jc=Ux(n=>({user:null,loading:!0,setUser:e=>n({user:e}),setLoading:e=>n({loading:e})})),W2=()=>{const n=jc(r=>r.setUser),e=yy(),t=async()=>{var r;try{const i=new vi;i.setCustomParameters({prompt:"select_account"}),console.log("Initiating Google Sign In...");const o=await WN(A_,i);console.log("Sign in successful:",o.user.email),console.log("Authenticated User UID:",o.user.uid),n(o.user),e("/")}catch(i){i instanceof Ar?(console.error("Detailed sign-in error:",{code:i.code,message:i.message,credential:(r=i.customData)==null?void 0:r.credential}),i.code==="auth/popup-blocked"?alert("Please enable popups for this website to sign in with Google"):i.code==="auth/cancelled-popup-request"?console.log("Sign-in cancelled by user"):alert("Error signing in. Please try again.")):console.error("Unknown error:",i)}};return O.jsxs("div",{className:"min-h-screen flex",children:[O.jsx("div",{className:"w-1/2 flex items-center justify-center bg-white p-8",children:O.jsxs("div",{className:"max-w-md w-full",children:[O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"flex items-center justify-center mb-8",children:O.jsxs("div",{className:"text-4xl font-bold text-purple-600 flex items-center",children:[O.jsx("svg",{className:"w-8 h-8 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:O.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 14H5v-2h6v2zm8-4H5v-2h14v2zm0-4H5V7h14v2z"})}),"TaskBuddy"]})}),O.jsx("h2",{className:"text-xl text-gray-600 mb-8",children:"Streamline your workflow and track progress effortlessly with our all-in-one task management app."})]}),O.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[O.jsx("img",{className:"w-6 h-6 mr-2",src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo"}),"Continue with Google"]})]})}),O.jsx("div",{className:"w-1/2 bg-gray-50 p-8 flex items-center justify-center",children:O.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-6",children:[O.jsx("div",{className:"flex items-center justify-between mb-6",children:O.jsx("div",{className:"flex items-center space-x-2",children:O.jsx("span",{className:"text-lg font-semibold",children:"TaskBuddy"})})}),O.jsxs("div",{className:"space-y-4",children:[O.jsx("div",{className:"bg-purple-100 p-3 rounded-md",children:O.jsx("div",{className:"font-medium text-purple-800",children:"Todo (3)"})}),O.jsx("div",{className:"bg-blue-100 p-3 rounded-md",children:O.jsx("div",{className:"font-medium text-blue-800",children:"In Progress (3)"})}),O.jsx("div",{className:"bg-green-100 p-3 rounded-md",children:O.jsx("div",{className:"font-medium text-green-800",children:"Completed (3)"})})]})]})})]})},H2=({children:n})=>{const{user:e,loading:t}=jc();return t?O.jsx("div",{className:"min-h-screen flex items-center justify-center",children:O.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):e?O.jsx(O.Fragment,{children:n}):O.jsx(Fb,{to:"/login"})},P_=Ux((n,e)=>({tasks:[],loading:!1,error:null,filter:"all",viewMode:"list",searchQuery:"",unsubscribe:null,setViewMode:t=>n({viewMode:t}),setFilter:t=>n({filter:t}),setSearchQuery:t=>n({searchQuery:t}),fetchTasks:async t=>{const{unsubscribe:r}=e();r&&r(),n({loading:!0,error:null}),console.log("Fetching tasks for user ID:",t);try{const i=dT(Wu,"tasks"),o=P2(i,C2("userId","==",t),D2("createdAt","desc"),k2(100)),l=U2(o,c=>{const d=c.docs.map(p=>({id:p.id,...p.data()}));n({tasks:d,loading:!1})},c=>{console.error("Error fetching tasks:",c),n({error:`Failed to fetch tasks: ${c instanceof Error?c.message:String(c)}`,loading:!1})});n({unsubscribe:l})}catch(i){console.error("Error setting up task listener:",i),n({error:`Failed to set up task listener: ${i instanceof Error?i.message:String(i)}`,loading:!1})}},addTask:async t=>{n({loading:!0,error:null});try{const r=new Date().toISOString(),i=dT(Wu,"tasks"),o={...t,createdAt:r,updatedAt:r,activities:[]};await B2(i,o),n({loading:!1})}catch(r){console.error("Error adding task:",r),n({error:`Failed to add task: ${r instanceof Error?r.message:String(r)}`,loading:!1})}},updateTask:async(t,r)=>{n({loading:!0,error:null});try{const i=ny(Wu,"tasks",t),o={...r,updatedAt:new Date().toISOString()};await L2(i,o),n({loading:!1})}catch(i){console.error("Error updating task:",i),n({error:`Failed to update task: ${i instanceof Error?i.message:String(i)}`,loading:!1})}},deleteTask:async t=>{n({loading:!0,error:null});try{const r=ny(Wu,"tasks",t);await F2(r),n({loading:!1})}catch(r){console.error("Error deleting task:",r),n({error:`Failed to delete task: ${r instanceof Error?r.message:String(r)}`,loading:!1})}},moveTask:async(t,r)=>{const{updateTask:i}=e();await i(t,{category:r})},cleanup:()=>{const{unsubscribe:t}=e();t&&(t(),n({unsubscribe:null}))}}));var jx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_T=Ye.createContext&&Ye.createContext(jx),K2=["attr","size","title"];function Q2(n,e){if(n==null)return{};var t=Y2(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Y2(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function ff(){return ff=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ff.apply(this,arguments)}function vT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vT(Object(t),!0).forEach(function(r){J2(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function J2(n,e,t){return e=X2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function X2(n){var e=Z2(n,"string");return typeof e=="symbol"?e:e+""}function Z2(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zx(n){return n&&n.map((e,t)=>Ye.createElement(e.tag,pf({key:t},e.attr),zx(e.child)))}function $x(n){return e=>Ye.createElement(eL,ff({attr:pf({},n.attr)},e),zx(n.child))}function eL(n){var e=t=>{var{attr:r,size:i,title:o}=n,l=Q2(n,K2),c=i||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Ye.createElement("svg",ff({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:d,style:pf(pf({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&Ye.createElement("title",null,o),n.children)};return _T!==void 0?Ye.createElement(_T.Consumer,null,t=>e(t)):e(jx)}function tL(n){return $x({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function nL(n){return $x({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}const rL=()=>{const n=jc(l=>l.user),{viewMode:e,setViewMode:t,searchQuery:r,setSearchQuery:i}=P_(),o=async()=>{try{await xN(A_)}catch(l){console.error("Error signing out:",l)}};return O.jsx("header",{className:"bg-white shadow-sm",children:O.jsx("div",{className:"header-container",children:O.jsxs("div",{className:"flex-between",children:[O.jsxs("div",{className:"flex items-center",children:[O.jsx("h1",{className:"text-purple-600",children:"TaskBuddy"}),O.jsxs("div",{className:"header-nav",children:[O.jsx("button",{onClick:()=>t("list"),className:`px-3 py-2 rounded-md text-sm font-medium ${e==="list"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:"List View"}),O.jsx("button",{onClick:()=>t("board"),className:`px-3 py-2 rounded-md text-sm font-medium ${e==="board"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:"Board View"})]})]}),O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsx("div",{className:"search-container",children:O.jsxs("div",{className:"relative",children:[O.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:O.jsx(tL,{className:"h-4 w-4 text-gray-400"})}),O.jsx("input",{type:"text",placeholder:"Search tasks...",value:r,onChange:l=>i(l.target.value),className:"search-input"})]})}),n&&O.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[O.jsx("span",{className:"text-sm sm:text-base text-gray-700",children:n.email}),O.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Sign Out"})]})]})]})})})};function iL({title:n,titleId:e,...t},r){return L.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?L.createElement("title",{id:e},n):null,L.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const sg=L.forwardRef(iL);function sL({title:n,titleId:e,...t},r){return L.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?L.createElement("title",{id:e},n):null,L.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const og=L.forwardRef(sL),Gx=6048e5,oL=864e5,wT=Symbol.for("constructDateFrom");function ks(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&wT in n?n[wT](e):n instanceof Date?new n.constructor(e):new Date(e)}function Pr(n,e){return ks(e||n,n)}let aL={};function np(){return aL}function _c(n,e){var c,d,p,m;const t=np(),r=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((m=(p=t.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,i=Pr(n,e==null?void 0:e.in),o=i.getDay(),l=(o<r?7:0)+o-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function mf(n,e){return _c(n,{...e,weekStartsOn:1})}function qx(n,e){const t=Pr(n,e==null?void 0:e.in),r=t.getFullYear(),i=ks(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=mf(i),l=ks(t,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=mf(l);return t.getTime()>=o.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function ET(n){const e=Pr(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function lL(n,...e){const t=ks.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function IT(n,e){const t=Pr(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function uL(n,e,t){const[r,i]=lL(t==null?void 0:t.in,n,e),o=IT(r),l=IT(i),c=+o-ET(o),d=+l-ET(l);return Math.round((c-d)/oL)}function cL(n,e){const t=qx(n,e),r=ks(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),mf(r)}function dL(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function hL(n){return!(!dL(n)&&typeof n!="number"||isNaN(+Pr(n)))}function fL(n,e){const t=Pr(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const pL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mL=(n,e,t)=>{let r;const i=pL[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function ag(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const gL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_L={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vL={date:ag({formats:gL,defaultWidth:"full"}),time:ag({formats:yL,defaultWidth:"full"}),dateTime:ag({formats:_L,defaultWidth:"full"})},wL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},EL=(n,e,t,r)=>wL[n];function Mu(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,c=t!=null&&t.width?String(t.width):l;i=n.formattingValues[c]||n.formattingValues[l]}else{const l=n.defaultWidth,c=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const IL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},TL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},RL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},AL=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},PL={ordinalNumber:AL,era:Mu({values:IL,defaultWidth:"wide"}),quarter:Mu({values:TL,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Mu({values:bL,defaultWidth:"wide"}),day:Mu({values:SL,defaultWidth:"wide"}),dayPeriod:Mu({values:xL,defaultWidth:"wide",formattingValues:RL,defaultFormattingWidth:"wide"})};function Lu(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const l=o[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(c)?DL(c,y=>y.test(l)):CL(c,y=>y.test(l));let p;p=n.valueCallback?n.valueCallback(d):d,p=t.valueCallback?t.valueCallback(p):p;const m=e.slice(l.length);return{value:p,rest:m}}}function CL(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function DL(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function kL(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(i.length);return{value:l,rest:c}}}const NL=/^(\d+)(th|st|nd|rd)?/i,OL=/\d+/i,VL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ML={any:[/^b/i,/^(a|c)/i]},LL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FL={any:[/1/i,/2/i,/3/i,/4/i]},BL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$L={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qL={ordinalNumber:kL({matchPattern:NL,parsePattern:OL,valueCallback:n=>parseInt(n,10)}),era:Lu({matchPatterns:VL,defaultMatchWidth:"wide",parsePatterns:ML,defaultParseWidth:"any"}),quarter:Lu({matchPatterns:LL,defaultMatchWidth:"wide",parsePatterns:FL,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Lu({matchPatterns:BL,defaultMatchWidth:"wide",parsePatterns:UL,defaultParseWidth:"any"}),day:Lu({matchPatterns:jL,defaultMatchWidth:"wide",parsePatterns:zL,defaultParseWidth:"any"}),dayPeriod:Lu({matchPatterns:$L,defaultMatchWidth:"any",parsePatterns:GL,defaultParseWidth:"any"})},WL={code:"en-US",formatDistance:mL,formatLong:vL,formatRelative:EL,localize:PL,match:qL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function HL(n,e){const t=Pr(n,e==null?void 0:e.in);return uL(t,fL(t))+1}function KL(n,e){const t=Pr(n,e==null?void 0:e.in),r=+mf(t)-+cL(t);return Math.round(r/Gx)+1}function Wx(n,e){var m,y,_,I;const t=Pr(n,e==null?void 0:e.in),r=t.getFullYear(),i=np(),o=(e==null?void 0:e.firstWeekContainsDate)??((y=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((I=(_=i.locale)==null?void 0:_.options)==null?void 0:I.firstWeekContainsDate)??1,l=ks((e==null?void 0:e.in)||n,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const c=_c(l,e),d=ks((e==null?void 0:e.in)||n,0);d.setFullYear(r,0,o),d.setHours(0,0,0,0);const p=_c(d,e);return+t>=+c?r+1:+t>=+p?r:r-1}function QL(n,e){var c,d,p,m;const t=np(),r=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(p=t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,i=Wx(n,e),o=ks((e==null?void 0:e.in)||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),_c(o,e)}function YL(n,e){const t=Pr(n,e==null?void 0:e.in),r=+_c(t,e)-+QL(t,e);return Math.round(r/Gx)+1}function tt(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const os={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return tt(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):tt(t+1,2)},d(n,e){return tt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return tt(n.getHours()%12||12,e.length)},H(n,e){return tt(n.getHours(),e.length)},m(n,e){return tt(n.getMinutes(),e.length)},s(n,e){return tt(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return tt(i,e.length)}},Ua={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},TT={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return os.y(n,e)},Y:function(n,e,t,r){const i=Wx(n,r),o=i>0?i:1-i;if(e==="YY"){const l=o%100;return tt(l,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):tt(o,e.length)},R:function(n,e){const t=qx(n);return tt(t,e.length)},u:function(n,e){const t=n.getFullYear();return tt(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return tt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return tt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return os.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return tt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=YL(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):tt(i,e.length)},I:function(n,e,t){const r=KL(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):tt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):os.d(n,e)},D:function(n,e,t){const r=HL(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):tt(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return tt(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return tt(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return tt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ua.noon:r===0?i=Ua.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ua.evening:r>=12?i=Ua.afternoon:r>=4?i=Ua.morning:i=Ua.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return os.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):os.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):tt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):tt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):os.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):os.s(n,e)},S:function(n,e){return os.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ST(r);case"XXXX":case"XX":return vo(r);case"XXXXX":case"XXX":default:return vo(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return ST(r);case"xxxx":case"xx":return vo(r);case"xxxxx":case"xxx":default:return vo(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+bT(r,":");case"OOOO":default:return"GMT"+vo(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+bT(r,":");case"zzzz":default:return"GMT"+vo(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return tt(r,e.length)},T:function(n,e,t){return tt(+n,e.length)}};function bT(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+tt(o,2)}function ST(n,e){return n%60===0?(n>0?"-":"+")+tt(Math.abs(n)/60,2):vo(n,e)}function vo(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=tt(Math.trunc(r/60),2),o=tt(r%60,2);return t+i+e+o}const xT=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Hx=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},JL=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return xT(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",xT(r,e)).replace("{{time}}",Hx(i,e))},XL={p:Hx,P:JL},ZL=/^D+$/,eF=/^Y+$/,tF=["D","DD","YY","YYYY"];function nF(n){return ZL.test(n)}function rF(n){return eF.test(n)}function iF(n,e,t){const r=sF(n,e,t);if(console.warn(r),tF.includes(n))throw new RangeError(r)}function sF(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const oF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,aF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lF=/^'([^]*?)'?$/,uF=/''/g,cF=/[a-zA-Z]/;function ko(n,e,t){var m,y,_,I;const r=np(),i=r.locale??WL,o=r.firstWeekContainsDate??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,l=r.weekStartsOn??((I=(_=r.locale)==null?void 0:_.options)==null?void 0:I.weekStartsOn)??0,c=Pr(n,t==null?void 0:t.in);if(!hL(c))throw new RangeError("Invalid time value");let d=e.match(aF).map(b=>{const R=b[0];if(R==="p"||R==="P"){const S=XL[R];return S(b,i.formatLong)}return b}).join("").match(oF).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const R=b[0];if(R==="'")return{isToken:!1,value:dF(b)};if(TT[R])return{isToken:!0,value:b};if(R.match(cF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(d=i.localize.preprocessor(c,d));const p={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return d.map(b=>{if(!b.isToken)return b.value;const R=b.value;(rF(R)||nF(R))&&iF(R,e,String(n));const S=TT[R[0]];return S(c,R,i.localize,p)}).join("")}function dF(n){const e=n.match(lF);return e?e[1].replace(uF,"'"):n}function mn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var hF=typeof Symbol=="function"&&Symbol.observable||"@@observable",RT=hF,lg=()=>Math.random().toString(36).substring(7).split("").join("."),fF={INIT:`@@redux/INIT${lg()}`,REPLACE:`@@redux/REPLACE${lg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${lg()}`},AT=fF;function pF(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Kx(n,e,t){if(typeof n!="function")throw new Error(mn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(mn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(mn(1));return t(Kx)(n,e)}let r=n,i=e,o=new Map,l=o,c=0,d=!1;function p(){l===o&&(l=new Map,o.forEach((S,M)=>{l.set(M,S)}))}function m(){if(d)throw new Error(mn(3));return i}function y(S){if(typeof S!="function")throw new Error(mn(4));if(d)throw new Error(mn(5));let M=!0;p();const V=c++;return l.set(V,S),function(){if(M){if(d)throw new Error(mn(6));M=!1,p(),l.delete(V),o=null}}}function _(S){if(!pF(S))throw new Error(mn(7));if(typeof S.type>"u")throw new Error(mn(8));if(typeof S.type!="string")throw new Error(mn(17));if(d)throw new Error(mn(9));try{d=!0,i=r(i,S)}finally{d=!1}return(o=l).forEach(V=>{V()}),S}function I(S){if(typeof S!="function")throw new Error(mn(10));r=S,_({type:AT.REPLACE})}function b(){const S=y;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(mn(11));function V(){const H=M;H.next&&H.next(m())}return V(),{unsubscribe:S(V)}},[RT](){return this}}}return _({type:AT.INIT}),{dispatch:_,subscribe:y,getState:m,replaceReducer:I,[RT]:b}}function PT(n,e){return function(...t){return e(n.apply(this,t))}}function CT(n,e){if(typeof n=="function")return PT(n,e);if(typeof n!="object"||n===null)throw new Error(mn(16));const t={};for(const r in n){const i=n[r];typeof i=="function"&&(t[r]=PT(i,e))}return t}function Qx(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function mF(...n){return e=>(t,r)=>{const i=e(t,r);let o=()=>{throw new Error(mn(15))};const l={getState:i.getState,dispatch:(d,...p)=>o(d,...p)},c=n.map(d=>d(l));return o=Qx(...c)(i.dispatch),{...i,dispatch:o}}}var ug={exports:{}},cg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT;function gF(){if(DT)return cg;DT=1;var n=Sf();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue;return cg.useSyncExternalStoreWithSelector=function(d,p,m,y,_){var I=i(null);if(I.current===null){var b={hasValue:!1,value:null};I.current=b}else b=I.current;I=l(function(){function S(X){if(!M){if(M=!0,V=X,X=y(X),_!==void 0&&b.hasValue){var J=b.value;if(_(J,X))return $=J}return $=X}if(J=$,t(V,X))return J;var D=y(X);return _!==void 0&&_(J,D)?(V=X,J):(V=X,$=D)}var M=!1,V,$,H=m===void 0?null:m;return[function(){return S(p())},H===null?void 0:function(){return S(H())}]},[p,m,y,_]);var R=r(d,I[0],I[1]);return o(function(){b.hasValue=!0,b.value=R},[R]),c(R),R},cg}var kT;function yF(){return kT||(kT=1,ug.exports=gF()),ug.exports}yF();var _F=L.version.startsWith("19"),vF=Symbol.for(_F?"react.transitional.element":"react.element"),wF=Symbol.for("react.portal"),EF=Symbol.for("react.fragment"),IF=Symbol.for("react.strict_mode"),TF=Symbol.for("react.profiler"),bF=Symbol.for("react.consumer"),SF=Symbol.for("react.context"),Yx=Symbol.for("react.forward_ref"),xF=Symbol.for("react.suspense"),RF=Symbol.for("react.suspense_list"),C_=Symbol.for("react.memo"),AF=Symbol.for("react.lazy"),PF=Yx,CF=C_;function DF(n){if(typeof n=="object"&&n!==null){const{$$typeof:e}=n;switch(e){case vF:switch(n=n.type,n){case EF:case TF:case IF:case xF:case RF:return n;default:switch(n=n&&n.$$typeof,n){case SF:case Yx:case AF:case C_:return n;case bF:return n;default:return e}}case wF:return e}}}function kF(n){return DF(n)===C_}function NF(n,e,t,r,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:l}){let c=!1,d,p,m,y,_;function I(V,$){return d=V,p=$,m=n(d,p),y=e(r,p),_=t(m,y,p),c=!0,_}function b(){return m=n(d,p),e.dependsOnOwnProps&&(y=e(r,p)),_=t(m,y,p),_}function R(){return n.dependsOnOwnProps&&(m=n(d,p)),e.dependsOnOwnProps&&(y=e(r,p)),_=t(m,y,p),_}function S(){const V=n(d,p),$=!l(V,m);return m=V,$&&(_=t(m,y,p)),_}function M(V,$){const H=!o($,p),X=!i(V,d,$,p);return d=V,p=$,H&&X?b():H?R():X?S():_}return function($,H){return c?M($,H):I($,H)}}function OF(n,{initMapStateToProps:e,initMapDispatchToProps:t,initMergeProps:r,...i}){const o=e(n,i),l=t(n,i),c=r(n,i);return NF(o,l,c,n,i)}function VF(n,e){const t={};for(const r in n){const i=n[r];typeof i=="function"&&(t[r]=(...o)=>e(i(...o)))}return t}function iy(n){return function(t){const r=n(t);function i(){return r}return i.dependsOnOwnProps=!1,i}}function NT(n){return n.dependsOnOwnProps?!!n.dependsOnOwnProps:n.length!==1}function Jx(n,e){return function(r,{displayName:i}){const o=function(c,d){return o.dependsOnOwnProps?o.mapToProps(c,d):o.mapToProps(c,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(c,d){o.mapToProps=n,o.dependsOnOwnProps=NT(n);let p=o(c,d);return typeof p=="function"&&(o.mapToProps=p,o.dependsOnOwnProps=NT(p),p=o(c,d)),p},o}}function D_(n,e){return(t,r)=>{throw new Error(`Invalid value of type ${typeof n} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function MF(n){return n&&typeof n=="object"?iy(e=>VF(n,e)):n?typeof n=="function"?Jx(n):D_(n,"mapDispatchToProps"):iy(e=>({dispatch:e}))}function LF(n){return n?typeof n=="function"?Jx(n):D_(n,"mapStateToProps"):iy(()=>({}))}function FF(n,e,t){return{...t,...n,...e}}function BF(n){return function(t,{displayName:r,areMergedPropsEqual:i}){let o=!1,l;return function(d,p,m){const y=n(d,p,m);return o?i(y,l)||(l=y):(o=!0,l=y),l}}}function UF(n){return n?typeof n=="function"?BF(n):D_(n,"mergeProps"):()=>FF}function jF(n){n()}function zF(){let n=null,e=null;return{clear(){n=null,e=null},notify(){jF(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var OT={notify(){},get:()=>[]};function Xx(n,e){let t,r=OT,i=0,o=!1;function l(R){m();const S=r.subscribe(R);let M=!1;return()=>{M||(M=!0,S(),y())}}function c(){r.notify()}function d(){b.onStateChange&&b.onStateChange()}function p(){return o}function m(){i++,t||(t=e?e.addNestedSub(d):n.subscribe(d),r=zF())}function y(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=OT)}function _(){o||(o=!0,m())}function I(){o&&(o=!1,y())}const b={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:p,trySubscribe:_,tryUnsubscribe:I,getListeners:()=>r};return b}var $F=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GF=$F(),qF=()=>typeof navigator<"u"&&navigator.product==="ReactNative",WF=qF(),HF=()=>GF||WF?L.useLayoutEffect:L.useEffect,gf=HF();function VT(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function dg(n,e){if(VT(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!VT(n[t[i]],e[t[i]]))return!1;return!0}var KF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},QF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},YF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Zx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},JF={[PF]:YF,[CF]:Zx};function MT(n){return kF(n)?Zx:JF[n.$$typeof]||KF}var XF=Object.defineProperty,ZF=Object.getOwnPropertyNames,LT=Object.getOwnPropertySymbols,eB=Object.getOwnPropertyDescriptor,tB=Object.getPrototypeOf,FT=Object.prototype;function sy(n,e){if(typeof e!="string"){if(FT){const o=tB(e);o&&o!==FT&&sy(n,o)}let t=ZF(e);LT&&(t=t.concat(LT(e)));const r=MT(n),i=MT(e);for(let o=0;o<t.length;++o){const l=t[o];if(!QF[l]&&!(i&&i[l])&&!(r&&r[l])){const c=eB(e,l);try{XF(n,l,c)}catch{}}}}return n}var hg=Symbol.for("react-redux-context"),fg=typeof globalThis<"u"?globalThis:{};function nB(){if(!L.createContext)return{};const n=fg[hg]??(fg[hg]=new Map);let e=n.get(L.createContext);return e||(e=L.createContext(null),n.set(L.createContext,e)),e}var eR=nB(),rB=[null,null];function iB(n,e,t){gf(()=>n(...e),t)}function sB(n,e,t,r,i,o){n.current=r,t.current=!1,i.current&&(i.current=null,o())}function oB(n,e,t,r,i,o,l,c,d,p,m){if(!n)return()=>{};let y=!1,_=null;const I=()=>{if(y||!c.current)return;const R=e.getState();let S,M;try{S=r(R,i.current)}catch(V){M=V,_=V}M||(_=null),S===o.current?l.current||p():(o.current=S,d.current=S,l.current=!0,m())};return t.onStateChange=I,t.trySubscribe(),I(),()=>{if(y=!0,t.tryUnsubscribe(),t.onStateChange=null,_)throw _}}function aB(n,e){return n===e}function lB(n,e,t,{pure:r,areStatesEqual:i=aB,areOwnPropsEqual:o=dg,areStatePropsEqual:l=dg,areMergedPropsEqual:c=dg,forwardRef:d=!1,context:p=eR}={}){const m=p,y=LF(n),_=MF(e),I=UF(t),b=!!n;return S=>{const M=S.displayName||S.name||"Component",V=`Connect(${M})`,$={shouldHandleStateChanges:b,displayName:V,wrappedComponentName:M,WrappedComponent:S,initMapStateToProps:y,initMapDispatchToProps:_,initMergeProps:I,areStatesEqual:i,areStatePropsEqual:l,areOwnPropsEqual:o,areMergedPropsEqual:c};function H(D){const[A,P,N]=L.useMemo(()=>{const{reactReduxForwardedRef:Ct,...wn}=D;return[D.context,Ct,wn]},[D]),F=L.useMemo(()=>{let Ct=m;return A!=null&&A.Consumer,Ct},[A,m]),z=L.useContext(F),k=!!D.store&&!!D.store.getState&&!!D.store.dispatch,Ze=!!z&&!!z.store,He=k?D.store:z.store,It=Ze?z.getServerState:He.getState,Be=L.useMemo(()=>OF(He.dispatch,$),[He]),[le,Ie]=L.useMemo(()=>{if(!b)return rB;const Ct=Xx(He,k?void 0:z.subscription),wn=Ct.notifyNestedSubs.bind(Ct);return[Ct,wn]},[He,k,z]),Z=L.useMemo(()=>k?z:{...z,subscription:le},[k,z,le]),U=L.useRef(void 0),ee=L.useRef(N),fe=L.useRef(void 0),Ce=L.useRef(!1),De=L.useRef(!1),Oe=L.useRef(void 0);gf(()=>(De.current=!0,()=>{De.current=!1}),[]);const Ue=L.useMemo(()=>()=>fe.current&&N===ee.current?fe.current:Be(He.getState(),N),[He,N]),$e=L.useMemo(()=>wn=>le?oB(b,He,le,Be,ee,U,Ce,De,fe,Ie,wn):()=>{},[le]);iB(sB,[ee,U,Ce,N,fe,Ie]);let Ke;try{Ke=L.useSyncExternalStore($e,Ue,It?()=>Be(It(),N):Ue)}catch(Ct){throw Oe.current&&(Ct.message+=`
The error may be correlated with this previous error:
${Oe.current.stack}

`),Ct}gf(()=>{Oe.current=void 0,fe.current=void 0,U.current=Ke});const _t=L.useMemo(()=>L.createElement(S,{...Ke,ref:P}),[P,S,Ke]);return L.useMemo(()=>b?L.createElement(F.Provider,{value:Z},_t):_t,[F,_t,Z])}const J=L.memo(H);if(J.WrappedComponent=S,J.displayName=H.displayName=V,d){const A=L.forwardRef(function(N,F){return L.createElement(J,{...N,reactReduxForwardedRef:F})});return A.displayName=V,A.WrappedComponent=S,sy(A,S)}return sy(J,S)}}var tR=lB;function uB(n){const{children:e,context:t,serverState:r,store:i}=n,o=L.useMemo(()=>{const d=Xx(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=L.useMemo(()=>i.getState(),[i]);gf(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const c=t||eR;return L.createElement(c.Provider,{value:o},e)}var cB=uB;function dB(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function nR(n,e){var t=L.useState(function(){return{inputs:e,result:n()}})[0],r=L.useRef(!0),i=L.useRef(t),o=r.current||!!(e&&i.current.inputs&&dB(e,i.current.inputs)),l=o?i.current:{inputs:e,result:n()};return L.useEffect(function(){r.current=!1,i.current=l},[l]),l.result}function hB(n,e){return nR(function(){return n},e)}var qe=nR,Te=hB,fB="Invariant failed";function pB(n,e){throw new Error(fB)}var br=function(e){var t=e.top,r=e.right,i=e.bottom,o=e.left,l=r-o,c=i-t,d={top:t,right:r,bottom:i,left:o,width:l,height:c,x:o,y:t,center:{x:(r+o)/2,y:(i+t)/2}};return d},k_=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},BT=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},mB=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},pg={top:0,right:0,bottom:0,left:0},N_=function(e){var t=e.borderBox,r=e.margin,i=r===void 0?pg:r,o=e.border,l=o===void 0?pg:o,c=e.padding,d=c===void 0?pg:c,p=br(k_(t,i)),m=br(BT(t,l)),y=br(BT(m,d));return{marginBox:p,borderBox:br(t),paddingBox:m,contentBox:y,margin:i,border:l,padding:d}},tr=function(e){var t=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(t);return isNaN(i)&&pB(),i},gB=function(){return{x:window.pageXOffset,y:window.pageYOffset}},yf=function(e,t){var r=e.borderBox,i=e.border,o=e.margin,l=e.padding,c=mB(r,t);return N_({borderBox:c,border:i,margin:o,padding:l})},_f=function(e,t){return t===void 0&&(t=gB()),yf(e,t)},rR=function(e,t){var r={top:tr(t.marginTop),right:tr(t.marginRight),bottom:tr(t.marginBottom),left:tr(t.marginLeft)},i={top:tr(t.paddingTop),right:tr(t.paddingRight),bottom:tr(t.paddingBottom),left:tr(t.paddingLeft)},o={top:tr(t.borderTopWidth),right:tr(t.borderRightWidth),bottom:tr(t.borderBottomWidth),left:tr(t.borderLeftWidth)};return N_({borderBox:e,margin:r,padding:i,border:o})},iR=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return rR(t,r)},UT=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function yB(n,e){return!!(n===e||UT(n)&&UT(e))}function _B(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!yB(n[t],e[t]))return!1;return!0}function Gt(n,e){e===void 0&&(e=_B);var t=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var l=n.apply(this,i);return t={lastResult:l,lastArgs:i,lastThis:this},l}return r.clear=function(){t=null},r}var vc=function(e){var t=[],r=null,i=function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];t=c,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function vf(){return vf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vf.apply(null,arguments)}function sR(n,e){}sR.bind(null,"warn");sR.bind(null,"error");function Ss(){}function vB(n,e){return{...n,...e}}function rr(n,e,t){const r=e.map(i=>{const o=vB(t,i.options);return n.addEventListener(i.eventName,i.fn,o),function(){n.removeEventListener(i.eventName,i.fn,o)}});return function(){r.forEach(o=>{o()})}}const wB="Invariant failed";class wf extends Error{}wf.prototype.toString=function(){return this.message};function ue(n,e){throw new wf(wB)}class EB extends Ye.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Ss,this.onWindowError=t=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),t.error instanceof wf&&t.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=t=>{this.callbacks=t}}componentDidMount(){this.unbind=rr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof wf){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const IB=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ef=n=>n+1,TB=n=>`
  You have lifted an item in position ${Ef(n.source.index)}
`,oR=(n,e)=>{const t=n.droppableId===e.droppableId,r=Ef(n.index),i=Ef(e.index);return t?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${n.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},aR=(n,e,t)=>e.droppableId===t.droppableId?`
      The item ${n}
      has been combined with ${t.draggableId}`:`
      The item ${n}
      in list ${e.droppableId}
      has been combined with ${t.draggableId}
      in list ${t.droppableId}
    `,bB=n=>{const e=n.destination;if(e)return oR(n.source,e);const t=n.combine;return t?aR(n.draggableId,n.source,t):"You are over an area that cannot be dropped on"},jT=n=>`
  The item has returned to its starting position
  of ${Ef(n.index)}
`,SB=n=>{if(n.reason==="CANCEL")return`
      Movement cancelled.
      ${jT(n.source)}
    `;const e=n.destination,t=n.combine;return e?`
      You have dropped the item.
      ${oR(n.source,e)}
    `:t?`
      You have dropped the item.
      ${aR(n.draggableId,n.source,t)}
    `:`
    The item has been dropped while not over a drop area.
    ${jT(n.source)}
  `},Fh={dragHandleUsageInstructions:IB,onDragStart:TB,onDragUpdate:bB,onDragEnd:SB},qt={x:0,y:0},Jt=(n,e)=>({x:n.x+e.x,y:n.y+e.y}),Un=(n,e)=>({x:n.x-e.x,y:n.y-e.y}),xs=(n,e)=>n.x===e.x&&n.y===e.y,Dl=n=>({x:n.x!==0?-n.x:0,y:n.y!==0?-n.y:0}),zo=(n,e,t=0)=>n==="x"?{x:e,y:t}:{x:t,y:e},wc=(n,e)=>Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2),zT=(n,e)=>Math.min(...e.map(t=>wc(n,t))),lR=n=>e=>({x:n(e.x),y:n(e.y)});var xB=(n,e)=>{const t=br({top:Math.max(e.top,n.top),right:Math.min(e.right,n.right),bottom:Math.min(e.bottom,n.bottom),left:Math.max(e.left,n.left)});return t.width<=0||t.height<=0?null:t};const zc=(n,e)=>({top:n.top+e.y,left:n.left+e.x,bottom:n.bottom+e.y,right:n.right+e.x}),$T=n=>[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.left,y:n.bottom},{x:n.right,y:n.bottom}],RB={top:0,right:0,bottom:0,left:0},AB=(n,e)=>e?zc(n,e.scroll.diff.displacement):n,PB=(n,e,t)=>t&&t.increasedBy?{...n,[e.end]:n[e.end]+t.increasedBy[e.line]}:n,CB=(n,e)=>e&&e.shouldClipSubject?xB(e.pageMarginBox,n):br(n);var vl=({page:n,withPlaceholder:e,axis:t,frame:r})=>{const i=AB(n.marginBox,r),o=PB(i,t,e),l=CB(o,r);return{page:n,withPlaceholder:e,active:l}},O_=(n,e)=>{n.frame||ue();const t=n.frame,r=Un(e,t.scroll.initial),i=Dl(r),o={...t,scroll:{initial:t.scroll.initial,current:e,diff:{value:r,displacement:i},max:t.scroll.max}},l=vl({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:o});return{...n,frame:o,subject:l}};const uR=Gt(n=>n.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),cR=Gt(n=>n.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),rp=Gt(n=>Object.values(n)),DB=Gt(n=>Object.values(n));var kl=Gt((n,e)=>DB(e).filter(r=>n===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function V_(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function ip(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var sp=Gt((n,e)=>e.filter(t=>t.descriptor.id!==n.descriptor.id)),kB=({isMovingForward:n,draggable:e,destination:t,insideDestination:r,previousImpact:i})=>{if(!t.isCombineEnabled||!V_(i))return null;function l(I){const b={type:"COMBINE",combine:{draggableId:I,droppableId:t.descriptor.id}};return{...i,at:b}}const c=i.displaced.all,d=c.length?c[0]:null;if(n)return d?l(d):null;const p=sp(e,r);if(!d){if(!p.length)return null;const I=p[p.length-1];return l(I.descriptor.id)}const m=p.findIndex(I=>I.descriptor.id===d);m===-1&&ue();const y=m-1;if(y<0)return null;const _=p[y];return l(_.descriptor.id)},Nl=(n,e)=>n.descriptor.droppableId===e.descriptor.id;const dR={point:qt,value:0},Ec={invisible:{},visible:{},all:[]},NB={displaced:Ec,displacedBy:dR,at:null};var ir=(n,e)=>t=>n<=t&&t<=e,hR=n=>{const e=ir(n.top,n.bottom),t=ir(n.left,n.right);return r=>{if(e(r.top)&&e(r.bottom)&&t(r.left)&&t(r.right))return!0;const o=e(r.top)||e(r.bottom),l=t(r.left)||t(r.right);if(o&&l)return!0;const d=r.top<n.top&&r.bottom>n.bottom,p=r.left<n.left&&r.right>n.right;return d&&p?!0:d&&l||p&&o}},OB=n=>{const e=ir(n.top,n.bottom),t=ir(n.left,n.right);return r=>e(r.top)&&e(r.bottom)&&t(r.left)&&t(r.right)};const M_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},fR={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var VB=n=>e=>{const t=ir(e.top,e.bottom),r=ir(e.left,e.right);return i=>n===M_?t(i.top)&&t(i.bottom):r(i.left)&&r(i.right)};const MB=(n,e)=>{const t=e.frame?e.frame.scroll.diff.displacement:qt;return zc(n,t)},LB=(n,e,t)=>e.subject.active?t(e.subject.active)(n):!1,FB=(n,e,t)=>t(e)(n),L_=({target:n,destination:e,viewport:t,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const o=r?MB(n,e):n;return LB(o,e,i)&&FB(o,t,i)},BB=n=>L_({...n,isVisibleThroughFrameFn:hR}),pR=n=>L_({...n,isVisibleThroughFrameFn:OB}),UB=n=>L_({...n,isVisibleThroughFrameFn:VB(n.destination.axis)}),jB=(n,e,t)=>{if(typeof t=="boolean")return t;if(!e)return!0;const{invisible:r,visible:i}=e;if(r[n])return!1;const o=i[n];return o?o.shouldAnimate:!0};function zB(n,e){const t=n.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return br(k_(t,r))}function Ic({afterDragging:n,destination:e,displacedBy:t,viewport:r,forceShouldAnimate:i,last:o}){return n.reduce(function(c,d){const p=zB(d,t),m=d.descriptor.id;if(c.all.push(m),!BB({target:p,destination:e,viewport:r,withDroppableDisplacement:!0}))return c.invisible[d.descriptor.id]=!0,c;const _=jB(m,o,i),I={draggableId:m,shouldAnimate:_};return c.visible[m]=I,c},{all:[],visible:{},invisible:{}})}function $B(n,e){if(!n.length)return 0;const t=n[n.length-1].descriptor.index;return e.inHomeList?t:t+1}function GT({insideDestination:n,inHomeList:e,displacedBy:t,destination:r}){const i=$B(n,{inHomeList:e});return{displaced:Ec,displacedBy:t,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function If({draggable:n,insideDestination:e,destination:t,viewport:r,displacedBy:i,last:o,index:l,forceShouldAnimate:c}){const d=Nl(n,t);if(l==null)return GT({insideDestination:e,inHomeList:d,displacedBy:i,destination:t});const p=e.find(b=>b.descriptor.index===l);if(!p)return GT({insideDestination:e,inHomeList:d,displacedBy:i,destination:t});const m=sp(n,e),y=e.indexOf(p),_=m.slice(y);return{displaced:Ic({afterDragging:_,destination:t,displacedBy:i,last:o,viewport:r.frame,forceShouldAnimate:c}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:t.descriptor.id,index:l}}}}function Ns(n,e){return!!e.effected[n]}var GB=({isMovingForward:n,destination:e,draggables:t,combine:r,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const o=r.draggableId,c=t[o].descriptor.index;return Ns(o,i)?n?c:c-1:n?c+1:c},qB=({isMovingForward:n,isInHomeList:e,insideDestination:t,location:r})=>{if(!t.length)return null;const i=r.index,o=n?i+1:i-1,l=t[0].descriptor.index,c=t[t.length-1].descriptor.index,d=e?c:c+1;return o<l||o>d?null:o},WB=({isMovingForward:n,isInHomeList:e,draggable:t,draggables:r,destination:i,insideDestination:o,previousImpact:l,viewport:c,afterCritical:d})=>{const p=l.at;if(p||ue(),p.type==="REORDER"){const y=qB({isMovingForward:n,isInHomeList:e,location:p.destination,insideDestination:o});return y==null?null:If({draggable:t,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:y})}const m=GB({isMovingForward:n,destination:i,displaced:l.displaced,draggables:r,combine:p.combine,afterCritical:d});return m==null?null:If({draggable:t,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:m})},HB=({displaced:n,afterCritical:e,combineWith:t,displacedBy:r})=>{const i=!!(n.visible[t]||n.invisible[t]);return Ns(t,e)?i?qt:Dl(r.point):i?r.point:qt},KB=({afterCritical:n,impact:e,draggables:t})=>{const r=ip(e);r||ue();const i=r.draggableId,o=t[i].page.borderBox.center,l=HB({displaced:e.displaced,afterCritical:n,combineWith:i,displacedBy:e.displacedBy});return Jt(o,l)};const mR=(n,e)=>e.margin[n.start]+e.borderBox[n.size]/2,QB=(n,e)=>e.margin[n.end]+e.borderBox[n.size]/2,F_=(n,e,t)=>e[n.crossAxisStart]+t.margin[n.crossAxisStart]+t.borderBox[n.crossAxisSize]/2,qT=({axis:n,moveRelativeTo:e,isMoving:t})=>zo(n.line,e.marginBox[n.end]+mR(n,t),F_(n,e.marginBox,t)),WT=({axis:n,moveRelativeTo:e,isMoving:t})=>zo(n.line,e.marginBox[n.start]-QB(n,t),F_(n,e.marginBox,t)),YB=({axis:n,moveInto:e,isMoving:t})=>zo(n.line,e.contentBox[n.start]+mR(n,t),F_(n,e.contentBox,t));var JB=({impact:n,draggable:e,draggables:t,droppable:r,afterCritical:i})=>{const o=kl(r.descriptor.id,t),l=e.page,c=r.axis;if(!o.length)return YB({axis:c,moveInto:r.page,isMoving:l});const{displaced:d,displacedBy:p}=n,m=d.all[0];if(m){const _=t[m];if(Ns(m,i))return WT({axis:c,moveRelativeTo:_.page,isMoving:l});const I=yf(_.page,p.point);return WT({axis:c,moveRelativeTo:I,isMoving:l})}const y=o[o.length-1];if(y.descriptor.id===e.descriptor.id)return l.borderBox.center;if(Ns(y.descriptor.id,i)){const _=yf(y.page,Dl(i.displacedBy.point));return qT({axis:c,moveRelativeTo:_,isMoving:l})}return qT({axis:c,moveRelativeTo:y.page,isMoving:l})},oy=(n,e)=>{const t=n.frame;return t?Jt(e,t.scroll.diff.displacement):e};const XB=({impact:n,draggable:e,droppable:t,draggables:r,afterCritical:i})=>{const o=e.page.borderBox.center,l=n.at;return!t||!l?o:l.type==="REORDER"?JB({impact:n,draggable:e,draggables:r,droppable:t,afterCritical:i}):KB({impact:n,draggables:r,afterCritical:i})};var op=n=>{const e=XB(n),t=n.droppable;return t?oy(t,e):e},gR=(n,e)=>{const t=Un(e,n.scroll.initial),r=Dl(t);return{frame:br({top:e.y,bottom:e.y+n.frame.height,left:e.x,right:e.x+n.frame.width}),scroll:{initial:n.scroll.initial,max:n.scroll.max,current:e,diff:{value:t,displacement:r}}}};function HT(n,e){return n.map(t=>e[t])}function ZB(n,e){for(let t=0;t<e.length;t++){const r=e[t].visible[n];if(r)return r}return null}var eU=({impact:n,viewport:e,destination:t,draggables:r,maxScrollChange:i})=>{const o=gR(e,Jt(e.scroll.current,i)),l=t.frame?O_(t,Jt(t.frame.scroll.current,i)):t,c=n.displaced,d=Ic({afterDragging:HT(c.all,r),destination:t,displacedBy:n.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),p=Ic({afterDragging:HT(c.all,r),destination:l,displacedBy:n.displacedBy,viewport:e.frame,last:c,forceShouldAnimate:!1}),m={},y={},_=[c,d,p];return c.all.forEach(b=>{const R=ZB(b,_);if(R){y[b]=R;return}m[b]=!0}),{...n,displaced:{all:c.all,invisible:m,visible:y}}},tU=(n,e)=>Jt(n.scroll.diff.displacement,e),B_=({pageBorderBoxCenter:n,draggable:e,viewport:t})=>{const r=tU(t,n),i=Un(r,e.page.borderBox.center);return Jt(e.client.borderBox.center,i)},yR=({draggable:n,destination:e,newPageBorderBoxCenter:t,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const l=Un(t,n.page.borderBox.center),d={target:zc(n.page.borderBox,l),destination:e,withDroppableDisplacement:i,viewport:r};return o?UB(d):pR(d)},nU=({isMovingForward:n,draggable:e,destination:t,draggables:r,previousImpact:i,viewport:o,previousPageBorderBoxCenter:l,previousClientSelection:c,afterCritical:d})=>{if(!t.isEnabled)return null;const p=kl(t.descriptor.id,r),m=Nl(e,t),y=kB({isMovingForward:n,draggable:e,destination:t,insideDestination:p,previousImpact:i})||WB({isMovingForward:n,isInHomeList:m,draggable:e,draggables:r,destination:t,insideDestination:p,previousImpact:i,viewport:o,afterCritical:d});if(!y)return null;const _=op({impact:y,draggable:e,droppable:t,draggables:r,afterCritical:d});if(yR({draggable:e,destination:t,newPageBorderBoxCenter:_,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:B_({pageBorderBoxCenter:_,draggable:e,viewport:o}),impact:y,scrollJumpRequest:null};const b=Un(_,l),R=eU({impact:y,viewport:o,destination:t,draggables:r,maxScrollChange:b});return{clientSelection:c,impact:R,scrollJumpRequest:b}};const pn=n=>{const e=n.subject.active;return e||ue(),e};var rU=({isMovingForward:n,pageBorderBoxCenter:e,source:t,droppables:r,viewport:i})=>{const o=t.subject.active;if(!o)return null;const l=t.axis,c=ir(o[l.start],o[l.end]),d=rp(r).filter(m=>m!==t).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>hR(i.frame)(pn(m))).filter(m=>{const y=pn(m);return n?o[l.crossAxisEnd]<y[l.crossAxisEnd]:y[l.crossAxisStart]<o[l.crossAxisStart]}).filter(m=>{const y=pn(m),_=ir(y[l.start],y[l.end]);return c(y[l.start])||c(y[l.end])||_(o[l.start])||_(o[l.end])}).sort((m,y)=>{const _=pn(m)[l.crossAxisStart],I=pn(y)[l.crossAxisStart];return n?_-I:I-_}).filter((m,y,_)=>pn(m)[l.crossAxisStart]===pn(_[0])[l.crossAxisStart]);if(!d.length)return null;if(d.length===1)return d[0];const p=d.filter(m=>ir(pn(m)[l.start],pn(m)[l.end])(e[l.line]));return p.length===1?p[0]:p.length>1?p.sort((m,y)=>pn(m)[l.start]-pn(y)[l.start])[0]:d.sort((m,y)=>{const _=zT(e,$T(pn(m))),I=zT(e,$T(pn(y)));return _!==I?_-I:pn(m)[l.start]-pn(y)[l.start]})[0]};const KT=(n,e)=>{const t=n.page.borderBox.center;return Ns(n.descriptor.id,e)?Un(t,e.displacedBy.point):t},iU=(n,e)=>{const t=n.page.borderBox;return Ns(n.descriptor.id,e)?zc(t,Dl(e.displacedBy.point)):t};var sU=({pageBorderBoxCenter:n,viewport:e,destination:t,insideDestination:r,afterCritical:i})=>r.filter(l=>pR({target:iU(l,i),destination:t,viewport:e.frame,withDroppableDisplacement:!0})).sort((l,c)=>{const d=wc(n,oy(t,KT(l,i))),p=wc(n,oy(t,KT(c,i)));return d<p?-1:p<d?1:l.descriptor.index-c.descriptor.index})[0]||null,$c=Gt(function(e,t){const r=t[e.line];return{value:r,point:zo(e.line,r)}});const oU=(n,e,t)=>{const r=n.axis;if(n.descriptor.mode==="virtual")return zo(r.line,e[r.line]);const i=n.subject.page.contentBox[r.size],d=kl(n.descriptor.id,t).reduce((p,m)=>p+m.client.marginBox[r.size],0)+e[r.line]-i;return d<=0?null:zo(r.line,d)},_R=(n,e)=>({...n,scroll:{...n.scroll,max:e}}),vR=(n,e,t)=>{const r=n.frame;Nl(e,n)&&ue(),n.subject.withPlaceholder&&ue();const i=$c(n.axis,e.displaceBy).point,o=oU(n,i,t),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:n.frame?n.frame.scroll.max:null};if(!r){const m=vl({page:n.subject.page,withPlaceholder:l,axis:n.axis,frame:n.frame});return{...n,subject:m}}const c=o?Jt(r.scroll.max,o):r.scroll.max,d=_R(r,c),p=vl({page:n.subject.page,withPlaceholder:l,axis:n.axis,frame:d});return{...n,subject:p,frame:d}},aU=n=>{const e=n.subject.withPlaceholder;e||ue();const t=n.frame;if(!t){const l=vl({page:n.subject.page,axis:n.axis,frame:null,withPlaceholder:null});return{...n,subject:l}}const r=e.oldFrameMaxScroll;r||ue();const i=_R(t,r),o=vl({page:n.subject.page,axis:n.axis,frame:i,withPlaceholder:null});return{...n,subject:o,frame:i}};var lU=({previousPageBorderBoxCenter:n,moveRelativeTo:e,insideDestination:t,draggable:r,draggables:i,destination:o,viewport:l,afterCritical:c})=>{if(!e){if(t.length)return null;const y={displaced:Ec,displacedBy:dR,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},_=op({impact:y,draggable:r,droppable:o,draggables:i,afterCritical:c}),I=Nl(r,o)?o:vR(o,r,i);return yR({draggable:r,destination:I,newPageBorderBoxCenter:_,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?y:null}const d=n[o.axis.line]<=e.page.borderBox.center[o.axis.line],p=(()=>{const y=e.descriptor.index;return e.descriptor.id===r.descriptor.id||d?y:y+1})(),m=$c(o.axis,r.displaceBy);return If({draggable:r,insideDestination:t,destination:o,viewport:l,displacedBy:m,last:Ec,index:p})},uU=({isMovingForward:n,previousPageBorderBoxCenter:e,draggable:t,isOver:r,draggables:i,droppables:o,viewport:l,afterCritical:c})=>{const d=rU({isMovingForward:n,pageBorderBoxCenter:e,source:r,droppables:o,viewport:l});if(!d)return null;const p=kl(d.descriptor.id,i),m=sU({pageBorderBoxCenter:e,viewport:l,destination:d,insideDestination:p,afterCritical:c}),y=lU({previousPageBorderBoxCenter:e,destination:d,draggable:t,draggables:i,moveRelativeTo:m,insideDestination:p,viewport:l,afterCritical:c});if(!y)return null;const _=op({impact:y,draggable:t,droppable:d,draggables:i,afterCritical:c});return{clientSelection:B_({pageBorderBoxCenter:_,draggable:t,viewport:l}),impact:y,scrollJumpRequest:null}},zn=n=>{const e=n.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const cU=(n,e)=>{const t=zn(n);return t?e[t]:null};var dU=({state:n,type:e})=>{const t=cU(n.impact,n.dimensions.droppables),r=!!t,i=n.dimensions.droppables[n.critical.droppable.id],o=t||i,l=o.axis.direction,c=l==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||l==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(c&&!r)return null;const d=e==="MOVE_DOWN"||e==="MOVE_RIGHT",p=n.dimensions.draggables[n.critical.draggable.id],m=n.current.page.borderBoxCenter,{draggables:y,droppables:_}=n.dimensions;return c?nU({isMovingForward:d,previousPageBorderBoxCenter:m,draggable:p,destination:o,draggables:y,viewport:n.viewport,previousClientSelection:n.current.client.selection,previousImpact:n.impact,afterCritical:n.afterCritical}):uU({isMovingForward:d,previousPageBorderBoxCenter:m,draggable:p,isOver:o,draggables:y,droppables:_,viewport:n.viewport,afterCritical:n.afterCritical})};function wo(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function wR(n){const e=ir(n.top,n.bottom),t=ir(n.left,n.right);return function(i){return e(i.y)&&t(i.x)}}function hU(n,e){return n.left<e.right&&n.right>e.left&&n.top<e.bottom&&n.bottom>e.top}function fU({pageBorderBox:n,draggable:e,candidates:t}){const r=e.page.borderBox.center,i=t.map(o=>{const l=o.axis,c=zo(o.axis.line,n.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:wc(r,c)}}).sort((o,l)=>l.distance-o.distance);return i[0]?i[0].id:null}function pU({pageBorderBox:n,draggable:e,droppables:t}){const r=rp(t).filter(i=>{if(!i.isEnabled)return!1;const o=i.subject.active;if(!o||!hU(n,o))return!1;if(wR(o)(n.center))return!0;const l=i.axis,c=o.center[l.crossAxisLine],d=n[l.crossAxisStart],p=n[l.crossAxisEnd],m=ir(o[l.crossAxisStart],o[l.crossAxisEnd]),y=m(d),_=m(p);return!y&&!_?!0:y?d<c:p>c});return r.length?r.length===1?r[0].descriptor.id:fU({pageBorderBox:n,draggable:e,candidates:r}):null}const ER=(n,e)=>br(zc(n,e));var mU=(n,e)=>{const t=n.frame;return t?ER(e,t.scroll.diff.value):e};function IR({displaced:n,id:e}){return!!(n.visible[e]||n.invisible[e])}function gU({draggable:n,closest:e,inHomeList:t}){return e?t&&e.descriptor.index>n.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var yU=({pageBorderBoxWithDroppableScroll:n,draggable:e,destination:t,insideDestination:r,last:i,viewport:o,afterCritical:l})=>{const c=t.axis,d=$c(t.axis,e.displaceBy),p=d.value,m=n[c.start],y=n[c.end],I=sp(e,r).find(R=>{const S=R.descriptor.id,M=R.page.borderBox.center[c.line],V=Ns(S,l),$=IR({displaced:i,id:S});return V?$?y<=M:m<M-p:$?y<=M+p:m<M})||null,b=gU({draggable:e,closest:I,inHomeList:Nl(e,t)});return If({draggable:e,insideDestination:r,destination:t,viewport:o,last:i,displacedBy:d,index:b})};const _U=4;var vU=({draggable:n,pageBorderBoxWithDroppableScroll:e,previousImpact:t,destination:r,insideDestination:i,afterCritical:o})=>{if(!r.isCombineEnabled)return null;const l=r.axis,c=$c(r.axis,n.displaceBy),d=c.value,p=e[l.start],m=e[l.end],_=sp(n,i).find(b=>{const R=b.descriptor.id,S=b.page.borderBox,V=S[l.size]/_U,$=Ns(R,o),H=IR({displaced:t.displaced,id:R});return $?H?m>S[l.start]+V&&m<S[l.end]-V:p>S[l.start]-d+V&&p<S[l.end]-d-V:H?m>S[l.start]+d+V&&m<S[l.end]+d-V:p>S[l.start]+V&&p<S[l.end]-V});return _?{displacedBy:c,displaced:t.displaced,at:{type:"COMBINE",combine:{draggableId:_.descriptor.id,droppableId:r.descriptor.id}}}:null},TR=({pageOffset:n,draggable:e,draggables:t,droppables:r,previousImpact:i,viewport:o,afterCritical:l})=>{const c=ER(e.page.borderBox,n),d=pU({pageBorderBox:c,draggable:e,droppables:r});if(!d)return NB;const p=r[d],m=kl(p.descriptor.id,t),y=mU(p,c);return vU({pageBorderBoxWithDroppableScroll:y,draggable:e,previousImpact:i,destination:p,insideDestination:m,afterCritical:l})||yU({pageBorderBoxWithDroppableScroll:y,draggable:e,destination:p,insideDestination:m,last:i.displaced,viewport:o,afterCritical:l})},U_=(n,e)=>({...n,[e.descriptor.id]:e});const wU=({previousImpact:n,impact:e,droppables:t})=>{const r=zn(n),i=zn(e);if(!r||r===i)return t;const o=t[r];if(!o.subject.withPlaceholder)return t;const l=aU(o);return U_(t,l)};var EU=({draggable:n,draggables:e,droppables:t,previousImpact:r,impact:i})=>{const o=wU({previousImpact:r,impact:i,droppables:t}),l=zn(i);if(!l)return o;const c=t[l];if(Nl(n,c)||c.subject.withPlaceholder)return o;const d=vR(c,n,e);return U_(o,d)},ec=({state:n,clientSelection:e,dimensions:t,viewport:r,impact:i,scrollJumpRequest:o})=>{const l=r||n.viewport,c=t||n.dimensions,d=e||n.current.client.selection,p=Un(d,n.initial.client.selection),m={offset:p,selection:d,borderBoxCenter:Jt(n.initial.client.borderBoxCenter,p)},y={selection:Jt(m.selection,l.scroll.current),borderBoxCenter:Jt(m.borderBoxCenter,l.scroll.current),offset:Jt(m.offset,l.scroll.diff.value)},_={client:m,page:y};if(n.phase==="COLLECTING")return{...n,dimensions:c,viewport:l,current:_};const I=c.draggables[n.critical.draggable.id],b=i||TR({pageOffset:y.offset,draggable:I,draggables:c.draggables,droppables:c.droppables,previousImpact:n.impact,viewport:l,afterCritical:n.afterCritical}),R=EU({draggable:I,impact:b,previousImpact:n.impact,draggables:c.draggables,droppables:c.droppables});return{...n,current:_,dimensions:{draggables:c.draggables,droppables:R},impact:b,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function IU(n,e){return n.map(t=>e[t])}var bR=({impact:n,viewport:e,draggables:t,destination:r,forceShouldAnimate:i})=>{const o=n.displaced,l=IU(o.all,t),c=Ic({afterDragging:l,destination:r,displacedBy:n.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:o});return{...n,displaced:c}},SR=({impact:n,draggable:e,droppable:t,draggables:r,viewport:i,afterCritical:o})=>{const l=op({impact:n,draggable:e,draggables:r,droppable:t,afterCritical:o});return B_({pageBorderBoxCenter:l,draggable:e,viewport:i})},xR=({state:n,dimensions:e,viewport:t})=>{n.movementMode!=="SNAP"&&ue();const r=n.impact,i=t||n.viewport,o=e||n.dimensions,{draggables:l,droppables:c}=o,d=l[n.critical.draggable.id],p=zn(r);p||ue();const m=c[p],y=bR({impact:r,viewport:i,destination:m,draggables:l}),_=SR({impact:y,draggable:d,droppable:m,draggables:l,viewport:i,afterCritical:n.afterCritical});return ec({impact:y,clientSelection:_,state:n,dimensions:o,viewport:i})},TU=n=>({index:n.index,droppableId:n.droppableId}),RR=({draggable:n,home:e,draggables:t,viewport:r})=>{const i=$c(e.axis,n.displaceBy),o=kl(e.descriptor.id,t),l=o.indexOf(n);l===-1&&ue();const c=o.slice(l+1),d=c.reduce((_,I)=>(_[I.descriptor.id]=!0,_),{}),p={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:d};return{impact:{displaced:Ic({afterDragging:c,destination:e,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:TU(n.descriptor)}},afterCritical:p}},bU=(n,e)=>({draggables:n.draggables,droppables:U_(n.droppables,e)}),SU=({draggable:n,offset:e,initialWindowScroll:t})=>{const r=yf(n.client,e),i=_f(r,t);return{...n,placeholder:{...n.placeholder,client:r},client:r,page:i}},xU=n=>{const e=n.frame;return e||ue(),e},RU=({additions:n,updatedDroppables:e,viewport:t})=>{const r=t.scroll.diff.value;return n.map(i=>{const o=i.descriptor.droppableId,l=e[o],d=xU(l).scroll.diff.value,p=Jt(r,d);return SU({draggable:i,offset:p,initialWindowScroll:t.scroll.initial})})},AU=({state:n,published:e})=>{const t=e.modified.map(M=>{const V=n.dimensions.droppables[M.droppableId];return O_(V,M.scroll)}),r={...n.dimensions.droppables,...uR(t)},i=cR(RU({additions:e.additions,updatedDroppables:r,viewport:n.viewport})),o={...n.dimensions.draggables,...i};e.removals.forEach(M=>{delete o[M]});const l={droppables:r,draggables:o},c=zn(n.impact),d=c?l.droppables[c]:null,p=l.draggables[n.critical.draggable.id],m=l.droppables[n.critical.droppable.id],{impact:y,afterCritical:_}=RR({draggable:p,home:m,draggables:o,viewport:n.viewport}),I=d&&d.isCombineEnabled?n.impact:y,b=TR({pageOffset:n.current.page.offset,draggable:l.draggables[n.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:I,viewport:n.viewport,afterCritical:_}),R={...n,phase:"DRAGGING",impact:b,onLiftImpact:y,dimensions:l,afterCritical:_,forceShouldAnimate:!1};return n.phase==="COLLECTING"?R:{...R,phase:"DROP_PENDING",reason:n.reason,isWaiting:!1}};const ay=n=>n.movementMode==="SNAP",mg=(n,e,t)=>{const r=bU(n.dimensions,e);return!ay(n)||t?ec({state:n,dimensions:r}):xR({state:n,dimensions:r})};function gg(n){return n.isDragging&&n.movementMode==="SNAP"?{...n,scrollJumpRequest:null}:n}const QT={phase:"IDLE",completed:null,shouldFlush:!1};var PU=(n=QT,e)=>{if(e.type==="FLUSH")return{...QT,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&ue();const{critical:t,clientSelection:r,viewport:i,dimensions:o,movementMode:l}=e.payload,c=o.draggables[t.draggable.id],d=o.droppables[t.droppable.id],p={selection:r,borderBoxCenter:c.client.borderBox.center,offset:qt},m={client:p,page:{selection:Jt(p.selection,i.scroll.initial),borderBoxCenter:Jt(p.selection,i.scroll.initial),offset:Jt(p.selection,i.scroll.diff.value)}},y=rp(o.droppables).every(R=>!R.isFixedOnPage),{impact:_,afterCritical:I}=RR({draggable:c,home:d,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:t,movementMode:l,dimensions:o,initial:m,current:m,isWindowScrollAllowed:y,impact:_,afterCritical:I,onLiftImpact:_,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"?n:(n.phase!=="DRAGGING"&&ue(),{...n,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||ue(),AU({state:n,published:e.payload});if(e.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;wo(n)||ue();const{client:t}=e.payload;return xs(t,n.current.client.selection)?n:ec({state:n,clientSelection:t,impact:ay(n)?n.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return gg(n);wo(n)||ue();const{id:t,newScroll:r}=e.payload,i=n.dimensions.droppables[t];if(!i)return n;const o=O_(i,r);return mg(n,o,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;wo(n)||ue();const{id:t,isEnabled:r}=e.payload,i=n.dimensions.droppables[t];i||ue(),i.isEnabled===r&&ue();const o={...i,isEnabled:r};return mg(n,o,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;wo(n)||ue();const{id:t,isCombineEnabled:r}=e.payload,i=n.dimensions.droppables[t];i||ue(),i.isCombineEnabled===r&&ue();const o={...i,isCombineEnabled:r};return mg(n,o,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;wo(n)||ue(),n.isWindowScrollAllowed||ue();const t=e.payload.newScroll;if(xs(n.viewport.scroll.current,t))return gg(n);const r=gR(n.viewport,t);return ay(n)?xR({state:n,viewport:r}):ec({state:n,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!wo(n))return n;const t=e.payload.maxScroll;if(xs(t,n.viewport.scroll.max))return n;const r={...n.viewport,scroll:{...n.viewport.scroll,max:t}};return{...n,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&ue();const t=dU({state:n,type:e.type});return t?ec({state:n,impact:t.impact,clientSelection:t.clientSelection,scrollJumpRequest:t.scrollJumpRequest}):n}if(e.type==="DROP_PENDING"){const t=e.payload.reason;return n.phase!=="COLLECTING"&&ue(),{...n,phase:"DROP_PENDING",isWaiting:!0,reason:t}}if(e.type==="DROP_ANIMATE"){const{completed:t,dropDuration:r,newHomeClientOffset:i}=e.payload;return n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||ue(),{phase:"DROP_ANIMATING",completed:t,dropDuration:r,newHomeClientOffset:i,dimensions:n.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:t}=e.payload;return{phase:"IDLE",completed:t,shouldFlush:!1}}return n};function Xe(n,e){return n instanceof Object&&"type"in n&&n.type===e}const CU=n=>({type:"BEFORE_INITIAL_CAPTURE",payload:n}),DU=n=>({type:"LIFT",payload:n}),kU=n=>({type:"INITIAL_PUBLISH",payload:n}),NU=n=>({type:"PUBLISH_WHILE_DRAGGING",payload:n}),OU=()=>({type:"COLLECTION_STARTING",payload:null}),VU=n=>({type:"UPDATE_DROPPABLE_SCROLL",payload:n}),MU=n=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:n}),LU=n=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:n}),AR=n=>({type:"MOVE",payload:n}),FU=n=>({type:"MOVE_BY_WINDOW_SCROLL",payload:n}),BU=n=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:n}),UU=()=>({type:"MOVE_UP",payload:null}),jU=()=>({type:"MOVE_DOWN",payload:null}),zU=()=>({type:"MOVE_RIGHT",payload:null}),$U=()=>({type:"MOVE_LEFT",payload:null}),j_=()=>({type:"FLUSH",payload:null}),GU=n=>({type:"DROP_ANIMATE",payload:n}),z_=n=>({type:"DROP_COMPLETE",payload:n}),PR=n=>({type:"DROP",payload:n}),qU=n=>({type:"DROP_PENDING",payload:n}),CR=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var WU=n=>({getState:e,dispatch:t})=>r=>i=>{if(!Xe(i,"LIFT")){r(i);return}const{id:o,clientSelection:l,movementMode:c}=i.payload,d=e();d.phase==="DROP_ANIMATING"&&t(z_({completed:d.completed})),e().phase!=="IDLE"&&ue(),t(j_()),t(CU({draggableId:o,movementMode:c}));const m={draggableId:o,scrollOptions:{shouldPublishImmediately:c==="SNAP"}},{critical:y,dimensions:_,viewport:I}=n.startPublishing(m);t(kU({critical:y,dimensions:_,clientSelection:l,movementMode:c,viewport:I}))},HU=n=>()=>e=>t=>{Xe(t,"INITIAL_PUBLISH")&&n.dragging(),Xe(t,"DROP_ANIMATE")&&n.dropping(t.payload.completed.result.reason),(Xe(t,"FLUSH")||Xe(t,"DROP_COMPLETE"))&&n.resting(),e(t)};const $_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Tc={opacity:{drop:0,combining:.7},scale:{drop:.75}},DR={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},go=`${DR.outOfTheWay}s ${$_.outOfTheWay}`,tc={fluid:`opacity ${go}`,snap:`transform ${go}, opacity ${go}`,drop:n=>{const e=`${n}s ${$_.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${go}`,placeholder:`height ${go}, width ${go}, margin ${go}`},YT=n=>xs(n,qt)?void 0:`translate(${n.x}px, ${n.y}px)`,ly={moveTo:YT,drop:(n,e)=>{const t=YT(n);if(t)return e?`${t} scale(${Tc.scale.drop})`:t}},{minDropTime:uy,maxDropTime:kR}=DR,KU=kR-uy,JT=1500,QU=.6;var YU=({current:n,destination:e,reason:t})=>{const r=wc(n,e);if(r<=0)return uy;if(r>=JT)return kR;const i=r/JT,o=uy+KU*i,l=t==="CANCEL"?o*QU:o;return Number(l.toFixed(2))},JU=({impact:n,draggable:e,dimensions:t,viewport:r,afterCritical:i})=>{const{draggables:o,droppables:l}=t,c=zn(n),d=c?l[c]:null,p=l[e.descriptor.droppableId],m=SR({impact:n,draggable:e,draggables:o,afterCritical:i,droppable:d||p,viewport:r});return Un(m,e.client.borderBox.center)},XU=({draggables:n,reason:e,lastImpact:t,home:r,viewport:i,onLiftImpact:o})=>!t.at||e!=="DROP"?{impact:bR({draggables:n,impact:o,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:t.at.type==="REORDER"?{impact:t,didDropInsideDroppable:!0}:{impact:{...t,displaced:Ec},didDropInsideDroppable:!0};const ZU=({getState:n,dispatch:e})=>t=>r=>{if(!Xe(r,"DROP")){t(r);return}const i=n(),o=r.payload.reason;if(i.phase==="COLLECTING"){e(qU({reason:o}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ue(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ue();const c=i.critical,d=i.dimensions,p=d.draggables[i.critical.draggable.id],{impact:m,didDropInsideDroppable:y}=XU({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),_=y?V_(m):null,I=y?ip(m):null,b={index:c.draggable.index,droppableId:c.droppable.id},R={draggableId:p.descriptor.id,type:p.descriptor.type,source:b,reason:o,mode:i.movementMode,destination:_,combine:I},S=JU({impact:m,draggable:p,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),M={critical:i.critical,afterCritical:i.afterCritical,result:R,impact:m};if(!(!xs(i.current.client.offset,S)||!!R.combine)){e(z_({completed:M}));return}const $=YU({current:i.current.client.offset,destination:S,reason:o});e(GU({newHomeClientOffset:S,dropDuration:$,completed:M}))};var NR=()=>({x:window.pageXOffset,y:window.pageYOffset});function e4(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||n()}}}function t4({onWindowScroll:n}){function e(){n(NR())}const t=vc(e),r=e4(t);let i=Ss;function o(){return i!==Ss}function l(){o()&&ue(),i=rr(window,[r])}function c(){o()||ue(),t.cancel(),i(),i=Ss}return{start:l,stop:c,isActive:o}}const n4=n=>Xe(n,"DROP_COMPLETE")||Xe(n,"DROP_ANIMATE")||Xe(n,"FLUSH"),r4=n=>{const e=t4({onWindowScroll:t=>{n.dispatch(FU({newScroll:t}))}});return t=>r=>{!e.isActive()&&Xe(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&n4(r)&&e.stop(),t(r)}};var i4=n=>{let e=!1,t=!1;const r=setTimeout(()=>{t=!0}),i=o=>{e||t||(e=!0,n(o),clearTimeout(r))};return i.wasCalled=()=>e,i},s4=()=>{const n=[],e=i=>{const o=n.findIndex(c=>c.timerId===i);o===-1&&ue();const[l]=n.splice(o,1);l.callback()};return{add:i=>{const o=setTimeout(()=>e(o)),l={timerId:o,callback:i};n.push(l)},flush:()=>{if(!n.length)return;const i=[...n];n.length=0,i.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const o4=(n,e)=>n==null&&e==null?!0:n==null||e==null?!1:n.droppableId===e.droppableId&&n.index===e.index,a4=(n,e)=>n==null&&e==null?!0:n==null||e==null?!1:n.draggableId===e.draggableId&&n.droppableId===e.droppableId,l4=(n,e)=>{if(n===e)return!0;const t=n.draggable.id===e.draggable.id&&n.draggable.droppableId===e.draggable.droppableId&&n.draggable.type===e.draggable.type&&n.draggable.index===e.draggable.index,r=n.droppable.id===e.droppable.id&&n.droppable.type===e.droppable.type;return t&&r},Fu=(n,e)=>{e()},_h=(n,e)=>({draggableId:n.draggable.id,type:n.droppable.type,source:{droppableId:n.droppable.id,index:n.draggable.index},mode:e});function yg(n,e,t,r){if(!n){t(r(e));return}const i=i4(t);n(e,{announce:i}),i.wasCalled()||t(r(e))}var u4=(n,e)=>{const t=s4();let r=null;const i=(y,_)=>{r&&ue(),Fu("onBeforeCapture",()=>{const I=n().onBeforeCapture;I&&I({draggableId:y,mode:_})})},o=(y,_)=>{r&&ue(),Fu("onBeforeDragStart",()=>{const I=n().onBeforeDragStart;I&&I(_h(y,_))})},l=(y,_)=>{r&&ue();const I=_h(y,_);r={mode:_,lastCritical:y,lastLocation:I.source,lastCombine:null},t.add(()=>{Fu("onDragStart",()=>yg(n().onDragStart,I,e,Fh.onDragStart))})},c=(y,_)=>{const I=V_(_),b=ip(_);r||ue();const R=!l4(y,r.lastCritical);R&&(r.lastCritical=y);const S=!o4(r.lastLocation,I);S&&(r.lastLocation=I);const M=!a4(r.lastCombine,b);if(M&&(r.lastCombine=b),!R&&!S&&!M)return;const V={..._h(y,r.mode),combine:b,destination:I};t.add(()=>{Fu("onDragUpdate",()=>yg(n().onDragUpdate,V,e,Fh.onDragUpdate))})},d=()=>{r||ue(),t.flush()},p=y=>{r||ue(),r=null,Fu("onDragEnd",()=>yg(n().onDragEnd,y,e,Fh.onDragEnd))};return{beforeCapture:i,beforeStart:o,start:l,update:c,flush:d,drop:p,abort:()=>{if(!r)return;const y={..._h(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};p(y)}}},c4=(n,e)=>{const t=u4(n,e);return r=>i=>o=>{if(Xe(o,"BEFORE_INITIAL_CAPTURE")){t.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(Xe(o,"INITIAL_PUBLISH")){const c=o.payload.critical;t.beforeStart(c,o.payload.movementMode),i(o),t.start(c,o.payload.movementMode);return}if(Xe(o,"DROP_COMPLETE")){const c=o.payload.completed.result;t.flush(),i(o),t.drop(c);return}if(i(o),Xe(o,"FLUSH")){t.abort();return}const l=r.getState();l.phase==="DRAGGING"&&t.update(l.critical,l.impact)}};const d4=n=>e=>t=>{if(!Xe(t,"DROP_ANIMATION_FINISHED")){e(t);return}const r=n.getState();r.phase!=="DROP_ANIMATING"&&ue(),n.dispatch(z_({completed:r.completed}))},h4=n=>{let e=null,t=null;function r(){t&&(cancelAnimationFrame(t),t=null),e&&(e(),e=null)}return i=>o=>{if((Xe(o,"FLUSH")||Xe(o,"DROP_COMPLETE")||Xe(o,"DROP_ANIMATION_FINISHED"))&&r(),i(o),!Xe(o,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){n.getState().phase==="DROP_ANIMATING"&&n.dispatch(CR())}};t=requestAnimationFrame(()=>{t=null,e=rr(window,[l])})}};var f4=n=>()=>e=>t=>{(Xe(t,"DROP_COMPLETE")||Xe(t,"FLUSH")||Xe(t,"DROP_ANIMATE"))&&n.stopPublishing(),e(t)},p4=n=>{let e=!1;return()=>t=>r=>{if(Xe(r,"INITIAL_PUBLISH")){e=!0,n.tryRecordFocus(r.payload.critical.draggable.id),t(r),n.tryRestoreFocusRecorded();return}if(t(r),!!e){if(Xe(r,"FLUSH")){e=!1,n.tryRestoreFocusRecorded();return}if(Xe(r,"DROP_COMPLETE")){e=!1;const i=r.payload.completed.result;i.combine&&n.tryShiftRecord(i.draggableId,i.combine.draggableId),n.tryRestoreFocusRecorded()}}}};const m4=n=>Xe(n,"DROP_COMPLETE")||Xe(n,"DROP_ANIMATE")||Xe(n,"FLUSH");var g4=n=>e=>t=>r=>{if(m4(r)){n.stop(),t(r);return}if(Xe(r,"INITIAL_PUBLISH")){t(r);const i=e.getState();i.phase!=="DRAGGING"&&ue(),n.start(i);return}t(r),n.scroll(e.getState())};const y4=n=>e=>t=>{if(e(t),!Xe(t,"PUBLISH_WHILE_DRAGGING"))return;const r=n.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||n.dispatch(PR({reason:r.reason})))},_4=Qx;var v4=({dimensionMarshal:n,focusMarshal:e,styleMarshal:t,getResponders:r,announce:i,autoScroller:o})=>Kx(PU,_4(mF(HU(t),f4(n),WU(n),ZU,d4,h4,y4,g4(o),r4,p4(e),c4(r,i))));const _g=()=>({additions:{},removals:{},modified:{}});function w4({registry:n,callbacks:e}){let t=_g(),r=null;const i=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:d,removals:p,modified:m}=t,y=Object.keys(d).map(b=>n.draggable.getById(b).getDimension(qt)).sort((b,R)=>b.descriptor.index-R.descriptor.index),_=Object.keys(m).map(b=>{const S=n.droppable.getById(b).callbacks.getScrollWhileDragging();return{droppableId:b,scroll:S}}),I={additions:y,removals:Object.keys(p),modified:_};t=_g(),e.publish(I)}))};return{add:d=>{const p=d.descriptor.id;t.additions[p]=d,t.modified[d.descriptor.droppableId]=!0,t.removals[p]&&delete t.removals[p],i()},remove:d=>{const p=d.descriptor;t.removals[p.id]=!0,t.modified[p.droppableId]=!0,t.additions[p.id]&&delete t.additions[p.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,t=_g())}}}var OR=({scrollHeight:n,scrollWidth:e,height:t,width:r})=>{const i=Un({x:e,y:n},{x:r,y:t});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},VR=()=>{const n=document.documentElement;return n||ue(),n},MR=()=>{const n=VR();return OR({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight})},E4=()=>{const n=NR(),e=MR(),t=n.y,r=n.x,i=VR(),o=i.clientWidth,l=i.clientHeight,c=r+o,d=t+l;return{frame:br({top:t,left:r,right:c,bottom:d}),scroll:{initial:n,current:n,max:e,diff:{value:qt,displacement:qt}}}},I4=({critical:n,scrollOptions:e,registry:t})=>{const r=E4(),i=r.scroll.current,o=n.droppable,l=t.droppable.getAllByType(o.type).map(m=>m.callbacks.getDimensionAndWatchScroll(i,e)),c=t.draggable.getAllByType(n.draggable.type).map(m=>m.getDimension(i));return{dimensions:{draggables:cR(c),droppables:uR(l)},critical:n,viewport:r}};function XT(n,e,t){return!(t.descriptor.id===e.id||t.descriptor.type!==e.type||n.droppable.getById(t.descriptor.droppableId).descriptor.mode!=="virtual")}var T4=(n,e)=>{let t=null;const r=w4({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:n}),i=(_,I)=>{n.droppable.exists(_)||ue(),t&&e.updateDroppableIsEnabled({id:_,isEnabled:I})},o=(_,I)=>{t&&(n.droppable.exists(_)||ue(),e.updateDroppableIsCombineEnabled({id:_,isCombineEnabled:I}))},l=(_,I)=>{t&&(n.droppable.exists(_)||ue(),e.updateDroppableScroll({id:_,newScroll:I}))},c=(_,I)=>{t&&n.droppable.getById(_).callbacks.scroll(I)},d=()=>{if(!t)return;r.stop();const _=t.critical.droppable;n.droppable.getAllByType(_.type).forEach(I=>I.callbacks.dragStopped()),t.unsubscribe(),t=null},p=_=>{t||ue();const I=t.critical.draggable;_.type==="ADDITION"&&XT(n,I,_.value)&&r.add(_.value),_.type==="REMOVAL"&&XT(n,I,_.value)&&r.remove(_.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:c,updateDroppableScroll:l,startPublishing:_=>{t&&ue();const I=n.draggable.getById(_.draggableId),b=n.droppable.getById(I.descriptor.droppableId),R={draggable:I.descriptor,droppable:b.descriptor},S=n.subscribe(p);return t={critical:R,unsubscribe:S},I4({critical:R,registry:n,scrollOptions:_.scrollOptions})},stopPublishing:d}},LR=(n,e)=>n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===e?!1:n.completed.result.reason==="DROP",b4=n=>{window.scrollBy(n.x,n.y)};const S4=Gt(n=>rp(n).filter(e=>!(!e.isEnabled||!e.frame))),x4=(n,e)=>S4(e).find(r=>(r.frame||ue(),wR(r.frame.pageMarginBox)(n)))||null;var R4=({center:n,destination:e,droppables:t})=>{if(e){const i=t[e];return i.frame?i:null}return x4(n,t)};const bc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:n=>n**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var A4=(n,e,t=()=>bc)=>{const r=t(),i=n[e.size]*r.startFromPercentage,o=n[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:o}},FR=({startOfRange:n,endOfRange:e,current:t})=>{const r=e-n;return r===0?0:(t-n)/r},G_=1,P4=(n,e,t=()=>bc)=>{const r=t();if(n>e.startScrollingFrom)return 0;if(n<=e.maxScrollValueAt)return r.maxPixelScroll;if(n===e.startScrollingFrom)return G_;const o=1-FR({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:n}),l=r.maxPixelScroll*r.ease(o);return Math.ceil(l)},C4=(n,e,t)=>{const r=t(),i=r.durationDampening.accelerateAt,o=r.durationDampening.stopDampeningAt,l=e,c=o,p=Date.now()-l;if(p>=o)return n;if(p<i)return G_;const m=FR({startOfRange:i,endOfRange:c,current:p}),y=n*r.ease(m);return Math.ceil(y)},ZT=({distanceToEdge:n,thresholds:e,dragStartTime:t,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const o=P4(n,e,i);return o===0?0:r?Math.max(C4(o,t,i),G_):o},eb=({container:n,distanceToEdges:e,dragStartTime:t,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=A4(n,r,o);return e[r.end]<e[r.start]?ZT({distanceToEdge:e[r.end],thresholds:l,dragStartTime:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*ZT({distanceToEdge:e[r.start],thresholds:l,dragStartTime:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},D4=({container:n,subject:e,proposedScroll:t})=>{const r=e.height>n.height,i=e.width>n.width;return!i&&!r?t:i&&r?null:{x:i?0:t.x,y:r?0:t.y}};const k4=lR(n=>n===0?0:n);var BR=({dragStartTime:n,container:e,subject:t,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},c=eb({container:e,distanceToEdges:l,dragStartTime:n,axis:M_,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),d=eb({container:e,distanceToEdges:l,dragStartTime:n,axis:fR,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),p=k4({x:d,y:c});if(xs(p,qt))return null;const m=D4({container:e,subject:t,proposedScroll:p});return m?xs(m,qt)?null:m:null};const N4=lR(n=>n===0?0:n>0?1:-1),q_=(()=>{const n=(e,t)=>e<0?e:e>t?e-t:0;return({current:e,max:t,change:r})=>{const i=Jt(e,r),o={x:n(i.x,t.x),y:n(i.y,t.y)};return xs(o,qt)?null:o}})(),UR=({max:n,current:e,change:t})=>{const r={x:Math.max(e.x,n.x),y:Math.max(e.y,n.y)},i=N4(t),o=q_({max:r,current:e,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},W_=(n,e)=>UR({current:n.scroll.current,max:n.scroll.max,change:e}),O4=(n,e)=>{if(!W_(n,e))return null;const t=n.scroll.max,r=n.scroll.current;return q_({current:r,max:t,change:e})},H_=(n,e)=>{const t=n.frame;return t?UR({current:t.scroll.current,max:t.scroll.max,change:e}):!1},V4=(n,e)=>{const t=n.frame;return!t||!H_(n,e)?null:q_({current:t.scroll.current,max:t.scroll.max,change:e})};var M4=({viewport:n,subject:e,center:t,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=BR({dragStartTime:r,container:n.frame,subject:e,center:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return l&&W_(n,l)?l:null},L4=({droppable:n,subject:e,center:t,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=n.frame;if(!l)return null;const c=BR({dragStartTime:r,container:l.pageMarginBox,subject:e,center:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return c&&H_(n,c)?c:null},tb=({state:n,dragStartTime:e,shouldUseTimeDampening:t,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:o})=>{const l=n.current.page.borderBoxCenter,d=n.dimensions.draggables[n.critical.draggable.id].page.marginBox;if(n.isWindowScrollAllowed){const y=n.viewport,_=M4({dragStartTime:e,viewport:y,subject:d,center:l,shouldUseTimeDampening:t,getAutoScrollerOptions:o});if(_){r(_);return}}const p=R4({center:l,destination:zn(n.impact),droppables:n.dimensions.droppables});if(!p)return;const m=L4({dragStartTime:e,droppable:p,subject:d,center:l,shouldUseTimeDampening:t,getAutoScrollerOptions:o});m&&i(p.descriptor.id,m)},F4=({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:t=()=>bc})=>{const r=vc(n),i=vc(e);let o=null;const l=p=>{o||ue();const{shouldUseTimeDampening:m,dragStartTime:y}=o;tb({state:p,scrollWindow:r,scrollDroppable:i,dragStartTime:y,shouldUseTimeDampening:m,getAutoScrollerOptions:t})};return{start:p=>{o&&ue();const m=Date.now();let y=!1;const _=()=>{y=!0};tb({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:_,scrollDroppable:_,getAutoScrollerOptions:t}),o={dragStartTime:m,shouldUseTimeDampening:y},y&&l(p)},stop:()=>{o&&(r.cancel(),i.cancel(),o=null)},scroll:l}},B4=({move:n,scrollDroppable:e,scrollWindow:t})=>{const r=(c,d)=>{const p=Jt(c.current.client.selection,d);n({client:p})},i=(c,d)=>{if(!H_(c,d))return d;const p=V4(c,d);if(!p)return e(c.descriptor.id,d),null;const m=Un(d,p);return e(c.descriptor.id,m),Un(d,m)},o=(c,d,p)=>{if(!c||!W_(d,p))return p;const m=O4(d,p);if(!m)return t(p),null;const y=Un(p,m);return t(y),Un(p,y)};return c=>{const d=c.scrollJumpRequest;if(!d)return;const p=zn(c.impact);p||ue();const m=i(c.dimensions.droppables[p],d);if(!m)return;const y=c.viewport,_=o(c.isWindowScrollAllowed,y,m);_&&r(c,_)}},U4=({scrollDroppable:n,scrollWindow:e,move:t,getAutoScrollerOptions:r})=>{const i=F4({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:r}),o=B4({move:t,scrollWindow:e,scrollDroppable:n});return{scroll:d=>{if(!(r().disabled||d.phase!=="DRAGGING")){if(d.movementMode==="FLUID"){i.scroll(d);return}d.scrollJumpRequest&&o(d)}},start:i.start,stop:i.stop}};const wl="data-rfd",El=(()=>{const n=`${wl}-drag-handle`;return{base:n,draggableId:`${n}-draggable-id`,contextId:`${n}-context-id`}})(),cy=(()=>{const n=`${wl}-draggable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),j4=(()=>{const n=`${wl}-droppable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),nb={contextId:`${wl}-scroll-container-context-id`},z4=n=>e=>`[${e}="${n}"]`,Bu=(n,e)=>n.map(t=>{const r=t.styles[e];return r?`${t.selector} { ${r} }`:""}).join(" "),$4="pointer-events: none;";var G4=n=>{const e=z4(n),t=(()=>{const c=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(El.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:c,dragging:$4,dropAnimating:c}}})(),r=(()=>{const c=`
      transition: ${tc.outOfTheWay};
    `;return{selector:e(cy.contextId),styles:{dragging:c,dropAnimating:c,userCancel:c}}})(),i={selector:e(j4.contextId),styles:{always:"overflow-anchor: none;"}},l=[r,t,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Bu(l,"always"),resting:Bu(l,"resting"),dragging:Bu(l,"dragging"),dropAnimating:Bu(l,"dropAnimating"),userCancel:Bu(l,"userCancel")}};const $n=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?L.useLayoutEffect:L.useEffect,vg=()=>{const n=document.querySelector("head");return n||ue(),n},rb=n=>{const e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.type="text/css",e};function q4(n,e){const t=qe(()=>G4(n),[n]),r=L.useRef(null),i=L.useRef(null),o=Te(Gt(y=>{const _=i.current;_||ue(),_.textContent=y}),[]),l=Te(y=>{const _=r.current;_||ue(),_.textContent=y},[]);$n(()=>{!r.current&&!i.current||ue();const y=rb(e),_=rb(e);return r.current=y,i.current=_,y.setAttribute(`${wl}-always`,n),_.setAttribute(`${wl}-dynamic`,n),vg().appendChild(y),vg().appendChild(_),l(t.always),o(t.resting),()=>{const I=b=>{const R=b.current;R||ue(),vg().removeChild(R),b.current=null};I(r),I(i)}},[e,l,o,t.always,t.resting,n]);const c=Te(()=>o(t.dragging),[o,t.dragging]),d=Te(y=>{if(y==="DROP"){o(t.dropAnimating);return}o(t.userCancel)},[o,t.dropAnimating,t.userCancel]),p=Te(()=>{i.current&&o(t.resting)},[o,t.resting]);return qe(()=>({dragging:c,dropping:d,resting:p}),[c,d,p])}function jR(n,e){return Array.from(n.querySelectorAll(e))}var zR=n=>n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView:window;function ap(n){return n instanceof zR(n).HTMLElement}function W4(n,e){const t=`[${El.contextId}="${n}"]`,r=jR(document,t);if(!r.length)return null;const i=r.find(o=>o.getAttribute(El.draggableId)===e);return!i||!ap(i)?null:i}function H4(n){const e=L.useRef({}),t=L.useRef(null),r=L.useRef(null),i=L.useRef(!1),o=Te(function(_,I){const b={id:_,focus:I};return e.current[_]=b,function(){const S=e.current;S[_]!==b&&delete S[_]}},[]),l=Te(function(_){const I=W4(n,_);I&&I!==document.activeElement&&I.focus()},[n]),c=Te(function(_,I){t.current===_&&(t.current=I)},[]),d=Te(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const _=t.current;_&&l(_)}))},[l]),p=Te(function(_){t.current=null;const I=document.activeElement;I&&I.getAttribute(El.draggableId)===_&&(t.current=_)},[]);return $n(()=>(i.current=!0,function(){i.current=!1;const _=r.current;_&&cancelAnimationFrame(_)}),[]),qe(()=>({register:o,tryRecordFocus:p,tryRestoreFocusRecorded:d,tryShiftRecord:c}),[o,p,d,c])}function K4(){const n={draggables:{},droppables:{}},e=[];function t(y){return e.push(y),function(){const I=e.indexOf(y);I!==-1&&e.splice(I,1)}}function r(y){e.length&&e.forEach(_=>_(y))}function i(y){return n.draggables[y]||null}function o(y){const _=i(y);return _||ue(),_}const l={register:y=>{n.draggables[y.descriptor.id]=y,r({type:"ADDITION",value:y})},update:(y,_)=>{const I=n.draggables[_.descriptor.id];I&&I.uniqueId===y.uniqueId&&(delete n.draggables[_.descriptor.id],n.draggables[y.descriptor.id]=y)},unregister:y=>{const _=y.descriptor.id,I=i(_);I&&y.uniqueId===I.uniqueId&&(delete n.draggables[_],n.droppables[y.descriptor.droppableId]&&r({type:"REMOVAL",value:y}))},getById:o,findById:i,exists:y=>!!i(y),getAllByType:y=>Object.values(n.draggables).filter(_=>_.descriptor.type===y)};function c(y){return n.droppables[y]||null}function d(y){const _=c(y);return _||ue(),_}const p={register:y=>{n.droppables[y.descriptor.id]=y},unregister:y=>{const _=c(y.descriptor.id);_&&y.uniqueId===_.uniqueId&&delete n.droppables[y.descriptor.id]},getById:d,findById:c,exists:y=>!!c(y),getAllByType:y=>Object.values(n.droppables).filter(_=>_.descriptor.type===y)};function m(){n.draggables={},n.droppables={},e.length=0}return{draggable:l,droppable:p,subscribe:t,clean:m}}function Q4(){const n=qe(K4,[]);return L.useEffect(()=>function(){n.clean()},[n]),n}var K_=Ye.createContext(null),Tf=()=>{const n=document.body;return n||ue(),n};const Y4={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},J4=n=>`rfd-announcement-${n}`;function X4(n){const e=qe(()=>J4(n),[n]),t=L.useRef(null);return L.useEffect(function(){const o=document.createElement("div");return t.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),vf(o.style,Y4),Tf().appendChild(o),function(){setTimeout(function(){const d=Tf();d.contains(o)&&d.removeChild(o),o===t.current&&(t.current=null)})}},[e]),Te(i=>{const o=t.current;if(o){o.textContent=i;return}},[])}const Z4={separator:"::"};function Q_(n,e=Z4){const t=Ye.useId();return qe(()=>`${n}${e.separator}${t}`,[e.separator,n,t])}function ej({contextId:n,uniqueId:e}){return`rfd-hidden-text-${n}-${e}`}function tj({contextId:n,text:e}){const t=Q_("hidden-text",{separator:"-"}),r=qe(()=>ej({contextId:n,uniqueId:t}),[t,n]);return L.useEffect(function(){const o=document.createElement("div");return o.id=r,o.textContent=e,o.style.display="none",Tf().appendChild(o),function(){const c=Tf();c.contains(o)&&c.removeChild(o)}},[r,e]),r}var lp=Ye.createContext(null);function $R(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n}),e}function nj(){let n=null;function e(){return!!n}function t(l){return l===n}function r(l){n&&ue();const c={abandon:l};return n=c,c}function i(){n||ue(),n=null}function o(){n&&(n.abandon(),i())}return{isClaimed:e,isActive:t,claim:r,release:i,tryAbandon:o}}function Sc(n){return n.phase==="IDLE"||n.phase==="DROP_ANIMATING"?!1:n.isDragging}const rj=9,ij=13,Y_=27,GR=32,sj=33,oj=34,aj=35,lj=36,uj=37,cj=38,dj=39,hj=40,fj={[ij]:!0,[rj]:!0};var qR=n=>{fj[n.keyCode]&&n.preventDefault()};const up=(()=>{const n="visibilitychange";return typeof document>"u"?n:[n,`ms${n}`,`webkit${n}`,`moz${n}`,`o${n}`].find(r=>`on${r}`in document)||n})(),WR=0,ib=5;function pj(n,e){return Math.abs(e.x-n.x)>=ib||Math.abs(e.y-n.y)>=ib}const sb={type:"IDLE"};function mj({cancel:n,completed:e,getPhase:t,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:o,clientX:l,clientY:c}=i;if(o!==WR)return;const d={x:l,y:c},p=t();if(p.type==="DRAGGING"){i.preventDefault(),p.actions.move(d);return}p.type!=="PENDING"&&ue();const m=p.point;if(!pj(m,d))return;i.preventDefault();const y=p.actions.fluidLift(d);r({type:"DRAGGING",actions:y})}},{eventName:"mouseup",fn:i=>{const o=t();if(o.type!=="DRAGGING"){n();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{t().type==="DRAGGING"&&i.preventDefault(),n()}},{eventName:"keydown",fn:i=>{if(t().type==="PENDING"){n();return}if(i.keyCode===Y_){i.preventDefault(),n();return}qR(i)}},{eventName:"resize",fn:n},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{t().type==="PENDING"&&n()}},{eventName:"webkitmouseforcedown",fn:i=>{const o=t();if(o.type==="IDLE"&&ue(),o.actions.shouldRespectForcePress()){n();return}i.preventDefault()}},{eventName:up,fn:n}]}function gj(n){const e=L.useRef(sb),t=L.useRef(Ss),r=qe(()=>({eventName:"mousedown",fn:function(y){if(y.defaultPrevented||y.button!==WR||y.ctrlKey||y.metaKey||y.shiftKey||y.altKey)return;const _=n.findClosestDraggableId(y);if(!_)return;const I=n.tryGetLock(_,l,{sourceEvent:y});if(!I)return;y.preventDefault();const b={x:y.clientX,y:y.clientY};t.current(),p(I,b)}}),[n]),i=qe(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const y=n.findClosestDraggableId(m);if(!y)return;const _=n.findOptionsForDraggable(y);_&&(_.shouldRespectForcePress||n.canGetLock(y)&&m.preventDefault())}}),[n]),o=Te(function(){const y={passive:!1,capture:!0};t.current=rr(window,[i,r],y)},[i,r]),l=Te(()=>{e.current.type!=="IDLE"&&(e.current=sb,t.current(),o())},[o]),c=Te(()=>{const m=e.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),d=Te(function(){const y={capture:!0,passive:!1},_=mj({cancel:c,completed:l,getPhase:()=>e.current,setPhase:I=>{e.current=I}});t.current=rr(window,_,y)},[c,l]),p=Te(function(y,_){e.current.type!=="IDLE"&&ue(),e.current={type:"PENDING",point:_,actions:y},d()},[d]);$n(function(){return o(),function(){t.current()}},[o])}function yj(){}const _j={[oj]:!0,[sj]:!0,[lj]:!0,[aj]:!0};function vj(n,e){function t(){e(),n.cancel()}function r(){e(),n.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===Y_){i.preventDefault(),t();return}if(i.keyCode===GR){i.preventDefault(),r();return}if(i.keyCode===hj){i.preventDefault(),n.moveDown();return}if(i.keyCode===cj){i.preventDefault(),n.moveUp();return}if(i.keyCode===dj){i.preventDefault(),n.moveRight();return}if(i.keyCode===uj){i.preventDefault(),n.moveLeft();return}if(_j[i.keyCode]){i.preventDefault();return}qR(i)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:up,fn:t}]}function wj(n){const e=L.useRef(yj),t=qe(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==GR)return;const l=n.findClosestDraggableId(o);if(!l)return;const c=n.tryGetLock(l,m,{sourceEvent:o});if(!c)return;o.preventDefault();let d=!0;const p=c.snapLift();e.current();function m(){d||ue(),d=!1,e.current(),r()}e.current=rr(window,vj(p,m),{capture:!0,passive:!1})}}),[n]),r=Te(function(){const o={passive:!1,capture:!0};e.current=rr(window,[t],o)},[t]);$n(function(){return r(),function(){e.current()}},[r])}const wg={type:"IDLE"},Ej=120,Ij=.15;function Tj({cancel:n,getPhase:e}){return[{eventName:"orientationchange",fn:n},{eventName:"resize",fn:n},{eventName:"contextmenu",fn:t=>{t.preventDefault()}},{eventName:"keydown",fn:t=>{if(e().type!=="DRAGGING"){n();return}t.keyCode===Y_&&t.preventDefault(),n()}},{eventName:up,fn:n}]}function bj({cancel:n,completed:e,getPhase:t}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=t();if(i.type!=="DRAGGING"){n();return}i.hasMoved=!0;const{clientX:o,clientY:l}=r.touches[0],c={x:o,y:l};r.preventDefault(),i.actions.move(c)}},{eventName:"touchend",fn:r=>{const i=t();if(i.type!=="DRAGGING"){n();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(t().type!=="DRAGGING"){n();return}r.preventDefault(),n()}},{eventName:"touchforcechange",fn:r=>{const i=t();i.type==="IDLE"&&ue();const o=r.touches[0];if(!o||!(o.force>=Ij))return;const c=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){c&&n();return}if(c){if(i.hasMoved){r.preventDefault();return}n();return}r.preventDefault()}},{eventName:up,fn:n}]}function Sj(n){const e=L.useRef(wg),t=L.useRef(Ss),r=Te(function(){return e.current},[]),i=Te(function(I){e.current=I},[]),o=qe(()=>({eventName:"touchstart",fn:function(I){if(I.defaultPrevented)return;const b=n.findClosestDraggableId(I);if(!b)return;const R=n.tryGetLock(b,c,{sourceEvent:I});if(!R)return;const S=I.touches[0],{clientX:M,clientY:V}=S,$={x:M,y:V};t.current(),y(R,$)}}),[n]),l=Te(function(){const I={capture:!0,passive:!1};t.current=rr(window,[o],I)},[o]),c=Te(()=>{const _=e.current;_.type!=="IDLE"&&(_.type==="PENDING"&&clearTimeout(_.longPressTimerId),i(wg),t.current(),l())},[l,i]),d=Te(()=>{const _=e.current;c(),_.type==="DRAGGING"&&_.actions.cancel({shouldBlockNextClick:!0}),_.type==="PENDING"&&_.actions.abort()},[c]),p=Te(function(){const I={capture:!0,passive:!1},b={cancel:d,completed:c,getPhase:r},R=rr(window,bj(b),I),S=rr(window,Tj(b),I);t.current=function(){R(),S()}},[d,r,c]),m=Te(function(){const I=r();I.type!=="PENDING"&&ue();const b=I.actions.fluidLift(I.point);i({type:"DRAGGING",actions:b,hasMoved:!1})},[r,i]),y=Te(function(I,b){r().type!=="IDLE"&&ue();const R=setTimeout(m,Ej);i({type:"PENDING",point:b,actions:I,longPressTimerId:R}),p()},[p,r,i,m]);$n(function(){return l(),function(){t.current();const b=r();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),i(wg))}},[r,l,i]),$n(function(){return rr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const xj=["input","button","textarea","select","option","optgroup","video","audio"];function HR(n,e){if(e==null)return!1;if(xj.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===n?!1:HR(n,e.parentElement)}function Rj(n,e){const t=e.target;return ap(t)?HR(n,t):!1}var Aj=n=>br(n.getBoundingClientRect()).center;function Pj(n){return n instanceof zR(n).Element}const Cj=(()=>{const n="matches";return typeof document>"u"?n:[n,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||n})();function KR(n,e){return n==null?null:n[Cj](e)?n:KR(n.parentElement,e)}function Dj(n,e){return n.closest?n.closest(e):KR(n,e)}function kj(n){return`[${El.contextId}="${n}"]`}function Nj(n,e){const t=e.target;if(!Pj(t))return null;const r=kj(n),i=Dj(t,r);return!i||!ap(i)?null:i}function Oj(n,e){const t=Nj(n,e);return t?t.getAttribute(El.draggableId):null}function Vj(n,e){const t=`[${cy.contextId}="${n}"]`,i=jR(document,t).find(o=>o.getAttribute(cy.id)===e);return!i||!ap(i)?null:i}function Mj(n){n.preventDefault()}function vh({expected:n,phase:e,isLockActive:t,shouldWarn:r}){return!(!t()||n!==e)}function QR({lockAPI:n,store:e,registry:t,draggableId:r}){if(n.isClaimed())return!1;const i=t.draggable.findById(r);return!(!i||!i.options.isEnabled||!LR(e.getState(),r))}function Lj({lockAPI:n,contextId:e,store:t,registry:r,draggableId:i,forceSensorStop:o,sourceEvent:l}){if(!QR({lockAPI:n,store:t,registry:r,draggableId:i}))return null;const d=r.draggable.getById(i),p=Vj(e,d.descriptor.id);if(!p||l&&!d.options.canDragInteractiveElements&&Rj(p,l))return null;const m=n.claim(o||Ss);let y="PRE_DRAG";function _(){return d.options.shouldRespectForcePress}function I(){return n.isActive(m)}function b(X,J){vh({expected:X,phase:y,isLockActive:I,shouldWarn:!0})&&t.dispatch(J())}const R=b.bind(null,"DRAGGING");function S(X){function J(){n.release(),y="COMPLETED"}y!=="PRE_DRAG"&&(J(),ue()),t.dispatch(DU(X.liftActionArgs)),y="DRAGGING";function D(A,P={shouldBlockNextClick:!1}){if(X.cleanup(),P.shouldBlockNextClick){const N=rr(window,[{eventName:"click",fn:Mj,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(N)}J(),t.dispatch(PR({reason:A}))}return{isActive:()=>vh({expected:"DRAGGING",phase:y,isLockActive:I,shouldWarn:!1}),shouldRespectForcePress:_,drop:A=>D("DROP",A),cancel:A=>D("CANCEL",A),...X.actions}}function M(X){const J=vc(A=>{R(()=>AR({client:A}))});return{...S({liftActionArgs:{id:i,clientSelection:X,movementMode:"FLUID"},cleanup:()=>J.cancel(),actions:{move:J}}),move:J}}function V(){const X={moveUp:()=>R(UU),moveRight:()=>R(zU),moveDown:()=>R(jU),moveLeft:()=>R($U)};return S({liftActionArgs:{id:i,clientSelection:Aj(p),movementMode:"SNAP"},cleanup:Ss,actions:X})}function $(){vh({expected:"PRE_DRAG",phase:y,isLockActive:I,shouldWarn:!0})&&n.release()}return{isActive:()=>vh({expected:"PRE_DRAG",phase:y,isLockActive:I,shouldWarn:!1}),shouldRespectForcePress:_,fluidLift:M,snapLift:V,abort:$}}const Fj=[gj,wj,Sj];function Bj({contextId:n,store:e,registry:t,customSensors:r,enableDefaultSensors:i}){const o=[...i?Fj:[],...r||[]],l=L.useState(()=>nj())[0],c=Te(function(S,M){Sc(S)&&!Sc(M)&&l.tryAbandon()},[l]);$n(function(){let S=e.getState();return e.subscribe(()=>{const V=e.getState();c(S,V),S=V})},[l,e,c]),$n(()=>l.tryAbandon,[l.tryAbandon]);const d=Te(R=>QR({lockAPI:l,registry:t,store:e,draggableId:R}),[l,t,e]),p=Te((R,S,M)=>Lj({lockAPI:l,registry:t,contextId:n,store:e,draggableId:R,forceSensorStop:S||null,sourceEvent:M&&M.sourceEvent?M.sourceEvent:null}),[n,l,t,e]),m=Te(R=>Oj(n,R),[n]),y=Te(R=>{const S=t.draggable.findById(R);return S?S.options:null},[t.draggable]),_=Te(function(){l.isClaimed()&&(l.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(j_()))},[l,e]),I=Te(()=>l.isClaimed(),[l]),b=qe(()=>({canGetLock:d,tryGetLock:p,findClosestDraggableId:m,findOptionsForDraggable:y,tryReleaseLock:_,isLockClaimed:I}),[d,p,m,y,_,I]);for(let R=0;R<o.length;R++)o[R](b)}const Uj=n=>({onBeforeCapture:e=>{const t=()=>{n.onBeforeCapture&&n.onBeforeCapture(e)};Iy.flushSync(t)},onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragEnd:n.onDragEnd,onDragUpdate:n.onDragUpdate}),jj=n=>({...bc,...n.autoScrollerOptions,durationDampening:{...bc.durationDampening,...n.autoScrollerOptions}});function Uu(n){return n.current||ue(),n.current}function zj(n){const{contextId:e,setCallbacks:t,sensors:r,nonce:i,dragHandleUsageInstructions:o}=n,l=L.useRef(null),c=$R(n),d=Te(()=>Uj(c.current),[c]),p=Te(()=>jj(c.current),[c]),m=X4(e),y=tj({contextId:e,text:o}),_=q4(e,i),I=Te(N=>{Uu(l).dispatch(N)},[]),b=qe(()=>CT({publishWhileDragging:NU,updateDroppableScroll:VU,updateDroppableIsEnabled:MU,updateDroppableIsCombineEnabled:LU,collectionStarting:OU},I),[I]),R=Q4(),S=qe(()=>T4(R,b),[R,b]),M=qe(()=>U4({scrollWindow:b4,scrollDroppable:S.scrollDroppable,getAutoScrollerOptions:p,...CT({move:AR},I)}),[S.scrollDroppable,I,p]),V=H4(e),$=qe(()=>v4({announce:m,autoScroller:M,dimensionMarshal:S,focusMarshal:V,getResponders:d,styleMarshal:_}),[m,M,S,V,d,_]);l.current=$;const H=Te(()=>{const N=Uu(l);N.getState().phase!=="IDLE"&&N.dispatch(j_())},[]),X=Te(()=>{const N=Uu(l).getState();return N.phase==="DROP_ANIMATING"?!0:N.phase==="IDLE"?!1:N.isDragging},[]),J=qe(()=>({isDragging:X,tryAbort:H}),[X,H]);t(J);const D=Te(N=>LR(Uu(l).getState(),N),[]),A=Te(()=>wo(Uu(l).getState()),[]),P=qe(()=>({marshal:S,focus:V,contextId:e,canLift:D,isMovementAllowed:A,dragHandleUsageInstructionsId:y,registry:R}),[e,S,y,V,D,A,R]);return Bj({contextId:e,store:$,registry:R,customSensors:r||null,enableDefaultSensors:n.enableDefaultSensors!==!1}),L.useEffect(()=>H,[H]),Ye.createElement(lp.Provider,{value:P},Ye.createElement(cB,{context:K_,store:$},n.children))}function $j(){return Ye.useId()}function Gj(n){const e=$j(),t=n.dragHandleUsageInstructions||Fh.dragHandleUsageInstructions;return Ye.createElement(EB,null,r=>Ye.createElement(zj,{nonce:n.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:t,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd,autoScrollerOptions:n.autoScrollerOptions},n.children))}const ob={dragging:5e3,dropAnimating:4500},qj=(n,e)=>e?tc.drop(e.duration):n?tc.snap:tc.fluid,Wj=(n,e)=>{if(n)return e?Tc.opacity.drop:Tc.opacity.combining},Hj=n=>n.forceShouldAnimate!=null?n.forceShouldAnimate:n.mode==="SNAP";function Kj(n){const t=n.dimension.client,{offset:r,combineWith:i,dropping:o}=n,l=!!i,c=Hj(n),d=!!o,p=d?ly.drop(r,l):ly.moveTo(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:qj(c,o),transform:p,opacity:Wj(l,d),zIndex:d?ob.dropAnimating:ob.dragging,pointerEvents:"none"}}function Qj(n){return{transform:ly.moveTo(n.offset),transition:n.shouldAnimateDisplacement?void 0:"none"}}function Yj(n){return n.type==="DRAGGING"?Kj(n):Qj(n)}function Jj(n,e,t=qt){const r=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=rR(i,r),l=_f(o,t),c={client:o,tagName:e.tagName.toLowerCase(),display:r.display},d={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:n,placeholder:c,displaceBy:d,client:o,page:l}}function Xj(n){const e=Q_("draggable"),{descriptor:t,registry:r,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}=n,d=qe(()=>({canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}),[o,c,l]),p=Te(I=>{const b=i();return b||ue(),Jj(t,b,I)},[t,i]),m=qe(()=>({uniqueId:e,descriptor:t,options:d,getDimension:p}),[t,p,d,e]),y=L.useRef(m),_=L.useRef(!0);$n(()=>(r.draggable.register(y.current),()=>r.draggable.unregister(y.current)),[r.draggable]),$n(()=>{if(_.current){_.current=!1;return}const I=y.current;y.current=m,r.draggable.update(m,I)},[m,r.draggable])}var J_=Ye.createContext(null);function bf(n){const e=L.useContext(n);return e||ue(),e}function Zj(n){n.preventDefault()}const ez=n=>{const e=L.useRef(null),t=Te((J=null)=>{e.current=J},[]),r=Te(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:l}=bf(lp),{type:c,droppableId:d}=bf(J_),p=qe(()=>({id:n.draggableId,index:n.index,type:c,droppableId:d}),[n.draggableId,n.index,c,d]),{children:m,draggableId:y,isEnabled:_,shouldRespectForcePress:I,canDragInteractiveElements:b,isClone:R,mapped:S,dropAnimationFinished:M}=n;if(!R){const J=qe(()=>({descriptor:p,registry:l,getDraggableRef:r,canDragInteractiveElements:b,shouldRespectForcePress:I,isEnabled:_}),[p,l,r,b,I,_]);Xj(J)}const V=qe(()=>_?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":y,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Zj}:null,[i,o,y,_]),$=Te(J=>{S.type==="DRAGGING"&&S.dropping&&J.propertyName==="transform"&&Iy.flushSync(M)},[M,S]),H=qe(()=>{const J=Yj(S),D=S.type==="DRAGGING"&&S.dropping?$:void 0;return{innerRef:t,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":y,style:J,onTransitionEnd:D},dragHandleProps:V}},[i,V,y,S,$,t]),X=qe(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return Ye.createElement(Ye.Fragment,null,m(H,S.snapshot,X))};var YR=(n,e)=>n===e,JR=n=>{const{combine:e,destination:t}=n;return t?t.droppableId:e?e.droppableId:null};const tz=n=>n.combine?n.combine.draggableId:null,nz=n=>n.at&&n.at.type==="COMBINE"?n.at.combine.draggableId:null;function rz(){const n=Gt((i,o)=>({x:i,y:o})),e=Gt((i,o,l=null,c=null,d=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!d,dropAnimation:d,mode:i,draggingOver:l,combineWith:c,combineTargetFor:null})),t=Gt((i,o,l,c,d=null,p=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:p,mode:o,offset:i,dimension:l,forceShouldAnimate:m,snapshot:e(o,c,d,p,null)}}));return(i,o)=>{if(Sc(i)){if(i.critical.draggable.id!==o.draggableId)return null;const l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],d=zn(i.impact),p=nz(i.impact),m=i.forceShouldAnimate;return t(n(l.x,l.y),i.movementMode,c,o.isClone,d,p,m)}if(i.phase==="DROP_ANIMATING"){const l=i.completed;if(l.result.draggableId!==o.draggableId)return null;const c=o.isClone,d=i.dimensions.draggables[o.draggableId],p=l.result,m=p.mode,y=JR(p),_=tz(p),b={duration:i.dropDuration,curve:$_.drop,moveTo:i.newHomeClientOffset,opacity:_?Tc.opacity.drop:null,scale:_?Tc.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:d,dropping:b,draggingOver:y,combineWith:_,mode:m,forceShouldAnimate:null,snapshot:e(m,c,y,_,b)}}}return null}}function XR(n=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}const iz={mapped:{type:"SECONDARY",offset:qt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:XR(null)}};function sz(){const n=Gt((l,c)=>({x:l,y:c})),e=Gt(XR),t=Gt((l,c=null,d)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:c,shouldAnimateDisplacement:d,snapshot:e(c)}})),r=l=>l?t(qt,l,!0):null,i=(l,c,d,p)=>{const m=d.displaced.visible[l],y=!!(p.inVirtualList&&p.effected[l]),_=ip(d),I=_&&_.draggableId===l?c:null;if(!m){if(!y)return r(I);if(d.displaced.invisible[l])return null;const S=Dl(p.displacedBy.point),M=n(S.x,S.y);return t(M,I,!0)}if(y)return r(I);const b=d.displacedBy.point,R=n(b.x,b.y);return t(R,I,m.shouldAnimate)};return(l,c)=>{if(Sc(l))return l.critical.draggable.id===c.draggableId?null:i(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const d=l.completed;return d.result.draggableId===c.draggableId?null:i(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null}}const oz=()=>{const n=rz(),e=sz();return(r,i)=>n(r,i)||e(r,i)||iz},az={dropAnimationFinished:CR},lz=tR(oz,az,null,{context:K_,areStatePropsEqual:YR})(ez);function ZR(n){return bf(J_).isUsingCloneFor===n.draggableId&&!n.isClone?null:Ye.createElement(lz,n)}function uz(n){const e=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,t=!!n.disableInteractiveElementBlocking,r=!!n.shouldRespectForcePress;return Ye.createElement(ZR,vf({},n,{isClone:!1,isEnabled:e,canDragInteractiveElements:t,shouldRespectForcePress:r}))}const eA=n=>e=>n===e,cz=eA("scroll"),dz=eA("auto"),ab=(n,e)=>e(n.overflowX)||e(n.overflowY),hz=n=>{const e=window.getComputedStyle(n),t={overflowX:e.overflowX,overflowY:e.overflowY};return ab(t,cz)||ab(t,dz)},fz=()=>!1,tA=n=>n==null?null:n===document.body?fz()?n:null:n===document.documentElement?null:hz(n)?n:tA(n.parentElement);var dy=n=>({x:n.scrollLeft,y:n.scrollTop});const nA=n=>n?window.getComputedStyle(n).position==="fixed"?!0:nA(n.parentElement):!1;var pz=n=>{const e=tA(n),t=nA(n);return{closestScrollable:e,isFixedOnPage:t}},mz=({descriptor:n,isEnabled:e,isCombineEnabled:t,isFixedOnPage:r,direction:i,client:o,page:l,closest:c})=>{const d=(()=>{if(!c)return null;const{scrollSize:_,client:I}=c,b=OR({scrollHeight:_.scrollHeight,scrollWidth:_.scrollWidth,height:I.paddingBox.height,width:I.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:I,scrollSize:_,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:b,diff:{value:qt,displacement:qt}}}})(),p=i==="vertical"?M_:fR,m=vl({page:l,withPlaceholder:null,axis:p,frame:d});return{descriptor:n,isCombineEnabled:t,isFixedOnPage:r,axis:p,isEnabled:e,client:o,page:l,frame:d,subject:m}};const gz=(n,e)=>{const t=iR(n);if(!e||n!==e)return t;const r=t.paddingBox.top-e.scrollTop,i=t.paddingBox.left-e.scrollLeft,o=r+e.scrollHeight,l=i+e.scrollWidth,d=k_({top:r,right:l,bottom:o,left:i},t.border);return N_({borderBox:d,margin:t.margin,border:t.border,padding:t.padding})};var yz=({ref:n,descriptor:e,env:t,windowScroll:r,direction:i,isDropDisabled:o,isCombineEnabled:l,shouldClipSubject:c})=>{const d=t.closestScrollable,p=gz(n,d),m=_f(p,r),y=(()=>{if(!d)return null;const I=iR(d),b={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:I,page:_f(I,r),scroll:dy(d),scrollSize:b,shouldClipSubject:c}})();return mz({descriptor:e,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:t.isFixedOnPage,direction:i,client:p,page:m,closest:y})};const _z={passive:!1},vz={passive:!0};var lb=n=>n.shouldPublishImmediately?_z:vz;const wh=n=>n&&n.env.closestScrollable||null;function wz(n){const e=L.useRef(null),t=bf(lp),r=Q_("droppable"),{registry:i,marshal:o}=t,l=$R(n),c=qe(()=>({id:n.droppableId,type:n.type,mode:n.mode}),[n.droppableId,n.mode,n.type]),d=L.useRef(c),p=qe(()=>Gt((H,X)=>{e.current||ue();const J={x:H,y:X};o.updateDroppableScroll(c.id,J)}),[c.id,o]),m=Te(()=>{const H=e.current;return!H||!H.env.closestScrollable?qt:dy(H.env.closestScrollable)},[]),y=Te(()=>{const H=m();p(H.x,H.y)},[m,p]),_=qe(()=>vc(y),[y]),I=Te(()=>{const H=e.current,X=wh(H);if(H&&X||ue(),H.scrollOptions.shouldPublishImmediately){y();return}_()},[_,y]),b=Te((H,X)=>{e.current&&ue();const J=l.current,D=J.getDroppableRef();D||ue();const A=pz(D),P={ref:D,descriptor:c,env:A,scrollOptions:X};e.current=P;const N=yz({ref:D,descriptor:c,env:A,windowScroll:H,direction:J.direction,isDropDisabled:J.isDropDisabled,isCombineEnabled:J.isCombineEnabled,shouldClipSubject:!J.ignoreContainerClipping}),F=A.closestScrollable;return F&&(F.setAttribute(nb.contextId,t.contextId),F.addEventListener("scroll",I,lb(P.scrollOptions))),N},[t.contextId,c,I,l]),R=Te(()=>{const H=e.current,X=wh(H);return H&&X||ue(),dy(X)},[]),S=Te(()=>{const H=e.current;H||ue();const X=wh(H);e.current=null,X&&(_.cancel(),X.removeAttribute(nb.contextId),X.removeEventListener("scroll",I,lb(H.scrollOptions)))},[I,_]),M=Te(H=>{const X=e.current;X||ue();const J=wh(X);J||ue(),J.scrollTop+=H.y,J.scrollLeft+=H.x},[]),V=qe(()=>({getDimensionAndWatchScroll:b,getScrollWhileDragging:R,dragStopped:S,scroll:M}),[S,b,R,M]),$=qe(()=>({uniqueId:r,descriptor:c,callbacks:V}),[V,c,r]);$n(()=>(d.current=$.descriptor,i.droppable.register($),()=>{e.current&&S(),i.droppable.unregister($)}),[V,c,S,$,o,i.droppable]),$n(()=>{e.current&&o.updateDroppableIsEnabled(d.current.id,!n.isDropDisabled)},[n.isDropDisabled,o]),$n(()=>{e.current&&o.updateDroppableIsCombineEnabled(d.current.id,n.isCombineEnabled)},[n.isCombineEnabled,o])}function Eg(){}const ub={width:0,height:0,margin:RB},Ez=({isAnimatingOpenOnMount:n,placeholder:e,animate:t})=>n||t==="close"?ub:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},Iz=({isAnimatingOpenOnMount:n,placeholder:e,animate:t})=>{const r=Ez({isAnimatingOpenOnMount:n,placeholder:e,animate:t});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:t!=="none"?tc.placeholder:null}},Tz=n=>{const e=L.useRef(null),t=Te(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:o,contextId:l}=n,[c,d]=L.useState(n.animate==="open");L.useEffect(()=>c?r!=="open"?(t(),d(!1),Eg):e.current?Eg:(e.current=setTimeout(()=>{e.current=null,d(!1)}),t):Eg,[r,c,t]);const p=Te(y=>{y.propertyName==="height"&&(i(),r==="close"&&o())},[r,o,i]),m=Iz({isAnimatingOpenOnMount:c,animate:n.animate,placeholder:n.placeholder});return Ye.createElement(n.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":l,onTransitionEnd:p,ref:n.innerRef})};var bz=Ye.memo(Tz);class Sz extends Ye.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const xz=n=>{const e=L.useContext(lp);e||ue();const{contextId:t,isMovementAllowed:r}=e,i=L.useRef(null),o=L.useRef(null),{children:l,droppableId:c,type:d,mode:p,direction:m,ignoreContainerClipping:y,isDropDisabled:_,isCombineEnabled:I,snapshot:b,useClone:R,updateViewportMaxScroll:S,getContainerForClone:M}=n,V=Te(()=>i.current,[]),$=Te((F=null)=>{i.current=F},[]);Te(()=>o.current,[]);const H=Te((F=null)=>{o.current=F},[]),X=Te(()=>{r()&&S({maxScroll:MR()})},[r,S]);wz({droppableId:c,type:d,mode:p,direction:m,isDropDisabled:_,isCombineEnabled:I,ignoreContainerClipping:y,getDroppableRef:V});const J=qe(()=>Ye.createElement(Sz,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},({onClose:F,data:z,animate:k})=>Ye.createElement(bz,{placeholder:z,onClose:F,innerRef:H,animate:k,contextId:t,onTransitionEnd:X})),[t,X,n.placeholder,n.shouldAnimatePlaceholder,H]),D=qe(()=>({innerRef:$,placeholder:J,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":t}}),[t,c,J,$]),A=R?R.dragging.draggableId:null,P=qe(()=>({droppableId:c,type:d,isUsingCloneFor:A}),[c,A,d]);function N(){if(!R)return null;const{dragging:F,render:z}=R,k=Ye.createElement(ZR,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Ze,He)=>z(Ze,He,F));return aD.createPortal(k,M())}return Ye.createElement(J_.Provider,{value:P},l(D,b),N())};function Rz(){return document.body||ue(),document.body}const cb={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Rz},rA=n=>{let e={...n},t;for(t in cb)n[t]===void 0&&(e={...e,[t]:cb[t]});return e},Ig=(n,e)=>n===e.droppable.type,db=(n,e)=>e.draggables[n.draggable.id],Az=()=>{const n={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...n,shouldAnimatePlaceholder:!1},t=Gt(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),r=Gt((o,l,c,d,p,m)=>{const y=p.descriptor.id;if(p.descriptor.droppableId===o){const b=m?{render:m,dragging:t(p.descriptor)}:null,R={isDraggingOver:c,draggingOverWith:c?y:null,draggingFromThisWith:y,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:R,useClone:b}}if(!l)return e;if(!d)return n;const I={isDraggingOver:c,draggingOverWith:y,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:I,useClone:null}});return(o,l)=>{const c=rA(l),d=c.droppableId,p=c.type,m=!c.isDropDisabled,y=c.renderClone;if(Sc(o)){const _=o.critical;if(!Ig(p,_))return e;const I=db(_,o.dimensions),b=zn(o.impact)===d;return r(d,m,b,b,I,y)}if(o.phase==="DROP_ANIMATING"){const _=o.completed;if(!Ig(p,_.critical))return e;const I=db(_.critical,o.dimensions);return r(d,m,JR(_.result)===d,zn(_.impact)===d,I,y)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const _=o.completed;if(!Ig(p,_.critical))return e;const I=zn(_.impact)===d,b=!!(_.impact.at&&_.impact.at.type==="COMBINE"),R=_.critical.droppable.id===d;return I?b?n:e:R?n:e}return e}},Pz={updateViewportMaxScroll:BU},Cz=tR(Az,Pz,(n,e,t)=>({...rA(t),...n,...e}),{context:K_,areStatePropsEqual:YR})(xz);var Dz=Cz;const kz=({tasks:n,onTaskMove:e,onTaskEdit:t,onTaskDelete:r})=>{const i=["Todo","In-Progress","Completed"],o=P_(c=>c.searchQuery),l=c=>n.filter(d=>d.status===c).filter(d=>{var p;return o?d.title.toLowerCase().includes(o.toLowerCase())||(((p=d.description)==null?void 0:p.toLowerCase())||"").includes(o.toLowerCase()):!0});return O.jsx(Gj,{onDragEnd:e,children:O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map(c=>O.jsx(Dz,{droppableId:c,children:(d,p)=>O.jsxs("div",{ref:d.innerRef,...d.droppableProps,className:`bg-white rounded-lg shadow p-4 ${p.isDraggingOver?"bg-gray-50":""}`,children:[O.jsxs("h3",{className:`text-lg font-semibold mb-4 ${c==="Todo"?"text-purple-600":c==="In-Progress"?"text-blue-600":"text-green-600"}`,children:[c," (",l(c).length,")"]}),O.jsxs("div",{className:"space-y-3",children:[l(c).map((m,y)=>O.jsx(uz,{draggableId:m.id,index:y,children:(_,I)=>O.jsx("div",{ref:_.innerRef,..._.draggableProps,..._.dragHandleProps,className:`bg-white rounded-md shadow p-4 ${I.isDragging?"shadow-lg":""}`,children:O.jsxs("div",{className:"flex flex-col",children:[O.jsxs("div",{className:"flex justify-between items-start mb-2",children:[O.jsx("h4",{className:"font-medium text-gray-900",children:m.title}),O.jsxs("div",{className:"flex space-x-2",children:[O.jsx("button",{onClick:()=>t(m.id),className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 rounded",children:"Edit"}),O.jsx("button",{onClick:()=>r(m.id),className:"text-red-600 hover:text-red-800 text-sm px-2 py-1 rounded",children:"Delete"})]})]}),O.jsxs("div",{className:"text-sm text-gray-500",children:[O.jsxs("p",{children:["Due: ",ko(new Date(m.dueDate),"MMM dd, yyyy")]}),O.jsxs("p",{children:["Category: ",m.category]})]})]})})},m.id)),d.placeholder]})]})},c))})})},Nz=({task:n,onSave:e,onClose:t})=>{var M;const[r,i]=L.useState(n.title),[o,l]=L.useState(n.category),[c,d]=L.useState(n.status),[p,m]=L.useState(""),[y,_]=L.useState(n.description||""),[I,b]=L.useState(null);L.useEffect(()=>{try{const V=new Date(n.dueDate);m(ko(V,"yyyy-MM-dd"))}catch(V){console.error("Error parsing date:",V),m("")}},[n.dueDate]);const R=async V=>{V.preventDefault(),await e(n.id,{title:r,category:o,status:c,description:y,dueDate:ko(new Date(p),"dd MMM, yyyy"),attachments:I?[I.name]:void 0}),t()},S=V=>{V.target.files&&V.target.files[0]&&b(V.target.files[0])};return O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:O.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl",children:[O.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[O.jsx("h2",{className:"text-xl font-semibold",children:"View/Edit Task"}),O.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:O.jsx(nL,{className:"w-5 h-5"})})]}),O.jsxs("form",{onSubmit:R,className:"p-6",children:[O.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Name"}),O.jsx("input",{type:"text",value:r,onChange:V=>i(V.target.value),className:"w-full border rounded-md px-3 py-2 focus:ring-purple-500 focus:border-purple-500",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),O.jsxs("div",{className:"border rounded-md",children:[O.jsxs("div",{className:"border-b p-2 flex gap-2",children:[O.jsx("button",{type:"button",className:"p-1 hover:bg-gray-100 rounded",children:"B"}),O.jsx("button",{type:"button",className:"p-1 hover:bg-gray-100 rounded italic",children:"I"}),O.jsx("button",{type:"button",className:"p-1 hover:bg-gray-100 rounded",children:"S"}),O.jsx("button",{type:"button",className:"p-1 hover:bg-gray-100 rounded",children:""}),O.jsx("button",{type:"button",className:"p-1 hover:bg-gray-100 rounded",children:"1."})]}),O.jsx("textarea",{value:y,onChange:V=>{V.target.value.length<=300&&_(V.target.value)},maxLength:300,className:"w-full px-3 py-2 focus:ring-purple-500 focus:border-purple-500 border-none",rows:4,placeholder:"Enter task description"}),O.jsxs("div",{className:"p-2 text-sm text-gray-500 text-right",children:[y.length,"/300 characters"]})]})]}),O.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Category"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{type:"button",onClick:()=>l("Work"),className:`flex-1 py-2 px-4 rounded ${o==="Work"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Work"}),O.jsx("button",{type:"button",onClick:()=>l("Personal"),className:`flex-1 py-2 px-4 rounded ${o==="Personal"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Personal"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),O.jsx("input",{type:"date",value:p,onChange:V=>m(V.target.value),className:"w-full border rounded-md px-3 py-2 focus:ring-purple-500 focus:border-purple-500",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Status"}),O.jsxs("select",{value:c,onChange:V=>d(V.target.value),className:"w-full border rounded-md px-3 py-2 focus:ring-purple-500 focus:border-purple-500",required:!0,children:[O.jsx("option",{value:"Todo",children:"Todo"}),O.jsx("option",{value:"In-Progress",children:"In Progress"}),O.jsx("option",{value:"Completed",children:"Completed"})]})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attachment"}),O.jsxs("div",{className:"border-2 border-dashed rounded-md p-4",children:[O.jsx("input",{type:"file",onChange:S,className:"w-full"}),O.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Drop your files here to Upload"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Activity"}),O.jsx("div",{className:"space-y-2",children:(M=n.activities)==null?void 0:M.map((V,$)=>O.jsxs("div",{className:"text-sm text-gray-600",children:[V.action," - ",ko(new Date(V.timestamp),"MMM dd, yyyy HH:mm")]},$))})]})]}),O.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[O.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),O.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Update"})]})]})]})})},Tg=L.memo(({tasks:n,onEdit:e,onDelete:t,selectedTasks:r,onTaskSelect:i,onSelectAll:o,sectionType:l})=>{const c=n.length>0&&n.every(m=>r.has(m.id)),d=m=>{switch(m){case"Todo":return"bg-blue-50";case"In-Progress":return"bg-yellow-50";case"Completed":return"bg-green-50";default:return"bg-white"}},p=m=>{switch(m){case"Low":return"bg-green-100";case"Medium":return"bg-yellow-100";case"High":return"bg-red-100";default:return"bg-gray-100"}};return O.jsx("div",{className:"task-table-container",children:O.jsx("div",{className:"min-w-full inline-block align-middle",children:O.jsx("div",{className:"overflow-hidden",children:O.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[O.jsx("thead",{className:`${d(l)}`,children:O.jsxs("tr",{children:[O.jsx("th",{scope:"col",className:"task-cell",children:O.jsx("input",{type:"checkbox",checked:c,onChange:m=>o(m.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})}),O.jsx("th",{scope:"col",className:"task-cell text-left font-medium text-gray-500",children:"Title"}),O.jsx("th",{scope:"col",className:"task-cell text-left font-medium text-gray-500",children:"Priority"}),O.jsx("th",{scope:"col",className:"task-cell text-left font-medium text-gray-500",children:"Due Date"}),O.jsx("th",{scope:"col",className:"task-cell text-left font-medium text-gray-500",children:"Category"}),O.jsx("th",{scope:"col",className:"task-cell text-right font-medium text-gray-500",children:"Actions"})]})}),O.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(m=>O.jsxs("tr",{className:"task-row",children:[O.jsx("td",{className:"task-cell",children:O.jsx("input",{type:"checkbox",checked:r.has(m.id),onChange:y=>i(m.id,y.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})}),O.jsx("td",{className:"task-cell",children:O.jsx("div",{className:"text-truncate max-w-xs",children:m.title})}),O.jsx("td",{className:"task-cell",children:O.jsx("span",{className:`status-badge ${p(m.priority)}`,children:m.priority})}),O.jsx("td",{className:"task-cell text-gray-500",children:ko(new Date(m.dueDate),"MMM d, yyyy")}),O.jsx("td",{className:"task-cell",children:O.jsx("span",{className:"status-badge bg-gray-100 text-gray-800",children:m.category})}),O.jsx("td",{className:"task-cell text-right",children:O.jsxs("div",{className:"flex justify-end space-x-2",children:[O.jsx("button",{onClick:()=>e(m),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),O.jsx("button",{onClick:()=>t(m.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},m.id))})]})})})})}),Oz=()=>{const[n,e]=L.useState("list"),[t,r]=L.useState(""),[i,o]=L.useState({Todo:!0,"In-Progress":!0,Completed:!0}),[l,c]=L.useState(null),d=jc(Z=>Z.user),[p,m]=L.useState(!1),[y,_]=L.useState({title:"",description:"",dueDate:ko(new Date,"yyyy-MM-dd"),category:"Work",status:"Todo",priority:"Medium",activities:[],createdBy:(d==null?void 0:d.uid)||"",userId:(d==null?void 0:d.uid)||"",attachment:null});L.useEffect(()=>{d&&(console.log("Current user UID:",d.uid),_(Z=>({...Z,userId:d.uid,createdBy:d.uid})))},[d]);const{tasks:I,error:b,fetchTasks:R,addTask:S,updateTask:M,deleteTask:V,cleanup:$}=P_(),H=I.filter(Z=>{var U;return t?Z.title.toLowerCase().includes(t.toLowerCase())||(((U=Z.description)==null?void 0:U.toLowerCase().includes(t.toLowerCase()))??!1):!0});L.useEffect(()=>(d!=null&&d.uid&&R(d.uid),()=>$()),[d==null?void 0:d.uid,R,$]);const X=L.useCallback(async Z=>{if(Z.preventDefault(),!!d)try{await S({...y,userId:d.uid,createdBy:d.uid}),m(!1),_({title:"",description:"",dueDate:ko(new Date,"yyyy-MM-dd"),category:"Work",status:"Todo",priority:"Medium",activities:[],createdBy:d.uid,userId:d.uid,attachment:null})}catch(U){console.error("Error adding task:",U)}},[y,d,S]),J=L.useCallback(Z=>{V(Z)},[V]),D=L.useCallback(Z=>{if(!Z.destination)return;const U=Z.draggableId,ee=Z.destination.droppableId,fe=I.find(Ce=>Ce.id===U);fe&&M(fe.id,{...fe,status:ee})},[I,M]),A=Z=>{c(Z)},P=async(Z,U)=>{try{await M(Z,U),c(null)}catch(ee){console.error("Error updating task:",ee)}},N=()=>{c(null)},F=L.useCallback(Z=>{o(U=>({...U,[Z]:!U[Z]}))},[]),[z,k]=L.useState(new Set),Ze=(Z,U)=>{k(ee=>{const fe=new Set(ee);return U?fe.add(Z):fe.delete(Z),fe})},He=Z=>{k(Z?new Set(H.map(U=>U.id)):new Set)},It=async()=>{const Z=Array.from(z);for(const U of Z)await J(U);k(new Set)};if(b)return O.jsx("div",{className:"text-red-600 p-4",children:b});const Be=H.filter(Z=>Z.status==="Todo"),le=H.filter(Z=>Z.status==="In-Progress"),Ie=H.filter(Z=>Z.status==="Completed");return O.jsxs("div",{className:"max-w-full overflow-x-auto",children:[O.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4 p-4",children:[O.jsxs("div",{className:"flex items-center space-x-4 flex-wrap gap-2",children:[O.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm sm:text-base",children:"Add Task"}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx("button",{onClick:()=>e("list"),className:`px-3 py-1.5 rounded-lg text-sm sm:text-base ${n==="list"?"bg-gray-200 text-gray-800":"text-gray-600 hover:bg-gray-100"}`,children:"List View"}),O.jsx("button",{onClick:()=>e("board"),className:`px-3 py-1.5 rounded-lg text-sm sm:text-base ${n==="board"?"bg-gray-200 text-gray-800":"text-gray-600 hover:bg-gray-100"}`,children:"Board View"})]})]}),O.jsx("div",{className:"w-full sm:w-auto",children:O.jsx("input",{type:"text",placeholder:"Search tasks...",value:t,onChange:Z=>r(Z.target.value),className:"w-full sm:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})})]}),p&&O.jsxs("form",{onSubmit:X,className:"mt-4 bg-white p-4 rounded-lg shadow mb-6",children:[O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Task Name"}),O.jsx("input",{type:"text",value:y.title,onChange:Z=>_({...y,title:Z.target.value}),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),O.jsx("textarea",{value:y.description,onChange:Z=>{Z.target.value.length<=300&&_({...y,description:Z.target.value})},maxLength:300,rows:4,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter task description (max 300 characters)"}),O.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[y.description.length,"/300 characters"]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Due Date"}),O.jsx("input",{type:"date",value:y.dueDate,onChange:Z=>_({...y,dueDate:Z.target.value}),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Task Status"}),O.jsxs("select",{value:y.status,onChange:Z=>_({...y,status:Z.target.value}),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,children:[O.jsx("option",{value:"Todo",children:"Todo"}),O.jsx("option",{value:"In-Progress",children:"In Progress"}),O.jsx("option",{value:"Completed",children:"Completed"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Task Category"}),O.jsxs("select",{value:y.category,onChange:Z=>_({...y,category:Z.target.value}),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,children:[O.jsx("option",{value:"Work",children:"Work"}),O.jsx("option",{value:"Personal",children:"Personal"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Attachment"}),O.jsx("input",{type:"file",onChange:Z=>{var U;return _({...y,attachment:((U=Z.target.files)==null?void 0:U[0])||null})},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),O.jsxs("div",{className:"flex justify-end space-x-2",children:[O.jsx("button",{type:"button",onClick:()=>m(!1),className:"mr-2 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),O.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Add Task"})]})]}),l&&O.jsx(Nz,{task:l,onSave:P,onClose:N}),n==="list"?O.jsxs("div",{className:"space-y-6 p-2 sm:p-6 bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen",children:[z.size>0&&O.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg shadow-md flex flex-col sm:flex-row items-center justify-between gap-2 border border-gray-200",children:[O.jsxs("span",{className:"text-gray-700 font-medium text-sm sm:text-base",children:[z.size," task",z.size!==1?"s":""," selected"]}),O.jsxs("button",{onClick:It,className:"w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 text-sm sm:text-base",children:["Delete Selected (",z.size,")"]})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200",children:[O.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-150 transition-colors",onClick:()=>F("Todo"),children:[O.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Todo"}),i.Todo?O.jsx(og,{className:"h-5 w-5 text-gray-600"}):O.jsx(sg,{className:"h-5 w-5 text-gray-600"})]}),i.Todo&&O.jsx("div",{className:"border-t border-gray-200",children:O.jsx(Tg,{tasks:Be,onEdit:A,onDelete:J,selectedTasks:z,onTaskSelect:Ze,onSelectAll:He,sectionType:"Todo"})})]}),O.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200",children:[O.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-gradient-to-r from-yellow-50 to-yellow-100 hover:from-yellow-100 hover:to-yellow-150 transition-colors",onClick:()=>F("In-Progress"),children:[O.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"In Progress"}),i["In-Progress"]?O.jsx(og,{className:"h-5 w-5 text-gray-600"}):O.jsx(sg,{className:"h-5 w-5 text-gray-600"})]}),i["In-Progress"]&&O.jsx("div",{className:"border-t border-gray-200",children:O.jsx(Tg,{tasks:le,onEdit:A,onDelete:J,selectedTasks:z,onTaskSelect:Ze,onSelectAll:He,sectionType:"In-Progress"})})]}),O.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200",children:[O.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-gradient-to-r from-green-50 to-green-100 hover:from-green-100 hover:to-green-150 transition-colors",onClick:()=>F("Completed"),children:[O.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Completed"}),i.Completed?O.jsx(og,{className:"h-5 w-5 text-gray-600"}):O.jsx(sg,{className:"h-5 w-5 text-gray-600"})]}),i.Completed&&O.jsx("div",{className:"border-t border-gray-200",children:O.jsx(Tg,{tasks:Ie,onEdit:A,onDelete:J,selectedTasks:z,onTaskSelect:Ze,onSelectAll:He,sectionType:"Completed"})})]})]})]}):O.jsx(kz,{tasks:H,onTaskMove:D,onTaskEdit:Z=>{const U=H.find(ee=>ee.id===Z);U&&A(U)},onTaskDelete:J})]})};function Vz(){const{setUser:n,setLoading:e}=jc();return L.useEffect(()=>{const t=SN(A_,r=>{n(r),e(!1)});return()=>t()},[n,e]),O.jsx(JC,{children:O.jsx("div",{className:"min-h-screen bg-gray-50",children:O.jsxs(RC,{children:[O.jsx(Eh,{path:"/login",element:O.jsx(W2,{})}),O.jsx(Eh,{path:"/",element:O.jsx(H2,{children:O.jsxs(O.Fragment,{children:[O.jsx(rL,{}),O.jsx(Oz,{})]})})}),O.jsx(Eh,{path:"*",element:O.jsx(Fb,{to:"/",replace:!0})})]})})})}const Mz=new VP;fP.createRoot(document.getElementById("root")).render(O.jsx(Ye.StrictMode,{children:O.jsx(LP,{client:Mz,children:O.jsx(Vz,{})})}));
